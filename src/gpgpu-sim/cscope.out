cscope 15 $HOME/gpgpu-sim_distribution/src/gpgpu-sim               0000707366
	@addrdec.cc

29 
	~<¡ršg.h
>

30 
	~"addrdec.h
"

31 
	~"gpu-sim.h
"

32 
	~"../İtiÚ_·r£r.h
"

36 
powli
Ğ
x
, 
y
 );

37 
LOGB2_32
Ğ
v
 );

38 
Ãw_addr_ty³
 
addrdec_·ckb™s
ĞÃw_addr_ty³ 
mask
,‚ew_addr_ty³ 
v®
, 
high
, 
low
);

39 
addrdec_g‘masklim™
(
Ãw_addr_ty³
 
mask
, *
high
, *
low
);

41 
	glš—r_to_¿w_add»ss_Œª¦©iÚ
::
	$lš—r_to_¿w_add»ss_Œª¦©iÚ
()

43 
addrdec_İtiÚ
 = 
NULL
;

44 
ADDR_CHIP_S
 = 10;

45 
	`mem£t
(
addrdec_mklow
,0,
N_ADDRDEC
);

46 
	`mem£t
(
addrdec_mkhigh
,64,
N_ADDRDEC
);

47 
addrdec_mask
[0] = 0x0000000000001C00;

48 
addrdec_mask
[1] = 0x0000000000000300;

49 
addrdec_mask
[2] = 0x000000000FFF0000;

50 
addrdec_mask
[3] = 0x000000000000E0FF;

51 
addrdec_mask
[4] = 0x000000000000000F;

52 
	}
}

54 
	glš—r_to_¿w_add»ss_Œª¦©iÚ
::
	$addrdec_£tİtiÚ
(
İtiÚ_·r£r_t
 
İp
)

56 
	`İtiÚ_·r£r_»gi¡”
(
İp
, "-gpgpu_mem_addr_m­pšg", 
OPT_CSTR
, &
addrdec_İtiÚ
,

58 
NULL
);

59 
	`İtiÚ_·r£r_»gi¡”
(
İp
, "-gpgpu_mem_addr_‹¡", 
OPT_BOOL
, &
run_‹¡
,

62 
	`İtiÚ_·r£r_»gi¡”
(
İp
, "-gpgpu_mem_add»ss_mask", 
OPT_INT32
, &
gpgpu_mem_add»ss_mask
,

65 
	}
}

67 
Ãw_addr_ty³
 
	glš—r_to_¿w_add»ss_Œª¦©iÚ
::
	$·¹™iÚ_add»ss
Ğ
Ãw_addr_ty³
 
addr
 ) const

69 ià(!
g­
) {

70  
	`addrdec_·ckb™s
Ğ~(
addrdec_mask
[
CHIP
] | 
sub_·¹™iÚ_id_mask
), 
addr
, 64, 0 );

73 
·¹™iÚ_addr
;

74 
·¹™iÚ_addr
 = ( (
addr
>>
ADDR_CHIP_S
è/ 
m_n_chªÃl
) << ADDR_CHIP_S;

75 
·¹™iÚ_addr
 |ğ
addr
 & ((1 << 
ADDR_CHIP_S
) - 1);

77 
·¹™iÚ_addr
 = 
	`addrdec_·ckb™s
Ğ~
sub_·¹™iÚ_id_mask
,…artition_addr, 64, 0);

78  
·¹™iÚ_addr
;

80 
	}
}

82 
	glš—r_to_¿w_add»ss_Œª¦©iÚ
::
	$addrdec_x
(
Ãw_addr_ty³
 
addr
, 
addrdec_t
 *
x
) const

84 
addr_fÜ_ch
,
»¡_of_addr
;

85 ià(!
g­
) {

86 
x
->
ch
 = 
	`addrdec_·ckb™s
(
addrdec_mask
[
CHIP
], 
addr
, 
addrdec_mkhigh
[CHIP], 
addrdec_mklow
[CHIP]);

87 
x
->
bk
 = 
	`addrdec_·ckb™s
(
addrdec_mask
[
BK
], 
addr
, 
addrdec_mkhigh
[BK], 
addrdec_mklow
[BK]);

88 
x
->
row
 = 
	`addrdec_·ckb™s
(
addrdec_mask
[
ROW
], 
addr
, 
addrdec_mkhigh
[ROW], 
addrdec_mklow
[ROW]);

89 
x
->
cŞ
 = 
	`addrdec_·ckb™s
(
addrdec_mask
[
COL
], 
addr
, 
addrdec_mkhigh
[COL], 
addrdec_mklow
[COL]);

90 
x
->
bur¡
ğ
	`addrdec_·ckb™s
(
addrdec_mask
[
BURST
], 
addr
, 
addrdec_mkhigh
[BURST], 
addrdec_mklow
[BURST]);

95 
addr_fÜ_ch
 = (
addr
>>
ADDR_CHIP_S
è% 
m_n_chªÃl
;

96 
»¡_of_addr
 = ( (
addr
>>
ADDR_CHIP_S
è/ 
m_n_chªÃl
) << ADDR_CHIP_S;

97 
»¡_of_addr
 |ğ
addr
 & ((1 << 
ADDR_CHIP_S
) - 1);

99 
x
->
ch
 = 
addr_fÜ_ch
;

100 
x
->
bk
 = 
	`addrdec_·ckb™s
(
addrdec_mask
[
BK
], 
»¡_of_addr
, 
addrdec_mkhigh
[BK], 
addrdec_mklow
[BK]);

101 
x
->
row
 = 
	`addrdec_·ckb™s
(
addrdec_mask
[
ROW
], 
»¡_of_addr
, 
addrdec_mkhigh
[ROW], 
addrdec_mklow
[ROW]);

102 
x
->
cŞ
 = 
	`addrdec_·ckb™s
(
addrdec_mask
[
COL
], 
»¡_of_addr
, 
addrdec_mkhigh
[COL], 
addrdec_mklow
[COL]);

103 
x
->
bur¡
ğ
	`addrdec_·ckb™s
(
addrdec_mask
[
BURST
], 
»¡_of_addr
, 
addrdec_mkhigh
[BURST], 
addrdec_mklow
[BURST]);

107 
sub_·¹™iÚ_addr_mask
 = 
m_n_sub_·¹™iÚ_š_chªÃl
 - 1;

108 
x
->
sub_·¹™iÚ
 =lx->
ch
 * 
m_n_sub_·¹™iÚ_š_chªÃl


109 + (
x
->
bk
 & 
sub_·¹™iÚ_addr_mask
);

110 
	}
}

112 
	glš—r_to_¿w_add»ss_Œª¦©iÚ
::
	$addrdec_·r£İtiÚ
(cÚ¡ *
İtiÚ
)

114 
d¿mid_¡¬t
 = 0;

115 
d¿mid_·r£d
 = 
	`ssÿnf
(
İtiÚ
, "d¿mid@%d", &
d¿mid_¡¬t
);

116 ià(
d¿mid_·r£d
 == 1) {

117 
ADDR_CHIP_S
 = 
d¿mid_¡¬t
;

119 
ADDR_CHIP_S
 = -1;

122 cÚ¡ *
cm­pšg
 = 
	`¡rchr
(
İtiÚ
, ';');

123 ià(
cm­pšg
 =ğ
NULL
) {

124 
cm­pšg
 = 
İtiÚ
;

126 
cm­pšg
 += 1;

129 
addrdec_mask
[
CHIP
] = 0x0;

130 
addrdec_mask
[
BK
] = 0x0;

131 
addrdec_mask
[
ROW
] = 0x0;

132 
addrdec_mask
[
COL
] = 0x0;

133 
addrdec_mask
[
BURST
]= 0x0;

135 
ofs
 = 63;

136 (*
cm­pšg
) != '\0') {

137 *
cm­pšg
) {

139 
	`as£¹
(
d¿mid_·r£d
 !ğ1); 
addrdec_mask
[
CHIP
] |ğ(1ULL << 
ofs
); ofs--; ;

140 'B': 'b': 
addrdec_mask
[
BK
] |ğ(1ULL << 
ofs
); ofs--; ;

141 'R': 'r': 
addrdec_mask
[
ROW
] |ğ(1ULL << 
ofs
); ofs--; ;

142 'C': 'c': 
addrdec_mask
[
COL
] |ğ(1ULL << 
ofs
); ofs--; ;

143 'S': 's': 
addrdec_mask
[
BURST
] |ğ(1ULL << 
ofs
);‡ddrdec_mask[
COL
] |= (1ULL << ofs); ofs--; ;

145 '0': 
ofs
--; ;

151 
	`årštf
(
¡d”r
, "ERROR: Inv®id‡dd»s m­pšg ch¬aù” '%c' iÀİtiÚ '%s'\n", *
cm­pšg
, 
İtiÚ
);

153 
cm­pšg
 += 1;

156 ià(
ofs
 != -1) {

157 
	`årštf
(
¡d”r
, "ERROR: Inv®id‡dd»s m­pšg†’gth (%dèš o±iÚ '%s'\n", 63 - 
ofs
, 
İtiÚ
);

158 
	`as£¹
(
ofs
 == -1);

160 
	}
}

162 
	glš—r_to_¿w_add»ss_Œª¦©iÚ
::
	$š™
(
n_chªÃl
, 
n_sub_·¹™iÚ_š_chªÃl
)

164 
i
;

165 
mask
;

166 
nchb™s
 = ::
	`LOGB2_32
(
n_chªÃl
);

167 
m_n_chªÃl
 = 
n_chªÃl
;

168 
m_n_sub_·¹™iÚ_š_chªÃl
 = 
n_sub_·¹™iÚ_š_chªÃl
;

170 
g­
 = (
n_chªÃl
 - ::
	`powli
(2,
nchb™s
));

171 ià(
g­
) {

172 
nchb™s
++;

174 
gpgpu_mem_add»ss_mask
) {

177 
ADDR_CHIP_S
 = 10;

178 
addrdec_mask
[
CHIP
] = 0x0000000000000000;

179 
addrdec_mask
[
BK
] = 0x0000000000000300;

180 
addrdec_mask
[
ROW
] = 0x0000000007FFE000;

181 
addrdec_mask
[
COL
] = 0x0000000000001CFF;

184 
ADDR_CHIP_S
 = 13;

185 
addrdec_mask
[
CHIP
] = 0x0000000000000000;

186 
addrdec_mask
[
BK
] = 0x0000000000001800;

187 
addrdec_mask
[
ROW
] = 0x0000000007FFE000;

188 
addrdec_mask
[
COL
] = 0x00000000000007FF;

191 
ADDR_CHIP_S
 = 11;

192 
addrdec_mask
[
CHIP
] = 0x0000000000000000;

193 
addrdec_mask
[
BK
] = 0x0000000000001800;

194 
addrdec_mask
[
ROW
] = 0x0000000007FFE000;

195 
addrdec_mask
[
COL
] = 0x00000000000007FF;

198 
ADDR_CHIP_S
 = 11;

199 
addrdec_mask
[
CHIP
] = 0x0000000000000000;

200 
addrdec_mask
[
BK
] = 0x0000000000001800;

201 
addrdec_mask
[
ROW
] = 0x000000000FFFE000;

202 
addrdec_mask
[
COL
] = 0x00000000000007FF;

206 
ADDR_CHIP_S
 = 14;

207 
addrdec_mask
[
CHIP
] = 0x0000000000000000;

208 
addrdec_mask
[
BK
] = 0x0000000000001800;

209 
addrdec_mask
[
ROW
] = 0x0000000007FFE000;

210 
addrdec_mask
[
COL
] = 0x00000000000007FF;

213 
ADDR_CHIP_S
 = 15;

214 
addrdec_mask
[
CHIP
] = 0x0000000000000000;

215 
addrdec_mask
[
BK
] = 0x0000000000001800;

216 
addrdec_mask
[
ROW
] = 0x0000000007FFE000;

217 
addrdec_mask
[
COL
] = 0x00000000000007FF;

220 
ADDR_CHIP_S
 = 16;

221 
addrdec_mask
[
CHIP
] = 0x0000000000000000;

222 
addrdec_mask
[
BK
] = 0x0000000000001800;

223 
addrdec_mask
[
ROW
] = 0x0000000007FFE000;

224 
addrdec_mask
[
COL
] = 0x00000000000007FF;

227 
ADDR_CHIP_S
 = 6;

228 
addrdec_mask
[
CHIP
] = 0x0000000000000000;

229 
addrdec_mask
[
BK
] = 0x0000000000001800;

230 
addrdec_mask
[
ROW
] = 0x0000000007FFE000;

231 
addrdec_mask
[
COL
] = 0x00000000000007FF;

234 
ADDR_CHIP_S
 = 5;

235 
addrdec_mask
[
CHIP
] = 0x0000000000000000;

236 
addrdec_mask
[
BK
] = 0x0000000000001800;

237 
addrdec_mask
[
ROW
] = 0x0000000007FFE000;

238 
addrdec_mask
[
COL
] = 0x00000000000007FF;

241 
ADDR_CHIP_S
 = 1;

242 
addrdec_mask
[
CHIP
] = 0x0000000000000000;

243 
addrdec_mask
[
BK
] = 0x0000000000000003;

244 
addrdec_mask
[
ROW
] = 0x0000000007FFE000;

245 
addrdec_mask
[
COL
] = 0x0000000000001FFC;

248 
ADDR_CHIP_S
 = 3;

249 
addrdec_mask
[
CHIP
] = 0x0000000000000000;

250 
addrdec_mask
[
BK
] = 0x0000000000000003;

251 
addrdec_mask
[
ROW
] = 0x0000000007FFE000;

252 
addrdec_mask
[
COL
] = 0x0000000000001FFC;

255 
ADDR_CHIP_S
 = 6;

256 
addrdec_mask
[
CHIP
] = 0x0000000000000000;

257 
addrdec_mask
[
BK
] = 0x0000000000001800;

258 
addrdec_mask
[
ROW
] = 0x0000000007FFE000;

259 
addrdec_mask
[
COL
] = 0x00000000000007FF;

263 
ADDR_CHIP_S
 = 6;

264 
addrdec_mask
[
CHIP
] = 0x0000000000000000;

265 
addrdec_mask
[
BK
] = 0x0000000000000300;

266 
addrdec_mask
[
ROW
] = 0x0000000007FFE000;

267 
addrdec_mask
[
COL
] = 0x0000000000001CFF;

273 ià(
addrdec_İtiÚ
 !ğ
NULL
)

274 
	`addrdec_·r£İtiÚ
(
addrdec_İtiÚ
);

276 ià(
ADDR_CHIP_S
 != -1) {

277 ià(!
g­
) {

280 
mask
 = (()1 << 
ADDR_CHIP_S
) - 1;

281 
addrdec_mask
[
BK
] = (×ddrdec_mask[BK] & ~
mask
è<< 
nchb™s
) | (addrdec_mask[BK] & mask);

282 
addrdec_mask
[
ROW
] = (×ddrdec_mask[ROW] & ~
mask
è<< 
nchb™s
) | (addrdec_mask[ROW] & mask);

283 
addrdec_mask
[
COL
] = (×ddrdec_mask[COL] & ~
mask
è<< 
nchb™s
) | (addrdec_mask[COL] & mask);

285 
i
=
ADDR_CHIP_S
;i<(ADDR_CHIP_S+
nchb™s
);i++) {

286 
mask
 = ()1 << 
i
;

287 
addrdec_mask
[
CHIP
] |ğ
mask
;

292 
	`as£¹
((
n_chªÃl
 & (n_channel - 1)) == 0);

295 
	`as£¹
((
m_n_sub_·¹™iÚ_š_chªÃl
 & (m_n_sub_partition_in_channel - 1)) == 0);

297 
	`addrdec_g‘masklim™
(
addrdec_mask
[
CHIP
], &
addrdec_mkhigh
[CHIP], &
addrdec_mklow
[CHIP] );

298 
	`addrdec_g‘masklim™
(
addrdec_mask
[
BK
], &
addrdec_mkhigh
[BK], &
addrdec_mklow
[BK] );

299 
	`addrdec_g‘masklim™
(
addrdec_mask
[
ROW
], &
addrdec_mkhigh
[ROW], &
addrdec_mklow
[ROW] );

300 
	`addrdec_g‘masklim™
(
addrdec_mask
[
COL
], &
addrdec_mkhigh
[COL], &
addrdec_mklow
[COL] );

301 
	`addrdec_g‘masklim™
(
addrdec_mask
[
BURST
], &
addrdec_mkhigh
[BURST], &
addrdec_mklow
[BURST]);

303 
	`´štf
("addr_dec_mask[CHIP] = %016Îx \thigh:%d†ow:%d\n", 
addrdec_mask
[
CHIP
], 
addrdec_mkhigh
[CHIP], 
addrdec_mklow
[CHIP] );

304 
	`´štf
("addr_dec_mask[BK] = %016Îx \thigh:%d†ow:%d\n", 
addrdec_mask
[
BK
], 
addrdec_mkhigh
[BK], 
addrdec_mklow
[BK] );

305 
	`´štf
("addr_dec_mask[ROW] = %016Îx \thigh:%d†ow:%d\n", 
addrdec_mask
[
ROW
], 
addrdec_mkhigh
[ROW], 
addrdec_mklow
[ROW] );

306 
	`´štf
("addr_dec_mask[COL] = %016Îx \thigh:%d†ow:%d\n", 
addrdec_mask
[
COL
], 
addrdec_mkhigh
[COL], 
addrdec_mklow
[COL] );

307 
	`´štf
("addr_dec_mask[BURST] = %016Îx \thigh:%d†ow:%d\n", 
addrdec_mask
[
BURST
], 
addrdec_mkhigh
[BURST], 
addrdec_mklow
[BURST]);

310 
sub_·¹™iÚ_id_mask
 = 0;

311 ià(
m_n_sub_·¹™iÚ_š_chªÃl
 > 1) {

312 
n_sub_·¹™iÚ_log2
 = 
	`LOGB2_32
(
m_n_sub_·¹™iÚ_š_chªÃl
);

313 
pos
=0;

314 
i
=
addrdec_mklow
[
BK
];i<
addrdec_mkhigh
[BK];i++) {

315 ià((
addrdec_mask
[
BK
] & (()1<<
i
)) != 0) {

316 
sub_·¹™iÚ_id_mask
 |ğ(()1<<
i
);

317 
pos
++;

318 ià(
pos
 >ğ
n_sub_·¹™iÚ_log2
)

323 
	`´štf
("sub_·¹™iÚ_id_mask = %016Îx\n", 
sub_·¹™iÚ_id_mask
);

325 ià(
run_‹¡
) {

326 
	`sw“p_‹¡
();

328 
	}
}

330 
	~"../Œ1_hash_m­.h
"

332 
boŞ
 
	gİ”©Ü
==(cÚ¡ 
addrdec_t
 &
x
, cÚ¡ 
	gaddrdec_t
 &
	gy
)

334  ( 
memcmp
(&
x
, &
y
, (
addrdec_t
)) == 0 );

337 
boŞ
 
	gİ”©Ü
<(cÚ¡ 
	gaddrdec_t
 &
	gx
, cÚ¡‡ddrdec_ˆ&
	gy
)

339 ià(
	gx
.
	gch
 >ğ
y
.
ch
è 
çl£
;

340 ià(
	gx
.
	gbk
 >ğ
y
.
bk
è 
çl£
;

341 ià(
	gx
.
	grow
 >ğ
y
.
row
è 
çl£
;

342 ià(
	gx
.
	gcŞ
 >ğ
y
.
cŞ
è 
çl£
;

343 ià(
	gx
.
	gbur¡
 >ğ
y
.
bur¡
è 
çl£
;

344  
	gŒue
;

347 şas 
	chash_addrdec_t


349 
	mpublic
:

350 
size_t
 
	$İ”©Ü
()(cÚ¡ 
addrdec_t
 &
x
) const {

351  (
x
.
ch
 ^ x.
bk
 ^ x.
row
 ^ x.
cŞ
 ^ x.
bur¡
);

353 
	}
};

356 
	glš—r_to_¿w_add»ss_Œª¦©iÚ
::
	$sw“p_‹¡
() const

358 
Ãw_addr_ty³
 
sw“p_¿nge
 = 16 * 1024 * 1024;

360 #ià
Œ1_hash_m­_ism­
 == 1

361 
Œ1_hash_m­
<
	taddrdec_t
, 
	tÃw_addr_ty³
> 
	thi¡Üy_m­_t
;

363 
Œ1_hash_m­
<
	taddrdec_t
, 
	tÃw_addr_ty³
, 
	thash_addrdec_t
> 
	thi¡Üy_m­_t
;

365 
hi¡Üy_m­_t
 
hi¡Üy_m­
;

367 
Ãw_addr_ty³
 
¿w_addr
 = 4;„aw_add¸< 
sw“p_¿nge
;„aw_addr += 4) {

368 
addrdec_t
 
x
;

369 
	`addrdec_x
(
¿w_addr
, &
x
);

371 
hi¡Üy_m­_t
::
™”©Ü
 
h
 = 
hi¡Üy_m­
.
	`fšd
(
x
);

373 ià(
h
 !ğ
hi¡Üy_m­
.
	`’d
()) {

374 
	`´štf
("[AddrDec] ** E¼Ü:‡dd»s decodšg m­pšg‡lŸ£ twØadd»s£ tØ§m·¹™iÚ w™h samšŒa-·¹™iÚ‡dd»ss: %Îx %Îx\n", 
h
->
£cÚd
, 
¿w_addr
);

375 
	`abÜt
();

377 
	`as£¹
(()
x
.
ch
 < 
m_n_chªÃl
);

379 ià((
ADDR_CHIP_S
 !ğ-1 
ªd
 
¿w_addr
 >ğ(1ULL << ADDR_CHIP_S)è
Ü


380 (
ADDR_CHIP_S
 =ğ-1 
ªd
 
¿w_addr
 >ğ(1ULL << 
addrdec_mklow
[
CHIP
]))) {

381 
	`as£¹
(
¿w_addr
 !ğ
	`·¹™iÚ_add»ss
(raw_addr));

383 
hi¡Üy_m­
[
x
] = 
¿w_addr
;

386 ià((
¿w_addr
 & 0xffffè=ğ0è
	`´štf
("%llu scaned\n",„aw_addr);

388 
	}
}

390 
	gaddrdec_t
::
	$´št
Ğ
FILE
 *
å
 ) const

392 
	`årštf
(
å
,"\tch:%x ", 
ch
);

393 
	`årštf
(
å
,"\Œow:%x ", 
row
);

394 
	`årštf
(
å
,"\tcŞ:%x ", 
cŞ
);

395 
	`årštf
(
å
,"\tbk:%x ", 
bk
);

396 
	`årštf
(
å
,"\tbur¡:%x ", 
bur¡
);

397 
	`årštf
(
å
,"\tsub_·¹™iÚ:%x ", 
sub_·¹™iÚ
);

398 
	}
}

401 
	$powli
Ğ
x
, 
y
 )

403 
r
 = 1;

404 
i
;

405 
i
 = 0; i < 
y
; ++i ) {

406 
r
 *ğ
x
;

408  
r
;

409 
	}
}

411 
	$LOGB2_32
Ğ
v
 )

413 
shiá
;

414 
r
;

416 
r
 = 0;

418 
shiá
 = (Ğ
v
 & 0xFFFF0000è!ğ0 ) << 4; v >>ğshiá; 
r
 |= shift;

419 
shiá
 = (Ğ
v
 & 0xFF00 ) !ğ0 ) << 3; v >>ğshiá; 
r
 |= shift;

420 
shiá
 = (Ğ
v
 & 0xF0 ) !ğ0 ) << 2; v >>ğshiá; 
r
 |= shift;

421 
shiá
 = (Ğ
v
 & 0xC ) !ğ0 ) << 1; v >>ğshiá; 
r
 |= shift;

422 
shiá
 = (Ğ
v
 & 0x2 ) !ğ0 ) << 0; v >>ğshiá; 
r
 |= shift;

424  
r
;

425 
	}
}

427 
Ãw_addr_ty³
 
	$addrdec_·ckb™s
Ğ
Ãw_addr_ty³
 
mask
,‚ew_addr_ty³ 
v®
, 
high
, 
low
)

429 
pos
=0;

430 
Ãw_addr_ty³
 
»suÉ
 = 0;

431 
i
=
low
;i<
high
;i++) {

432 ià((
mask
 & (()1<<
i
)) != 0) {

433 
»suÉ
 |ğ((
v®
 & (()1<<
i
)è>> iè<< 
pos
;

434 
pos
++;

437  
»suÉ
;

438 
	}
}

440 
	$addrdec_g‘masklim™
(
Ãw_addr_ty³
 
mask
, *
high
, *
low
)

442 *
high
 = 64;

443 *
low
 = 0;

444 
i
;

445 
low_found
 = 0;

447 
i
=0;i<64;i++) {

448 ià((
mask
 & (()1<<
i
)) != 0) {

449 ià(
low_found
) {

450 *
high
 = 
i
 + 1;

452 *
high
 = 
i
 + 1;

453 *
low
 = 
i
;

454 
low_found
 = 1;

458 
	}
}

	@addrdec.h

28 
	~<¡dio.h
>

29 
	~<¡dlib.h
>

30 
	~<as£¹.h
>

31 
	~"../İtiÚ_·r£r.h
"

33 #iâdeà
ADDRDEC_H


34 
	#ADDRDEC_H


	)

36 
	~"../ab¡¿ù_h¬dw¬e_mod–.h
"

38 
	saddrdec_t
 {

39 
´št
Ğ
FILE
 *
å
 ) const;

41 
	mch
;

42 
	mbk
;

43 
	mrow
;

44 
	mcŞ
;

45 
	mbur¡
;

47 
	msub_·¹™iÚ
;

50 şas 
	clš—r_to_¿w_add»ss_Œª¦©iÚ
 {

51 
	mpublic
:

52 
lš—r_to_¿w_add»ss_Œª¦©iÚ
();

53 
addrdec_£tİtiÚ
(
İtiÚ_·r£r_t
 
İp
);

54 
š™
(
n_chªÃl
, 
n_sub_·¹™iÚ_š_chªÃl
);

57 
	$addrdec_x
(
Ãw_addr_ty³
 
addr
, 
addrdec_t
 *
x
) const;

58 
Ãw_addr_ty³
 
	$·¹™iÚ_add»ss
Ğ
Ãw_addr_ty³
 
addr
 ) const;

60 
´iv©e
:

61 
	`addrdec_·r£İtiÚ
(cÚ¡ *
İtiÚ
);

62 
	$sw“p_‹¡
() const;

65 
CHIP
 = 0,

66 
BK
 = 1,

67 
ROW
 = 2,

68 
COL
 = 3,

69 
BURST
 = 4,

70 
N_ADDRDEC


73 cÚ¡ *
addrdec_İtiÚ
;

74 
gpgpu_mem_add»ss_mask
;

75 
boŞ
 
run_‹¡
;

77 
ADDR_CHIP_S
;

78 
addrdec_mklow
[
N_ADDRDEC
];

79 
addrdec_mkhigh
[
N_ADDRDEC
];

80 
Ãw_addr_ty³
 
addrdec_mask
[
N_ADDRDEC
];

81 
Ãw_addr_ty³
 
sub_·¹™iÚ_id_mask
;

83 
g­
;

84 
m_n_chªÃl
;

85 
m_n_sub_·¹™iÚ_š_chªÃl
;

86 
	}
};

	@delayqueue.h

28 
	~<¡dio.h
>

29 
	~<as£¹.h
>

30 
	~<¡dlib.h
>

32 #iâdeà
DELAYQUEUE_H


33 
	#DELAYQUEUE_H


	)

35 
	~"../¡©w¿µ”.h
"

36 
	~"gpu-misc.h
"

38 
	g‹m¶©e
 <
şass
 
	gT
>

39 
	sfifo_d©a
 {

40 
T
 *
	mm_d©a
;

41 
fifo_d©a
 *
	mm_Ãxt
;

44 
	g‹m¶©e
 <
şass
 
	gT
>

45 şas 
	cfifo_p–še
 {

46 
	mpublic
:

47 
	$fifo_p–še
(cÚ¡ * 
nm
, 
mšËn
, 
maxËn
 )

49 
	`as£¹
(
maxËn
);

50 
m_Çme
 = 
nm
;

51 
m_mš_Ën
 = 
mšËn
;

52 
m_max_Ën
 = 
maxËn
;

53 
m_Ëngth
 = 0;

54 
m_n_–em’t
 = 0;

55 
m_h—d
 = 
NULL
;

56 
m_
 = 
NULL
;

57 
i
=0;i<
m_mš_Ën
;i++)

58 
	`push
(
NULL
);

61 ~
	$fifo_p–še
()

63 
m_h—d
) {

64 
m_
 = 
m_h—d
;

65 
m_h—d
 = m_h—d->
m_Ãxt
;

66 
d–‘e
 
m_
;

68 
	}
}

70 
	$push
(
T
* 
d©a
 )

72 
	`as£¹
(
m_Ëngth
 < 
m_max_Ën
);

73 ià(
m_h—d
) {

74 ià(
m_
->
m_d©a
 || 
m_Ëngth
 < 
m_mš_Ën
) {

75 
m_
->
m_Ãxt
 = 
Ãw
 
fifo_d©a
<
T
>();

76 
m_
 = m_->
m_Ãxt
;

77 
m_Ëngth
++;

78 
m_n_–em’t
++;

81 
m_h—d
 = 
m_
 = 
Ãw
 
fifo_d©a
<
T
>();

82 
m_Ëngth
++;

83 
m_n_–em’t
++;

85 
m_
->
m_Ãxt
 = 
NULL
;

86 
m_
->
m_d©a
 = 
d©a
;

87 
	}
}

89 
T
* 
	$pİ
()

91 
fifo_d©a
<
T
>* 
Ãxt
;

92 
T
* 
d©a
;

93 ià(
m_h—d
) {

94 
Ãxt
 = 
m_h—d
->
m_Ãxt
;

95 
d©a
 = 
m_h—d
->
m_d©a
;

96 iàĞ
m_h—d
 =ğ
m_
 ) {

97 
	`as£¹
Ğ
Ãxt
 =ğ
NULL
 );

98 
m_
 = 
NULL
;

100 
d–‘e
 
m_h—d
;

101 
m_h—d
 = 
Ãxt
;

102 
m_Ëngth
--;

103 ià(
m_Ëngth
 == 0) {

104 
	`as£¹
Ğ
m_h—d
 =ğ
NULL
 );

105 
m_
 = 
m_h—d
;

107 
m_n_–em’t
--;

108 ià(
m_mš_Ën
 && 
m_Ëngth
 < m_min_len) {

109 
	`push
(
NULL
);

110 
m_n_–em’t
--;

113 
d©a
 = 
NULL
;

115  
d©a
;

116 
	}
}

118 
T
* 
	$tİ
() const

120 ià(
m_h—d
) {

121  
m_h—d
->
m_d©a
;

123  
NULL
;

125 
	}
}

127 
	$£t_mš_Ëngth
(
Ãw_mš_Ën
)

129 ià(
Ãw_mš_Ën
 =ğ
m_mš_Ën
) ;

131 ià(
Ãw_mš_Ën
 > 
m_mš_Ën
) {

132 
m_mš_Ën
 = 
Ãw_mš_Ën
;

133 
m_Ëngth
 < 
m_mš_Ën
) {

134 
	`push
(
NULL
);

135 
m_n_–em’t
--;

140 
	`as£¹
(
m_h—d
);

141 
m_mš_Ën
 = 
Ãw_mš_Ën
;

142 (
m_Ëngth
 > 
m_mš_Ën
è&& (
m_
->
m_d©a
 == 0)) {

143 
fifo_d©a
<
T
> *
™”
;

144 
™”
 = 
m_h—d
;

145 
™”
 && (™”->
m_Ãxt
 !ğ
m_
))

146 
™”
 = i‹r->
m_Ãxt
;

147 ià(!
™”
) {

149 
	`as£¹
(
m_h—d
->
m_d©a
 == 0);

150 
	`pİ
();

153 
	`as£¹
(
™”
->
m_Ãxt
 =ğ
m_
);

154 
d–‘e
 
m_
;

155 
m_
 = 
™”
;

156 
m_
->
m_Ãxt
 = 0;

157 
m_Ëngth
--;

161 
	}
}

163 
boŞ
 
	$fuÎ
(ècÚ¡ {  (
m_max_Ën
 && 
m_Ëngth
 >ğm_max_Ën); 
	}
}

164 
boŞ
 
	$em±y
(ècÚ¡ {  
m_h—d
 =ğ
NULL
; 
	}
}

165 
	$g‘_n_–em’t
(ècÚ¡ {  
m_n_–em’t
; 
	}
}

166 
	$g‘_Ëngth
(ècÚ¡ {  
m_Ëngth
; 
	}
}

167 
	$g‘_max_Ën
(ècÚ¡ {  
m_max_Ën
; 
	}
}

169 
	$´št
() const

171 
fifo_d©a
<
T
>* 
ddp
 = 
m_h—d
;

172 
	`´štf
("%s(%d): ", 
m_Çme
, 
m_Ëngth
);

173 
ddp
) {

174 
	`´štf
("%°", 
ddp
->
m_d©a
);

175 
ddp
 = ddp->
m_Ãxt
;

177 
	`´štf
("\n");

178 
	}
}

180 
	g´iv©e
:

181 cÚ¡ * 
m_Çme
;

183 
	gm_mš_Ën
;

184 
	gm_max_Ën
;

185 
	gm_Ëngth
;

186 
	gm_n_–em’t
;

188 
	gfifo_d©a
<
	gT
> *
	gm_h—d
;

189 
	gfifo_d©a
<
	gT
> *
	gm_
;

	@dram.cc

29 
	~"gpu-sim.h
"

30 
	~"gpu-misc.h
"

31 
	~"d¿m.h
"

32 
	~"mem_Ï‹ncy_¡©.h
"

33 
	~"d¿m_sched.h
"

34 
	~"mem_ãtch.h
"

35 
	~"l2ÿche.h
"

37 #ifdeà
DRAM_VERIFY


38 
	gPRINT_CYCLE
 = 0;

41 
‹m¶©e
 
şass
 
	gfifo_p–še
<
	gmem_ãtch
>;

42 
‹m¶©e
 
şass
 
	gfifo_p–še
<
	gd¿m_»q_t
>;

44 
	gd¿m_t
::
	$d¿m_t
Ğ
·¹™iÚ_id
, cÚ¡ 
memÜy_cÚfig
 *
cÚfig
, 
memÜy_¡©s_t
 *
¡©s
,

45 
memÜy_·¹™iÚ_un™
 *
mp
 )

47 
id
 = 
·¹™iÚ_id
;

48 
m_memÜy_·¹™iÚ_un™
 = 
mp
;

49 
m_¡©s
 = 
¡©s
;

50 
m_cÚfig
 = 
cÚfig
;

52 
CCDc
 = 0;

53 
RRDc
 = 0;

54 
RTWc
 = 0;

55 
WTRc
 = 0;

57 
rw
 = 
READ
;

59 
bkg½
 = (
bªkg½_t
**è
	`ÿÎoc
((bªkg½_t*), 
m_cÚfig
->
nbkg½
);

60 
bkg½
[0] = (
bªkg½_t
*è
	`ÿÎoc
((
bªk_t
), 
m_cÚfig
->
nbkg½
);

61 
i
=1; i<
m_cÚfig
->
nbkg½
; i++) {

62 
bkg½
[
i
] = bkgrp[0] + i;

64 
i
=0; i<
m_cÚfig
->
nbkg½
; i++) {

65 
bkg½
[
i
]->
CCDLc
 = 0;

66 
bkg½
[
i
]->
RTPLc
 = 0;

69 
bk
 = (
bªk_t
**è
	`ÿÎoc
((bªk_t*),
m_cÚfig
->
nbk
);

70 
bk
[0] = (
bªk_t
*è
	`ÿÎoc
((bªk_t),
m_cÚfig
->
nbk
);

71 
i
=1;i<
m_cÚfig
->
nbk
;i++)

72 
bk
[
i
] = bk[0] + i;

73 
i
=0;i<
m_cÚfig
->
nbk
;i++) {

74 
bk
[
i
]->
¡©e
 = 
BANK_IDLE
;

75 
bk
[
i
]->
bkg½šdex
 = i/(
m_cÚfig
->
nbk
/m_cÚfig->
nbkg½
);

77 
´io
 = 0;

78 
rwq
 = 
Ãw
 
fifo_p–še
<
d¿m_»q_t
>("rwq",
m_cÚfig
->
CL
,m_config->CL+1);

79 
mrqq
 = 
Ãw
 
fifo_p–še
<
d¿m_»q_t
>("mrqq",0,2);

80 
»tuºq
 = 
Ãw
 
fifo_p–še
<
mem_ãtch
>("d¿m»tuºq",0,
m_cÚfig
->
gpgpu_d¿m_»tuº_queue_size
==0?1024:m_config->gpgpu_dram_return_queue_size);

81 
m_äfcfs_scheduËr
 = 
NULL
;

82 iàĞ
m_cÚfig
->
scheduËr_ty³
 =ğ
DRAM_FRFCFS
 )

83 
m_äfcfs_scheduËr
 = 
Ãw
 
	`äfcfs_scheduËr
(
m_cÚfig
,
this
,
¡©s
);

84 
n_cmd
 = 0;

85 
n_aùiv™y
 = 0;

86 
n_nİ
 = 0;

87 
n_aù
 = 0;

88 
n_´e
 = 0;

89 
n_rd
 = 0;

90 
n_wr
 = 0;

91 
n_»q
 = 0;

92 
max_mrqs_‹mp
 = 0;

93 
bwut
 = 0;

94 
max_mrqs
 = 0;

95 
ave_mrqs
 = 0;

97 
i
=0;i<10;i++) {

98 
d¿m_ut_bšs
[
i
]=0;

99 
d¿m_eff_bšs
[
i
]=0;

101 
Ï¡_n_cmd
 = 
Ï¡_n_aùiv™y
 = 
Ï¡_bwut
 = 0;

103 
n_cmd_·¹Ÿl
 = 0;

104 
n_aùiv™y_·¹Ÿl
 = 0;

105 
n_nİ_·¹Ÿl
 = 0;

106 
n_aù_·¹Ÿl
 = 0;

107 
n_´e_·¹Ÿl
 = 0;

108 
n_»q_·¹Ÿl
 = 0;

109 
ave_mrqs_·¹Ÿl
 = 0;

110 
bwut_·¹Ÿl
 = 0;

112 iàĞ
	`queue_lim™
() )

113 
mrqq_Di¡
 = 
	`StC»©e
("mrqq_Ëngth",1, 
	`queue_lim™
());

115 
mrqq_Di¡
 = 
	`StC»©e
("mrqq_length",1,64);

116 
	}
}

118 
boŞ
 
	gd¿m_t
::
	$fuÎ
() const

120 if(
m_cÚfig
->
scheduËr_ty³
 =ğ
DRAM_FRFCFS
 ){

121 if(
m_cÚfig
->
gpgpu_äfcfs_d¿m_sched_queue_size
 =ğ0 )  
çl£
;

122  
m_äfcfs_scheduËr
->
	`num_³ndšg
(è>ğ
m_cÚfig
->
gpgpu_äfcfs_d¿m_sched_queue_size
;

124  
mrqq
->
	`fuÎ
();

125 
	}
}

127 
	gd¿m_t
::
	$que_Ëngth
() const

129 
Äeqs
 = 0;

130 ià(
m_cÚfig
->
scheduËr_ty³
 =ğ
DRAM_FRFCFS
 ) {

131 
Äeqs
 = 
m_äfcfs_scheduËr
->
	`num_³ndšg
();

133 
Äeqs
 = 
mrqq
->
	`g‘_Ëngth
();

135  
Äeqs
;

136 
	}
}

138 
boŞ
 
	gd¿m_t
::
	$»tuºq_fuÎ
() const

140  
»tuºq
->
	`fuÎ
();

141 
	}
}

143 
	gd¿m_t
::
	$queue_lim™
() const

145  
m_cÚfig
->
gpgpu_äfcfs_d¿m_sched_queue_size
;

146 
	}
}

149 
	gd¿m_»q_t
::
	$d¿m_»q_t
Ğ
şass
 
mem_ãtch
 *
mf
 )

151 
txby‹s
 = 0;

152 
dqby‹s
 = 0;

153 
d©a
 = 
mf
;

155 cÚ¡ 
addrdec_t
 &
x
 = 
mf
->
	`g‘_x_addr
();

157 
bk
 = 
x
.bk;

158 
row
 = 
x
.row;

159 
cŞ
 = 
x
.col;

160 
nby‹s
 = 
mf
->
	`g‘_d©a_size
();

162 
time¡amp
 = 
gpu_tÙ_sim_cyşe
 + 
gpu_sim_cyşe
;

163 
addr
 = 
mf
->
	`g‘_addr
();

164 
š£¹iÚ_time
 = (è
gpu_sim_cyşe
;

165 
rw
 = 
d©a
->
	`g‘_is_wr™e
()?
WRITE
:
READ
;

166 
	}
}

168 
	gd¿m_t
::
	$push
Ğ
şass
 
mem_ãtch
 *
d©a
 )

170 
	`as£¹
(
id
 =ğ
d©a
->
	`g‘_x_addr
().
ch
);

172 
d¿m_»q_t
 *
mrq
 = 
Ãw
 
	`d¿m_»q_t
(
d©a
);

173 
d©a
->
	`£t_¡©us
(
IN_PARTITION_MC_INTERFACE_QUEUE
,
gpu_sim_cyşe
+
gpu_tÙ_sim_cyşe
);

174 
mrqq
->
	`push
(
mrq
);

177 
n_»q
 += 1;

178 
n_»q_·¹Ÿl
 += 1;

179 iàĞ
m_cÚfig
->
scheduËr_ty³
 =ğ
DRAM_FRFCFS
 ) {

180 
Äeqs
 = 
m_äfcfs_scheduËr
->
	`num_³ndšg
();

181 iàĞ
Äeqs
 > 
max_mrqs_‹mp
)

182 
max_mrqs_‹mp
 = 
Äeqs
;

184 
max_mrqs_‹mp
 = (max_mrqs_‹m°> 
mrqq
->
	`g‘_Ëngth
())? max_mrqs_temp : mrqq->get_length();

186 
m_¡©s
->
	`memÏt¡©_d¿m_acûss
(
d©a
);

187 
	}
}

189 
	gd¿m_t
::
	$scheduËr_fifo
()

191 ià(!
mrqq
->
	`em±y
()) {

192 
bkn
;

193 
d¿m_»q_t
 *
h—d_mrqq
 = 
mrqq
->
	`tİ
();

194 
h—d_mrqq
->
d©a
->
	`£t_¡©us
(
IN_PARTITION_MC_BANK_ARB_QUEUE
,
gpu_sim_cyşe
+
gpu_tÙ_sim_cyşe
);

195 
bkn
 = 
h—d_mrqq
->
bk
;

196 ià(!
bk
[
bkn
]->
mrq
)

197 
bk
[
bkn
]->
mrq
 = 
mrqq
->
	`pİ
();

199 
	}
}

202 
	#DEC2ZERO
(
x
èx = (x)? (x-1è: 0;

	)

203 
	#SWAP
(
a
,
b
è¨^ğb; b ^ğa;‡ ^ğb;

	)

205 
	gd¿m_t
::
	$cyşe
()

208 ifĞ!
»tuºq
->
	`fuÎ
() ) {

209 
d¿m_»q_t
 *
cmd
 = 
rwq
->
	`pİ
();

210 ifĞ
cmd
 ) {

211 #ifdeà
DRAM_VIEWCMD


212 
	`´štf
("\tDQ: BK%d Row:%03x CŞ:%03x", 
cmd
->
bk
, cmd->
row
, cmd->
cŞ
 + cmd->
dqby‹s
);

214 
cmd
->
dqby‹s
 +ğ
m_cÚfig
->
d¿m_©om_size
;

215 ià(
cmd
->
dqby‹s
 >ğcmd->
nby‹s
) {

216 
mem_ãtch
 *
d©a
 = 
cmd
->data;

217 
d©a
->
	`£t_¡©us
(
IN_PARTITION_MC_RETURNQ
,
gpu_sim_cyşe
+
gpu_tÙ_sim_cyşe
);

218 ifĞ
d©a
->
	`g‘_acûss_ty³
(è!ğ
L1_WRBK_ACC
 && d©a->g‘_acûss_ty³(è!ğ
L2_WRBK_ACC
 ) {

219 
d©a
->
	`£t_»¶y
();

220 
»tuºq
->
	`push
(
d©a
);

222 
m_memÜy_·¹™iÚ_un™
->
	`£t_dÚe
(
d©a
);

223 
d–‘e
 
d©a
;

225 
d–‘e
 
cmd
;

227 #ifdeà
DRAM_VIEWCMD


228 
	`´štf
("\n");

236 
m_cÚfig
->
scheduËr_ty³
) {

237 
DRAM_FIFO
: 
	`scheduËr_fifo
(); ;

238 
DRAM_FRFCFS
: 
	`scheduËr_äfcfs
(); ;

240 
	`´štf
("Error: Unknown DRAM schedulerype\n");

241 
	`as£¹
(0);

243 iàĞ
m_cÚfig
->
scheduËr_ty³
 =ğ
DRAM_FRFCFS
 ) {

244 
Äeqs
 = 
m_äfcfs_scheduËr
->
	`num_³ndšg
();

245 iàĞ
Äeqs
 > 
max_mrqs
) {

246 
max_mrqs
 = 
Äeqs
;

248 
ave_mrqs
 +ğ
Äeqs
;

249 
ave_mrqs_·¹Ÿl
 +ğ
Äeqs
;

251 ià(
mrqq
->
	`g‘_Ëngth
(è> 
max_mrqs
) {

252 
max_mrqs
 = 
mrqq
->
	`g‘_Ëngth
();

254 
ave_mrqs
 +ğ
mrqq
->
	`g‘_Ëngth
();

255 
ave_mrqs_·¹Ÿl
 +ğ
mrqq
->
	`g‘_Ëngth
();

258 
k
=
m_cÚfig
->
nbk
;

259 
boŞ
 
issued
 = 
çl£
;

262 
i
=0;i<
m_cÚfig
->
nbk
;i++) {

263 
j
 = (
i
 + 
´io
è% 
m_cÚfig
->
nbk
;

264 
g½
 = 
j
>>
m_cÚfig
->
bk_g_Ëngth
;

265 ià(
bk
[
j
]->
mrq
) {

266 
bk
[
j
]->
mrq
->
d©a
->
	`£t_¡©us
(
IN_PARTITION_DRAM
,
gpu_sim_cyşe
+
gpu_tÙ_sim_cyşe
);

268 iàĞ!
issued
 && !
CCDc
 && !
bk
[
j
]->
RCDc
 &&

269 !(
bkg½
[
g½
]->
CCDLc
) &&

270 (
bk
[
j
]->
cu¼_row
 =ğbk[j]->
mrq
->
row
) &&

271 (
bk
[
j
]->
mrq
->
rw
 =ğ
READ
è&& (
WTRc
 == 0 ) &&

272 (
bk
[
j
]->
¡©e
 =ğ
BANK_ACTIVE
) &&

273 !
rwq
->
	`fuÎ
() ) {

274 ià(
rw
==
WRITE
) {

275 
rw
=
READ
;

276 
rwq
->
	`£t_mš_Ëngth
(
m_cÚfig
->
CL
);

278 
rwq
->
	`push
(
bk
[
j
]->
mrq
);

279 
bk
[
j
]->
mrq
->
txby‹s
 +ğ
m_cÚfig
->
d¿m_©om_size
;

280 
CCDc
 = 
m_cÚfig
->
tCCD
;

281 
bkg½
[
g½
]->
CCDLc
 = 
m_cÚfig
->
tCCDL
;

282 
RTWc
 = 
m_cÚfig
->
tRTW
;

283 
bk
[
j
]->
RTPc
 = 
m_cÚfig
->
BL
/m_cÚfig->
d©a_commªd_äeq_¿tio
;

284 
bkg½
[
g½
]->
RTPLc
 = 
m_cÚfig
->
tRTPL
;

285 
issued
 = 
Œue
;

286 
n_rd
++;

287 
bwut
 +ğ
m_cÚfig
->
BL
/m_cÚfig->
d©a_commªd_äeq_¿tio
;

288 
bwut_·¹Ÿl
 +ğ
m_cÚfig
->
BL
/m_cÚfig->
d©a_commªd_äeq_¿tio
;

289 
bk
[
j
]->
n_acûss
++;

290 #ifdeà
DRAM_VERIFY


291 
PRINT_CYCLE
=1;

292 
	`´štf
("\tRD Bk:%d Row:%03x Col:%03x \n",

293 
j
, 
bk
[j]->
cu¼_row
,

294 
bk
[
j
]->
mrq
->
cŞ
 + bk[j]->mrq->
txby‹s
 - 
m_cÚfig
->
d¿m_©om_size
);

297 iàĞ!(
bk
[
j
]->
mrq
->
txby‹s
 < bk[j]->mrq->
nby‹s
) ) {

298 
bk
[
j
]->
mrq
 = 
NULL
;

302 iàĞ!
issued
 && !
CCDc
 && !
bk
[
j
]->
RCDWRc
 &&

303 !(
bkg½
[
g½
]->
CCDLc
) &&

304 (
bk
[
j
]->
cu¼_row
 =ğbk[j]->
mrq
->
row
) &&

305 (
bk
[
j
]->
mrq
->
rw
 =ğ
WRITE
è&& (
RTWc
 == 0 ) &&

306 (
bk
[
j
]->
¡©e
 =ğ
BANK_ACTIVE
) &&

307 !
rwq
->
	`fuÎ
() ) {

308 ià(
rw
==
READ
) {

309 
rw
=
WRITE
;

310 
rwq
->
	`£t_mš_Ëngth
(
m_cÚfig
->
WL
);

312 
rwq
->
	`push
(
bk
[
j
]->
mrq
);

314 
bk
[
j
]->
mrq
->
txby‹s
 +ğ
m_cÚfig
->
d¿m_©om_size
;

315 
CCDc
 = 
m_cÚfig
->
tCCD
;

316 
bkg½
[
g½
]->
CCDLc
 = 
m_cÚfig
->
tCCDL
;

317 
WTRc
 = 
m_cÚfig
->
tWTR
;

318 
bk
[
j
]->
WTPc
 = 
m_cÚfig
->
tWTP
;

319 
issued
 = 
Œue
;

320 
n_wr
++;

321 
bwut
 +ğ
m_cÚfig
->
BL
/m_cÚfig->
d©a_commªd_äeq_¿tio
;

322 
bwut_·¹Ÿl
 +ğ
m_cÚfig
->
BL
/m_cÚfig->
d©a_commªd_äeq_¿tio
;

323 #ifdeà
DRAM_VERIFY


324 
PRINT_CYCLE
=1;

325 
	`´štf
("\tWR Bk:%d Row:%03x Col:%03x \n",

326 
j
, 
bk
[j]->
cu¼_row
,

327 
bk
[
j
]->
mrq
->
cŞ
 + bk[j]->mrq->
txby‹s
 - 
m_cÚfig
->
d¿m_©om_size
);

330 iàĞ!(
bk
[
j
]->
mrq
->
txby‹s
 < bk[j]->mrq->
nby‹s
) ) {

331 
bk
[
j
]->
mrq
 = 
NULL
;

337 iàĞ!
issued
 && !
RRDc
 &&

338 (
bk
[
j
]->
¡©e
 =ğ
BANK_IDLE
) &&

339 !
bk
[
j
]->
RPc
 && !bk[j]->
RCc
 ) {

340 #ifdeà
DRAM_VERIFY


341 
PRINT_CYCLE
=1;

342 
	`´štf
("\tACT BK:%d NewRow:%03x From:%03x \n",

343 
j
,
bk
[j]->
mrq
->
row
,bk[j]->
cu¼_row
);

346 
bk
[
j
]->
cu¼_row
 = bk[j]->
mrq
->
row
;

347 
bk
[
j
]->
¡©e
 = 
BANK_ACTIVE
;

348 
RRDc
 = 
m_cÚfig
->
tRRD
;

349 
bk
[
j
]->
RCDc
 = 
m_cÚfig
->
tRCD
;

350 
bk
[
j
]->
RCDWRc
 = 
m_cÚfig
->
tRCDWR
;

351 
bk
[
j
]->
RASc
 = 
m_cÚfig
->
tRAS
;

352 
bk
[
j
]->
RCc
 = 
m_cÚfig
->
tRC
;

353 
´io
 = (
j
 + 1è% 
m_cÚfig
->
nbk
;

354 
issued
 = 
Œue
;

355 
n_aù_·¹Ÿl
++;

356 
n_aù
++;

361 iàĞ(!
issued
) &&

362 (
bk
[
j
]->
cu¼_row
 !ğbk[j]->
mrq
->
row
) &&

363 (
bk
[
j
]->
¡©e
 =ğ
BANK_ACTIVE
) &&

364 (!
bk
[
j
]->
RASc
 && !bk[j]->
WTPc
 &&

365 !
bk
[
j
]->
RTPc
 &&

366 !
bkg½
[
g½
]->
RTPLc
) ) {

368 
bk
[
j
]->
¡©e
 = 
BANK_IDLE
;

369 
bk
[
j
]->
RPc
 = 
m_cÚfig
->
tRP
;

370 
´io
 = (
j
 + 1è% 
m_cÚfig
->
nbk
;

371 
issued
 = 
Œue
;

372 
n_´e
++;

373 
n_´e_·¹Ÿl
++;

374 #ifdeà
DRAM_VERIFY


375 
PRINT_CYCLE
=1;

376 
	`´štf
("\tPRE BK:%d Row:%03x \n", 
j
,
bk
[j]->
cu¼_row
);

380 ià(!
CCDc
 && !
RRDc
 && !
RTWc
 && !
WTRc
 && !
bk
[
j
]->
RCDc
 && !bk[j]->
RASc


381 && !
bk
[
j
]->
RCc
 && !bk[j]->
RPc
 && !bk[j]->
RCDWRc
è
k
--;

382 
bk
[
j
]->
n_idË
++;

385 ià(!
issued
) {

386 
n_nİ
++;

387 
n_nİ_·¹Ÿl
++;

388 #ifdeà
DRAM_VIEWCMD


389 
	`´štf
("\tNOP ");

392 ià(
k
) {

393 
n_aùiv™y
++;

394 
n_aùiv™y_·¹Ÿl
++;

396 
n_cmd
++;

397 
n_cmd_·¹Ÿl
++;

400 
	`DEC2ZERO
(
RRDc
);

401 
	`DEC2ZERO
(
CCDc
);

402 
	`DEC2ZERO
(
RTWc
);

403 
	`DEC2ZERO
(
WTRc
);

404 
j
=0;j<
m_cÚfig
->
nbk
;j++) {

405 
	`DEC2ZERO
(
bk
[
j
]->
RCDc
);

406 
	`DEC2ZERO
(
bk
[
j
]->
RASc
);

407 
	`DEC2ZERO
(
bk
[
j
]->
RCc
);

408 
	`DEC2ZERO
(
bk
[
j
]->
RPc
);

409 
	`DEC2ZERO
(
bk
[
j
]->
RCDWRc
);

410 
	`DEC2ZERO
(
bk
[
j
]->
WTPc
);

411 
	`DEC2ZERO
(
bk
[
j
]->
RTPc
);

413 
j
=0; j<
m_cÚfig
->
nbkg½
; j++) {

414 
	`DEC2ZERO
(
bkg½
[
j
]->
CCDLc
);

415 
	`DEC2ZERO
(
bkg½
[
j
]->
RTPLc
);

418 #ifdeà
DRAM_VISUALIZE


419 
	`visu®ize
();

421 
	}
}

424 
şass
 
mem_ãtch
* 
	gd¿m_t
::
	$»tuº_queue_pİ
()

426  
»tuºq
->
	`pİ
();

427 
	}
}

429 
şass
 
mem_ãtch
* 
	gd¿m_t
::
	$»tuº_queue_tİ
()

431  
»tuºq
->
	`tİ
();

432 
	}
}

434 
	gd¿m_t
::
	$´št
Ğ
FILE
* 
simFe
) const

436 
i
;

437 
	`årštf
(
simFe
,"DRAM[%d]: %d bks, busW=%d BL=%d CL=%d, ",

438 
id
, 
m_cÚfig
->
nbk
, m_cÚfig->
busW
, m_cÚfig->
BL
, m_cÚfig->
CL
 );

439 
	`årštf
(
simFe
,"tRRD=%dCCD=%d,RCD=%dRAS=%dRP=%dRC=%d\n",

440 
m_cÚfig
->
tCCD
, m_cÚfig->
tRRD
, m_cÚfig->
tRCD
, m_cÚfig->
tRAS
, m_cÚfig->
tRP
, m_cÚfig->
tRC
 );

441 
	`årštf
(
simFe
,"n_cmd=%d‚_nop=%d‚_act=%d‚_pre=%d‚_req=%d‚_rd=%d‚_write=%d bw_util=%.4g\n",

442 
n_cmd
, 
n_nİ
, 
n_aù
, 
n_´e
, 
n_»q
, 
n_rd
, 
n_wr
,

443 ()
bwut
/
n_cmd
);

444 
	`årštf
(
simFe
,"n_activity=%d dram_eff=%.4g\n",

445 
n_aùiv™y
, ()
bwut
/n_activity);

446 
i
=0;i<
m_cÚfig
->
nbk
;i++) {

447 
	`årštf
(
simFe
, "bk%d: %d¨%d˜",
i
,
bk
[i]->
n_acûss
,bk[i]->
n_idË
);

449 
	`årštf
(
simFe
, "\n");

450 
	`årštf
(
simFe
, "dram_util_bins:");

451 
i
=0;i<10;i++è
	`årštf
(
simFe
, " %d", 
d¿m_ut_bšs
[i]);

452 
	`årštf
(
simFe
, "\ndram_eff_bins:");

453 
i
=0;i<10;i++è
	`årštf
(
simFe
, " %d", 
d¿m_eff_bšs
[i]);

454 
	`årštf
(
simFe
, "\n");

455 if(
m_cÚfig
->
scheduËr_ty³
=ğ
DRAM_FRFCFS
)

456 
	`årštf
(
simFe
, "mrqq: max=%d‡vg=%g\n", 
max_mrqs
, ()
ave_mrqs
/
n_cmd
);

457 
	}
}

459 
	gd¿m_t
::
	$visu®ize
() const

461 
	`´štf
("RRDc=%d CCDc=%d mrqq.Length=%d„wq.Length=%d\n",

462 
RRDc
, 
CCDc
, 
mrqq
->
	`g‘_Ëngth
(),
rwq
->get_length());

463 
i
=0;i<
m_cÚfig
->
nbk
;i++) {

464 
	`´štf
("BK%d: state=%c curr_row=%03x, %2d %2d %2d %2d %p ",

465 
i
, 
bk
[i]->
¡©e
, bk[i]->
cu¼_row
,

466 
bk
[
i
]->
RCDc
, bk[i]->
RASc
,

467 
bk
[
i
]->
RPc
, bk[i]->
RCc
,

468 
bk
[
i
]->
mrq
 );

469 ià(
bk
[
i
]->
mrq
)

470 
	`´štf
("txf: %d %d", 
bk
[
i
]->
mrq
->
nby‹s
, bk[i]->mrq->
txby‹s
);

471 
	`´štf
("\n");

473 iàĞ
m_äfcfs_scheduËr
 )

474 
m_äfcfs_scheduËr
->
	`´št
(
¡dout
);

475 
	}
}

477 
	gd¿m_t
::
	$´št_¡©
Ğ
FILE
* 
simFe
 )

479 
	`årštf
(
simFe
,"DRAM (%d):‚_cmd=%d‚_nop=%d‚_act=%d‚_pre=%d‚_req=%d‚_rd=%d‚_write=%d bw_util=%.4g ",

480 
id
, 
n_cmd
, 
n_nİ
, 
n_aù
, 
n_´e
, 
n_»q
, 
n_rd
, 
n_wr
,

481 ()
bwut
/
n_cmd
);

482 
	`årštf
(
simFe
, "mrqq: %d %.4g mrqsmax=%d ", 
max_mrqs
, ()
ave_mrqs
/
n_cmd
, 
max_mrqs_‹mp
);

483 
	`årštf
(
simFe
, "\n");

484 
	`årštf
(
simFe
, "dram_util_bins:");

485 
i
=0;i<10;i++è
	`årštf
(
simFe
, " %d", 
d¿m_ut_bšs
[i]);

486 
	`årštf
(
simFe
, "\ndram_eff_bins:");

487 
i
=0;i<10;i++è
	`årštf
(
simFe
, " %d", 
d¿m_eff_bšs
[i]);

488 
	`årštf
(
simFe
, "\n");

489 
max_mrqs_‹mp
 = 0;

490 
	}
}

492 
	gd¿m_t
::
	$visu®iz”_´št
Ğ
gzFe
 
visu®iz”_fe
 )

495 
	`gz´štf
(
visu®iz”_fe
,"d¿mncmd: %u %u\n",
id
, 
n_cmd_·¹Ÿl
);

496 
	`gz´štf
(
visu®iz”_fe
,"d¿mnİ: %u %u\n",
id
,
n_nİ_·¹Ÿl
);

497 
	`gz´štf
(
visu®iz”_fe
,"d¿mÇù: %u %u\n",
id
,
n_aù_·¹Ÿl
);

498 
	`gz´štf
(
visu®iz”_fe
,"d¿mÅ»: %u %u\n",
id
,
n_´e_·¹Ÿl
);

499 
	`gz´štf
(
visu®iz”_fe
,"d¿mÄeq: %u %u\n",
id
,
n_»q_·¹Ÿl
);

500 
	`gz´štf
(
visu®iz”_fe
,"d¿mavemrqs: %u %u\n",
id
,

501 
n_cmd_·¹Ÿl
?(
ave_mrqs_·¹Ÿl
/n_cmd_partial ):0);

504 
	`gz´štf
(
visu®iz”_fe
,"dramutil: %u %u\n",

505 
id
,
n_cmd_·¹Ÿl
?100*
bwut_·¹Ÿl
/n_cmd_partial:0);

506 
	`gz´štf
(
visu®iz”_fe
,"drameff: %u %u\n",

507 
id
,
n_aùiv™y_·¹Ÿl
?100*
bwut_·¹Ÿl
/n_activity_partial:0);

510 
bwut_·¹Ÿl
 = 0;

511 
n_aùiv™y_·¹Ÿl
 = 0;

512 
ave_mrqs_·¹Ÿl
 = 0;

513 
n_cmd_·¹Ÿl
 = 0;

514 
n_nİ_·¹Ÿl
 = 0;

515 
n_aù_·¹Ÿl
 = 0;

516 
n_´e_·¹Ÿl
 = 0;

517 
n_»q_·¹Ÿl
 = 0;

520 
j
 = 0; j < 
m_cÚfig
->
nbk
; j++) {

521 
	`gz´štf
(
visu®iz”_fe
,"d¿mglob®_acc_r: %u %u %u\n", 
id
, 
j
,

522 
m_¡©s
->
mem_acûss_ty³_¡©s
[
GLOBAL_ACC_R
][
id
][
j
]);

523 
	`gz´štf
(
visu®iz”_fe
,"d¿mglob®_acc_w: %u %u %u\n", 
id
, 
j
,

524 
m_¡©s
->
mem_acûss_ty³_¡©s
[
GLOBAL_ACC_W
][
id
][
j
]);

525 
	`gz´štf
(
visu®iz”_fe
,"d¿mloÿl_acc_r: %u %u %u\n", 
id
, 
j
,

526 
m_¡©s
->
mem_acûss_ty³_¡©s
[
LOCAL_ACC_R
][
id
][
j
]);

527 
	`gz´štf
(
visu®iz”_fe
,"d¿mloÿl_acc_w: %u %u %u\n", 
id
, 
j
,

528 
m_¡©s
->
mem_acûss_ty³_¡©s
[
LOCAL_ACC_W
][
id
][
j
]);

529 
	`gz´štf
(
visu®iz”_fe
,"d¿mcÚ¡_acc_r: %u %u %u\n", 
id
, 
j
,

530 
m_¡©s
->
mem_acûss_ty³_¡©s
[
CONST_ACC_R
][
id
][
j
]);

531 
	`gz´štf
(
visu®iz”_fe
,"d¿m‹xtu»_acc_r: %u %u %u\n", 
id
, 
j
,

532 
m_¡©s
->
mem_acûss_ty³_¡©s
[
TEXTURE_ACC_R
][
id
][
j
]);

534 
	}
}

537 
	gd¿m_t
::
	$£t_d¿m_pow”_¡©s
Ğ&
cmd
,

538 &
aùiv™y
,

539 &
nİ
,

540 &
aù
,

541 &
´e
,

542 &
rd
,

543 &
wr
,

544 &
»q
) const{

547 
cmd
 = 
n_cmd
;

548 
aùiv™y
 = 
n_aùiv™y
;

549 
nİ
 = 
n_nİ
;

550 
aù
 = 
n_aù
;

551 
´e
 = 
n_´e
;

552 
rd
 = 
n_rd
;

553 
wr
 = 
n_wr
;

554 
»q
 = 
n_»q
;

555 
	}
}

	@dram.h

29 #iâdeà
DRAM_H


30 
	#DRAM_H


	)

32 
	~"d–ayqueue.h
"

33 
	~<£t
>

34 
	~<zlib.h
>

35 
	~<¡dio.h
>

36 
	~<¡dlib.h
>

38 
	#READ
 'R'

39 
	#WRITE
 'W'

	)

40 
	#BANK_IDLE
 'I'

	)

41 
	#BANK_ACTIVE
 'A'

	)

43 şas 
	cd¿m_»q_t
 {

44 
	mpublic
:

45 
d¿m_»q_t
Ğ
şass
 
mem_ãtch
 *
d©a
 );

47 
	mrow
;

48 
	mcŞ
;

49 
	mbk
;

50 
	mnby‹s
;

51 
	mtxby‹s
;

52 
	mdqby‹s
;

53 
	mage
;

54 
	mtime¡amp
;

55 
	mrw
;

56 
	maddr
;

57 
	mš£¹iÚ_time
;

58 
şass
 
mem_ãtch
 * 
	md©a
;

61 
	sbªkg½_t


63 
	mCCDLc
;

64 
	mRTPLc
;

67 
	sbªk_t


69 
	mRCDc
;

70 
	mRCDWRc
;

71 
	mRASc
;

72 
	mRPc
;

73 
	mRCc
;

74 
	mWTPc
;

75 
	mRTPc
;

77 
	mrw
;

78 
	m¡©e
;

79 
	mcu¼_row
;

81 
d¿m_»q_t
 *
	mmrq
;

83 
	mn_acûss
;

84 
	mn_wr™es
;

85 
	mn_idË
;

87 
	mbkg½šdex
;

90 
	gmem_ãtch
;

92 şas 
	cd¿m_t


94 
	mpublic
:

95 
d¿m_t
Ğ
·r™iÚ_id
, cÚ¡ 
memÜy_cÚfig
 *
cÚfig
, 
şass
 
memÜy_¡©s_t
 *
¡©s
,

96 
şass
 
memÜy_·¹™iÚ_un™
 *
mp
 );

98 
boŞ
 
	$fuÎ
() const;

99 
	$´št
Ğ
FILE
* 
simFe
 ) const;

100 
	$visu®ize
() const;

101 
	`´št_¡©
Ğ
FILE
* 
simFe
 );

102 
	$que_Ëngth
() const;

103 
boŞ
 
	$»tuºq_fuÎ
() const;

104 
	$queue_lim™
() const;

105 
	`visu®iz”_´št
Ğ
gzFe
 
visu®iz”_fe
 );

107 
şass
 
mem_ãtch
* 
	`»tuº_queue_pİ
();

108 
şass
 
mem_ãtch
* 
	`»tuº_queue_tİ
();

109 
	`push
Ğ
şass
 
mem_ãtch
 *
d©a
 );

110 
	`cyşe
();

111 
	`d¿m_log
 (
sk
);

113 
şass
 
memÜy_·¹™iÚ_un™
 *
m_memÜy_·¹™iÚ_un™
;

114 
id
;

117 
	$£t_d¿m_pow”_¡©s
(&
cmd
,

118 &
aùiv™y
,

119 &
nİ
,

120 &
aù
,

121 &
´e
,

122 &
rd
,

123 &
wr
,

124 &
»q
) const;

126 
´iv©e
:

127 
	`scheduËr_fifo
();

128 
	`scheduËr_äfcfs
();

130 cÚ¡ 
memÜy_cÚfig
 *
m_cÚfig
;

132 
bªkg½_t
 **
bkg½
;

134 
bªk_t
 **
bk
;

135 
´io
;

137 
RRDc
;

138 
CCDc
;

139 
RTWc
;

140 
WTRc
;

142 
rw
;

144 
³ndšg_wr™es
;

146 
fifo_p–še
<
d¿m_»q_t
> *
rwq
;

147 
fifo_p–še
<
d¿m_»q_t
> *
mrqq
;

150 
fifo_p–še
<
mem_ãtch
> *
»tuºq
;

152 
d¿m_ut_bšs
[10];

153 
d¿m_eff_bšs
[10];

154 
Ï¡_n_cmd
, 
Ï¡_n_aùiv™y
, 
Ï¡_bwut
;

156 
n_cmd
;

157 
n_aùiv™y
;

158 
n_nİ
;

159 
n_aù
;

160 
n_´e
;

161 
n_rd
;

162 
n_wr
;

163 
n_»q
;

164 
max_mrqs_‹mp
;

166 
bwut
;

167 
max_mrqs
;

168 
ave_mrqs
;

170 
şass
 
äfcfs_scheduËr
* 
m_äfcfs_scheduËr
;

172 
n_cmd_·¹Ÿl
;

173 
n_aùiv™y_·¹Ÿl
;

174 
n_nİ_·¹Ÿl
;

175 
n_aù_·¹Ÿl
;

176 
n_´e_·¹Ÿl
;

177 
n_»q_·¹Ÿl
;

178 
ave_mrqs_·¹Ÿl
;

179 
bwut_·¹Ÿl
;

181 
memÜy_¡©s_t
 *
m_¡©s
;

182 
şass
 
Sts
* 
mrqq_Di¡
;

184 
ä›nd
 
şass
 
äfcfs_scheduËr
;

	@dram_sched.cc

28 
	~"d¿m_sched.h
"

29 
	~"gpu-misc.h
"

30 
	~"gpu-sim.h
"

31 
	~"../ab¡¿ù_h¬dw¬e_mod–.h
"

32 
	~"mem_Ï‹ncy_¡©.h
"

34 
	gäfcfs_scheduËr
::
	$äfcfs_scheduËr
ĞcÚ¡ 
memÜy_cÚfig
 *
cÚfig
, 
d¿m_t
 *
dm
, 
memÜy_¡©s_t
 *
¡©s
 )

36 
m_cÚfig
 = 
cÚfig
;

37 
m_¡©s
 = 
¡©s
;

38 
m_num_³ndšg
 = 0;

39 
m_d¿m
 = 
dm
;

40 
m_queue
 = 
Ãw
 
¡d
::
li¡
<
d¿m_»q_t
*>[
m_cÚfig
->
nbk
];

41 
m_bšs
 = 
Ãw
 
¡d
::
m­
<,¡d::
li¡
<¡d::li¡<
d¿m_»q_t
*>::
™”©Ü
> >[ 
m_cÚfig
->
nbk
 ];

42 
m_Ï¡_row
 = 
Ãw
 
¡d
::
li¡
<¡d::li¡<
d¿m_»q_t
*>::
™”©Ü
>*[ 
m_cÚfig
->
nbk
 ];

43 
cu¼_row_£rviû_time
 = 
Ãw
 [
m_cÚfig
->
nbk
];

44 
row_£rviû_time¡amp
 = 
Ãw
 [
m_cÚfig
->
nbk
];

45  
i
=0; i < 
m_cÚfig
->
nbk
; i++ ) {

46 
m_queue
[
i
].
	`ş—r
();

47 
m_bšs
[
i
].
	`ş—r
();

48 
m_Ï¡_row
[
i
] = 
NULL
;

49 
cu¼_row_£rviû_time
[
i
] = 0;

50 
row_£rviû_time¡amp
[
i
] = 0;

53 
	}
}

55 
	gäfcfs_scheduËr
::
	$add_»q
Ğ
d¿m_»q_t
 *
»q
 )

57 
m_num_³ndšg
++;

58 
m_queue
[
»q
->
bk
].
	`push_äÚt
(req);

59 
¡d
::
li¡
<
d¿m_»q_t
*>::
™”©Ü
 
±r
 = 
m_queue
[
»q
->
bk
].
	`begš
();

60 
m_bšs
[
»q
->
bk
][»q->
row
].
	`push_äÚt
Ğ
±r
 );

61 
	}
}

63 
	gäfcfs_scheduËr
::
	$d©a_cŞËùiÚ
(
bªk
)

65 ià(
gpu_sim_cyşe
 > 
row_£rviû_time¡amp
[
bªk
]) {

66 
cu¼_row_£rviû_time
[
bªk
] = 
gpu_sim_cyşe
 - 
row_£rviû_time¡amp
[bank];

67 ià(
cu¼_row_£rviû_time
[
bªk
] > 
m_¡©s
->
max_£rviûtime2§m”ow
[
m_d¿m
->
id
][bank])

68 
m_¡©s
->
max_£rviûtime2§m”ow
[
m_d¿m
->
id
][
bªk
] = 
cu¼_row_£rviû_time
[bank];

70 
cu¼_row_£rviû_time
[
bªk
] = 0;

71 
row_£rviû_time¡amp
[
bªk
] = 
gpu_sim_cyşe
;

72 ià(
m_¡©s
->
cÚcu¼’t_row_acûss
[
m_d¿m
->
id
][
bªk
] > m_¡©s->
max_cÚc_acûss2§m”ow
[m_dram->id][bank]) {

73 
m_¡©s
->
max_cÚc_acûss2§m”ow
[
m_d¿m
->
id
][
bªk
] = m_¡©s->
cÚcu¼’t_row_acûss
[m_dram->id][bank];

75 
m_¡©s
->
cÚcu¼’t_row_acûss
[
m_d¿m
->
id
][
bªk
] = 0;

76 
m_¡©s
->
num_aùiv©es
[
m_d¿m
->
id
][
bªk
]++;

77 
	}
}

79 
d¿m_»q_t
 *
	gäfcfs_scheduËr
::
	$scheduË
Ğ
bªk
, 
cu¼_row
 )

81 iàĞ
m_Ï¡_row
[
bªk
] =ğ
NULL
 ) {

82 iàĞ
m_queue
[
bªk
].
	`em±y
() )

83  
NULL
;

85 
¡d
::
m­
<,¡d::
li¡
<¡d::li¡<
d¿m_»q_t
*>::
™”©Ü
> >::™”©Ü 
bš_±r
 = 
m_bšs
[
bªk
].
	`fšd
Ğ
cu¼_row
 );

86 iàĞ
bš_±r
 =ğ
m_bšs
[
bªk
].
	`’d
()) {

87 
d¿m_»q_t
 *
»q
 = 
m_queue
[
bªk
].
	`back
();

88 
bš_±r
 = 
m_bšs
[
bªk
].
	`fšd
Ğ
»q
->
row
 );

89 
	`as£¹
Ğ
bš_±r
 !ğ
m_bšs
[
bªk
].
	`’d
() );

90 
m_Ï¡_row
[
bªk
] = &(
bš_±r
->
£cÚd
);

91 
	`d©a_cŞËùiÚ
(
bªk
);

93 
m_Ï¡_row
[
bªk
] = &(
bš_±r
->
£cÚd
);

97 
¡d
::
li¡
<
d¿m_»q_t
*>::
™”©Ü
 
Ãxt
 = 
m_Ï¡_row
[
bªk
]->
	`back
();

98 
d¿m_»q_t
 *
»q
 = (*
Ãxt
);

100 
m_¡©s
->
cÚcu¼’t_row_acûss
[
m_d¿m
->
id
][
bªk
]++;

101 
m_¡©s
->
row_acûss
[
m_d¿m
->
id
][
bªk
]++;

102 
m_Ï¡_row
[
bªk
]->
	`pİ_back
();

104 
m_queue
[
bªk
].
	`”a£
(
Ãxt
);

105 iàĞ
m_Ï¡_row
[
bªk
]->
	`em±y
() ) {

106 
m_bšs
[
bªk
].
	`”a£
Ğ
»q
->
row
 );

107 
m_Ï¡_row
[
bªk
] = 
NULL
;

109 #ifdeà
DEBUG_FAST_IDEAL_SCHED


110 iàĞ
»q
 )

111 
	`´štf
("%08u : DRAM(%u) scheduling memory„equesto bank=%u,„ow=%u\n",

112 ()
gpu_sim_cyşe
, 
m_d¿m
->
id
, 
»q
->
bk
,„eq->
row
 );

114 
	`as£¹
Ğ
»q
 !ğ
NULL
 && 
m_num_³ndšg
 != 0 );

115 
m_num_³ndšg
--;

117  
»q
;

118 
	}
}

121 
	gäfcfs_scheduËr
::
	$´št
Ğ
FILE
 *
å
 )

123  
b
=0; b < 
m_cÚfig
->
nbk
; b++ ) {

124 
	`´štf
(" %u: queuËngth = %u\n", 
b
, ()
m_queue
[b].
	`size
() );

126 
	}
}

128 
	gd¿m_t
::
	$scheduËr_äfcfs
()

130 
mrq_Ï‹ncy
;

131 
äfcfs_scheduËr
 *
sched
 = 
m_äfcfs_scheduËr
;

132  !
mrqq
->
	`em±y
(è&& (!
m_cÚfig
->
gpgpu_äfcfs_d¿m_sched_queue_size
 || 
sched
->
	`num_³ndšg
() < m_config->gpgpu_frfcfs_dram_sched_queue_size)) {

133 
d¿m_»q_t
 *
»q
 = 
mrqq
->
	`pİ
();

137 
m_¡©s
->
tÙ®_n_acûss
++;

139 if(
»q
->
d©a
->
	`g‘_ty³
(è=ğ
WRITE_REQUEST
){

140 
m_¡©s
->
tÙ®_n_wr™es
++;

141 }if(
»q
->
d©a
->
	`g‘_ty³
(è=ğ
READ_REQUEST
){

142 
m_¡©s
->
tÙ®_n_»ads
++;

145 
»q
->
d©a
->
	`£t_¡©us
(
IN_PARTITION_MC_INPUT_QUEUE
,
gpu_sim_cyşe
+
gpu_tÙ_sim_cyşe
);

146 
sched
->
	`add_»q
(
»q
);

149 
d¿m_»q_t
 *
»q
;

150 
i
;

151  
i
=0; i < 
m_cÚfig
->
nbk
; i++ ) {

152 
b
 = (
i
+
´io
)%
m_cÚfig
->
nbk
;

153 iàĞ!
bk
[
b
]->
mrq
 ) {

155 
»q
 = 
sched
->
	`scheduË
(
b
, 
bk
[b]->
cu¼_row
);

157 iàĞ
»q
 ) {

158 
»q
->
d©a
->
	`£t_¡©us
(
IN_PARTITION_MC_BANK_ARB_QUEUE
,
gpu_sim_cyşe
+
gpu_tÙ_sim_cyşe
);

159 
´io
 = (´io+1)%
m_cÚfig
->
nbk
;

160 
bk
[
b
]->
mrq
 = 
»q
;

161 ià(
m_cÚfig
->
gpgpu_memÏ‹ncy_¡©
) {

162 
mrq_Ï‹ncy
 = 
gpu_sim_cyşe
 + 
gpu_tÙ_sim_cyşe
 - 
bk
[
b
]->
mrq
->
time¡amp
;

163 
bk
[
b
]->
mrq
->
time¡amp
 = 
gpu_tÙ_sim_cyşe
 + 
gpu_sim_cyşe
;

164 
m_¡©s
->
mrq_Ït_bË
[
	`LOGB2
(
mrq_Ï‹ncy
)]++;

165 ià(
mrq_Ï‹ncy
 > 
m_¡©s
->
max_mrq_Ï‹ncy
) {

166 
m_¡©s
->
max_mrq_Ï‹ncy
 = 
mrq_Ï‹ncy
;

174 
	}
}

	@dram_sched.h

28 #iâdeà
d¿m_sched_h_INCLUDED


29 
	#d¿m_sched_h_INCLUDED


	)

31 
	~"d¿m.h
"

32 
	~"shad”.h
"

33 
	~"gpu-sim.h
"

34 
	~"gpu-misc.h
"

35 
	~<li¡
>

36 
	~<m­
>

38 şas 
	cäfcfs_scheduËr
 {

39 
	mpublic
:

40 
äfcfs_scheduËr
ĞcÚ¡ 
memÜy_cÚfig
 *
cÚfig
, 
d¿m_t
 *
dm
, 
memÜy_¡©s_t
 *
¡©s
 );

41 
add_»q
Ğ
d¿m_»q_t
 *
»q
 );

42 
d©a_cŞËùiÚ
(
bªk
);

43 
d¿m_»q_t
 *
scheduË
Ğ
bªk
, 
cu¼_row
 );

44 
´št
Ğ
FILE
 *
å
 );

45 
	$num_³ndšg
(ècÚ¡ {  
m_num_³ndšg
;}

47 
´iv©e
:

48 cÚ¡ 
memÜy_cÚfig
 *
m_cÚfig
;

49 
d¿m_t
 *
m_d¿m
;

50 
m_num_³ndšg
;

51 
¡d
::
li¡
<
d¿m_»q_t
*> *
m_queue
;

52 
¡d
::
m­
<,¡d::
li¡
<¡d::li¡<
d¿m_»q_t
*>::
™”©Ü
> > *
m_bšs
;

53 
¡d
::
li¡
<¡d::li¡<
d¿m_»q_t
*>::
™”©Ü
> **
m_Ï¡_row
;

54 *
cu¼_row_£rviû_time
;

55 *
row_£rviû_time¡amp
;

57 
memÜy_¡©s_t
 *
m_¡©s
;

58 
	}
};

	@gpu-cache.cc

28 
	~"gpu-ÿche.h
"

29 
	~"¡©-toŞ.h
"

30 
	~<as£¹.h
>

32 
	#MAX_DEFAULT_CACHE_SIZE_MULTIBLIER
 4

	)

35 cÚ¡ * 
	$ÿche_»que¡_¡©us_¡r
(
ÿche_»que¡_¡©us
 
¡©us
)

37 cÚ¡ * 
¡©ic_ÿche_»que¡_¡©us_¡r
[] = {

44 
	`as£¹
((
¡©ic_ÿche_»que¡_¡©us_¡r
è/ (cÚ¡ *è=ğ
NUM_CACHE_REQUEST_STATUS
);

45 
	`as£¹
(
¡©us
 < 
NUM_CACHE_REQUEST_STATUS
);

47  
¡©ic_ÿche_»que¡_¡©us_¡r
[
¡©us
];

48 
	}
}

50 
	gl1d_ÿche_cÚfig
::
	$£t_šdex
(
Ãw_addr_ty³
 
addr
) const{

51 
£t_šdex
 = 
m_n£t
;

52 
low”_xÜ
 = 0;

53 
uµ”_xÜ
 = 0;

55 
m_£t_šdex_funùiÚ
){

56 
FERMI_HASH_SET_FUNCTION
:

62 if(
m_n£t
 == 32 || m_nset == 64){

64 
low”_xÜ
 = (
addr
 >> 
m_lše_sz_log2
) & 0x1F;

67 
uµ”_xÜ
 = (
addr
 & 0xE000) >> 13;

68 
uµ”_xÜ
 |ğ(
addr
 & 0x20000) >> 14;

69 
uµ”_xÜ
 |ğ(
addr
 & 0x80000) >> 15;

71 
£t_šdex
 = (
low”_xÜ
 ^ 
uµ”_xÜ
);

74 if(
m_n£t
 == 64)

75 
£t_šdex
 |ğ(
addr
 & 0x1000) >> 7;

78 
	`as£¹
("\nGPGPU-Sim cache configurationƒrror: The‚umber of sets should be "

83 
CUSTOM_SET_FUNCTION
:

87 
LINEAR_SET_FUNCTION
:

88 
£t_šdex
 = (
addr
 >> 
m_lše_sz_log2
è& (
m_n£t
-1);

93 
	`as£¹
((
£t_šdex
 < 
m_n£t
) && "\nError: Set index out of bounds. This is caused by "

96  
£t_šdex
;

97 
	}
}

99 
	gl2_ÿche_cÚfig
::
	$š™
(
lš—r_to_¿w_add»ss_Œª¦©iÚ
 *
add»ss_m­pšg
){

100 
ÿche_cÚfig
::
	`š™
(
m_cÚfig_¡ršg
,
FuncCacheP»ãrNÚe
);

101 
m_add»ss_m­pšg
 = 
add»ss_m­pšg
;

102 
	}
}

104 
	gl2_ÿche_cÚfig
::
	$£t_šdex
(
Ãw_addr_ty³
 
addr
) const{

105 if(!
m_add»ss_m­pšg
){

106 (
addr
 >> 
m_lše_sz_log2
è& (
m_n£t
-1);

109 
Ãw_addr_ty³
 
·¹_addr
 = 
m_add»ss_m­pšg
->
	`·¹™iÚ_add»ss
(
addr
);

110 (
·¹_addr
 >> 
m_lše_sz_log2
è& (
m_n£t
 -1);

112 
	}
}

114 
	gg_¬¿y
::~
	$g_¬¿y
()

116 
d–‘e
[] 
m_lšes
;

117 
	}
}

119 
	gg_¬¿y
::
	$g_¬¿y
Ğ
ÿche_cÚfig
 &
cÚfig
,

120 
cÜe_id
,

121 
ty³_id
,

122 
ÿche_block_t
* 
Ãw_lšes
)

123 : 
	`m_cÚfig
Ğ
cÚfig
 ),

124 
	$m_lšes
Ğ
Ãw_lšes
 )

126 
	`š™
Ğ
cÜe_id
, 
ty³_id
 );

127 
	}
}

129 
	gg_¬¿y
::
	$upd©e_ÿche_·¿m‘”s
(
ÿche_cÚfig
 &
cÚfig
)

131 
m_cÚfig
=
cÚfig
;

132 
	}
}

134 
	gg_¬¿y
::
	$g_¬¿y
Ğ
ÿche_cÚfig
 &
cÚfig
,

135 
cÜe_id
,

136 
ty³_id
 )

137 : 
	$m_cÚfig
Ğ
cÚfig
 )

140 
m_lšes
 = 
Ãw
 
ÿche_block_t
[
MAX_DEFAULT_CACHE_SIZE_MULTIBLIER
*
cÚfig
.
	`g‘_num_lšes
()];

141 
	`š™
Ğ
cÜe_id
, 
ty³_id
 );

142 
	}
}

144 
	gg_¬¿y
::
	$š™
Ğ
cÜe_id
, 
ty³_id
 )

146 
m_acûss
 = 0;

147 
m_miss
 = 0;

148 
m_³ndšg_h™
 = 0;

149 
m_»s_ç
 = 0;

151 
m_´ev_¢­shÙ_acûss
 = 0;

152 
m_´ev_¢­shÙ_miss
 = 0;

153 
m_´ev_¢­shÙ_³ndšg_h™
 = 0;

154 
m_cÜe_id
 = 
cÜe_id
;

155 
m_ty³_id
 = 
ty³_id
;

156 
	}
}

158 
ÿche_»que¡_¡©us
 
	gg_¬¿y
::
	$´obe
Ğ
Ãw_addr_ty³
 
addr
, &
idx
 ) const {

160 
£t_šdex
 = 
m_cÚfig
.
	`£t_šdex
(
addr
);

161 
Ãw_addr_ty³
 
g
 = 
m_cÚfig
.
	`g
(
addr
);

163 
šv®id_lše
 = ()-1;

164 
v®id_lše
 = ()-1;

165 
v®id_time¡amp
 = ()-1;

167 
boŞ
 
®l_»£rved
 = 
Œue
;

170 
way
=0; way<
m_cÚfig
.
m_assoc
; way++) {

171 
šdex
 = 
£t_šdex
*
m_cÚfig
.
m_assoc
+
way
;

172 
ÿche_block_t
 *
lše
 = &
m_lšes
[
šdex
];

173 ià(
lše
->
m_g
 =ğ
g
) {

174 iàĞ
lše
->
m_¡©us
 =ğ
RESERVED
 ) {

175 
idx
 = 
šdex
;

176  
HIT_RESERVED
;

177 } iàĞ
lše
->
m_¡©us
 =ğ
VALID
 ) {

178 
idx
 = 
šdex
;

179  
HIT
;

180 } iàĞ
lše
->
m_¡©us
 =ğ
MODIFIED
 ) {

181 
idx
 = 
šdex
;

182  
HIT
;

184 
	`as£¹
Ğ
lše
->
m_¡©us
 =ğ
INVALID
 );

187 ià(
lše
->
m_¡©us
 !ğ
RESERVED
) {

188 
®l_»£rved
 = 
çl£
;

189 ià(
lše
->
m_¡©us
 =ğ
INVALID
) {

190 
šv®id_lše
 = 
šdex
;

193 iàĞ
m_cÚfig
.
m_»¶aûm’t_pŞicy
 =ğ
LRU
 ) {

194 iàĞ
lše
->
m_Ï¡_acûss_time
 < 
v®id_time¡amp
 ) {

195 
v®id_time¡amp
 = 
lše
->
m_Ï¡_acûss_time
;

196 
v®id_lše
 = 
šdex
;

198 } iàĞ
m_cÚfig
.
m_»¶aûm’t_pŞicy
 =ğ
FIFO
 ) {

199 iàĞ
lše
->
m_®loc_time
 < 
v®id_time¡amp
 ) {

200 
v®id_time¡amp
 = 
lše
->
m_®loc_time
;

201 
v®id_lše
 = 
šdex
;

207 iàĞ
®l_»£rved
 ) {

208 
	`as£¹
Ğ
m_cÚfig
.
m_®loc_pŞicy
 =ğ
ON_MISS
 );

209  
RESERVATION_FAIL
;

212 iàĞ
šv®id_lše
 != ()-1 ) {

213 
idx
 = 
šv®id_lše
;

214 } iàĞ
v®id_lše
 != ()-1) {

215 
idx
 = 
v®id_lše
;

216 } 
	`abÜt
();

218  
MISS
;

219 
	}
}

221 
ÿche_»que¡_¡©us
 
	gg_¬¿y
::
	$acûss
Ğ
Ãw_addr_ty³
 
addr
, 
time
, &
idx
 )

223 
boŞ
 
wb
=
çl£
;

224 
ÿche_block_t
 
eviùed
;

225 
ÿche_»que¡_¡©us
 
»suÉ
 = 
	`acûss
(
addr
,
time
,
idx
,
wb
,
eviùed
);

226 
	`as£¹
(!
wb
);

227  
»suÉ
;

228 
	}
}

230 
ÿche_»que¡_¡©us
 
	gg_¬¿y
::
	$acûss
Ğ
Ãw_addr_ty³
 
addr
, 
time
, &
idx
, 
boŞ
 &
wb
, 
ÿche_block_t
 &
eviùed
 )

232 
m_acûss
++;

233 
	`shad”_ÿche_acûss_log
(
m_cÜe_id
, 
m_ty³_id
, 0);

234 
ÿche_»que¡_¡©us
 
¡©us
 = 
	`´obe
(
addr
,
idx
);

235 
¡©us
) {

236 
HIT_RESERVED
:

237 
m_³ndšg_h™
++;

238 
HIT
:

239 
m_lšes
[
idx
].
m_Ï¡_acûss_time
=
time
;

241 
MISS
:

242 
m_miss
++;

243 
	`shad”_ÿche_acûss_log
(
m_cÜe_id
, 
m_ty³_id
, 1);

244 iàĞ
m_cÚfig
.
m_®loc_pŞicy
 =ğ
ON_MISS
 ) {

245 ifĞ
m_lšes
[
idx
].
m_¡©us
 =ğ
MODIFIED
 ) {

246 
wb
 = 
Œue
;

247 
eviùed
 = 
m_lšes
[
idx
];

249 
m_lšes
[
idx
].
	`®loÿ‹
Ğ
m_cÚfig
.
	`g
(
addr
), m_cÚfig.
	`block_addr
×ddr), 
time
 );

252 
RESERVATION_FAIL
:

253 
m_»s_ç
++;

254 
	`shad”_ÿche_acûss_log
(
m_cÜe_id
, 
m_ty³_id
, 1);

257 
	`årštf
Ğ
¡d”r
, "tag_array::access - Error: Unknown"

258 "ÿche_»que¡_¡©u %d\n", 
¡©us
 );

259 
	`abÜt
();

261  
¡©us
;

262 
	}
}

264 
	gg_¬¿y
::
	$fl
Ğ
Ãw_addr_ty³
 
addr
, 
time
 )

266 
	`as£¹
Ğ
m_cÚfig
.
m_®loc_pŞicy
 =ğ
ON_FILL
 );

267 
idx
;

268 
ÿche_»que¡_¡©us
 
¡©us
 = 
	`´obe
(
addr
,
idx
);

269 
	`as£¹
(
¡©us
==
MISS
);

270 
m_lšes
[
idx
].
	`®loÿ‹
Ğ
m_cÚfig
.
	`g
(
addr
), m_cÚfig.
	`block_addr
×ddr), 
time
 );

271 
m_lšes
[
idx
].
	`fl
(
time
);

272 
	}
}

274 
	gg_¬¿y
::
	$fl
Ğ
šdex
, 
time
 )

276 
	`as£¹
Ğ
m_cÚfig
.
m_®loc_pŞicy
 =ğ
ON_MISS
 );

277 
m_lšes
[
šdex
].
	`fl
(
time
);

278 
	}
}

280 
	gg_¬¿y
::
	$æush
()

282 
i
=0; i < 
m_cÚfig
.
	`g‘_num_lšes
(); i++)

283 
m_lšes
[
i
].
m_¡©us
 = 
INVALID
;

284 
	}
}

286 
	gg_¬¿y
::
	$wšdowed_miss_¿‹
( ) const

288 
n_acûss
 = 
m_acûss
 - 
m_´ev_¢­shÙ_acûss
;

289 
n_miss
 = 
m_miss
 - 
m_´ev_¢­shÙ_miss
;

292 
mis¤©e
 = 0.0f;

293 ià(
n_acûss
 != 0)

294 
mis¤©e
 = (è
n_miss
 / 
n_acûss
;

295  
mis¤©e
;

296 
	}
}

298 
	gg_¬¿y
::
	$Ãw_wšdow
()

300 
m_´ev_¢­shÙ_acûss
 = 
m_acûss
;

301 
m_´ev_¢­shÙ_miss
 = 
m_miss
;

302 
m_´ev_¢­shÙ_³ndšg_h™
 = 
m_³ndšg_h™
;

303 
	}
}

305 
	gg_¬¿y
::
	$´št
Ğ
FILE
 *
¡»am
, &
tÙ®_acûss
, &
tÙ®_mis£s
 ) const

307 
m_cÚfig
.
	`´št
(
¡»am
);

308 
	`årštf
Ğ
¡»am
, "\t\tAccess = %d, Miss = %d (%.3g), PendingHit = %d (%.3g)\n",

309 
m_acûss
, 
m_miss
, () m_miss / m_access,

310 
m_³ndšg_h™
, (èm_³ndšg_h™ / 
m_acûss
);

311 
tÙ®_mis£s
+=
m_miss
;

312 
tÙ®_acûss
+=
m_acûss
;

313 
	}
}

315 
	gg_¬¿y
::
	$g‘_¡©s
(&
tÙ®_acûss
, &
tÙ®_mis£s
, &
tÙ®_h™_»s
, &
tÙ®_»s_ç
) const{

317 
tÙ®_acûss
 = 
m_acûss
;

318 
tÙ®_mis£s
 = 
m_miss
;

319 
tÙ®_h™_»s
 = 
m_³ndšg_h™
;

320 
tÙ®_»s_ç
 = 
m_»s_ç
;

321 
	}
}

324 
boŞ
 
was_wr™e_£Á
ĞcÚ¡ 
¡d
::
li¡
<
ÿche_ev’t
> &
ev’ts
 )

326  
¡d
::
li¡
<
ÿche_ev’t
>::
cÚ¡_™”©Ü
 
e
=
ev’ts
.
begš
(); 
	ge
!óv’ts.
’d
();ƒ++ ) {

327 ifĞ*
	ge
 =ğ
WRITE_REQUEST_SENT
 )

328  
Œue
;

330  
	gçl£
;

333 
boŞ
 
was_wr™eback_£Á
ĞcÚ¡ 
¡d
::
li¡
<
ÿche_ev’t
> &
ev’ts
 )

335  
¡d
::
li¡
<
ÿche_ev’t
>::
cÚ¡_™”©Ü
 
e
=
ev’ts
.
begš
(); 
	ge
!óv’ts.
’d
();ƒ++ ) {

336 ifĞ*
	ge
 =ğ
WRITE_BACK_REQUEST_SENT
 )

337  
Œue
;

339  
	gçl£
;

342 
boŞ
 
was_»ad_£Á
ĞcÚ¡ 
¡d
::
li¡
<
ÿche_ev’t
> &
ev’ts
 )

344  
¡d
::
li¡
<
ÿche_ev’t
>::
cÚ¡_™”©Ü
 
e
=
ev’ts
.
begš
(); 
	ge
!óv’ts.
’d
();ƒ++ ) {

345 ifĞ*
	ge
 =ğ
READ_REQUEST_SENT
 )

346  
Œue
;

348  
	gçl£
;

353 
boŞ
 
	gmshr_bË
::
	$´obe
Ğ
Ãw_addr_ty³
 
block_addr
 ) const{

354 
bË
::
cÚ¡_™”©Ü
 
a
 = 
m_d©a
.
	`fšd
(
block_addr
);

355  
a
 !ğ
m_d©a
.
	`’d
();

356 
	}
}

359 
boŞ
 
	gmshr_bË
::
	$fuÎ
Ğ
Ãw_addr_ty³
 
block_addr
 ) const{

360 
bË
::
cÚ¡_™”©Ü
 
i
=
m_d©a
.
	`fšd
(
block_addr
);

361 iàĞ
i
 !ğ
m_d©a
.
	`’d
() )

362  
i
->
£cÚd
.
m_li¡
.
	`size
(è>ğ
m_max_m”ged
;

364  
m_d©a
.
	`size
(è>ğ
m_num_’Œ›s
;

365 
	}
}

368 
	gmshr_bË
::
	$add
Ğ
Ãw_addr_ty³
 
block_addr
, 
mem_ãtch
 *
mf
 ){

369 
m_d©a
[
block_addr
].
m_li¡
.
	`push_back
(
mf
);

370 
	`as£¹
Ğ
m_d©a
.
	`size
(è<ğ
m_num_’Œ›s
 );

371 
	`as£¹
Ğ
m_d©a
[
block_addr
].
m_li¡
.
	`size
(è<ğ
m_max_m”ged
 );

373 iàĞ
mf
->
	`i§tomic
() ) {

374 
m_d©a
[
block_addr
].
m_has_©omic
 = 
Œue
;

376 
	}
}

379 
	gmshr_bË
::
	$m¬k_»ady
Ğ
Ãw_addr_ty³
 
block_addr
, 
boŞ
 &
has_©omic
 ){

380 
	`as£¹
Ğ!
	`busy
() );

381 
bË
::
™”©Ü
 
a
 = 
m_d©a
.
	`fšd
(
block_addr
);

382 
	`as£¹
Ğ
a
 !ğ
m_d©a
.
	`’d
() );

383 
m_cu¼’t_»¥Ú£
.
	`push_back
Ğ
block_addr
 );

384 
has_©omic
 = 
a
->
£cÚd
.
m_has_©omic
;

385 
	`as£¹
Ğ
m_cu¼’t_»¥Ú£
.
	`size
(è<ğ
m_d©a
.size() );

386 
	}
}

389 
mem_ãtch
 *
	gmshr_bË
::
	$Ãxt_acûss
(){

390 
	`as£¹
Ğ
	`acûss_»ady
() );

391 
Ãw_addr_ty³
 
block_addr
 = 
m_cu¼’t_»¥Ú£
.
	`äÚt
();

392 
	`as£¹
Ğ!
m_d©a
[
block_addr
].
m_li¡
.
	`em±y
() );

393 
mem_ãtch
 *
»suÉ
 = 
m_d©a
[
block_addr
].
m_li¡
.
	`äÚt
();

394 
m_d©a
[
block_addr
].
m_li¡
.
	`pİ_äÚt
();

395 iàĞ
m_d©a
[
block_addr
].
m_li¡
.
	`em±y
() ) {

397 
m_d©a
.
	`”a£
(
block_addr
);

398 
m_cu¼’t_»¥Ú£
.
	`pİ_äÚt
();

400  
»suÉ
;

401 
	}
}

403 
	gmshr_bË
::
	$di¥Ïy
Ğ
FILE
 *
å
 ) const{

404 
	`årštf
(
å
,"MSHR contents\n");

405  
bË
::
cÚ¡_™”©Ü
 
e
=
m_d©a
.
	`begš
();ƒ!=m_d©a.
	`’d
(); ++e ) {

406 
block_addr
 = 
e
->
fœ¡
;

407 
	`årštf
(
å
,"MSHR:ag=0x%06x,‡tomic=%d %zuƒÁr› : ", 
block_addr
, 
e
->
£cÚd
.
m_has_©omic
,ƒ->£cÚd.
m_li¡
.
	`size
());

408 iàĞ!
e
->
£cÚd
.
m_li¡
.
	`em±y
() ) {

409 
mem_ãtch
 *
mf
 = 
e
->
£cÚd
.
m_li¡
.
	`äÚt
();

410 
	`årštf
(
å
,"%°:",
mf
);

411 
mf
->
	`´št
(
å
);

413 
	`årštf
(
å
,"‚o memory„equests???\n");

416 
	}
}

418 
	gÿche_¡©s
::
	$ÿche_¡©s
(){

419 
m_¡©s
.
	`»size
(
NUM_MEM_ACCESS_TYPE
);

420 
i
=0; i<
NUM_MEM_ACCESS_TYPE
; ++i){

421 
m_¡©s
[
i
].
	`»size
(
NUM_CACHE_REQUEST_STATUS
, 0);

423 
m_ÿche_pÜt_avaabË_cyşes
 = 0;

424 
m_ÿche_d©a_pÜt_busy_cyşes
 = 0;

425 
m_ÿche_fl_pÜt_busy_cyşes
 = 0;

426 
	}
}

428 
	gÿche_¡©s
::
	$ş—r
(){

432 
i
=0; i<
NUM_MEM_ACCESS_TYPE
; ++i){

433 
¡d
::
	`fl
(
m_¡©s
[
i
].
	`begš
(), m_¡©s[i].
	`’d
(), 0);

435 
m_ÿche_pÜt_avaabË_cyşes
 = 0;

436 
m_ÿche_d©a_pÜt_busy_cyşes
 = 0;

437 
m_ÿche_fl_pÜt_busy_cyşes
 = 0;

438 
	}
}

440 
	gÿche_¡©s
::
	$šc_¡©s
(
acûss_ty³
, 
acûss_outcome
){

444 if(!
	`check_v®id
(
acûss_ty³
, 
acûss_outcome
))

445 
	`as£¹
(0 && "Unknown cache‡ccessype or‡ccess outcome");

447 
m_¡©s
[
acûss_ty³
][
acûss_outcome
]++;

448 
	}
}

450 
ÿche_»que¡_¡©us
 
	gÿche_¡©s
::
	$£Ëù_¡©s_¡©us
(
ÿche_»que¡_¡©us
 
´obe
, ÿche_»que¡_¡©u 
acûss
) const {

455 if(
´obe
 =ğ
HIT_RESERVED
 && 
acûss
 !ğ
RESERVATION_FAIL
)

456  
´obe
;

458  
acûss
;

459 
	}
}

461 &
	gÿche_¡©s
::
	$İ”©Ü
()(
acûss_ty³
, 
acûss_outcome
){

466 if(!
	`check_v®id
(
acûss_ty³
, 
acûss_outcome
))

467 
	`as£¹
(0 && "Unknown cache‡ccessype or‡ccess outcome");

469  
m_¡©s
[
acûss_ty³
][
acûss_outcome
];

470 
	}
}

472 
	gÿche_¡©s
::
	$İ”©Ü
()(
acûss_ty³
, 
acûss_outcome
) const{

476 if(!
	`check_v®id
(
acûss_ty³
, 
acûss_outcome
))

477 
	`as£¹
(0 && "Unknown cache‡ccessype or‡ccess outcome");

479  
m_¡©s
[
acûss_ty³
][
acûss_outcome
];

480 
	}
}

482 
ÿche_¡©s
 
	gÿche_¡©s
::
İ”©Ü
+(cÚ¡ cache_¡© &
cs
){

486 
ÿche_¡©s
 
»t
;

487 
	gty³
=0;y³<
	gNUM_MEM_ACCESS_TYPE
; ++type){

488 
	g¡©us
=0; stus<
	gNUM_CACHE_REQUEST_STATUS
; ++status){

489 
»t
(
ty³
, 
¡©us
èğ
m_¡©s
[ty³][¡©us] + 
cs
(type, status);

492 
	g»t
.
	gm_ÿche_pÜt_avaabË_cyşes
 = 
m_ÿche_pÜt_avaabË_cyşes
 + 
cs
.m_cache_port_available_cycles;

493 
	g»t
.
	gm_ÿche_d©a_pÜt_busy_cyşes
 = 
m_ÿche_d©a_pÜt_busy_cyşes
 + 
cs
.m_cache_data_port_busy_cycles;

494 
	g»t
.
	gm_ÿche_fl_pÜt_busy_cyşes
 = 
m_ÿche_fl_pÜt_busy_cyşes
 + 
cs
.m_cache_fill_port_busy_cycles;

495  
	g»t
;

498 
	gÿche_¡©s
 &ÿche_¡©s::
İ”©Ü
+=(cÚ¡ 
ÿche_¡©s
 &
cs
){

502 
ty³
=0; 
	gty³
<
	gNUM_MEM_ACCESS_TYPE
; ++type){

503 
	g¡©us
=0; stus<
	gNUM_CACHE_REQUEST_STATUS
; ++status){

504 
	gm_¡©s
[
ty³
][
¡©us
] +ğ
cs
(type, status);

507 
	gm_ÿche_pÜt_avaabË_cyşes
 +ğ
cs
.
m_ÿche_pÜt_avaabË_cyşes
;

508 
	gm_ÿche_d©a_pÜt_busy_cyşes
 +ğ
cs
.
m_ÿche_d©a_pÜt_busy_cyşes
;

509 
	gm_ÿche_fl_pÜt_busy_cyşes
 +ğ
cs
.
m_ÿche_fl_pÜt_busy_cyşes
;

510  *
	gthis
;

513 
	gÿche_¡©s
::
	$´št_¡©s
(
FILE
 *
fout
, cÚ¡ *
ÿche_Çme
) const{

520 
¡d
::
¡ršg
 
m_ÿche_Çme
 = 
ÿche_Çme
;

521 
ty³
 = 0;y³ < 
NUM_MEM_ACCESS_TYPE
; ++type) {

522 
¡©us
 = 0; stu < 
NUM_CACHE_REQUEST_STATUS
; ++status) {

523 if(
m_¡©s
[
ty³
][
¡©us
] > 0){

524 
	`årštf
(
fout
, "\t%s[%s][%s] = %u\n",

525 
m_ÿche_Çme
.
	`c_¡r
(),

526 
	`mem_acûss_ty³_¡r
((
mem_acûss_ty³
)
ty³
),

527 
	`ÿche_»que¡_¡©us_¡r
((
ÿche_»que¡_¡©us
)
¡©us
),

528 
m_¡©s
[
ty³
][
¡©us
]);

532 
	}
}

534 
	gÿche_sub_¡©s
::
	$´št_pÜt_¡©s
(
FILE
 *
fout
, cÚ¡ *
ÿche_Çme
) const

536 
d©a_pÜt_ut
 = 0.0f;

537 ià(
pÜt_avaabË_cyşes
 > 0) {

538 
d©a_pÜt_ut
 = (è
d©a_pÜt_busy_cyşes
 / 
pÜt_avaabË_cyşes
;

540 
	`årštf
(
fout
, "%s_d©a_pÜt_ut = %.3f\n", 
ÿche_Çme
, 
d©a_pÜt_ut
);

541 
fl_pÜt_ut
 = 0.0f;

542 ià(
pÜt_avaabË_cyşes
 > 0) {

543 
fl_pÜt_ut
 = (è
fl_pÜt_busy_cyşes
 / 
pÜt_avaabË_cyşes
;

545 
	`årštf
(
fout
, "%s_fl_pÜt_ut = %.3f\n", 
ÿche_Çme
, 
fl_pÜt_ut
);

546 
	}
}

548 
	gÿche_¡©s
::
	$g‘_¡©s
(
mem_acûss_ty³
 *
acûss_ty³
, 
num_acûss_ty³
, 
ÿche_»que¡_¡©us
 *
acûss_¡©us
, 
num_acûss_¡©us
) const{

554 
tÙ®
=0;

555 
ty³
 =0;y³ < 
num_acûss_ty³
; ++type){

556 
¡©us
=0; stu < 
num_acûss_¡©us
; ++status){

557 if(!
	`check_v®id
(()
acûss_ty³
[
ty³
], ()
acûss_¡©us
[
¡©us
]))

558 
	`as£¹
(0 && "Unknown cache‡ccessype or‡ccess outcome");

559 
tÙ®
 +ğ
m_¡©s
[
acûss_ty³
[
ty³
]][
acûss_¡©us
[
¡©us
]];

562  
tÙ®
;

563 
	}
}

564 
	gÿche_¡©s
::
	$g‘_sub_¡©s
(
ÿche_sub_¡©s
 &
css
) const{

568 
ÿche_sub_¡©s
 
t_css
;

569 
t_css
.
	`ş—r
();

571 
ty³
 = 0;y³ < 
NUM_MEM_ACCESS_TYPE
; ++type) {

572 
¡©us
 = 0; stu < 
NUM_CACHE_REQUEST_STATUS
; ++status) {

573 if(
¡©us
 =ğ
HIT
 || stu =ğ
MISS
 || stu =ğ
HIT_RESERVED
)

574 
t_css
.
acûs£s
 +ğ
m_¡©s
[
ty³
][
¡©us
];

576 if(
¡©us
 =ğ
MISS
)

577 
t_css
.
mis£s
 +ğ
m_¡©s
[
ty³
][
¡©us
];

579 if(
¡©us
 =ğ
HIT_RESERVED
)

580 
t_css
.
³ndšg_h™s
 +ğ
m_¡©s
[
ty³
][
¡©us
];

582 if(
¡©us
 =ğ
RESERVATION_FAIL
)

583 
t_css
.
»s_çs
 +ğ
m_¡©s
[
ty³
][
¡©us
];

587 
t_css
.
pÜt_avaabË_cyşes
 = 
m_ÿche_pÜt_avaabË_cyşes
;

588 
t_css
.
d©a_pÜt_busy_cyşes
 = 
m_ÿche_d©a_pÜt_busy_cyşes
;

589 
t_css
.
fl_pÜt_busy_cyşes
 = 
m_ÿche_fl_pÜt_busy_cyşes
;

591 
css
 = 
t_css
;

592 
	}
}

594 
boŞ
 
	gÿche_¡©s
::
	$check_v®id
(
ty³
, 
¡©us
) const{

598 if((
ty³
 >ğ0è&& (ty³ < 
NUM_MEM_ACCESS_TYPE
è&& (
¡©us
 >ğ0è&& (¡©u < 
NUM_CACHE_REQUEST_STATUS
))

599  
Œue
;

601  
çl£
;

602 
	}
}

604 
	gÿche_¡©s
::
	$§m¶e_ÿche_pÜt_ut™y
(
boŞ
 
d©a_pÜt_busy
, boŞ 
fl_pÜt_busy
)

606 
m_ÿche_pÜt_avaabË_cyşes
 += 1;

607 ià(
d©a_pÜt_busy
) {

608 
m_ÿche_d©a_pÜt_busy_cyşes
 += 1;

610 ià(
fl_pÜt_busy
) {

611 
m_ÿche_fl_pÜt_busy_cyşes
 += 1;

613 
	}
}

615 
	gba£lše_ÿche
::
bªdwidth_mªagem’t
::
	$bªdwidth_mªagem’t
(
ÿche_cÚfig
 &
cÚfig
)

616 : 
	$m_cÚfig
(
cÚfig
)

618 
m_d©a_pÜt_occup›d_cyşes
 = 0;

619 
m_fl_pÜt_occup›d_cyşes
 = 0;

620 
	}
}

623 
	gba£lše_ÿche
::
bªdwidth_mªagem’t
::
u£_d©a_pÜt
(
mem_ãtch
 *
mf
, 
ÿche_»que¡_¡©us
 
outcome
, cÚ¡ 
¡d
::
li¡
<
ÿche_ev’t
> &
ev’ts
)

625 
d©a_size
 = 
mf
->
g‘_d©a_size
();

626 
	gpÜt_width
 = 
m_cÚfig
.
m_d©a_pÜt_width
;

627 
	goutcome
) {

628 
	gHIT
: {

629 
d©a_cyşes
 = 
d©a_size
 / 
pÜt_width
 + ((data_size %…ort_width > 0)? 1 : 0);

630 
	gm_d©a_pÜt_occup›d_cyşes
 +ğ
d©a_cyşes
;

632 
	gHIT_RESERVED
:

633 
MISS
: {

635 ià(
was_wr™eback_£Á
(
ev’ts
)) {

636 
d©a_cyşes
 = 
m_cÚfig
.
m_lše_sz
 / 
pÜt_width
;

637 
	gm_d©a_pÜt_occup›d_cyşes
 +ğ
d©a_cyşes
;

640 
	gRESERVATION_FAIL
:

644 
as£¹
(0);

650 
	gba£lše_ÿche
::
bªdwidth_mªagem’t
::
	$u£_fl_pÜt
(
mem_ãtch
 *
mf
)

653 
fl_cyşes
 = 
m_cÚfig
.
m_lše_sz
 / m_cÚfig.
m_d©a_pÜt_width
;

654 
m_fl_pÜt_occup›d_cyşes
 +ğ
fl_cyşes
;

655 
	}
}

658 
	gba£lše_ÿche
::
bªdwidth_mªagem’t
::
	$»¶’ish_pÜt_bªdwidth
()

660 ià(
m_d©a_pÜt_occup›d_cyşes
 > 0) {

661 
m_d©a_pÜt_occup›d_cyşes
 -= 1;

663 
	`as£¹
(
m_d©a_pÜt_occup›d_cyşes
 >= 0);

665 ià(
m_fl_pÜt_occup›d_cyşes
 > 0) {

666 
m_fl_pÜt_occup›d_cyşes
 -= 1;

668 
	`as£¹
(
m_fl_pÜt_occup›d_cyşes
 >= 0);

669 
	}
}

672 
boŞ
 
	gba£lše_ÿche
::
bªdwidth_mªagem’t
::
	$d©a_pÜt_ä“
() const

674  (
m_d©a_pÜt_occup›d_cyşes
 == 0);

675 
	}
}

678 
boŞ
 
	gba£lše_ÿche
::
bªdwidth_mªagem’t
::
	$fl_pÜt_ä“
() const

680  (
m_fl_pÜt_occup›d_cyşes
 == 0);

681 
	}
}

684 
	gba£lše_ÿche
::
	$cyşe
(){

685 iàĞ!
m_miss_queue
.
	`em±y
() ) {

686 
mem_ãtch
 *
mf
 = 
m_miss_queue
.
	`äÚt
();

687 iàĞ!
m_mempÜt
->
	`fuÎ
(
mf
->
	`size
(),mf->
	`g‘_is_wr™e
()) ) {

688 
m_miss_queue
.
	`pİ_äÚt
();

689 
m_mempÜt
->
	`push
(
mf
);

692 
boŞ
 
d©a_pÜt_busy
 = !
m_bªdwidth_mªagem’t
.
	`d©a_pÜt_ä“
();

693 
boŞ
 
fl_pÜt_busy
 = !
m_bªdwidth_mªagem’t
.
	`fl_pÜt_ä“
();

694 
m_¡©s
.
	`§m¶e_ÿche_pÜt_ut™y
(
d©a_pÜt_busy
, 
fl_pÜt_busy
);

695 
m_bªdwidth_mªagem’t
.
	`»¶’ish_pÜt_bªdwidth
();

696 
	}
}

699 
	gba£lše_ÿche
::
	$fl
(
mem_ãtch
 *
mf
, 
time
){

700 
exŒa_mf_f›lds_lookup
::
™”©Ü
 
e
 = 
m_exŒa_mf_f›lds
.
	`fšd
(
mf
);

701 
	`as£¹
Ğ
e
 !ğ
m_exŒa_mf_f›lds
.
	`’d
() );

702 
	`as£¹
Ğ
e
->
£cÚd
.
m_v®id
 );

703 
mf
->
	`£t_d©a_size
Ğ
e
->
£cÚd
.
m_d©a_size
 );

704 iàĞ
m_cÚfig
.
m_®loc_pŞicy
 =ğ
ON_MISS
 )

705 
m_g_¬¿y
->
	`fl
(
e
->
£cÚd
.
m_ÿche_šdex
,
time
);

706 iàĞ
m_cÚfig
.
m_®loc_pŞicy
 =ğ
ON_FILL
 )

707 
m_g_¬¿y
->
	`fl
(
e
->
£cÚd
.
m_block_addr
,
time
);

708 
	`abÜt
();

709 
boŞ
 
has_©omic
 = 
çl£
;

710 
m_mshrs
.
	`m¬k_»ady
(
e
->
£cÚd
.
m_block_addr
, 
has_©omic
);

711 ià(
has_©omic
) {

712 
	`as£¹
(
m_cÚfig
.
m_®loc_pŞicy
 =ğ
ON_MISS
);

713 
ÿche_block_t
 &
block
 = 
m_g_¬¿y
->
	`g‘_block
(
e
->
£cÚd
.
m_ÿche_šdex
);

714 
block
.
m_¡©us
 = 
MODIFIED
;

716 
m_exŒa_mf_f›lds
.
	`”a£
(
mf
);

717 
m_bªdwidth_mªagem’t
.
	`u£_fl_pÜt
(
mf
);

718 
	}
}

721 
boŞ
 
	gba£lše_ÿche
::
	$wa™šg_fÜ_fl
Ğ
mem_ãtch
 *
mf
 ){

722 
exŒa_mf_f›lds_lookup
::
™”©Ü
 
e
 = 
m_exŒa_mf_f›lds
.
	`fšd
(
mf
);

723  
e
 !ğ
m_exŒa_mf_f›lds
.
	`’d
();

724 
	}
}

726 
	gba£lše_ÿche
::
	$´št
(
FILE
 *
å
, &
acûs£s
, &
mis£s
) const{

727 
	`årštf
Ğ
å
, "Cach%s:\t", 
m_Çme
.
	`c_¡r
() );

728 
m_g_¬¿y
->
	`´št
(
å
,
acûs£s
,
mis£s
);

729 
	}
}

731 
	gba£lše_ÿche
::
	$di¥Ïy_¡©e
Ğ
FILE
 *
å
 ) const{

732 
	`årštf
(
å
,"Cach%s:\n", 
m_Çme
.
	`c_¡r
() );

733 
m_mshrs
.
	`di¥Ïy
(
å
);

734 
	`årštf
(
å
,"\n");

735 
	}
}

738 
	gba£lše_ÿche
::
£nd_»ad_»que¡
(
Ãw_addr_ty³
 
addr
,‚ew_addr_ty³ 
block_addr
, 
ÿche_šdex
, 
mem_ãtch
 *
mf
,

739 
time
, 
boŞ
 &
do_miss
, 
¡d
::
li¡
<
ÿche_ev’t
> &
ev’ts
, boŞ 
»ad_Úly
, boŞ 
wa
){

741 
boŞ
 
	gwb
=
çl£
;

742 
ÿche_block_t
 
	ge
;

743 
£nd_»ad_»que¡
(
addr
, 
block_addr
, 
ÿche_šdex
, 
mf
, 
time
, 
do_miss
, 
wb
, 
e
, 
ev’ts
, 
»ad_Úly
, 
wa
);

747 
	gba£lše_ÿche
::
£nd_»ad_»que¡
(
Ãw_addr_ty³
 
addr
,‚ew_addr_ty³ 
block_addr
, 
ÿche_šdex
, 
mem_ãtch
 *
mf
,

748 
time
, 
boŞ
 &
do_miss
, boŞ &
wb
, 
ÿche_block_t
 &
eviùed
, 
¡d
::
li¡
<
ÿche_ev’t
> &
ev’ts
, boŞ 
»ad_Úly
, boŞ 
wa
){

750 
boŞ
 
	gmshr_h™
 = 
m_mshrs
.
´obe
(
block_addr
);

751 
boŞ
 
	gmshr_ava
 = !
m_mshrs
.
fuÎ
(
block_addr
);

752 iàĞ
	gmshr_h™
 && 
	gmshr_ava
 ) {

753 if(
	g»ad_Úly
)

754 
	gm_g_¬¿y
->
acûss
(
block_addr
,
time
,
ÿche_šdex
);

756 
	gm_g_¬¿y
->
acûss
(
block_addr
,
time
,
ÿche_šdex
,
wb
,
eviùed
);

758 
	gm_mshrs
.
add
(
block_addr
,
mf
);

759 
	gdo_miss
 = 
Œue
;

760 } iàĞ!
	gmshr_h™
 && 
	gmshr_ava
 && (
	gm_miss_queue
.
size
(è< 
	gm_cÚfig
.
	gm_miss_queue_size
) ) {

761 if(
	g»ad_Úly
)

762 
	gm_g_¬¿y
->
acûss
(
block_addr
,
time
,
ÿche_šdex
);

764 
	gm_g_¬¿y
->
acûss
(
block_addr
,
time
,
ÿche_šdex
,
wb
,
eviùed
);

766 
	gm_mshrs
.
add
(
block_addr
,
mf
);

767 
	gm_exŒa_mf_f›lds
[
mf
] = 
exŒa_mf_f›lds
(
block_addr
,
ÿche_šdex
, mf->
g‘_d©a_size
());

768 
	gmf
->
£t_d©a_size
Ğ
m_cÚfig
.
g‘_lše_sz
() );

769 
	gm_miss_queue
.
push_back
(
mf
);

770 
	gmf
->
£t_¡©us
(
m_miss_queue_¡©us
,
time
);

771 if(!
	gwa
)

772 
	gev’ts
.
push_back
(
READ_REQUEST_SENT
);

773 
	gdo_miss
 = 
Œue
;

779 
	gd©a_ÿche
::
£nd_wr™e_»que¡
(
mem_ãtch
 *
mf
, 
ÿche_ev’t
 
»que¡
, 
time
, 
¡d
::
li¡
<ÿche_ev’t> &
ev’ts
){

780 
ev’ts
.
push_back
(
»que¡
);

781 
	gm_miss_queue
.
push_back
(
mf
);

782 
	gmf
->
£t_¡©us
(
m_miss_queue_¡©us
,
time
);

789 
ÿche_»que¡_¡©us
 
	gd©a_ÿche
::
wr_h™_wb
(
Ãw_addr_ty³
 
addr
, 
ÿche_šdex
, 
mem_ãtch
 *
mf
, 
time
, 
¡d
::
li¡
<
ÿche_ev’t
> &
ev’ts
, ÿche_»que¡_¡©u 
¡©us
 ){

790 
Ãw_addr_ty³
 
	gblock_addr
 = 
m_cÚfig
.
block_addr
(
addr
);

791 
	gm_g_¬¿y
->
acûss
(
block_addr
,
time
,
ÿche_šdex
);

792 
	gÿche_block_t
 &
	gblock
 = 
m_g_¬¿y
->
g‘_block
(
ÿche_šdex
);

793 
	gblock
.
	gm_¡©us
 = 
MODIFIED
;

795  
	gHIT
;

799 
ÿche_»que¡_¡©us
 
	gd©a_ÿche
::
wr_h™_wt
(
Ãw_addr_ty³
 
addr
, 
ÿche_šdex
, 
mem_ãtch
 *
mf
, 
time
, 
¡d
::
li¡
<
ÿche_ev’t
> &
ev’ts
, ÿche_»que¡_¡©u 
¡©us
 ){

800 if(
miss_queue_fuÎ
(0))

801  
	gRESERVATION_FAIL
;

803 
Ãw_addr_ty³
 
	gblock_addr
 = 
m_cÚfig
.
block_addr
(
addr
);

804 
	gm_g_¬¿y
->
acûss
(
block_addr
,
time
,
ÿche_šdex
);

805 
	gÿche_block_t
 &
	gblock
 = 
m_g_¬¿y
->
g‘_block
(
ÿche_šdex
);

806 
	gblock
.
	gm_¡©us
 = 
MODIFIED
;

809 
£nd_wr™e_»que¡
(
mf
, 
WRITE_REQUEST_SENT
, 
time
, 
ev’ts
);

811  
	gHIT
;

815 
ÿche_»que¡_¡©us
 
	gd©a_ÿche
::
wr_h™_we
(
Ãw_addr_ty³
 
addr
, 
ÿche_šdex
, 
mem_ãtch
 *
mf
, 
time
, 
¡d
::
li¡
<
ÿche_ev’t
> &
ev’ts
, ÿche_»que¡_¡©u 
¡©us
 ){

816 if(
miss_queue_fuÎ
(0))

817  
	gRESERVATION_FAIL
;

820 
	gÿche_block_t
 &
	gblock
 = 
m_g_¬¿y
->
g‘_block
(
ÿche_šdex
);

821 
£nd_wr™e_»que¡
(
mf
, 
WRITE_REQUEST_SENT
, 
time
, 
ev’ts
);

824 
	gblock
.
	gm_¡©us
 = 
INVALID
;

826  
	gHIT
;

830 
ÿche_»que¡_¡©us
 
	gd©a_ÿche
::
wr_h™_glob®_we_loÿl_wb
(
Ãw_addr_ty³
 
addr
, 
ÿche_šdex
, 
mem_ãtch
 *
mf
, 
time
, 
¡d
::
li¡
<
ÿche_ev’t
> &
ev’ts
, ÿche_»que¡_¡©u 
¡©us
 ){

831 
boŞ
 
	geviù
 = (
mf
->
g‘_acûss_ty³
(è=ğ
GLOBAL_ACC_W
);

832 if(
	geviù
)

833  
wr_h™_we
(
addr
, 
ÿche_šdex
, 
mf
, 
time
, 
ev’ts
, 
¡©us
);

835  
wr_h™_wb
(
addr
, 
ÿche_šdex
, 
mf
, 
time
, 
ev’ts
, 
¡©us
);

842 
ÿche_»que¡_¡©us


843 
	gd©a_ÿche
::
wr_miss_wa
Ğ
Ãw_addr_ty³
 
addr
,

844 
ÿche_šdex
, 
mem_ãtch
 *
mf
,

845 
time
, 
¡d
::
li¡
<
ÿche_ev’t
> &
ev’ts
,

846 
ÿche_»que¡_¡©us
 
¡©us
 )

848 
Ãw_addr_ty³
 
	gblock_addr
 = 
m_cÚfig
.
block_addr
(
addr
);

852 
boŞ
 
	gmshr_h™
 = 
m_mshrs
.
´obe
(
block_addr
);

853 
boŞ
 
	gmshr_ava
 = !
m_mshrs
.
fuÎ
(
block_addr
);

854 if(
miss_queue_fuÎ
(2)

855 || (!(
	gmshr_h™
 && 
	gmshr_ava
)

856 && !(!
	gmshr_h™
 && 
	gmshr_ava


857 && (
	gm_miss_queue
.
size
(è< 
	gm_cÚfig
.
	gm_miss_queue_size
))))

858  
	gRESERVATION_FAIL
;

860 
£nd_wr™e_»que¡
(
mf
, 
WRITE_REQUEST_SENT
, 
time
, 
ev’ts
);

865 cÚ¡ 
mem_acûss_t
 *
	gma
 = 
Ãw
 mem_acûss_tĞ
m_wr_®loc_ty³
,

866 
mf
->
g‘_addr
(),

867 
mf
->
g‘_d©a_size
(),

868 
çl£
,

869 
mf
->
g‘_acûss_w¬p_mask
(),

870 
mf
->
g‘_acûss_by‹_mask
() );

872 
mem_ãtch
 *
	gn_mf
 = 
Ãw
 mem_ãtchĞ*
ma
,

873 
NULL
,

874 
mf
->
g‘_ù¾_size
(),

875 
mf
->
g‘_wid
(),

876 
mf
->
g‘_sid
(),

877 
mf
->
g‘_c
(),

878 
mf
->
g‘_mem_cÚfig
());

880 
boŞ
 
	gdo_miss
 = 
çl£
;

881 
boŞ
 
	gwb
 = 
çl£
;

882 
ÿche_block_t
 
	geviùed
;

885 
£nd_»ad_»que¡
(
addr
, 
block_addr
, 
ÿche_šdex
, 
n_mf
, 
time
, 
do_miss
, 
wb
,

886 
eviùed
, 
ev’ts
, 
çl£
, 
Œue
);

888 ifĞ
	gdo_miss
 ){

891 ifĞ
	gwb
 && (
	gm_cÚfig
.
	gm_wr™e_pŞicy
 !ğ
WRITE_THROUGH
) ) {

892 
mem_ãtch
 *
wb
 = 
m_memãtch_ü—tÜ
->
®loc
(
eviùed
.
m_block_addr
,

893 
m_wrbk_ty³
,
m_cÚfig
.
g‘_lše_sz
(),
Œue
);

894 
	gm_miss_queue
.
push_back
(
wb
);

895 
	gwb
->
£t_¡©us
(
m_miss_queue_¡©us
,
time
);

897  
	gMISS
;

900  
	gRESERVATION_FAIL
;

904 
ÿche_»que¡_¡©us


905 
	gd©a_ÿche
::
wr_miss_no_wa
Ğ
Ãw_addr_ty³
 
addr
,

906 
ÿche_šdex
,

907 
mem_ãtch
 *
mf
,

908 
time
,

909 
¡d
::
li¡
<
ÿche_ev’t
> &
ev’ts
,

910 
ÿche_»que¡_¡©us
 
¡©us
 )

912 if(
miss_queue_fuÎ
(0))

913  
	gRESERVATION_FAIL
;

916 
£nd_wr™e_»que¡
(
mf
, 
WRITE_REQUEST_SENT
, 
time
, 
ev’ts
);

918  
	gMISS
;

925 
ÿche_»que¡_¡©us


926 
	gd©a_ÿche
::
rd_h™_ba£
Ğ
Ãw_addr_ty³
 
addr
,

927 
ÿche_šdex
,

928 
mem_ãtch
 *
mf
,

929 
time
,

930 
¡d
::
li¡
<
ÿche_ev’t
> &
ev’ts
,

931 
ÿche_»que¡_¡©us
 
¡©us
 )

933 
Ãw_addr_ty³
 
	gblock_addr
 = 
m_cÚfig
.
block_addr
(
addr
);

934 
	gm_g_¬¿y
->
acûss
(
block_addr
,
time
,
ÿche_šdex
);

937 if(
	gmf
->
i§tomic
()){

938 
as£¹
(
mf
->
g‘_acûss_ty³
(è=ğ
GLOBAL_ACC_R
);

939 
	gÿche_block_t
 &
	gblock
 = 
m_g_¬¿y
->
g‘_block
(
ÿche_šdex
);

940 
	gblock
.
	gm_¡©us
 = 
MODIFIED
;

942  
	gHIT
;

949 
ÿche_»que¡_¡©us


950 
	gd©a_ÿche
::
rd_miss_ba£
Ğ
Ãw_addr_ty³
 
addr
,

951 
ÿche_šdex
,

952 
mem_ãtch
 *
mf
,

953 
time
,

954 
¡d
::
li¡
<
ÿche_ev’t
> &
ev’ts
,

955 
ÿche_»que¡_¡©us
 
¡©us
 ){

956 if(
miss_queue_fuÎ
(1))

959  
	gRESERVATION_FAIL
;

961 
Ãw_addr_ty³
 
	gblock_addr
 = 
m_cÚfig
.
block_addr
(
addr
);

962 
boŞ
 
	gdo_miss
 = 
çl£
;

963 
boŞ
 
	gwb
 = 
çl£
;

964 
ÿche_block_t
 
	geviùed
;

965 
£nd_»ad_»que¡
Ğ
addr
,

966 
block_addr
,

967 
ÿche_šdex
,

968 
mf
, 
time
, 
do_miss
, 
wb
, 
eviùed
, 
ev’ts
, 
çl£
, false);

970 ifĞ
	gdo_miss
 ){

973 if(
	gwb
 && (
	gm_cÚfig
.
	gm_wr™e_pŞicy
 !ğ
WRITE_THROUGH
) ){

974 
mem_ãtch
 *
wb
 = 
m_memãtch_ü—tÜ
->
®loc
(
eviùed
.
m_block_addr
,

975 
m_wrbk_ty³
,
m_cÚfig
.
g‘_lše_sz
(),
Œue
);

976 
£nd_wr™e_»que¡
(
wb
, 
WRITE_BACK_REQUEST_SENT
, 
time
, 
ev’ts
);

978  
	gMISS
;

980  
	gRESERVATION_FAIL
;

985 
ÿche_»que¡_¡©us


986 
	g»ad_Úly_ÿche
::
acûss
Ğ
Ãw_addr_ty³
 
addr
,

987 
mem_ãtch
 *
mf
,

988 
time
,

989 
¡d
::
li¡
<
ÿche_ev’t
> &
ev’ts
 )

991 
as£¹
Ğ
mf
->
g‘_d©a_size
(è<ğ
m_cÚfig
.
g‘_lše_sz
());

992 
as£¹
(
m_cÚfig
.
m_wr™e_pŞicy
 =ğ
READ_ONLY
);

993 
as£¹
(!
mf
->
g‘_is_wr™e
());

994 
Ãw_addr_ty³
 
	gblock_addr
 = 
m_cÚfig
.
block_addr
(
addr
);

995 
	gÿche_šdex
 = ()-1;

996 
ÿche_»que¡_¡©us
 
	g¡©us
 = 
m_g_¬¿y
->
´obe
(
block_addr
,
ÿche_šdex
);

997 
ÿche_»que¡_¡©us
 
	gÿche_¡©us
 = 
RESERVATION_FAIL
;

999 iàĞ
	g¡©us
 =ğ
HIT
 ) {

1000 
ÿche_¡©us
 = 
m_g_¬¿y
->
acûss
(
block_addr
,
time
,
ÿche_šdex
);

1001 }iàĞ
	g¡©us
 !ğ
RESERVATION_FAIL
 ) {

1002 if(!
miss_queue_fuÎ
(0)){

1003 
boŞ
 
do_miss
=
çl£
;

1004 
£nd_»ad_»que¡
(
addr
, 
block_addr
, 
ÿche_šdex
, 
mf
, 
time
, 
do_miss
, 
ev’ts
, 
Œue
, 
çl£
);

1005 if(
	gdo_miss
)

1006 
	gÿche_¡©us
 = 
MISS
;

1008 
	gÿche_¡©us
 = 
RESERVATION_FAIL
;

1010 
	gÿche_¡©us
 = 
RESERVATION_FAIL
;

1014 
	gm_¡©s
.
šc_¡©s
(
mf
->
g‘_acûss_ty³
(), 
m_¡©s
.
£Ëù_¡©s_¡©us
(
¡©us
, 
ÿche_¡©us
));

1015  
	gÿche_¡©us
;

1021 
ÿche_»que¡_¡©us


1022 
	gd©a_ÿche
::
´oûss_g_´obe
Ğ
boŞ
 
wr
,

1023 
ÿche_»que¡_¡©us
 
´obe_¡©us
,

1024 
Ãw_addr_ty³
 
addr
,

1025 
ÿche_šdex
,

1026 
mem_ãtch
* 
mf
,

1027 
time
,

1028 
¡d
::
li¡
<
ÿche_ev’t
>& 
ev’ts
 )

1034 
ÿche_»que¡_¡©us
 
acûss_¡©us
 = 
´obe_¡©us
;

1035 if(
	gwr
){

1036 if(
	g´obe_¡©us
 =ğ
HIT
){

1037 
acûss_¡©us
 = (
this
->*
m_wr_h™
)Ğ
addr
,

1038 
	gÿche_šdex
,

1039 
	gmf
, 
	gtime
, 
	gev’ts
, 
	g´obe_¡©us
 );

1040 }iàĞ
	g´obe_¡©us
 !ğ
RESERVATION_FAIL
 ) {

1041 
acûss_¡©us
 = (
this
->*
m_wr_miss
)Ğ
addr
,

1042 
	gÿche_šdex
,

1043 
	gmf
, 
	gtime
, 
	gev’ts
, 
	g´obe_¡©us
 );

1046 if(
	g´obe_¡©us
 =ğ
HIT
){

1047 
acûss_¡©us
 = (
this
->*
m_rd_h™
)Ğ
addr
,

1048 
	gÿche_šdex
,

1049 
	gmf
, 
	gtime
, 
	gev’ts
, 
	g´obe_¡©us
 );

1050 }iàĞ
	g´obe_¡©us
 !ğ
RESERVATION_FAIL
 ) {

1051 
acûss_¡©us
 = (
this
->*
m_rd_miss
)Ğ
addr
,

1052 
	gÿche_šdex
,

1053 
	gmf
, 
	gtime
, 
	gev’ts
, 
	g´obe_¡©us
 );

1057 
	gm_bªdwidth_mªagem’t
.
u£_d©a_pÜt
(
mf
, 
acûss_¡©us
, 
ev’ts
);

1058  
	gacûss_¡©us
;

1066 
ÿche_»que¡_¡©us


1067 
	gd©a_ÿche
::
acûss
Ğ
Ãw_addr_ty³
 
addr
,

1068 
mem_ãtch
 *
mf
,

1069 
time
,

1070 
¡d
::
li¡
<
ÿche_ev’t
> &
ev’ts
 )

1073 
as£¹
Ğ
mf
->
g‘_d©a_size
(è<ğ
m_cÚfig
.
g‘_lše_sz
());

1074 
boŞ
 
	gwr
 = 
mf
->
g‘_is_wr™e
();

1075 
Ãw_addr_ty³
 
	gblock_addr
 = 
m_cÚfig
.
block_addr
(
addr
);

1076 
	gÿche_šdex
 = ()-1;

1077 
ÿche_»que¡_¡©us
 
	g´obe_¡©us


1078 ğ
m_g_¬¿y
->
´obe
Ğ
block_addr
, 
ÿche_šdex
 );

1079 
ÿche_»que¡_¡©us
 
	gacûss_¡©us


1080 ğ
´oûss_g_´obe
Ğ
wr
, 
´obe_¡©us
, 
addr
, 
ÿche_šdex
, 
mf
, 
time
, 
ev’ts
 );

1081 
	gm_¡©s
.
šc_¡©s
(
mf
->
g‘_acûss_ty³
(),

1082 
m_¡©s
.
£Ëù_¡©s_¡©us
(
´obe_¡©us
, 
acûss_¡©us
));

1083  
	gacûss_¡©us
;

1090 
ÿche_»que¡_¡©us


1091 
	gl1_ÿche
::
acûss
Ğ
Ãw_addr_ty³
 
addr
,

1092 
mem_ãtch
 *
mf
,

1093 
time
,

1094 
¡d
::
li¡
<
ÿche_ev’t
> &
ev’ts
 )

1096  
d©a_ÿche
::
acûss
Ğ
addr
, 
mf
, 
time
, 
ev’ts
 );

1102 
ÿche_»que¡_¡©us


1103 
	gl2_ÿche
::
acûss
Ğ
Ãw_addr_ty³
 
addr
,

1104 
mem_ãtch
 *
mf
,

1105 
time
,

1106 
¡d
::
li¡
<
ÿche_ev’t
> &
ev’ts
 )

1108  
d©a_ÿche
::
acûss
Ğ
addr
, 
mf
, 
time
, 
ev’ts
 );

1116 
ÿche_»que¡_¡©us
 
	g‹x_ÿche
::
acûss
Ğ
Ãw_addr_ty³
 
addr
, 
mem_ãtch
 *
mf
,

1117 
time
, 
¡d
::
li¡
<
ÿche_ev’t
> &
ev’ts
 )

1119 iàĞ
m_äagm’t_fifo
.
fuÎ
(è|| 
m_»que¡_fifo
.fuÎ(è|| 
m_rob
.full() )

1120  
RESERVATION_FAIL
;

1122 
as£¹
Ğ
mf
->
g‘_d©a_size
(è<ğ
m_cÚfig
.
g‘_lše_sz
());

1125 
Ãw_addr_ty³
 
	gblock_addr
 = 
m_cÚfig
.
block_addr
(
addr
);

1126 
	gÿche_šdex
 = ()-1;

1127 
ÿche_»que¡_¡©us
 
	g¡©us
 = 
m_gs
.
acûss
(
block_addr
,
time
,
ÿche_šdex
);

1128 
ÿche_»que¡_¡©us
 
	gÿche_¡©us
 = 
RESERVATION_FAIL
;

1129 
as£¹
Ğ
¡©us
 !ğ
RESERVATION_FAIL
 );

1130 
as£¹
Ğ
¡©us
 !ğ
HIT_RESERVED
 );

1131 
	gm_äagm’t_fifo
.
push
Ğ
äagm’t_’Œy
(
mf
,
ÿche_šdex
,
¡©us
==
MISS
,mf->
g‘_d©a_size
()) );

1132 iàĞ
	g¡©us
 =ğ
MISS
 ) {

1134 
rob_šdex
 = 
m_rob
.
push
Ğ
rob_’Œy
(
ÿche_šdex
, 
mf
, 
block_addr
) );

1135 
	gm_exŒa_mf_f›lds
[
mf
] = 
exŒa_mf_f›lds
(
rob_šdex
);

1136 
	gmf
->
£t_d©a_size
(
m_cÚfig
.
g‘_lše_sz
());

1137 
	gm_gs
.
fl
(
ÿche_šdex
,
time
);

1138 
	gm_»que¡_fifo
.
push
(
mf
);

1139 
	gmf
->
£t_¡©us
(
m_»que¡_queue_¡©us
,
time
);

1140 
	gev’ts
.
push_back
(
READ_REQUEST_SENT
);

1141 
	gÿche_¡©us
 = 
MISS
;

1144 
	gÿche_¡©us
 = 
HIT_RESERVED
;

1146 
	gm_¡©s
.
šc_¡©s
(
mf
->
g‘_acûss_ty³
(), 
m_¡©s
.
£Ëù_¡©s_¡©us
(
¡©us
, 
ÿche_¡©us
));

1147  
	gÿche_¡©us
;

1150 
	g‹x_ÿche
::
	$cyşe
(){

1152 iàĞ!
m_»que¡_fifo
.
	`em±y
() ) {

1153 
mem_ãtch
 *
mf
 = 
m_»que¡_fifo
.
	`³ek
();

1154 iàĞ!
m_mempÜt
->
	`fuÎ
(
mf
->
	`g‘_ù¾_size
(),
çl£
) ) {

1155 
m_»que¡_fifo
.
	`pİ
();

1156 
m_mempÜt
->
	`push
(
mf
);

1160 iàĞ!
m_äagm’t_fifo
.
	`em±y
(è&& !
m_»suÉ_fifo
.
	`fuÎ
() ) {

1161 cÚ¡ 
äagm’t_’Œy
 &
e
 = 
m_äagm’t_fifo
.
	`³ek
();

1162 iàĞ
e
.
m_miss
 ) {

1164 
rob_šdex
 = 
m_rob
.
	`Ãxt_pİ_šdex
();

1165 cÚ¡ 
rob_’Œy
 &
r
 = 
m_rob
.
	`³ek
(
rob_šdex
);

1166 
	`as£¹
Ğ
r
.
m_»que¡
 =ğ
e
.m_request );

1167 
	`as£¹
Ğ
r
.
m_block_addr
 =ğ
m_cÚfig
.
	`block_addr
(
e
.
m_»que¡
->
	`g‘_addr
()) );

1168 iàĞ
r
.
m_»ady
 ) {

1169 
	`as£¹
Ğ
r
.
m_šdex
 =ğ
e
.
m_ÿche_šdex
 );

1170 
m_ÿche
[
r
.
m_šdex
].
m_v®id
 = 
Œue
;

1171 
m_ÿche
[
r
.
m_šdex
].
m_block_addr
 =„.m_block_addr;

1172 
m_»suÉ_fifo
.
	`push
(
e
.
m_»que¡
);

1173 
m_rob
.
	`pİ
();

1174 
m_äagm’t_fifo
.
	`pİ
();

1178 
	`as£¹
Ğ
m_ÿche
[
e
.
m_ÿche_šdex
].
m_v®id
 );

1179 
	`as£¹
Ğ
m_ÿche
[
e
.
m_ÿche_šdex
].
m_block_addr


1180 =ğ
m_cÚfig
.
	`block_addr
(
e
.
m_»que¡
->
	`g‘_addr
()) );

1181 
m_»suÉ_fifo
.
	`push
Ğ
e
.
m_»que¡
 );

1182 
m_äagm’t_fifo
.
	`pİ
();

1185 
	}
}

1188 
	g‹x_ÿche
::
	$fl
Ğ
mem_ãtch
 *
mf
, 
time
 )

1190 
exŒa_mf_f›lds_lookup
::
™”©Ü
 
e
 = 
m_exŒa_mf_f›lds
.
	`fšd
(
mf
);

1191 
	`as£¹
Ğ
e
 !ğ
m_exŒa_mf_f›lds
.
	`’d
() );

1192 
	`as£¹
Ğ
e
->
£cÚd
.
m_v®id
 );

1193 
	`as£¹
Ğ!
m_rob
.
	`em±y
() );

1194 
mf
->
	`£t_¡©us
(
m_rob_¡©us
,
time
);

1196 
rob_šdex
 = 
e
->
£cÚd
.
m_rob_šdex
;

1197 
rob_’Œy
 &
r
 = 
m_rob
.
	`³ek
(
rob_šdex
);

1198 
	`as£¹
Ğ!
r
.
m_»ady
 );

1199 
r
.
m_»ady
 = 
Œue
;

1200 
r
.
m_time
 = 
time
;

1201 
	`as£¹
Ğ
r
.
m_block_addr
 =ğ
m_cÚfig
.
	`block_addr
(
mf
->
	`g‘_addr
()) );

1202 
	}
}

1204 
	g‹x_ÿche
::
	$di¥Ïy_¡©e
Ğ
FILE
 *
å
 ) const

1206 
	`årštf
(
å
,"% Ñextu» cacheè¡©e:\n", 
m_Çme
.
	`c_¡r
() );

1207 
	`årštf
(
å
,"fragment fifoƒntries = %u / %u\n",

1208 
m_äagm’t_fifo
.
	`size
(), m_äagm’t_fifo.
	`ÿ·c™y
() );

1209 
	`årštf
(
å
,"reorder bufferƒntries = %u / %u\n",

1210 
m_rob
.
	`size
(), m_rob.
	`ÿ·c™y
() );

1211 
	`årštf
(
å
,"request fifoƒntries = %u / %u\n",

1212 
m_»que¡_fifo
.
	`size
(), m_»que¡_fifo.
	`ÿ·c™y
() );

1213 iàĞ!
m_rob
.
	`em±y
() )

1214 
	`årštf
(
å
,"reorder buffer contents:\n");

1215  
n
=
m_rob
.
	`size
()-1;‚>=0;‚-- ) {

1216 
šdex
 = (
m_rob
.
	`Ãxt_pİ_šdex
(è+ 
n
)%m_rob.
	`ÿ·c™y
();

1217 cÚ¡ 
rob_’Œy
 &
r
 = 
m_rob
.
	`³ek
(
šdex
);

1218 
	`årštf
(
å
, "tex„ob[%3d] : %s ",

1219 
šdex
, (
r
.
m_»ady
?"ready ":"pending") );

1220 iàĞ
r
.
m_»ady
 )

1221 
	`årštf
(
å
,"@%6u", 
r
.
m_time
 );

1223 
	`årštf
(
å
," ");

1224 
	`årštf
(
å
,"[idx=%4u]",
r
.
m_šdex
);

1225 
r
.
m_»que¡
->
	`´št
(
å
,
çl£
);

1227 iàĞ!
m_äagm’t_fifo
.
	`em±y
() ) {

1228 
	`årštf
(
å
,"fragment fifo (oldest) :");

1229 
äagm’t_’Œy
 &
f
 = 
m_äagm’t_fifo
.
	`³ek
();

1230 
	`årštf
(
å
,"%s: ", 
f
.
m_miss
?"miss":"hit ");

1231 
f
.
m_»que¡
->
	`´št
(
å
,
çl£
);

1233 
	}
}

	@gpu-cache.h

28 #iâdeà
GPU_CACHE_H


29 
	#GPU_CACHE_H


	)

31 
	~<¡dio.h
>

32 
	~<¡dlib.h
>

33 
	~"gpu-misc.h
"

34 
	~"mem_ãtch.h
"

35 
	~"../ab¡¿ù_h¬dw¬e_mod–.h
"

36 
	~"../Œ1_hash_m­.h
"

38 
	~"addrdec.h
"

40 
	eÿche_block_¡©e
 {

41 
	mINVALID
,

42 
	mRESERVED
,

43 
	mVALID
,

44 
	mMODIFIED


47 
	eÿche_»que¡_¡©us
 {

48 
	mHIT
 = 0,

49 
	mHIT_RESERVED
,

50 
	mMISS
,

51 
	mRESERVATION_FAIL
,

52 
	mNUM_CACHE_REQUEST_STATUS


55 
	eÿche_ev’t
 {

56 
	mWRITE_BACK_REQUEST_SENT
,

57 
	mREAD_REQUEST_SENT
,

58 
	mWRITE_REQUEST_SENT


61 cÚ¡ * 
ÿche_»que¡_¡©us_¡r
(
ÿche_»que¡_¡©us
 
¡©us
);

63 
	sÿche_block_t
 {

64 
ÿche_block_t
()

66 
	mm_g
=0;

67 
	mm_block_addr
=0;

68 
	mm_®loc_time
=0;

69 
	mm_fl_time
=0;

70 
	mm_Ï¡_acûss_time
=0;

71 
	mm_¡©us
=
INVALID
;

73 
®loÿ‹
Ğ
Ãw_addr_ty³
 
g
,‚ew_addr_ty³ 
block_addr
, 
time
 )

75 
	mm_g
=
g
;

76 
	mm_block_addr
=
block_addr
;

77 
	mm_®loc_time
=
time
;

78 
	mm_Ï¡_acûss_time
=
time
;

79 
	mm_fl_time
=0;

80 
	mm_¡©us
=
RESERVED
;

82 
fl
Ğ
time
 )

84 
as£¹
Ğ
m_¡©us
 =ğ
RESERVED
 );

85 
	mm_¡©us
=
VALID
;

86 
	mm_fl_time
=
time
;

89 
Ãw_addr_ty³
 
	mm_g
;

90 
Ãw_addr_ty³
 
	mm_block_addr
;

91 
	mm_®loc_time
;

92 
	mm_Ï¡_acûss_time
;

93 
	mm_fl_time
;

94 
ÿche_block_¡©e
 
	mm_¡©us
;

97 
	e»¶aûm’t_pŞicy_t
 {

98 
	mLRU
,

99 
	mFIFO


102 
	ewr™e_pŞicy_t
 {

103 
	mREAD_ONLY
,

104 
	mWRITE_BACK
,

105 
	mWRITE_THROUGH
,

106 
	mWRITE_EVICT
,

107 
	mLOCAL_WB_GLOBAL_WT


110 
	e®loÿtiÚ_pŞicy_t
 {

111 
	mON_MISS
,

112 
	mON_FILL


116 
	ewr™e_®loÿ‹_pŞicy_t
 {

117 
	mNO_WRITE_ALLOCATE
,

118 
	mWRITE_ALLOCATE


121 
	emshr_cÚfig_t
 {

122 
	mTEX_FIFO
,

123 
	mASSOC


126 
	e£t_šdex_funùiÚ
{

127 
	mFERMI_HASH_SET_FUNCTION
 = 0,

128 
	mLINEAR_SET_FUNCTION
,

129 
	mCUSTOM_SET_FUNCTION


132 şas 
	cÿche_cÚfig
 {

133 
	mpublic
:

134 
	$ÿche_cÚfig
()

136 
m_v®id
 = 
çl£
;

137 
m_di§bËd
 = 
çl£
;

138 
m_cÚfig_¡ršg
 = 
NULL
;

139 
m_cÚfig_¡ršgP»fL1
 = 
NULL
;

140 
m_cÚfig_¡ršgP»fSh¬ed
 = 
NULL
;

141 
m_d©a_pÜt_width
 = 0;

142 
m_£t_šdex_funùiÚ
 = 
LINEAR_SET_FUNCTION
;

144 
	$š™
(* 
cÚfig
, 
FuncCache
 
¡©us
)

146 
ÿche_¡©us
ğ
¡©us
;

147 
	`as£¹
Ğ
cÚfig
 );

148 
½
, 
wp
, 
­
, 
mshr_ty³
, 
w­
, 
sif
;

151 
Áok
 = 
	`ssÿnf
(
cÚfig
,"%u:%u:%u,%c:%c:%c:%c:%c,%c:%u:%u,%u:%u,%u",

152 &
m_n£t
, &
m_lše_sz
, &
m_assoc
, &
½
, &
wp
, &
­
, &
w­
,

153 &
sif
,&
mshr_ty³
,&
m_mshr_’Œ›s
,&
m_mshr_max_m”ge
,

154 &
m_miss_queue_size
, &
m_»suÉ_fifo_’Œ›s
,

155 &
m_d©a_pÜt_width
);

157 iàĞ
Áok
 < 11 ) {

158 iàĞ!
	`¡rcmp
(
cÚfig
,"none") ) {

159 
m_di§bËd
 = 
Œue
;

162 
	`ex™_·r£_”rÜ
();

164 
½
) {

165 'L': 
m_»¶aûm’t_pŞicy
 = 
LRU
; ;

166 'F': 
m_»¶aûm’t_pŞicy
 = 
FIFO
; ;

167 : 
	`ex™_·r£_”rÜ
();

169 
wp
) {

170 'R': 
m_wr™e_pŞicy
 = 
READ_ONLY
; ;

171 'B': 
m_wr™e_pŞicy
 = 
WRITE_BACK
; ;

172 'T': 
m_wr™e_pŞicy
 = 
WRITE_THROUGH
; ;

173 'E': 
m_wr™e_pŞicy
 = 
WRITE_EVICT
; ;

174 'L': 
m_wr™e_pŞicy
 = 
LOCAL_WB_GLOBAL_WT
; ;

175 : 
	`ex™_·r£_”rÜ
();

177 
­
) {

178 'm': 
m_®loc_pŞicy
 = 
ON_MISS
; ;

179 'f': 
m_®loc_pŞicy
 = 
ON_FILL
; ;

180 : 
	`ex™_·r£_”rÜ
();

182 
mshr_ty³
) {

183 'F': 
m_mshr_ty³
 = 
TEX_FIFO
; 
	`as£¹
(
Áok
==13); ;

184 'A': 
m_mshr_ty³
 = 
ASSOC
; ;

185 : 
	`ex™_·r£_”rÜ
();

187 
m_lše_sz_log2
 = 
	`LOGB2
(
m_lše_sz
);

188 
m_n£t_log2
 = 
	`LOGB2
(
m_n£t
);

189 
m_v®id
 = 
Œue
;

191 
w­
){

192 'W': 
m_wr™e_®loc_pŞicy
 = 
WRITE_ALLOCATE
; ;

193 'N': 
m_wr™e_®loc_pŞicy
 = 
NO_WRITE_ALLOCATE
; ;

194 : 
	`ex™_·r£_”rÜ
();

198 ià(
m_®loc_pŞicy
 =ğ
ON_FILL
 
ªd
 
m_wr™e_pŞicy
 =ğ
WRITE_BACK
) {

208 
	`as£¹
(0 && "Invalid cache configuration: Writeback cache cannot‡llocate‚ew†ine on fill. ");

212 ià(
m_d©a_pÜt_width
 == 0) {

213 
m_d©a_pÜt_width
 = 
m_lše_sz
;

215 
	`as£¹
(
m_lše_sz
 % 
m_d©a_pÜt_width
 == 0);

217 
sif
){

218 'H': 
m_£t_šdex_funùiÚ
 = 
FERMI_HASH_SET_FUNCTION
; ;

219 'C': 
m_£t_šdex_funùiÚ
 = 
CUSTOM_SET_FUNCTION
; ;

220 'L': 
m_£t_šdex_funùiÚ
 = 
LINEAR_SET_FUNCTION
; ;

221 : 
	`ex™_·r£_”rÜ
();

223 
	}
}

224 
boŞ
 
	$di§bËd
(ècÚ¡ {  
m_di§bËd
;
	}
}

225 
	$g‘_lše_sz
() const

227 
	`as£¹
Ğ
m_v®id
 );

228  
m_lše_sz
;

229 
	}
}

230 
	$g‘_num_lšes
() const

232 
	`as£¹
Ğ
m_v®id
 );

233  
m_n£t
 * 
m_assoc
;

234 
	}
}

236 
	$´št
Ğ
FILE
 *
å
 ) const

238 
	`årštf
Ğ
å
, "Size = %d B (%d Set x %d-way x %d byte†ine)\n",

239 
m_lše_sz
 * 
m_n£t
 * 
m_assoc
,

240 
m_n£t
, 
m_assoc
, 
m_lše_sz
 );

241 
	}
}

243 
vœtu®
 
	$£t_šdex
Ğ
Ãw_addr_ty³
 
addr
 ) const

245 if(
m_£t_šdex_funùiÚ
 !ğ
LINEAR_SET_FUNCTION
){

246 
	`´štf
("\nGPGPU-Sim cache configurationƒrror: Hashing or "

250 
	`abÜt
();

252 (
addr
 >> 
m_lše_sz_log2
è& (
m_n£t
-1);

253 
	}
}

255 
Ãw_addr_ty³
 
	$g
Ğ
Ãw_addr_ty³
 
addr
 ) const

262  
addr
 & ~(
m_lše_sz
-1);

263 
	}
}

264 
Ãw_addr_ty³
 
	$block_addr
Ğ
Ãw_addr_ty³
 
addr
 ) const

266  
addr
 & ~(
m_lše_sz
-1);

267 
	}
}

268 
FuncCache
 
	$g‘_ÿche_¡©us
(è{ 
ÿche_¡©us
;
	}
}

269 *
	gm_cÚfig_¡ršg
;

270 *
	gm_cÚfig_¡ršgP»fL1
;

271 *
	gm_cÚfig_¡ršgP»fSh¬ed
;

272 
FuncCache
 
	gÿche_¡©us
;

274 
	g´Ùeùed
:

275 
	$ex™_·r£_”rÜ
()

277 
	`´štf
("GPGPU-Sim uArch: cachcÚfigu¿tiÚ…¬sšgƒ¼Ü (%s)\n", 
m_cÚfig_¡ršg
 );

278 
	`abÜt
();

279 
	}
}

281 
boŞ
 
	gm_v®id
;

282 
boŞ
 
	gm_di§bËd
;

283 
	gm_lše_sz
;

284 
	gm_lše_sz_log2
;

285 
	gm_n£t
;

286 
	gm_n£t_log2
;

287 
	gm_assoc
;

289 
»¶aûm’t_pŞicy_t
 
	gm_»¶aûm’t_pŞicy
;

290 
wr™e_pŞicy_t
 
	gm_wr™e_pŞicy
;

291 
®loÿtiÚ_pŞicy_t
 
	gm_®loc_pŞicy
;

292 
mshr_cÚfig_t
 
	gm_mshr_ty³
;

294 
wr™e_®loÿ‹_pŞicy_t
 
	gm_wr™e_®loc_pŞicy
;

297 
	gm_mshr_’Œ›s
;

298 
	gm_äagm’t_fifo_’Œ›s
;

301 
	gm_mshr_max_m”ge
;

302 
	gm_»que¡_fifo_’Œ›s
;

305 
	gm_miss_queue_size
;

306 
	gm_rob_’Œ›s
;

308 
	gm_»suÉ_fifo_’Œ›s
;

309 
	gm_d©a_pÜt_width
;

310 
£t_šdex_funùiÚ
 
	gm_£t_šdex_funùiÚ
;

312 
ä›nd
 
şass
 
	gg_¬¿y
;

313 
ä›nd
 
şass
 
	gba£lše_ÿche
;

314 
ä›nd
 
şass
 
	g»ad_Úly_ÿche
;

315 
ä›nd
 
şass
 
	g‹x_ÿche
;

316 
ä›nd
 
şass
 
	gd©a_ÿche
;

317 
ä›nd
 
şass
 
	gl1_ÿche
;

318 
ä›nd
 
şass
 
	gl2_ÿche
;

321 şas 
	cl1d_ÿche_cÚfig
 : 
public
 
ÿche_cÚfig
{

322 
public
:

323 
	$l1d_ÿche_cÚfig
(è: 
	$ÿche_cÚfig
(){}

324 
vœtu®
 
	$£t_šdex
(
Ãw_addr_ty³
 
addr
) const;

325 
	}
};

327 şas 
	cl2_ÿche_cÚfig
 : 
public
 
ÿche_cÚfig
 {

328 
public
:

329 
	$l2_ÿche_cÚfig
(è: 
	$ÿche_cÚfig
(){}

330 
	`š™
(
lš—r_to_¿w_add»ss_Œª¦©iÚ
 *
add»ss_m­pšg
);

331 
vœtu®
 
	$£t_šdex
(
Ãw_addr_ty³
 
addr
) const;

333 
´iv©e
:

334 
lš—r_to_¿w_add»ss_Œª¦©iÚ
 *
m_add»ss_m­pšg
;

335 
	}
};

337 şas 
	cg_¬¿y
 {

338 
	mpublic
:

340 
g_¬¿y
(
ÿche_cÚfig
 &
cÚfig
, 
cÜe_id
, 
ty³_id
 );

341 ~
g_¬¿y
();

343 
ÿche_»que¡_¡©us
 
	$´obe
Ğ
Ãw_addr_ty³
 
addr
, &
idx
 ) const;

344 
ÿche_»que¡_¡©us
 
	`acûss
Ğ
Ãw_addr_ty³
 
addr
, 
time
, &
idx
 );

345 
ÿche_»que¡_¡©us
 
	`acûss
Ğ
Ãw_addr_ty³
 
addr
, 
time
, &
idx
, 
boŞ
 &
wb
, 
ÿche_block_t
 &
eviùed
 );

347 
	`fl
Ğ
Ãw_addr_ty³
 
addr
, 
time
 );

348 
	`fl
Ğ
idx
, 
time
 );

350 
	$size
(ècÚ¡ {  
m_cÚfig
.
	`g‘_num_lšes
();}

351 
ÿche_block_t
 &
	$g‘_block
(
idx
è{  
m_lšes
[idx];
	}
}

353 
æush
();

354 
Ãw_wšdow
();

356 
	$´št
Ğ
FILE
 *
¡»am
, &
tÙ®_acûss
, &
tÙ®_mis£s
 ) const;

357 
	$wšdowed_miss_¿‹
( ) const;

358 
	$g‘_¡©s
(&
tÙ®_acûss
, &
tÙ®_mis£s
, &
tÙ®_h™_»s
, &
tÙ®_»s_ç
) const;

360 
	`upd©e_ÿche_·¿m‘”s
(
ÿche_cÚfig
 &
cÚfig
);

361 
´Ùeùed
:

365 
	`g_¬¿y
Ğ
ÿche_cÚfig
 &
cÚfig
,

366 
cÜe_id
,

367 
ty³_id
,

368 
ÿche_block_t
* 
Ãw_lšes
 );

369 
	`š™
Ğ
cÜe_id
, 
ty³_id
 );

371 
´Ùeùed
:

373 
ÿche_cÚfig
 &
m_cÚfig
;

375 
ÿche_block_t
 *
m_lšes
;

377 
m_acûss
;

378 
m_miss
;

379 
m_³ndšg_h™
;

380 
m_»s_ç
;

383 
m_´ev_¢­shÙ_acûss
;

384 
m_´ev_¢­shÙ_miss
;

385 
m_´ev_¢­shÙ_³ndšg_h™
;

387 
m_cÜe_id
;

388 
m_ty³_id
;

389 
	}
};

391 şas 
	cmshr_bË
 {

392 
	mpublic
:

393 
	$mshr_bË
Ğ
num_’Œ›s
, 
max_m”ged
 )

394 : 
	`m_num_’Œ›s
(
num_’Œ›s
),

395 
	$m_max_m”ged
(
max_m”ged
)

396 #ià(
Œ1_hash_m­_ism­
 == 0)

397 ,
	$m_d©a
(2*
num_’Œ›s
)

403 
boŞ
 
	$´obe
Ğ
Ãw_addr_ty³
 
block_addr
 ) const;

405 
boŞ
 
	$fuÎ
Ğ
Ãw_addr_ty³
 
block_addr
 ) const;

407 
	`add
Ğ
Ãw_addr_ty³
 
block_addr
, 
mem_ãtch
 *
mf
 );

409 
boŞ
 
	$busy
(ècÚ¡ { 
çl£
;
	}
}

411 
m¬k_»ady
Ğ
Ãw_addr_ty³
 
block_addr
, 
boŞ
 &
has_©omic
 );

413 
boŞ
 
	$acûss_»ady
(ècÚ¡ { !
m_cu¼’t_»¥Ú£
.
	`em±y
();
	}
}

415 
mem_ãtch
 *
Ãxt_acûss
();

416 
	$di¥Ïy
Ğ
FILE
 *
å
 ) const;

418 
	$check_mshr_·¿m‘”s
Ğ
num_’Œ›s
, 
max_m”ged
 )

420 
	`as£¹
(
m_num_’Œ›s
==
num_’Œ›s
 && "Change of MSHR…arameters between kernels is‚ot‡llowed");

421 
	`as£¹
(
m_max_m”ged
==
max_m”ged
 && "Change of MSHR…arameters between kernels is‚ot‡llowed");

422 
	}
}

424 
	g´iv©e
:

427 cÚ¡ 
m_num_’Œ›s
;

428 cÚ¡ 
	gm_max_m”ged
;

430 
	smshr_’Œy
 {

431 
	g¡d
::
li¡
<
mem_ãtch
*> 
m_li¡
;

432 
boŞ
 
	gm_has_©omic
;

433 
mshr_’Œy
(è: 
m_has_©omic
(
çl£
) { }

435 
	gŒ1_hash_m­
<
	tÃw_addr_ty³
,
	tmshr_’Œy
> 
	tbË
;

436 
bË
 
	gm_d©a
;

439 
boŞ
 
	gm_cu¼’t_»¥Ú£_»ady
;

440 
	g¡d
::
li¡
<
Ãw_addr_ty³
> 
m_cu¼’t_»¥Ú£
;

448 
	sÿche_sub_¡©s
{

449 
	macûs£s
;

450 
	mmis£s
;

451 
	m³ndšg_h™s
;

452 
	m»s_çs
;

454 
	mpÜt_avaabË_cyşes
;

455 
	md©a_pÜt_busy_cyşes
;

456 
	mfl_pÜt_busy_cyşes
;

458 
ÿche_sub_¡©s
(){

459 
ş—r
();

461 
ş—r
(){

462 
	macûs£s
 = 0;

463 
	mmis£s
 = 0;

464 
	m³ndšg_h™s
 = 0;

465 
	m»s_çs
 = 0;

466 
	mpÜt_avaabË_cyşes
 = 0;

467 
	md©a_pÜt_busy_cyşes
 = 0;

468 
	mfl_pÜt_busy_cyşes
 = 0;

470 
	mÿche_sub_¡©s
 &
	mİ”©Ü
+=(cÚ¡ 
ÿche_sub_¡©s
 &
css
){

474 
acûs£s
 +ğ
css
.accesses;

475 
	mmis£s
 +ğ
css
.
mis£s
;

476 
	m³ndšg_h™s
 +ğ
css
.
³ndšg_h™s
;

477 
	m»s_çs
 +ğ
css
.
»s_çs
;

478 
	mpÜt_avaabË_cyşes
 +ğ
css
.
pÜt_avaabË_cyşes
;

479 
	md©a_pÜt_busy_cyşes
 +ğ
css
.
d©a_pÜt_busy_cyşes
;

480 
	mfl_pÜt_busy_cyşes
 +ğ
css
.
fl_pÜt_busy_cyşes
;

481  *
	mthis
;

484 
ÿche_sub_¡©s
 
	mİ”©Ü
+(cÚ¡ 
	mÿche_sub_¡©s
 &
	mcs
){

488 
ÿche_sub_¡©s
 
	m»t
;

489 
	m»t
.
	macûs£s
 = 
acûs£s
 + 
cs
.accesses;

490 
	m»t
.
	mmis£s
 = 
mis£s
 + 
cs
.misses;

491 
	m»t
.
	m³ndšg_h™s
 = 
³ndšg_h™s
 + 
cs
.pending_hits;

492 
	m»t
.
	m»s_çs
 = 
»s_çs
 + 
cs
.res_fails;

493 
	m»t
.
	mpÜt_avaabË_cyşes
 = 
pÜt_avaabË_cyşes
 + 
cs
.port_available_cycles;

494 
	m»t
.
	md©a_pÜt_busy_cyşes
 = 
d©a_pÜt_busy_cyşes
 + 
cs
.data_port_busy_cycles;

495 
	m»t
.
	mfl_pÜt_busy_cyşes
 = 
fl_pÜt_busy_cyşes
 + 
cs
.fill_port_busy_cycles;

496  
	m»t
;

499 
´št_pÜt_¡©s
(
FILE
 *
fout
, cÚ¡ *
ÿche_Çme
) const;

508 şas 
	cÿche_¡©s
 {

509 
	mpublic
:

510 
ÿche_¡©s
();

511 
ş—r
();

512 
šc_¡©s
(
acûss_ty³
, 
acûss_outcome
);

513 
ÿche_»que¡_¡©us
 
	$£Ëù_¡©s_¡©us
(
ÿche_»que¡_¡©us
 
´obe
, ÿche_»que¡_¡©u 
acûss
) const;

514 &
	$İ”©Ü
()(
acûss_ty³
, 
acûss_outcome
);

515 
	$İ”©Ü
()(
acûss_ty³
, 
acûss_outcome
) const;

516 
ÿche_¡©s
 
İ”©Ü
+(cÚ¡ cache_¡© &
cs
);

517 
ÿche_¡©s
 &
İ”©Ü
+=(cÚ¡ cache_¡© &
cs
);

518 
	`´št_¡©s
(
FILE
 *
fout
, cÚ¡ *
ÿche_Çme
 = "Cache_stats") const;

520 
	$g‘_¡©s
(
mem_acûss_ty³
 *
acûss_ty³
, 
num_acûss_ty³
, 
ÿche_»que¡_¡©us
 *
acûss_¡©us
, 
num_acûss_¡©us
) const;

521 
	$g‘_sub_¡©s
(
ÿche_sub_¡©s
 &
css
) const;

523 
	`§m¶e_ÿche_pÜt_ut™y
(
boŞ
 
d©a_pÜt_busy
, boŞ 
fl_pÜt_busy
);

524 
´iv©e
:

525 
boŞ
 
	$check_v®id
(
ty³
, 
¡©us
) const;

527 
¡d
::
veùÜ
< std::veùÜ<> > 
m_¡©s
;

529 
m_ÿche_pÜt_avaabË_cyşes
;

530 
m_ÿche_d©a_pÜt_busy_cyşes
;

531 
m_ÿche_fl_pÜt_busy_cyşes
;

534 şas 
	cÿche_t
 {

535 
public
:

536 
vœtu®
 ~
	$ÿche_t
() {}

537 
vœtu®
 
ÿche_»que¡_¡©us
 
	`acûss
Ğ
Ãw_addr_ty³
 
addr
, 
mem_ãtch
 *
mf
, 
time
, 
¡d
::
li¡
<
ÿche_ev’t
> &
ev’ts
 ) = 0;

540 
vœtu®
 
boŞ
 
	$d©a_pÜt_ä“
() const = 0;

541 
vœtu®
 
boŞ
 
	$fl_pÜt_ä“
() const = 0;

542 
	}
};

544 
boŞ
 
was_wr™e_£Á
ĞcÚ¡ 
¡d
::
li¡
<
ÿche_ev’t
> &
ev’ts
 );

545 
boŞ
 
was_»ad_£Á
ĞcÚ¡ 
¡d
::
li¡
<
ÿche_ev’t
> &
ev’ts
 );

550 şas 
	cba£lše_ÿche
 : 
public
 
ÿche_t
 {

551 
public
:

552 
	$ba£lše_ÿche
ĞcÚ¡ *
Çme
, 
ÿche_cÚfig
 &
cÚfig
, 
cÜe_id
, 
ty³_id
, 
mem_ãtch_š‹rçû
 *
mempÜt
,

553 
mem_ãtch_¡©us
 
¡©us
 )

554 : 
	`m_cÚfig
(
cÚfig
), 
	`m_g_¬¿y
(
Ãw
 
	`g_¬¿y
(cÚfig,
cÜe_id
,
ty³_id
)),

555 
	`m_mshrs
(
cÚfig
.
m_mshr_’Œ›s
,cÚfig.
m_mshr_max_m”ge
),

556 
	$m_bªdwidth_mªagem’t
(
cÚfig
)

558 
	`š™
Ğ
Çme
, 
cÚfig
, 
mempÜt
, 
¡©us
 );

561 
	$š™
ĞcÚ¡ *
Çme
,

562 cÚ¡ 
ÿche_cÚfig
 &
cÚfig
,

563 
mem_ãtch_š‹rçû
 *
mempÜt
,

564 
mem_ãtch_¡©us
 
¡©us
 )

566 
m_Çme
 = 
Çme
;

567 
	`as£¹
(
cÚfig
.
m_mshr_ty³
 =ğ
ASSOC
);

568 
m_mempÜt
=
mempÜt
;

569 
m_miss_queue_¡©us
 = 
¡©us
;

570 
	}
}

572 
	gvœtu®
 ~
	$ba£lše_ÿche
()

574 
d–‘e
 
m_g_¬¿y
;

575 
	}
}

577 
	$upd©e_ÿche_·¿m‘”s
(
ÿche_cÚfig
 &
cÚfig
)

579 
m_cÚfig
=
cÚfig
;

580 
m_g_¬¿y
->
	`upd©e_ÿche_·¿m‘”s
(
cÚfig
);

581 
m_mshrs
.
	`check_mshr_·¿m‘”s
(
cÚfig
.
m_mshr_’Œ›s
,cÚfig.
m_mshr_max_m”ge
);

582 
	}
}

584 
vœtu®
 
ÿche_»que¡_¡©us
 
acûss
Ğ
Ãw_addr_ty³
 
addr
, 
mem_ãtch
 *
mf
, 
time
, 
¡d
::
li¡
<
ÿche_ev’t
> &
ev’ts
 ) = 0;

586 
cyşe
();

588 
fl
Ğ
mem_ãtch
 *
mf
, 
time
 );

590 
boŞ
 
wa™šg_fÜ_fl
Ğ
mem_ãtch
 *
mf
 );

592 
boŞ
 
	$acûss_»ady
(ècÚ¡ { 
m_mshrs
.
	`acûss_»ady
();
	}
}

594 
mem_ãtch
 *
	$Ãxt_acûss
(){ 
m_mshrs
.
	`Ãxt_acûss
();
	}
}

596 
	$æush
(){
m_g_¬¿y
->
	`æush
();
	}
}

597 
	$´št
(
FILE
 *
å
, &
acûs£s
, &
mis£s
) const;

598 
	$di¥Ïy_¡©e
Ğ
FILE
 *
å
 ) const;

601 cÚ¡ 
ÿche_¡©s
 &
	$g‘_¡©s
() const {

602  
m_¡©s
;

603 
	}
}

604 
	$g‘_¡©s
(
mem_acûss_ty³
 *
acûss_ty³
, 
num_acûss_ty³
, 
ÿche_»que¡_¡©us
 *
acûss_¡©us
, 
num_acûss_¡©us
) const{

605  
m_¡©s
.
	`g‘_¡©s
(
acûss_ty³
, 
num_acûss_ty³
, 
acûss_¡©us
, 
num_acûss_¡©us
);

606 
	}
}

607 
	$g‘_sub_¡©s
(
ÿche_sub_¡©s
 &
css
) const {

608 
m_¡©s
.
	`g‘_sub_¡©s
(
css
);

609 
	}
}

612 
boŞ
 
	$d©a_pÜt_ä“
(ècÚ¡ {  
m_bªdwidth_mªagem’t
.
	`d©a_pÜt_ä“
(); 
	}
}

613 
boŞ
 
	$fl_pÜt_ä“
(ècÚ¡ {  
m_bªdwidth_mªagem’t
.
	`fl_pÜt_ä“
(); 
	}
}

615 
	g´Ùeùed
:

617 
	$ba£lše_ÿche
ĞcÚ¡ *
Çme
,

618 
ÿche_cÚfig
 &
cÚfig
,

619 
cÜe_id
,

620 
ty³_id
,

621 
mem_ãtch_š‹rçû
 *
mempÜt
,

622 
mem_ãtch_¡©us
 
¡©us
,

623 
g_¬¿y
* 
Ãw_g_¬¿y
 )

624 : 
	`m_cÚfig
(
cÚfig
),

625 
	`m_g_¬¿y
Ğ
Ãw_g_¬¿y
 ),

626 
	`m_mshrs
(
cÚfig
.
m_mshr_’Œ›s
,cÚfig.
m_mshr_max_m”ge
),

627 
	$m_bªdwidth_mªagem’t
(
cÚfig
)

629 
	`š™
Ğ
Çme
, 
cÚfig
, 
mempÜt
, 
¡©us
 );

630 
	}
}

632 
	g´Ùeùed
:

633 
¡d
::
¡ršg
 
m_Çme
;

634 
	gÿche_cÚfig
 &
	gm_cÚfig
;

635 
g_¬¿y
* 
	gm_g_¬¿y
;

636 
mshr_bË
 
	gm_mshrs
;

637 
	g¡d
::
li¡
<
mem_ãtch
*> 
m_miss_queue
;

638 
mem_ãtch_¡©us
 
	gm_miss_queue_¡©us
;

639 
mem_ãtch_š‹rçû
 *
	gm_mempÜt
;

641 
	sexŒa_mf_f›lds
 {

642 
exŒa_mf_f›lds
(è{ 
	gm_v®id
 = 
çl£
;}

643 
exŒa_mf_f›lds
Ğ
Ãw_addr_ty³
 
a
, 
i
, 
d
 )

645 
	gm_v®id
 = 
Œue
;

646 
	gm_block_addr
 = 
a
;

647 
	gm_ÿche_šdex
 = 
i
;

648 
	gm_d©a_size
 = 
d
;

650 
boŞ
 
	gm_v®id
;

651 
Ãw_addr_ty³
 
	gm_block_addr
;

652 
	gm_ÿche_šdex
;

653 
	gm_d©a_size
;

656 
	g¡d
::
	tm­
<
	tmem_ãtch
*,
	texŒa_mf_f›lds
> 
	texŒa_mf_f›lds_lookup
;

658 
exŒa_mf_f›lds_lookup
 
	gm_exŒa_mf_f›lds
;

660 
ÿche_¡©s
 
	gm_¡©s
;

663 
boŞ
 
	$miss_queue_fuÎ
(
num_miss
){

664  ( (
m_miss_queue
.
	`size
()+
num_miss
è>ğ
m_cÚfig
.
m_miss_queue_size
 );

665 
	}
}

667 
£nd_»ad_»que¡
(
Ãw_addr_ty³
 
addr
,‚ew_addr_ty³ 
block_addr
, 
ÿche_šdex
, 
mem_ãtch
 *
mf
,

668 
time
, 
boŞ
 &
do_miss
, 
¡d
::
li¡
<
ÿche_ev’t
> &
ev’ts
, boŞ 
»ad_Úly
, boŞ 
wa
);

670 
£nd_»ad_»que¡
(
Ãw_addr_ty³
 
addr
,‚ew_addr_ty³ 
block_addr
, 
ÿche_šdex
, 
mem_ãtch
 *
mf
,

671 
time
, 
boŞ
 &
do_miss
, boŞ &
wb
, 
ÿche_block_t
 &
eviùed
, 
¡d
::
li¡
<
ÿche_ev’t
> &
ev’ts
, boŞ 
»ad_Úly
, boŞ 
wa
);

674 şas 
	cbªdwidth_mªagem’t


676 
	gpublic
:

677 
bªdwidth_mªagem’t
(
ÿche_cÚfig
 &
cÚfig
);

680 
u£_d©a_pÜt
(
mem_ãtch
 *
mf
, 
ÿche_»que¡_¡©us
 
outcome
, cÚ¡ 
¡d
::
li¡
<
ÿche_ev’t
> &
ev’ts
);

683 
u£_fl_pÜt
(
mem_ãtch
 *
mf
);

686 
»¶’ish_pÜt_bªdwidth
();

689 
boŞ
 
d©a_pÜt_ä“
() const;

691 
boŞ
 
fl_pÜt_ä“
() const;

692 
	g´Ùeùed
:

693 cÚ¡ 
ÿche_cÚfig
 &
m_cÚfig
;

695 
	gm_d©a_pÜt_occup›d_cyşes
;

696 
	gm_fl_pÜt_occup›d_cyşes
;

699 
bªdwidth_mªagem’t
 
	gm_bªdwidth_mªagem’t
;

703 şas 
	c»ad_Úly_ÿche
 : 
public
 
ba£lše_ÿche
 {

704 
public
:

705 
	$»ad_Úly_ÿche
ĞcÚ¡ *
Çme
, 
ÿche_cÚfig
 &
cÚfig
, 
cÜe_id
, 
ty³_id
, 
mem_ãtch_š‹rçû
 *
mempÜt
, 
mem_ãtch_¡©us
 
¡©us
 )

706 : 
	$ba£lše_ÿche
(
Çme
,
cÚfig
,
cÜe_id
,
ty³_id
,
mempÜt
,
¡©us
){}

709 
vœtu®
 
ÿche_»que¡_¡©us
 
	`acûss
Ğ
Ãw_addr_ty³
 
addr
, 
mem_ãtch
 *
mf
, 
time
, 
¡d
::
li¡
<
ÿche_ev’t
> &
ev’ts
 );

711 
vœtu®
 ~
	$»ad_Úly_ÿche
(){
	}
}

713 
	g´Ùeùed
:

714 
	$»ad_Úly_ÿche
ĞcÚ¡ *
Çme
, 
ÿche_cÚfig
 &
cÚfig
, 
cÜe_id
, 
ty³_id
, 
mem_ãtch_š‹rçû
 *
mempÜt
, 
mem_ãtch_¡©us
 
¡©us
, 
g_¬¿y
* 
Ãw_g_¬¿y
 )

715 : 
	$ba£lše_ÿche
(
Çme
,
cÚfig
,
cÜe_id
,
ty³_id
,
mempÜt
,
¡©us
, 
Ãw_g_¬¿y
){
	}
}

719 şas 
	cd©a_ÿche
 : 
public
 
ba£lše_ÿche
 {

720 
public
:

721 
	$d©a_ÿche
ĞcÚ¡ *
Çme
, 
ÿche_cÚfig
 &
cÚfig
,

722 
cÜe_id
, 
ty³_id
, 
mem_ãtch_š‹rçû
 *
mempÜt
,

723 
mem_ãtch_®loÿtÜ
 *
mfü—tÜ
, 
mem_ãtch_¡©us
 
¡©us
,

724 
mem_acûss_ty³
 
wr_®loc_ty³
, mem_acûss_ty³ 
wrbk_ty³
 )

725 : 
	$ba£lše_ÿche
(
Çme
,
cÚfig
,
cÜe_id
,
ty³_id
,
mempÜt
,
¡©us
)

727 
	`š™
Ğ
mfü—tÜ
 );

728 
m_wr_®loc_ty³
 = 
wr_®loc_ty³
;

729 
m_wrbk_ty³
 = 
wrbk_ty³
;

732 
vœtu®
 ~
	$d©a_ÿche
(è{
	}
}

734 
vœtu®
 
	$š™
Ğ
mem_ãtch_®loÿtÜ
 *
mfü—tÜ
 )

736 
m_memãtch_ü—tÜ
=
mfü—tÜ
;

739 
m_rd_h™
 = &
d©a_ÿche
::
rd_h™_ba£
;

742 
m_rd_miss
 = &
d©a_ÿche
::
rd_miss_ba£
;

745 
m_cÚfig
.
m_wr™e_pŞicy
){

747 
READ_ONLY
:

748 
	`as£¹
(0 && "Error: Writable Data_cache set‡s READ_ONLY\n");

750 
WRITE_BACK
: 
m_wr_h™
 = &
d©a_ÿche
::
wr_h™_wb
; ;

751 
WRITE_THROUGH
: 
m_wr_h™
 = &
d©a_ÿche
::
wr_h™_wt
; ;

752 
WRITE_EVICT
: 
m_wr_h™
 = &
d©a_ÿche
::
wr_h™_we
; ;

753 
LOCAL_WB_GLOBAL_WT
:

754 
m_wr_h™
 = &
d©a_ÿche
::
wr_h™_glob®_we_loÿl_wb
;

757 
	`as£¹
(0 && "Error: Must set valid cache write…olicy\n");

762 
m_cÚfig
.
m_wr™e_®loc_pŞicy
){

763 
WRITE_ALLOCATE
: 
m_wr_miss
 = &
d©a_ÿche
::
wr_miss_wa
; ;

764 
NO_WRITE_ALLOCATE
: 
m_wr_miss
 = &
d©a_ÿche
::
wr_miss_no_wa
; ;

766 
	`as£¹
(0 && "Error: Must set valid cache write miss…olicy\n");

769 
	}
}

771 
vœtu®
 
ÿche_»que¡_¡©us
 
acûss
Ğ
Ãw_addr_ty³
 
addr
,

772 
mem_ãtch
 *
mf
,

773 
time
,

774 
¡d
::
li¡
<
ÿche_ev’t
> &
ev’ts
 );

775 
	g´Ùeùed
:

776 
	$d©a_ÿche
ĞcÚ¡ *
Çme
,

777 
ÿche_cÚfig
 &
cÚfig
,

778 
cÜe_id
,

779 
ty³_id
,

780 
mem_ãtch_š‹rçû
 *
mempÜt
,

781 
mem_ãtch_®loÿtÜ
 *
mfü—tÜ
,

782 
mem_ãtch_¡©us
 
¡©us
,

783 
g_¬¿y
* 
Ãw_g_¬¿y
,

784 
mem_acûss_ty³
 
wr_®loc_ty³
,

785 
mem_acûss_ty³
 
wrbk_ty³
)

786 : 
	$ba£lše_ÿche
(
Çme
, 
cÚfig
, 
cÜe_id
, 
ty³_id
, 
mempÜt
,
¡©us
, 
Ãw_g_¬¿y
)

788 
	`š™
Ğ
mfü—tÜ
 );

789 
m_wr_®loc_ty³
 = 
wr_®loc_ty³
;

790 
m_wrbk_ty³
 = 
wrbk_ty³
;

791 
	}
}

793 
mem_acûss_ty³
 
	gm_wr_®loc_ty³
;

794 
mem_acûss_ty³
 
	gm_wrbk_ty³
;

799 
ÿche_»que¡_¡©us


800 
´oûss_g_´obe
Ğ
boŞ
 
wr
,

801 
ÿche_»que¡_¡©us
 
¡©us
,

802 
Ãw_addr_ty³
 
addr
,

803 
ÿche_šdex
,

804 
mem_ãtch
* 
mf
,

805 
time
,

806 
¡d
::
li¡
<
ÿche_ev’t
>& 
ev’ts
 );

808 
	g´Ùeùed
:

809 
mem_ãtch_®loÿtÜ
 *
m_memãtch_ü—tÜ
;

813 
£nd_wr™e_»que¡
Ğ
mem_ãtch
 *
mf
,

814 
ÿche_ev’t
 
»que¡
,

815 
time
,

816 
¡d
::
li¡
<
ÿche_ev’t
> &
ev’ts
);

821 
	gÿche_»que¡_¡©us


822 (
	gd©a_ÿche
::*
m_wr_h™
)Ğ
Ãw_addr_ty³
 
addr
,

823 
	gÿche_šdex
,

824 
mem_ãtch
 *
	gmf
,

825 
	gtime
,

826 
	g¡d
::
li¡
<
ÿche_ev’t
> &
ev’ts
,

827 
ÿche_»que¡_¡©us
 
	g¡©us
 );

829 
ÿche_»que¡_¡©us


830 
wr_h™_wb
Ğ
Ãw_addr_ty³
 
addr
,

831 
ÿche_šdex
,

832 
mem_ãtch
 *
mf
,

833 
time
,

834 
¡d
::
li¡
<
ÿche_ev’t
> &
ev’ts
,

835 
ÿche_»que¡_¡©us
 
¡©us
 );

836 
ÿche_»que¡_¡©us


837 
wr_h™_wt
Ğ
Ãw_addr_ty³
 
addr
,

838 
ÿche_šdex
,

839 
mem_ãtch
 *
mf
,

840 
time
,

841 
¡d
::
li¡
<
ÿche_ev’t
> &
ev’ts
,

842 
ÿche_»que¡_¡©us
 
¡©us
 );

845 
ÿche_»que¡_¡©us


846 
wr_h™_we
Ğ
Ãw_addr_ty³
 
addr
,

847 
ÿche_šdex
,

848 
mem_ãtch
 *
mf
,

849 
time
,

850 
¡d
::
li¡
<
ÿche_ev’t
> &
ev’ts
,

851 
ÿche_»que¡_¡©us
 
¡©us
 );

852 
ÿche_»que¡_¡©us


853 
wr_h™_glob®_we_loÿl_wb
Ğ
Ãw_addr_ty³
 
addr
,

854 
ÿche_šdex
,

855 
mem_ãtch
 *
mf
,

856 
time
,

857 
¡d
::
li¡
<
ÿche_ev’t
> &
ev’ts
,

858 
ÿche_»que¡_¡©us
 
¡©us
 );

863 
	gÿche_»que¡_¡©us


864 (
	gd©a_ÿche
::*
m_wr_miss
)Ğ
Ãw_addr_ty³
 
addr
,

865 
	gÿche_šdex
,

866 
mem_ãtch
 *
	gmf
,

867 
	gtime
,

868 
	g¡d
::
li¡
<
ÿche_ev’t
> &
ev’ts
,

869 
ÿche_»que¡_¡©us
 
	g¡©us
 );

872 
ÿche_»que¡_¡©us


873 
wr_miss_wa
Ğ
Ãw_addr_ty³
 
addr
,

874 
ÿche_šdex
,

875 
mem_ãtch
 *
mf
,

876 
time
,

877 
¡d
::
li¡
<
ÿche_ev’t
> &
ev’ts
,

878 
ÿche_»que¡_¡©us
 
¡©us
 );

879 
ÿche_»que¡_¡©us


880 
wr_miss_no_wa
Ğ
Ãw_addr_ty³
 
addr
,

881 
ÿche_šdex
,

882 
mem_ãtch
 *
mf
,

883 
time
,

884 
¡d
::
li¡
<
ÿche_ev’t
> &
ev’ts
,

885 
ÿche_»que¡_¡©us
 
¡©us
 );

889 
	gÿche_»que¡_¡©us


890 (
	gd©a_ÿche
::*
m_rd_h™
)Ğ
Ãw_addr_ty³
 
addr
,

891 
	gÿche_šdex
,

892 
mem_ãtch
 *
	gmf
,

893 
	gtime
,

894 
	g¡d
::
li¡
<
ÿche_ev’t
> &
ev’ts
,

895 
ÿche_»que¡_¡©us
 
	g¡©us
 );

896 
ÿche_»que¡_¡©us


897 
rd_h™_ba£
Ğ
Ãw_addr_ty³
 
addr
,

898 
ÿche_šdex
,

899 
mem_ãtch
 *
mf
,

900 
time
,

901 
¡d
::
li¡
<
ÿche_ev’t
> &
ev’ts
,

902 
ÿche_»que¡_¡©us
 
¡©us
 );

905 
	gÿche_»que¡_¡©us


906 (
	gd©a_ÿche
::*
m_rd_miss
)Ğ
Ãw_addr_ty³
 
addr
,

907 
	gÿche_šdex
,

908 
mem_ãtch
 *
	gmf
,

909 
	gtime
,

910 
	g¡d
::
li¡
<
ÿche_ev’t
> &
ev’ts
,

911 
ÿche_»que¡_¡©us
 
	g¡©us
 );

912 
ÿche_»que¡_¡©us


913 
rd_miss_ba£
Ğ
Ãw_addr_ty³
 
addr
,

914 
ÿche_šdex
,

915 
mem_ãtch
*
mf
,

916 
time
,

917 
¡d
::
li¡
<
ÿche_ev’t
> &
ev’ts
,

918 
ÿche_»que¡_¡©us
 
¡©us
 );

926 şas 
	cl1_ÿche
 : 
public
 
d©a_ÿche
 {

927 
public
:

928 
	$l1_ÿche
(cÚ¡ *
Çme
, 
ÿche_cÚfig
 &
cÚfig
,

929 
cÜe_id
, 
ty³_id
, 
mem_ãtch_š‹rçû
 *
mempÜt
,

930 
mem_ãtch_®loÿtÜ
 *
mfü—tÜ
, 
mem_ãtch_¡©us
 
¡©us
 )

931 : 
	$d©a_ÿche
(
Çme
,
cÚfig
,
cÜe_id
,
ty³_id
,
mempÜt
,
mfü—tÜ
,
¡©us
, 
L1_WR_ALLOC_R
, 
L1_WRBK_ACC
){}

933 
vœtu®
 ~
	$l1_ÿche
(){
	}
}

935 
vœtu®
 
ÿche_»que¡_¡©us


936 
acûss
Ğ
Ãw_addr_ty³
 
addr
,

937 
mem_ãtch
 *
mf
,

938 
time
,

939 
¡d
::
li¡
<
ÿche_ev’t
> &
ev’ts
 );

941 
	g´Ùeùed
:

942 
	$l1_ÿche
ĞcÚ¡ *
Çme
,

943 
ÿche_cÚfig
 &
cÚfig
,

944 
cÜe_id
,

945 
ty³_id
,

946 
mem_ãtch_š‹rçû
 *
mempÜt
,

947 
mem_ãtch_®loÿtÜ
 *
mfü—tÜ
,

948 
mem_ãtch_¡©us
 
¡©us
,

949 
g_¬¿y
* 
Ãw_g_¬¿y
 )

950 : 
	$d©a_ÿche
Ğ
Çme
,

951 
cÚfig
,

952 
cÜe_id
,
ty³_id
,
mempÜt
,
mfü—tÜ
,
¡©us
, 
Ãw_g_¬¿y
, 
L1_WR_ALLOC_R
, 
L1_WRBK_ACC
 ){
	}
}

958 şas 
	cl2_ÿche
 : 
public
 
d©a_ÿche
 {

959 
public
:

960 
	$l2_ÿche
(cÚ¡ *
Çme
, 
ÿche_cÚfig
 &
cÚfig
,

961 
cÜe_id
, 
ty³_id
, 
mem_ãtch_š‹rçû
 *
mempÜt
,

962 
mem_ãtch_®loÿtÜ
 *
mfü—tÜ
, 
mem_ãtch_¡©us
 
¡©us
 )

963 : 
	$d©a_ÿche
(
Çme
,
cÚfig
,
cÜe_id
,
ty³_id
,
mempÜt
,
mfü—tÜ
,
¡©us
, 
L2_WR_ALLOC_R
, 
L2_WRBK_ACC
){}

965 
vœtu®
 ~
	$l2_ÿche
(è{
	}
}

967 
vœtu®
 
ÿche_»que¡_¡©us


968 
acûss
Ğ
Ãw_addr_ty³
 
addr
,

969 
mem_ãtch
 *
mf
,

970 
time
,

971 
¡d
::
li¡
<
ÿche_ev’t
> &
ev’ts
 );

981 şas 
	c‹x_ÿche
 : 
public
 
ÿche_t
 {

982 
public
:

983 
	$‹x_ÿche
ĞcÚ¡ *
Çme
, 
ÿche_cÚfig
 &
cÚfig
, 
cÜe_id
, 
ty³_id
, 
mem_ãtch_š‹rçû
 *
mempÜt
,

984 
mem_ãtch_¡©us
 
»que¡_¡©us
,

985 
mem_ãtch_¡©us
 
rob_¡©us
 )

986 : 
	`m_cÚfig
(
cÚfig
),

987 
	`m_gs
(
cÚfig
,
cÜe_id
,
ty³_id
),

988 
	`m_äagm’t_fifo
(
cÚfig
.
m_äagm’t_fifo_’Œ›s
),

989 
	`m_»que¡_fifo
(
cÚfig
.
m_»que¡_fifo_’Œ›s
),

990 
	`m_rob
(
cÚfig
.
m_rob_’Œ›s
),

991 
	$m_»suÉ_fifo
(
cÚfig
.
m_»suÉ_fifo_’Œ›s
)

993 
m_Çme
 = 
Çme
;

994 
	`as£¹
(
cÚfig
.
m_mshr_ty³
 =ğ
TEX_FIFO
);

995 
	`as£¹
(
cÚfig
.
m_wr™e_pŞicy
 =ğ
READ_ONLY
);

996 
	`as£¹
(
cÚfig
.
m_®loc_pŞicy
 =ğ
ON_MISS
);

997 
m_mempÜt
=
mempÜt
;

998 
m_ÿche
 = 
Ãw
 
d©a_block
[ 
cÚfig
.
	`g‘_num_lšes
() ];

999 
m_»que¡_queue_¡©us
 = 
»que¡_¡©us
;

1000 
m_rob_¡©us
 = 
rob_¡©us
;

1008 
ÿche_»que¡_¡©us
 
	`acûss
Ğ
Ãw_addr_ty³
 
addr
, 
mem_ãtch
 *
mf
, 
time
, 
¡d
::
li¡
<
ÿche_ev’t
> &
ev’ts
 );

1009 
	`cyşe
();

1011 
	`fl
Ğ
mem_ãtch
 *
mf
, 
time
 );

1013 
boŞ
 
	$acûss_»ady
(ècÚ¡{ !
m_»suÉ_fifo
.
	`em±y
();
	}
}

1015 
mem_ãtch
 *
	$Ãxt_acûss
(){ 
m_»suÉ_fifo
.
	`pİ
();
	}
}

1016 
	$di¥Ïy_¡©e
Ğ
FILE
 *
å
 ) const;

1019 
boŞ
 
	$d©a_pÜt_ä“
(ècÚ¡ {  
Œue
; 
	}
}

1020 
boŞ
 
	$fl_pÜt_ä“
(ècÚ¡ {  
Œue
; 
	}
}

1023 cÚ¡ 
	gÿche_¡©s
 &
	$g‘_¡©s
() const {

1024  
m_¡©s
;

1025 
	}
}

1026 
	$g‘_¡©s
(
mem_acûss_ty³
 *
acûss_ty³
, 
num_acûss_ty³
, 
ÿche_»que¡_¡©us
 *
acûss_¡©us
, 
num_acûss_¡©us
) const{

1027  
m_¡©s
.
	`g‘_¡©s
(
acûss_ty³
, 
num_acûss_ty³
, 
acûss_¡©us
, 
num_acûss_¡©us
);

1028 
	}
}

1030 
	$g‘_sub_¡©s
(
ÿche_sub_¡©s
 &
css
) const{

1031 
m_¡©s
.
	`g‘_sub_¡©s
(
css
);

1032 
	}
}

1033 
	g´iv©e
:

1034 
¡d
::
¡ršg
 
m_Çme
;

1035 cÚ¡ 
	gÿche_cÚfig
 &
	gm_cÚfig
;

1037 
	säagm’t_’Œy
 {

1038 
äagm’t_’Œy
() {}

1039 
äagm’t_’Œy
Ğ
mem_ãtch
 *
mf
, 
idx
, 
boŞ
 
m
, 
d
 )

1041 
	gm_»que¡
=
mf
;

1042 
	gm_ÿche_šdex
=
idx
;

1043 
	gm_miss
=
m
;

1044 
	gm_d©a_size
=
d
;

1046 
mem_ãtch
 *
	gm_»que¡
;

1047 
	gm_ÿche_šdex
;

1048 
boŞ
 
	gm_miss
;

1049 
	gm_d©a_size
;

1052 
	srob_’Œy
 {

1053 
rob_’Œy
(è{ 
	gm_»ady
 = 
çl£
; 
	gm_time
=0; 
	gm_»que¡
=
NULL
;}

1054 
rob_’Œy
Ğ
i
, 
mem_ãtch
 *
mf
, 
Ãw_addr_ty³
 
a
 )

1056 
	gm_»ady
=
çl£
;

1057 
	gm_šdex
=
i
;

1058 
	gm_time
=0;

1059 
	gm_»que¡
=
mf
;

1060 
	gm_block_addr
=
a
;

1062 
boŞ
 
	gm_»ady
;

1063 
	gm_time
;

1064 
	gm_šdex
;

1065 
mem_ãtch
 *
	gm_»que¡
;

1066 
Ãw_addr_ty³
 
	gm_block_addr
;

1069 
	sd©a_block
 {

1070 
d©a_block
(è{ 
	gm_v®id
 = 
çl£
;}

1071 
boŞ
 
	gm_v®id
;

1072 
Ãw_addr_ty³
 
	gm_block_addr
;

1076 
	g‹m¶©e
<
şass
 
	gT
> cÏs 
	cfifo
 {

1077 
	gpublic
:

1078 
fifo
Ğ
size
 )

1080 
m_size
=
size
;

1081 
	gm_num
=0;

1082 
	gm_h—d
=0;

1083 
	gm_
=0;

1084 
	gm_d©a
 = 
Ãw
 
T
[
size
];

1086 
boŞ
 
fuÎ
(ècÚ¡ {  
	gm_num
 =ğ
m_size
;}

1087 
boŞ
 
em±y
(ècÚ¡ {  
	gm_num
 == 0;}

1088 
size
(ècÚ¡ {  
	gm_num
;}

1089 
ÿ·c™y
(ècÚ¡ {  
	gm_size
;}

1090 
push
ĞcÚ¡ 
T
 &
e
 )

1092 
as£¹
(!
fuÎ
());

1093 
	gm_d©a
[
m_h—d
] = 
e
;

1094 
	g»suÉ
 = 
m_h—d
;

1095 
šc_h—d
();

1096  
	g»suÉ
;

1098 
T
 
pİ
()

1100 
as£¹
(!
em±y
());

1101 
T
 
	g»suÉ
 = 
m_d©a
[
m_
];

1102 
šc_
();

1103  
	g»suÉ
;

1105 cÚ¡ 
	gT
 &
³ek
Ğ
šdex
 ) const

1107 
as£¹
Ğ
šdex
 < 
m_size
 );

1108  
	gm_d©a
[
šdex
];

1110 
	gT
 &
³ek
Ğ
šdex
 )

1112 
as£¹
Ğ
šdex
 < 
m_size
 );

1113  
	gm_d©a
[
šdex
];

1115 
	gT
 &
³ek
() const

1117  
	gm_d©a
[
m_
];

1119 
Ãxt_pİ_šdex
() const

1121  
	gm_
;

1123 
	g´iv©e
:

1124 
šc_h—d
(è{ 
m_h—d
 = (m_h—d+1)%
m_size
; 
	gm_num
++;}

1125 
šc_
(è{ 
as£¹
(
m_num
>0); 
	gm_
 = (
m_
+1)%
m_size
; 
	gm_num
--;}

1127 
	gm_h—d
;

1128 
	gm_
;

1129 
	gm_num
;

1130 
	gm_size
;

1131 
T
 *
	gm_d©a
;

1134 
g_¬¿y
 
	gm_gs
;

1135 
	gfifo
<
	gäagm’t_’Œy
> 
	gm_äagm’t_fifo
;

1136 
	gfifo
<
	gmem_ãtch
*> 
	gm_»que¡_fifo
;

1137 
	gfifo
<
	grob_’Œy
> 
	gm_rob
;

1138 
d©a_block
 *
	gm_ÿche
;

1139 
	gfifo
<
	gmem_ãtch
*> 
	gm_»suÉ_fifo
;

1141 
mem_ãtch_š‹rçû
 *
	gm_mempÜt
;

1142 
mem_ãtch_¡©us
 
	gm_»que¡_queue_¡©us
;

1143 
mem_ãtch_¡©us
 
	gm_rob_¡©us
;

1145 
	sexŒa_mf_f›lds
 {

1146 
exŒa_mf_f›lds
(è{ 
	gm_v®id
 = 
çl£
;}

1147 
exŒa_mf_f›lds
Ğ
i
 )

1149 
	gm_v®id
 = 
Œue
;

1150 
	gm_rob_šdex
 = 
i
;

1152 
boŞ
 
	gm_v®id
;

1153 
	gm_rob_šdex
;

1156 
ÿche_¡©s
 
	gm_¡©s
;

1158 
	g¡d
::
	tm­
<
	tmem_ãtch
*,
	texŒa_mf_f›lds
> 
	texŒa_mf_f›lds_lookup
;

1160 
exŒa_mf_f›lds_lookup
 
	gm_exŒa_mf_f›lds
;

	@gpu-misc.cc

28 
	~"gpu-misc.h
"

30 
	$LOGB2
Ğ
v
 ) {

31 
shiá
;

32 
r
;

34 
r
 = 0;

36 
shiá
 = (Ğ
v
 & 0xFFFF0000è!ğ0 ) << 4; v >>ğshiá; 
r
 |= shift;

37 
shiá
 = (Ğ
v
 & 0xFF00 ) !ğ0 ) << 3; v >>ğshiá; 
r
 |= shift;

38 
shiá
 = (Ğ
v
 & 0xF0 ) !ğ0 ) << 2; v >>ğshiá; 
r
 |= shift;

39 
shiá
 = (Ğ
v
 & 0xC ) !ğ0 ) << 1; v >>ğshiá; 
r
 |= shift;

40 
shiá
 = (Ğ
v
 & 0x2 ) !ğ0 ) << 0; v >>ğshiá; 
r
 |= shift;

42  
r
;

43 
	}
}

	@gpu-misc.h

29 #iâdeà
GPU_MISC_H


30 
	#GPU_MISC_H


	)

34 
	#DEBUGL1MISS
 0

	)

36 
LOGB2
Ğ
v
 );

38 
	#gs_mš2
(
a
,
b
è((×)<(b))?×):(b))

	)

39 
	#mš3
(
x
,
y
,
z
è(((x)<(yè&& (x)<(z))?(x):(
	`gs_mš2
((y),(z))))

	)

	@gpu-sim.cc

30 
	~"gpu-sim.h
"

32 
	~<¡dio.h
>

33 
	~<¡dlib.h
>

34 
	~<m©h.h
>

35 
	~"zlib.h
"

38 
	~"shad”.h
"

39 
	~"d¿m.h
"

40 
	~"mem_ãtch.h
"

42 
	~<time.h
>

43 
	~"gpu-ÿche.h
"

44 
	~"gpu-misc.h
"

45 
	~"d–ayqueue.h
"

46 
	~"shad”.h
"

47 
	~"iút_w¿µ”.h
"

48 
	~"d¿m.h
"

49 
	~"addrdec.h
"

50 
	~"¡©-toŞ.h
"

51 
	~"l2ÿche.h
"

53 
	~"../cuda-sim/±x-¡©s.h
"

54 
	~"../¡©w¿µ”.h
"

55 
	~"../ab¡¿ù_h¬dw¬e_mod–.h
"

56 
	~"../debug.h
"

57 
	~"../gpgpusim_’Œypošt.h
"

58 
	~"../cuda-sim/cuda-sim.h
"

59 
	~"../Œaû.h
"

60 
	~"mem_Ï‹ncy_¡©.h
"

61 
	~"pow”_¡©.h
"

62 
	~"visu®iz”.h
"

63 
	~"¡©s.h
"

65 #ifdeà
GPGPUSIM_POWER_MODEL


66 
	~"pow”_š‹rçû.h
"

68 şas 
	cgpgpu_sim_w¿µ”
 {};

71 
	~<¡dio.h
>

72 
	~<¡ršg.h
>

73 
	~<io¡»am
>

74 
	~<s¡»am
>

75 
	~<¡ršg
>

77 
	#MAX
(
a
,
b
è((×)>(b))?×):(b))

	)

80 
boŞ
 
	gg_š‹¿ùive_debugg”_’abËd
=
çl£
;

82 
	ggpu_sim_cyşe
 = 0;

83 
	ggpu_tÙ_sim_cyşe
 = 0;

87 
	ggpu_¡®l_d¿mfuÎ
 = 0;

88 
	ggpu_¡®l_iút2sh
 = 0;

92 
	#CORE
 0x01

	)

93 
	#L2
 0x02

	)

94 
	#DRAM
 0x04

	)

95 
	#ICNT
 0x08

	)

98 
	#MEM_LATENCY_STAT_IMPL


	)

103 
	~"mem_Ï‹ncy_¡©.h
"

105 
	gpow”_cÚfig
::
	$»g_İtiÚs
(
şass
 
O±iÚP¬£r
 * 
İp
)

109 
	`İtiÚ_·r£r_»gi¡”
(
İp
, "-gpuw©tch_xml_fe", 
OPT_CSTR
,

110 &
g_pow”_cÚfig_Çme
,"GPUWattch XML file",

113 
	`İtiÚ_·r£r_»gi¡”
(
İp
, "-pow”_simuÏtiÚ_’abËd", 
OPT_BOOL
,

114 &
g_pow”_simuÏtiÚ_’abËd
, "Turn on…ower simulator (1=On, 0=Off)",

117 
	`İtiÚ_·r£r_»gi¡”
(
İp
, "-pow”_³r_cyşe_dump", 
OPT_BOOL
,

118 &
g_pow”_³r_cyşe_dump
, "Dump detailed…ower outputƒach cycle",

122 
	`İtiÚ_·r£r_»gi¡”
(
İp
, "-pow”_Œaû_’abËd", 
OPT_BOOL
,

123 &
g_pow”_Œaû_’abËd
, "produce‡ file forhe…owerrace (1=On, 0=Off)",

126 
	`İtiÚ_·r£r_»gi¡”
(
İp
, "-pow”_Œaû_zËv–", 
OPT_INT32
,

127 &
g_pow”_Œaû_zËv–
, "Compression†evel ofhe…owerrace output†og (0=no comp, 9=highest)",

130 
	`İtiÚ_·r£r_»gi¡”
(
İp
, "-¡—dy_pow”_Ëv–s_’abËd", 
OPT_BOOL
,

131 &
g_¡—dy_pow”_Ëv–s_’abËd
, "produce‡ file forhe steady…ower†evels (1=On, 0=Off)",

134 
	`İtiÚ_·r£r_»gi¡”
(
İp
, "-¡—dy_¡©e_defš™iÚ", 
OPT_CSTR
,

135 &
gpu_¡—dy_¡©e_defš™iÚ
, "allowed deviation:number of samples",

138 
	}
}

140 
	gmemÜy_cÚfig
::
	$»g_İtiÚs
(
şass
 
O±iÚP¬£r
 * 
İp
)

142 
	`İtiÚ_·r£r_»gi¡”
(
İp
, "-gpgpu_d¿m_scheduËr", 
OPT_INT32
, &
scheduËr_ty³
,

144 
	`İtiÚ_·r£r_»gi¡”
(
İp
, "-gpgpu_d¿m_·¹™iÚ_queues", 
OPT_CSTR
, &
gpgpu_L2_queue_cÚfig
,

148 
	`İtiÚ_·r£r_»gi¡”
(
İp
, "-l2_id—l", 
OPT_BOOL
, &
l2_id—l
,

151 
	`İtiÚ_·r£r_»gi¡”
(
İp
, "-gpgpu_ÿche:dl2", 
OPT_CSTR
, &
m_L2_cÚfig
.
m_cÚfig_¡ršg
,

155 
	`İtiÚ_·r£r_»gi¡”
(
İp
, "-gpgpu_ÿche:dl2_‹xtu»_Úly", 
OPT_BOOL
, &
m_L2_‹xu»_Úly
,

158 
	`İtiÚ_·r£r_»gi¡”
(
İp
, "-gpgpu_n_mem", 
OPT_UINT32
, &
m_n_mem
,

161 
	`İtiÚ_·r£r_»gi¡”
(
İp
, "-gpgpu_n_sub_·¹™iÚ_³r_mchªÃl", 
OPT_UINT32
, &
m_n_sub_·¹™iÚ_³r_memÜy_chªÃl
,

164 
	`İtiÚ_·r£r_»gi¡”
(
İp
, "-gpgpu_n_mem_³r_ù¾r", 
OPT_UINT32
, &
gpu_n_mem_³r_ù¾r
,

167 
	`İtiÚ_·r£r_»gi¡”
(
İp
, "-gpgpu_memÏ‹ncy_¡©", 
OPT_INT32
, &
gpgpu_memÏ‹ncy_¡©
,

170 
	`İtiÚ_·r£r_»gi¡”
(
İp
, "-gpgpu_äfcfs_d¿m_sched_queue_size", 
OPT_INT32
, &
gpgpu_äfcfs_d¿m_sched_queue_size
,

173 
	`İtiÚ_·r£r_»gi¡”
(
İp
, "-gpgpu_d¿m_»tuº_queue_size", 
OPT_INT32
, &
gpgpu_d¿m_»tuº_queue_size
,

176 
	`İtiÚ_·r£r_»gi¡”
(
İp
, "-gpgpu_d¿m_buswidth", 
OPT_UINT32
, &
busW
,

179 
	`İtiÚ_·r£r_»gi¡”
(
İp
, "-gpgpu_d¿m_bur¡_Ëngth", 
OPT_UINT32
, &
BL
,

182 
	`İtiÚ_·r£r_»gi¡”
(
İp
, "-d¿m_d©a_commªd_äeq_¿tio", 
OPT_UINT32
, &
d©a_commªd_äeq_¿tio
,

185 
	`İtiÚ_·r£r_»gi¡”
(
İp
, "-gpgpu_d¿m_timšg_İt", 
OPT_CSTR
, &
gpgpu_d¿m_timšg_İt
,

188 
	`İtiÚ_·r£r_»gi¡”
(
İp
, "-rİ_Ï‹ncy", 
OPT_UINT32
, &
rİ_Ï‹ncy
,

191 
	`İtiÚ_·r£r_»gi¡”
(
İp
, "-d¿m_Ï‹ncy", 
OPT_UINT32
, &
d¿m_Ï‹ncy
,

195 
m_add»ss_m­pšg
.
	`addrdec_£tİtiÚ
(
İp
);

196 
	}
}

198 
	gshad”_cÜe_cÚfig
::
	$»g_İtiÚs
(
şass
 
O±iÚP¬£r
 * 
İp
)

200 
	`İtiÚ_·r£r_»gi¡”
(
İp
, "-gpgpu_simd_mod–", 
OPT_INT32
, &
mod–
,

202 
	`İtiÚ_·r£r_»gi¡”
(
İp
, "-gpgpu_shad”_cÜe_p–še", 
OPT_CSTR
, &
gpgpu_shad”_cÜe_p–še_İt
,

205 
	`İtiÚ_·r£r_»gi¡”
(
İp
, "-gpgpu_‹x_ÿche:l1", 
OPT_CSTR
, &
m_L1T_cÚfig
.
m_cÚfig_¡ršg
,

209 
	`İtiÚ_·r£r_»gi¡”
(
İp
, "-gpgpu_cÚ¡_ÿche:l1", 
OPT_CSTR
, &
m_L1C_cÚfig
.
m_cÚfig_¡ršg
,

213 
	`İtiÚ_·r£r_»gi¡”
(
İp
, "-gpgpu_ÿche:1", 
OPT_CSTR
, &
m_L1I_cÚfig
.
m_cÚfig_¡ršg
,

217 
	`İtiÚ_·r£r_»gi¡”
(
İp
, "-gpgpu_ÿche:dl1", 
OPT_CSTR
, &
m_L1D_cÚfig
.
m_cÚfig_¡ršg
,

221 
	`İtiÚ_·r£r_»gi¡”
(
İp
, "-gpgpu_ÿche:dl1P»fL1", 
OPT_CSTR
, &
m_L1D_cÚfig
.
m_cÚfig_¡ršgP»fL1
,

225 
	`İtiÚ_·r£r_»gi¡”
(
İp
, "-gpgpu_ÿche:dl1P»Sh¬ed", 
OPT_CSTR
, &
m_L1D_cÚfig
.
m_cÚfig_¡ršgP»fSh¬ed
,

229 
	`İtiÚ_·r£r_»gi¡”
(
İp
, "-gmem_sk_L1D", 
OPT_BOOL
, &
gmem_sk_L1D
,

233 
	`İtiÚ_·r£r_»gi¡”
(
İp
, "-gpgpu_³rãù_mem", 
OPT_BOOL
, &
gpgpu_³rãù_mem
,

236 
	`İtiÚ_·r£r_»gi¡”
(
İp
, "-n_»gfe_g©šg_group", 
OPT_UINT32
, &
n_»gfe_g©šg_group
,

239 
	`İtiÚ_·r£r_»gi¡”
(
İp
, "-gpgpu_şock_g©ed_»g_fe", 
OPT_BOOL
, &
gpgpu_şock_g©ed_»g_fe
,

242 
	`İtiÚ_·r£r_»gi¡”
(
İp
, "-gpgpu_şock_g©ed_ÏÃs", 
OPT_BOOL
, &
gpgpu_şock_g©ed_ÏÃs
,

245 
	`İtiÚ_·r£r_»gi¡”
(
İp
, "-gpgpu_shad”_»gi¡”s", 
OPT_UINT32
, &
gpgpu_shad”_»gi¡”s
,

248 
	`İtiÚ_·r£r_»gi¡”
(
İp
, "-gpgpu_shad”_ùa", 
OPT_UINT32
, &
max_ùa_³r_cÜe
,

251 
	`İtiÚ_·r£r_»gi¡”
(
İp
, "-gpgpu_num_ùa_b¬r›rs", 
OPT_UINT32
, &
max_b¬r›rs_³r_ùa
,

254 
	`İtiÚ_·r£r_»gi¡”
(
İp
, "-gpgpu_n_şu¡”s", 
OPT_UINT32
, &
n_simt_şu¡”s
,

257 
	`İtiÚ_·r£r_»gi¡”
(
İp
, "-gpgpu_n_cÜes_³r_şu¡”", 
OPT_UINT32
, &
n_simt_cÜes_³r_şu¡”
,

260 
	`İtiÚ_·r£r_»gi¡”
(
İp
, "-gpgpu_n_şu¡”_ejeùiÚ_bufãr_size", 
OPT_UINT32
, &
n_simt_ejeùiÚ_bufãr_size
,

263 
	`İtiÚ_·r£r_»gi¡”
(
İp
, "-gpgpu_n_ld¡_»¥Ú£_bufãr_size", 
OPT_UINT32
, &
ld¡_un™_»¥Ú£_queue_size
,

266 
	`İtiÚ_·r£r_»gi¡”
(
İp
, "-gpgpu_shmem_size", 
OPT_UINT32
, &
gpgpu_shmem_size
,

269 
	`İtiÚ_·r£r_»gi¡”
(
İp
, "-gpgpu_shmem_size", 
OPT_UINT32
, &
gpgpu_shmem_sizeDeçuÉ
,

272 
	`İtiÚ_·r£r_»gi¡”
(
İp
, "-gpgpu_shmem_size_P»fL1", 
OPT_UINT32
, &
gpgpu_shmem_sizeP»fL1
,

275 
	`İtiÚ_·r£r_»gi¡”
(
İp
, "-gpgpu_shmem_size_P»fSh¬ed", 
OPT_UINT32
, &
gpgpu_shmem_sizeP»fSh¬ed
,

278 
	`İtiÚ_·r£r_»gi¡”
(
İp
, "-gpgpu_shmem_num_bªks", 
OPT_UINT32
, &
num_shmem_bªk
,

281 
	`İtiÚ_·r£r_»gi¡”
(
İp
, "-gpgpu_shmem_lim™ed_brßdÿ¡", 
OPT_BOOL
, &
shmem_lim™ed_brßdÿ¡
,

284 
	`İtiÚ_·r£r_»gi¡”
(
İp
, "-gpgpu_shmem_w¬p_·¹s", 
OPT_INT32
, &
mem_w¬p_·¹s
,

287 
	`İtiÚ_·r£r_»gi¡”
(
İp
, "-gpgpu_w¬pdi¡ro_shad”", 
OPT_INT32
, &
gpgpu_w¬pdi¡ro_shad”
,

290 
	`İtiÚ_·r£r_»gi¡”
(
İp
, "-gpgpu_w¬p_issue_shad”", 
OPT_INT32
, &
gpgpu_w¬p_issue_shad”
,

293 
	`İtiÚ_·r£r_»gi¡”
(
İp
, "-gpgpu_loÿl_mem_m­", 
OPT_BOOL
, &
gpgpu_loÿl_mem_m­
,

296 
	`İtiÚ_·r£r_»gi¡”
(
İp
, "-gpgpu_num_»g_bªks", 
OPT_INT32
, &
gpgpu_num_»g_bªks
,

299 
	`İtiÚ_·r£r_»gi¡”
(
İp
, "-gpgpu_»g_bªk_u£_w¬p_id", 
OPT_BOOL
, &
gpgpu_»g_bªk_u£_w¬p_id
,

302 
	`İtiÚ_·r£r_»gi¡”
(
İp
, "-gpgpu_İ”ªd_cŞËùÜ_num_un™s_¥", 
OPT_INT32
, &
gpgpu_İ”ªd_cŞËùÜ_num_un™s_¥
,

305 
	`İtiÚ_·r£r_»gi¡”
(
İp
, "-gpgpu_İ”ªd_cŞËùÜ_num_un™s_sfu", 
OPT_INT32
, &
gpgpu_İ”ªd_cŞËùÜ_num_un™s_sfu
,

308 
	`İtiÚ_·r£r_»gi¡”
(
İp
, "-gpgpu_İ”ªd_cŞËùÜ_num_un™s_mem", 
OPT_INT32
, &
gpgpu_İ”ªd_cŞËùÜ_num_un™s_mem
,

311 
	`İtiÚ_·r£r_»gi¡”
(
İp
, "-gpgpu_İ”ªd_cŞËùÜ_num_un™s_g’", 
OPT_INT32
, &
gpgpu_İ”ªd_cŞËùÜ_num_un™s_g’
,

314 
	`İtiÚ_·r£r_»gi¡”
(
İp
, "-gpgpu_İ”ªd_cŞËùÜ_num_š_pÜts_¥", 
OPT_INT32
, &
gpgpu_İ”ªd_cŞËùÜ_num_š_pÜts_¥
,

317 
	`İtiÚ_·r£r_»gi¡”
(
İp
, "-gpgpu_İ”ªd_cŞËùÜ_num_š_pÜts_sfu", 
OPT_INT32
, &
gpgpu_İ”ªd_cŞËùÜ_num_š_pÜts_sfu
,

320 
	`İtiÚ_·r£r_»gi¡”
(
İp
, "-gpgpu_İ”ªd_cŞËùÜ_num_š_pÜts_mem", 
OPT_INT32
, &
gpgpu_İ”ªd_cŞËùÜ_num_š_pÜts_mem
,

323 
	`İtiÚ_·r£r_»gi¡”
(
İp
, "-gpgpu_İ”ªd_cŞËùÜ_num_š_pÜts_g’", 
OPT_INT32
, &
gpgpu_İ”ªd_cŞËùÜ_num_š_pÜts_g’
,

326 
	`İtiÚ_·r£r_»gi¡”
(
İp
, "-gpgpu_İ”ªd_cŞËùÜ_num_out_pÜts_¥", 
OPT_INT32
, &
gpgpu_İ”ªd_cŞËùÜ_num_out_pÜts_¥
,

329 
	`İtiÚ_·r£r_»gi¡”
(
İp
, "-gpgpu_İ”ªd_cŞËùÜ_num_out_pÜts_sfu", 
OPT_INT32
, &
gpgpu_İ”ªd_cŞËùÜ_num_out_pÜts_sfu
,

332 
	`İtiÚ_·r£r_»gi¡”
(
İp
, "-gpgpu_İ”ªd_cŞËùÜ_num_out_pÜts_mem", 
OPT_INT32
, &
gpgpu_İ”ªd_cŞËùÜ_num_out_pÜts_mem
,

335 
	`İtiÚ_·r£r_»gi¡”
(
İp
, "-gpgpu_İ”ªd_cŞËùÜ_num_out_pÜts_g’", 
OPT_INT32
, &
gpgpu_İ”ªd_cŞËùÜ_num_out_pÜts_g’
,

338 
	`İtiÚ_·r£r_»gi¡”
(
İp
, "-gpgpu_cßËsû_¬ch", 
OPT_INT32
, &
gpgpu_cßËsû_¬ch
,

341 
	`İtiÚ_·r£r_»gi¡”
(
İp
, "-gpgpu_num_sched_³r_cÜe", 
OPT_INT32
, &
gpgpu_num_sched_³r_cÜe
,

344 
	`İtiÚ_·r£r_»gi¡”
(
İp
, "-gpgpu_max_š¢_issue_³r_w¬p", 
OPT_INT32
, &
gpgpu_max_š¢_issue_³r_w¬p
,

347 
	`İtiÚ_·r£r_»gi¡”
(
İp
, "-gpgpu_simt_cÜe_sim_Üd”", 
OPT_INT32
, &
simt_cÜe_sim_Üd”
,

350 
	`İtiÚ_·r£r_»gi¡”
(
İp
, "-gpgpu_p–še_widths", 
OPT_CSTR
, &
p–še_widths_¡ršg
,

354 
	`İtiÚ_·r£r_»gi¡”
(
İp
, "-gpgpu_num_¥_un™s", 
OPT_INT32
, &
gpgpu_num_¥_un™s
,

357 
	`İtiÚ_·r£r_»gi¡”
(
İp
, "-gpgpu_num_sfu_un™s", 
OPT_INT32
, &
gpgpu_num_sfu_un™s
,

360 
	`İtiÚ_·r£r_»gi¡”
(
İp
, "-gpgpu_num_mem_un™s", 
OPT_INT32
, &
gpgpu_num_mem_un™s
,

363 
	`İtiÚ_·r£r_»gi¡”
(
İp
, "-gpgpu_scheduËr", 
OPT_CSTR
, &
gpgpu_scheduËr_¡ršg
,

369 
	}
}

371 
	ggpgpu_sim_cÚfig
::
	$»g_İtiÚs
(
İtiÚ_·r£r_t
 
İp
)

373 
gpgpu_funùiÚ®_sim_cÚfig
::
	`»g_İtiÚs
(
İp
);

374 
m_shad”_cÚfig
.
	`»g_İtiÚs
(
İp
);

375 
m_memÜy_cÚfig
.
	`»g_İtiÚs
(
İp
);

376 
pow”_cÚfig
::
	`»g_İtiÚs
(
İp
);

377 
	`İtiÚ_·r£r_»gi¡”
(
İp
, "-gpgpu_max_cyşe", 
OPT_INT32
, &
gpu_max_cyşe_İt
,

380 
	`İtiÚ_·r£r_»gi¡”
(
İp
, "-gpgpu_max_š¢", 
OPT_INT32
, &
gpu_max_š¢_İt
,

383 
	`İtiÚ_·r£r_»gi¡”
(
İp
, "-gpgpu_max_ùa", 
OPT_INT32
, &
gpu_max_ùa_İt
,

386 
	`İtiÚ_·r£r_»gi¡”
(
İp
, "-gpgpu_ruÁime_¡©", 
OPT_CSTR
, &
gpgpu_ruÁime_¡©
,

389 
	`İtiÚ_·r£r_»gi¡”
(
İp
, "-liv’ess_mes§ge_äeq", 
OPT_INT64
, &
liv’ess_mes§ge_äeq
,

392 
	`İtiÚ_·r£r_»gi¡”
(
İp
, "-gpgpu_æush_l1_ÿche", 
OPT_BOOL
, &
gpgpu_æush_l1_ÿche
,

395 
	`İtiÚ_·r£r_»gi¡”
(
İp
, "-gpgpu_æush_l2_ÿche", 
OPT_BOOL
, &
gpgpu_æush_l2_ÿche
,

399 
	`İtiÚ_·r£r_»gi¡”
(
İp
, "-gpgpu_d—dlock_d‘eù", 
OPT_BOOL
, &
gpu_d—dlock_d‘eù
,

402 
	`İtiÚ_·r£r_»gi¡”
(
İp
, "-gpgpu_±x_š¡ruùiÚ_şassifiÿtiÚ", 
OPT_INT32
,

403 &
gpgpu_±x_š¡ruùiÚ_şassifiÿtiÚ
,

406 
	`İtiÚ_·r£r_»gi¡”
(
İp
, "-gpgpu_±x_sim_mode", 
OPT_INT32
, &
g_±x_sim_mode
,

409 
	`İtiÚ_·r£r_»gi¡”
(
İp
, "-gpgpu_şock_domašs", 
OPT_CSTR
, &
gpgpu_şock_domašs
,

412 
	`İtiÚ_·r£r_»gi¡”
(
İp
, "-gpgpu_max_cÚcu¼’t_k”Ãl", 
OPT_INT32
, &
max_cÚcu¼’t_k”Ãl
,

414 
	`İtiÚ_·r£r_»gi¡”
(
İp
, "-gpgpu_cæog_š‹rv®", 
OPT_INT32
, &
gpgpu_cæog_š‹rv®
,

417 
	`İtiÚ_·r£r_»gi¡”
(
İp
, "-visu®iz”_’abËd", 
OPT_BOOL
,

418 &
g_visu®iz”_’abËd
, "Turn on visualizer output (1=On, 0=Off)",

420 
	`İtiÚ_·r£r_»gi¡”
(
İp
, "-visu®iz”_ouutfe", 
OPT_CSTR
,

421 &
g_visu®iz”_f’ame
, "Specifieshe output†og file for visualizer",

422 
NULL
);

423 
	`İtiÚ_·r£r_»gi¡”
(
İp
, "-visu®iz”_zËv–", 
OPT_INT32
,

424 &
g_visu®iz”_zËv–
, "Compression†evel ofhe visualizer output†og (0=no comp, 9=highest)",

426 
	`İtiÚ_·r£r_»gi¡”
(
İp
, "-Œaû_’abËd", 
OPT_BOOL
,

427 &
T¿û
::
’abËd
, "Turn onraces",

429 
	`İtiÚ_·r£r_»gi¡”
(
İp
, "-Œaû_compÚ’ts", 
OPT_CSTR
,

430 &
T¿û
::
cÚfig_¡r
, "comma seperated†ist ofracesoƒnable. "

434 
	`İtiÚ_·r£r_»gi¡”
(
İp
, "-Œaû_§m¶šg_cÜe", 
OPT_INT32
,

435 &
T¿û
::
§m¶šg_cÜe
, "The core which is…rinted using CORE_DPRINTF. Default 0",

437 
	`İtiÚ_·r£r_»gi¡”
(
İp
, "-Œaû_§m¶šg_memÜy_·¹™iÚ", 
OPT_INT32
,

438 &
T¿û
::
§m¶šg_memÜy_·¹™iÚ
, "The memory…artition which is…rinted using MEMPART_DPRINTF. Default -1 (i.e.‡ll)",

440 
	`±x_fe_lše_¡©s_İtiÚs
(
İp
);

441 
	}
}

445 
	$šüem’t_x_th’_y_th’_z
Ğ
dim3
 &
i
, cÚ¡ dim3 &
bound
)

447 
i
.
x
++;

448 iàĞ
i
.
x
 >ğ
bound
.x ) {

449 
i
.
x
 = 0;

450 
i
.
y
++;

451 iàĞ
i
.
y
 >ğ
bound
.y ) {

452 
i
.
y
 = 0;

453 ifĞ
i
.
z
 < 
bound
.z )

454 
i
.
z
++;

457 
	}
}

459 
	ggpgpu_sim
::
	$Ïunch
Ğ
k”Ãl_šfo_t
 *
kšfo
 )

461 
ùa_size
 = 
kšfo
->
	`th»ads_³r_ùa
();

462 iàĞ
ùa_size
 > 
m_shad”_cÚfig
->
n_th»ad_³r_shad”
 ) {

463 
	`´štf
("Executionƒrror: Shader kernel CTA (block) size isoo†arge for microarch config.\n");

464 
	`´štf
(" CTA siz(x*y*zèğ%u, max suµÜ‹d = %u\n", 
ùa_size
,

465 
m_shad”_cÚfig
->
n_th»ad_³r_shad”
 );

466 
	`´štf
(" =>ƒither change -gpgpu_shader‡rgument in gpgpusim.config file or\n");

467 
	`´štf
(" modifyhe CUDA sourceo decreasehe kernel block size.\n");

468 
	`abÜt
();

470 
n
=0;

471 
n
=0;‚ < 
m_ruÂšg_k”Ãls
.
	`size
();‚++ ) {

472 ifĞ(
NULL
==
m_ruÂšg_k”Ãls
[
n
]è|| m_ruÂšg_k”Ãls[n]->
	`dÚe
() ) {

473 
m_ruÂšg_k”Ãls
[
n
] = 
kšfo
;

477 
	`as£¹
(
n
 < 
m_ruÂšg_k”Ãls
.
	`size
());

478 
	}
}

480 
boŞ
 
	ggpgpu_sim
::
	$ÿn_¡¬t_k”Ãl
()

482 
n
=0;‚ < 
m_ruÂšg_k”Ãls
.
	`size
();‚++ ) {

483 ifĞ(
NULL
==
m_ruÂšg_k”Ãls
[
n
]è|| m_ruÂšg_k”Ãls[n]->
	`dÚe
() )

484  
Œue
;

486  
çl£
;

487 
	}
}

489 
boŞ
 
	ggpgpu_sim
::
	$g‘_mÜe_ùa_Ëá
() const

491 ià(
m_cÚfig
.
gpu_max_ùa_İt
 != 0) {

492 ifĞ
m_tÙ®_ùa_Ïunched
 >ğ
m_cÚfig
.
gpu_max_ùa_İt
 )

493  
çl£
;

495 
n
=0;‚ < 
m_ruÂšg_k”Ãls
.
	`size
();‚++ ) {

496 ifĞ
m_ruÂšg_k”Ãls
[
n
] && !m_ruÂšg_k”Ãls[n]->
	`no_mÜe_ùas_to_run
() )

497  
Œue
;

499  
çl£
;

500 
	}
}

502 
k”Ãl_šfo_t
 *
	ggpgpu_sim
::
	$£Ëù_k”Ãl
()

504 
n
=0;‚ < 
m_ruÂšg_k”Ãls
.
	`size
();‚++ ) {

505 
idx
 = (
n
+
m_Ï¡_issued_k”Ãl
+1)%
m_cÚfig
.
max_cÚcu¼’t_k”Ãl
;

506 ifĞ
m_ruÂšg_k”Ãls
[
idx
] && !m_ruÂšg_k”Ãls[idx]->
	`no_mÜe_ùas_to_run
() ) {

507 
m_Ï¡_issued_k”Ãl
=
idx
;

509 
Ïunch_uid
 = 
m_ruÂšg_k”Ãls
[
idx
]->
	`g‘_uid
();

510 ià(
¡d
::
	`fšd
(
m_execu‹d_k”Ãl_uids
.
	`begš
(), m_execu‹d_k”Ãl_uids.
	`’d
(), 
Ïunch_uid
) == m_executed_kernel_uids.end()) {

511 
m_execu‹d_k”Ãl_uids
.
	`push_back
(
Ïunch_uid
);

512 
m_execu‹d_k”Ãl_Çmes
.
	`push_back
(
m_ruÂšg_k”Ãls
[
idx
]->
	`Çme
());

515  
m_ruÂšg_k”Ãls
[
idx
];

518  
NULL
;

519 
	}
}

521 
	ggpgpu_sim
::
	$fšished_k”Ãl
()

523 ifĞ
m_fšished_k”Ãl
.
	`em±y
() )

525 
»suÉ
 = 
m_fšished_k”Ãl
.
	`äÚt
();

526 
m_fšished_k”Ãl
.
	`pİ_äÚt
();

527  
»suÉ
;

528 
	}
}

530 
	ggpgpu_sim
::
	$£t_k”Ãl_dÚe
Ğ
k”Ãl_šfo_t
 *
k”Ãl
 )

532 
uid
 = 
k”Ãl
->
	`g‘_uid
();

533 
m_fšished_k”Ãl
.
	`push_back
(
uid
);

534 
¡d
::
veùÜ
<
k”Ãl_šfo_t
*>::
™”©Ü
 
k
;

535  
k
=
m_ruÂšg_k”Ãls
.
	`begš
(); k!=m_ruÂšg_k”Ãls.
	`’d
(); k++ ) {

536 ifĞ*
k
 =ğ
k”Ãl
 ) {

537 *
k
 = 
NULL
;

541 
	`as£¹
Ğ
k
 !ğ
m_ruÂšg_k”Ãls
.
	`’d
() );

542 
	}
}

544 
£t_±x_w¬p_size
(cÚ¡ 
cÜe_cÚfig
 * 
w¬p_size
);

546 
	ggpgpu_sim
::
	$gpgpu_sim
ĞcÚ¡ 
gpgpu_sim_cÚfig
 &
cÚfig
 )

547 : 
	`gpgpu_t
(
cÚfig
), 
	$m_cÚfig
(
cÚfig
)

549 
m_shad”_cÚfig
 = &
m_cÚfig
.m_shader_config;

550 
m_memÜy_cÚfig
 = &
m_cÚfig
.m_memory_config;

551 
	`£t_±x_w¬p_size
(
m_shad”_cÚfig
);

552 
	`±x_fe_lše_¡©s_ü—‹_expo£d_Ï‹ncy_Œack”
(
m_cÚfig
.
	`num_shad”
());

554 #ifdeà
GPGPUSIM_POWER_MODEL


555 
m_gpgpusim_w¿µ”
 = 
Ãw
 
	`gpgpu_sim_w¿µ”
(
cÚfig
.
g_pow”_simuÏtiÚ_’abËd
,cÚfig.
g_pow”_cÚfig_Çme
);

558 
m_shad”_¡©s
 = 
Ãw
 
	`shad”_cÜe_¡©s
(
m_shad”_cÚfig
);

559 
m_memÜy_¡©s
 = 
Ãw
 
	`memÜy_¡©s_t
(
m_cÚfig
.
	`num_shad”
(),
m_shad”_cÚfig
,
m_memÜy_cÚfig
);

560 
av”age_p–še_duty_cyşe
 = (*)
	`m®loc
(());

561 
aùive_sms
=(*)
	`m®loc
(());

562 
m_pow”_¡©s
 = 
Ãw
 
	`pow”_¡©_t
(
m_shad”_cÚfig
,
av”age_p–še_duty_cyşe
,
aùive_sms
,
m_shad”_¡©s
,
m_memÜy_cÚfig
,
m_memÜy_¡©s
);

564 
gpu_sim_š¢
 = 0;

565 
gpu_tÙ_sim_š¢
 = 0;

566 
gpu_tÙ_issued_ùa
 = 0;

567 
gpu_d—dlock
 = 
çl£
;

570 
m_şu¡”
 = 
Ãw
 
simt_cÜe_şu¡”
*[
m_shad”_cÚfig
->
n_simt_şu¡”s
];

571 
i
=0;i<
m_shad”_cÚfig
->
n_simt_şu¡”s
;i++)

572 
m_şu¡”
[
i
] = 
Ãw
 
	`simt_cÜe_şu¡”
(
this
,i,
m_shad”_cÚfig
,
m_memÜy_cÚfig
,
m_shad”_¡©s
,
m_memÜy_¡©s
);

574 
m_memÜy_·¹™iÚ_un™
 = 
Ãw
 
memÜy_·¹™iÚ_un™
*[
m_memÜy_cÚfig
->
m_n_mem
];

575 
m_memÜy_sub_·¹™iÚ
 = 
Ãw
 
memÜy_sub_·¹™iÚ
*[
m_memÜy_cÚfig
->
m_n_mem_sub_·¹™iÚ
];

576 
i
=0;i<
m_memÜy_cÚfig
->
m_n_mem
;i++) {

577 
m_memÜy_·¹™iÚ_un™
[
i
] = 
Ãw
 
	`memÜy_·¹™iÚ_un™
(i, 
m_memÜy_cÚfig
, 
m_memÜy_¡©s
);

578 
p
 = 0;… < 
m_memÜy_cÚfig
->
m_n_sub_·¹™iÚ_³r_memÜy_chªÃl
;…++) {

579 
submpid
 = 
i
 * 
m_memÜy_cÚfig
->
m_n_sub_·¹™iÚ_³r_memÜy_chªÃl
 + 
p
;

580 
m_memÜy_sub_·¹™iÚ
[
submpid
] = 
m_memÜy_·¹™iÚ_un™
[
i
]->
	`g‘_sub_·¹™iÚ
(
p
);

584 
	`iút_w¿µ”_š™
();

585 
	`iút_ü—‹
(
m_shad”_cÚfig
->
n_simt_şu¡”s
,
m_memÜy_cÚfig
->
m_n_mem_sub_·¹™iÚ
);

587 
	`time_veùÜ_ü—‹
(
NUM_MEM_REQ_STAT
);

588 
	`årštf
(
¡dout
, "GPGPU-Sim uArch:…erformance model initialization complete.\n");

590 
m_ruÂšg_k”Ãls
.
	`»size
Ğ
cÚfig
.
max_cÚcu¼’t_k”Ãl
, 
NULL
 );

591 
m_Ï¡_issued_k”Ãl
 = 0;

592 
m_Ï¡_şu¡”_issue
 = 0;

593 *
av”age_p–še_duty_cyşe
=0;

594 *
aùive_sms
=0;

596 
Ï¡_liv’ess_mes§ge_time
 = 0;

597 
	}
}

599 
	ggpgpu_sim
::
	$sh¬ed_mem_size
() const

601  
m_shad”_cÚfig
->
gpgpu_shmem_size
;

602 
	}
}

604 
	ggpgpu_sim
::
	$num_»gi¡”s_³r_cÜe
() const

606  
m_shad”_cÚfig
->
gpgpu_shad”_»gi¡”s
;

607 
	}
}

609 
	ggpgpu_sim
::
	$w½_size
() const

611  
m_shad”_cÚfig
->
w¬p_size
;

612 
	}
}

614 
	ggpgpu_sim
::
	$shad”_şock
() const

616  
m_cÚfig
.
cÜe_äeq
/1000;

617 
	}
}

619 
	ggpgpu_sim
::
	$£t_´İ
Ğ
cudaDeviûPrİ
 *
´İ
 )

621 
m_cuda_´İ”t›s
 = 
´İ
;

622 
	}
}

624 cÚ¡ 
cudaDeviûPrİ
 *
	ggpgpu_sim
::
	$g‘_´İ
() const

626  
m_cuda_´İ”t›s
;

627 
	}
}

629 
div”g’û_suµÜt_t
 
	ggpgpu_sim
::
	$simd_mod–
() const

631  
m_shad”_cÚfig
->
mod–
;

632 
	}
}

634 
	ggpgpu_sim_cÚfig
::
	$š™_şock_domašs
()

636 
	`ssÿnf
(
gpgpu_şock_domašs
,"%lf:%lf:%lf:%lf",

637 &
cÜe_äeq
, &
iút_äeq
, &
l2_äeq
, &
d¿m_äeq
);

638 
cÜe_äeq
 = cÜe_äeq 
MhZ
;

639 
iút_äeq
 = iút_äeq 
MhZ
;

640 
l2_äeq
 =†2_äeq 
MhZ
;

641 
d¿m_äeq
 = d¿m_äeq 
MhZ
;

642 
cÜe_³riod
 = 1/
cÜe_äeq
;

643 
iút_³riod
 = 1/
iút_äeq
;

644 
d¿m_³riod
 = 1/
d¿m_äeq
;

645 
l2_³riod
 = 1/
l2_äeq
;

646 
	`´štf
("GPGPU-Sim uArch: clock f»qs: %lf:%lf:%lf:%lf\n",
cÜe_äeq
,
iút_äeq
,
l2_äeq
,
d¿m_äeq
);

647 
	`´štf
("GPGPU-Sim uArch: clock…”iods: %.20lf:%.20lf:%.20lf:%.20lf\n",
cÜe_³riod
,
iút_³riod
,
l2_³riod
,
d¿m_³riod
);

648 
	}
}

650 
	ggpgpu_sim
::
	$»š™_şock_domašs
()

652 
cÜe_time
 = 0;

653 
d¿m_time
 = 0;

654 
iút_time
 = 0;

655 
l2_time
 = 0;

656 
	}
}

658 
boŞ
 
	ggpgpu_sim
::
	$aùive
()

660 ià(
m_cÚfig
.
gpu_max_cyşe_İt
 && (
gpu_tÙ_sim_cyşe
 + 
gpu_sim_cyşe
) >= m_config.gpu_max_cycle_opt)

661  
çl£
;

662 ià(
m_cÚfig
.
gpu_max_š¢_İt
 && (
gpu_tÙ_sim_š¢
 + 
gpu_sim_š¢
) >= m_config.gpu_max_insn_opt)

663  
çl£
;

664 ià(
m_cÚfig
.
gpu_max_ùa_İt
 && (
gpu_tÙ_issued_ùa
 >= m_config.gpu_max_cta_opt) )

665  
çl£
;

666 ià(
m_cÚfig
.
gpu_d—dlock_d‘eù
 && 
gpu_d—dlock
)

667  
çl£
;

668 
i
=0;i<
m_shad”_cÚfig
->
n_simt_şu¡”s
;i++)

669 ifĞ
m_şu¡”
[
i
]->
	`g‘_nÙ_com¶‘ed
()>0 )

670  
Œue
;;

671 
i
=0;i<
m_memÜy_cÚfig
->
m_n_mem
;i++)

672 ifĞ
m_memÜy_·¹™iÚ_un™
[
i
]->
	`busy
()>0 )

673  
Œue
;;

674 ifĞ
	`iút_busy
() )

675  
Œue
;

676 ifĞ
	`g‘_mÜe_ùa_Ëá
() )

677  
Œue
;

678  
çl£
;

679 
	}
}

681 
	ggpgpu_sim
::
	$š™
()

684 
gpu_sim_cyşe
 = 0;

685 
gpu_sim_š¢
 = 0;

686 
Ï¡_gpu_sim_š¢
 = 0;

687 
m_tÙ®_ùa_Ïunched
=0;

689 
	`»š™_şock_domašs
();

690 
	`£t_·¿m_gpgpu_num_shad”s
(
m_cÚfig
.
	`num_shad”
());

691 
i
=0;i<
m_shad”_cÚfig
->
n_simt_şu¡”s
;i++)

692 
m_şu¡”
[
i
]->
	`»š™
();

693 
m_shad”_¡©s
->
	`Ãw_grid
();

695 ià(
m_cÚfig
.
g_visu®iz”_’abËd
) {

696 
	`ü—‹_th»ad_CFlogg”
Ğ
m_cÚfig
.
	`num_shad”
(), 
m_shad”_cÚfig
->
n_th»ad_³r_shad”
, 0, m_cÚfig.
gpgpu_cæog_š‹rv®
 );

698 
	`shad”_CTA_couÁ_ü—‹
Ğ
m_cÚfig
.
	`num_shad”
(), m_cÚfig.
gpgpu_cæog_š‹rv®
);

699 ià(
m_cÚfig
.
gpgpu_cæog_š‹rv®
 != 0) {

700 
	`š¢_w¬p_occ_ü—‹
Ğ
m_cÚfig
.
	`num_shad”
(), 
m_shad”_cÚfig
->
w¬p_size
 );

701 
	`shad”_w¬p_occ_ü—‹
Ğ
m_cÚfig
.
	`num_shad”
(), 
m_shad”_cÚfig
->
w¬p_size
, m_cÚfig.
gpgpu_cæog_š‹rv®
);

702 
	`shad”_mem_acc_ü—‹
Ğ
m_cÚfig
.
	`num_shad”
(), 
m_memÜy_cÚfig
->
m_n_mem
, 4, m_cÚfig.
gpgpu_cæog_š‹rv®
);

703 
	`shad”_mem_Ït_ü—‹
Ğ
m_cÚfig
.
	`num_shad”
(), m_cÚfig.
gpgpu_cæog_š‹rv®
);

704 
	`shad”_ÿche_acûss_ü—‹
Ğ
m_cÚfig
.
	`num_shad”
(), 3, m_cÚfig.
gpgpu_cæog_š‹rv®
);

705 
	`£t_¥l_š‹rv®
 (
m_cÚfig
.
gpgpu_cæog_š‹rv®
 * 40);

708 ià(
g_ÃtwÜk_mode
)

709 
	`iút_š™
();

712 #ifdeà
GPGPUSIM_POWER_MODEL


713 if(
m_cÚfig
.
g_pow”_simuÏtiÚ_’abËd
){

714 
	`š™_mı©
(
m_cÚfig
, 
m_gpgpusim_w¿µ”
, m_cÚfig.
gpu_¡©_§m¶e_äeq
, 
gpu_tÙ_sim_š¢
, 
gpu_sim_š¢
);

717 
	}
}

719 
	ggpgpu_sim
::
	$upd©e_¡©s
() {

720 
m_memÜy_¡©s
->
	`memÏt¡©_Ït_pw
();

721 
gpu_tÙ_sim_cyşe
 +ğ
gpu_sim_cyşe
;

722 
gpu_tÙ_sim_š¢
 +ğ
gpu_sim_š¢
;

723 
	}
}

725 
	ggpgpu_sim
::
	$´št_¡©s
()

727 
	`±x_fe_lše_¡©s_wr™e_fe
();

728 
	`gpu_´št_¡©
();

730 ià(
g_ÃtwÜk_mode
) {

731 
	`´štf
("----------------------------Interconnect-DETAILS--------------------------------\n" );

732 
	`iút_di¥Ïy_¡©s
();

733 
	`iút_di¥Ïy_ov”®l_¡©s
();

734 
	`´štf
("----------------------------END-of-Interconnect-DETAILS-------------------------\n" );

736 
	}
}

738 
	ggpgpu_sim
::
	$d—dlock_check
()

740 ià(
m_cÚfig
.
gpu_d—dlock_d‘eù
 && 
gpu_d—dlock
) {

741 
	`fæush
(
¡dout
);

742 
	`´štf
("\n\nGPGPU-Sim uArch: ERROR ** deadlock detected:†ast writeback core %u @ gpu_sim_cycle %u (+ gpu_tot_sim_cycle %u) (%u cycles‡go)\n",

743 
gpu_sim_š¢_Ï¡_upd©e_sid
,

744 (è
gpu_sim_š¢_Ï¡_upd©e
, (è(
gpu_tÙ_sim_cyşe
-
gpu_sim_cyşe
),

745 (è(
gpu_sim_cyşe
 - 
gpu_sim_š¢_Ï¡_upd©e
 ));

746 
num_cÜes
=0;

747 
i
=0;i<
m_shad”_cÚfig
->
n_simt_şu¡”s
;i++) {

748 
nÙ_com¶‘ed
 = 
m_şu¡”
[
i
]->
	`g‘_nÙ_com¶‘ed
();

749 ifĞ
nÙ_com¶‘ed
 ) {

750 iàĞ!
num_cÜes
 ) {

751 
	`´štf
("GPGPU-Sim uArch: DEADLOCK shader cores‚o†onger committing instructions [core(#hreads)]:\n" );

752 
	`´štf
("GPGPU-Sim uArch: DEADLOCK ");

753 
m_şu¡”
[
i
]->
	`´št_nÙ_com¶‘ed
(
¡dout
);

754 } ià(
num_cÜes
 < 8 ) {

755 
m_şu¡”
[
i
]->
	`´št_nÙ_com¶‘ed
(
¡dout
);

756 } ià(
num_cÜes
 >= 8 ) {

757 
	`´štf
(" + others ... ");

759 
num_cÜes
+=
m_shad”_cÚfig
->
n_simt_cÜes_³r_şu¡”
;

762 
	`´štf
("\n");

763 
i
=0;i<
m_memÜy_cÚfig
->
m_n_mem
;i++) {

764 
boŞ
 
busy
 = 
m_memÜy_·¹™iÚ_un™
[
i
]->
	`busy
();

765 ifĞ
busy
 )

766 
	`´štf
("GPGPU-Sim uArch DEADLOCK: memÜy…¬t™iÚ %u busy\n", 
i
 );

768 ifĞ
	`iút_busy
() ) {

769 
	`´štf
("GPGPU-Sim uArch DEADLOCK: iterconnect containsraffic\n");

770 
	`iút_di¥Ïy_¡©e
Ğ
¡dout
 );

772 
	`´štf
("\nRe-runhe simulator in gdb‡nd use debug„outines in .gdbinito debughis\n");

773 
	`fæush
(
¡dout
);

774 
	`abÜt
();

776 
	}
}

779 
	g¡d
::
¡ršg
 
gpgpu_sim
::
	$execu‹d_k”Ãl_šfo_¡ršg
()

781 
¡d
::
¡ršg¡»am
 
¡©out
;

783 
¡©out
 << "kernel_name = ";

784 
k
 = 0; k < 
m_execu‹d_k”Ãl_Çmes
.
	`size
(); k++) {

785 
¡©out
 << 
m_execu‹d_k”Ãl_Çmes
[
k
] << " ";

787 
¡©out
 << 
¡d
::
’dl
;

788 
¡©out
 << "kernel_launch_uid = ";

789 
k
 = 0; k < 
m_execu‹d_k”Ãl_uids
.
	`size
(); k++) {

790 
¡©out
 << 
m_execu‹d_k”Ãl_uids
[
k
] << " ";

792 
¡©out
 << 
¡d
::
’dl
;

794  
¡©out
.
	`¡r
();

795 
	}
}

796 
	ggpgpu_sim
::
	$£t_ÿche_cÚfig
(
¡d
::
¡ršg
 
k”Ãl_Çme
, 
FuncCache
 
ÿcheCÚfig
 )

798 
m_¥ecŸl_ÿche_cÚfig
[
k”Ãl_Çme
]=
ÿcheCÚfig
 ;

799 
	}
}

801 
FuncCache
 
	ggpgpu_sim
::
	$g‘_ÿche_cÚfig
(
¡d
::
¡ršg
 
k”Ãl_Çme
)

803  
¡d
::
m­
<¡d::
¡ršg
, 
FuncCache
>::
™”©Ü
 
™”
 = 
m_¥ecŸl_ÿche_cÚfig
.
	`begš
(); i‹¸!ğm_¥ecŸl_ÿche_cÚfig.
	`’d
(); iter++){

804 
¡d
::
¡ršg
 
k”Ãl
ğ
™”
->
fœ¡
;

805 ià(
k”Ãl_Çme
.
	`com·»
(
k”Ãl
) == 0){

806  
™”
->
£cÚd
;

809  (
FuncCache
)0;

810 
	}
}

812 
boŞ
 
	ggpgpu_sim
::
	$has_¥ecŸl_ÿche_cÚfig
(
¡d
::
¡ršg
 
k”Ãl_Çme
)

814  
¡d
::
m­
<¡d::
¡ršg
, 
FuncCache
>::
™”©Ü
 
™”
 = 
m_¥ecŸl_ÿche_cÚfig
.
	`begš
(); i‹¸!ğm_¥ecŸl_ÿche_cÚfig.
	`’d
(); iter++){

815 
¡d
::
¡ršg
 
k”Ãl
ğ
™”
->
fœ¡
;

816 ià(
k”Ãl_Çme
.
	`com·»
(
k”Ãl
) == 0){

817  
Œue
;

820  
çl£
;

821 
	}
}

824 
	ggpgpu_sim
::
	$£t_ÿche_cÚfig
(
¡d
::
¡ršg
 
k”Ãl_Çme
)

826 if(
	`has_¥ecŸl_ÿche_cÚfig
(
k”Ãl_Çme
)){

827 
	`chªge_ÿche_cÚfig
(
	`g‘_ÿche_cÚfig
(
k”Ãl_Çme
));

829 
	`chªge_ÿche_cÚfig
(
FuncCacheP»ãrNÚe
);

831 
	}
}

834 
	ggpgpu_sim
::
	$chªge_ÿche_cÚfig
(
FuncCache
 
ÿche_cÚfig
)

836 if(
ÿche_cÚfig
 !ğ
m_shad”_cÚfig
->
m_L1D_cÚfig
.
	`g‘_ÿche_¡©us
()){

837 
	`´štf
("FLUSH L1 Cache‡t configuration change between kernels\n");

838 
i
=0;i<
m_shad”_cÚfig
->
n_simt_şu¡”s
;i++) {

839 
m_şu¡”
[
i
]->
	`ÿche_æush
();

843 
ÿche_cÚfig
){

844 
FuncCacheP»ãrNÚe
:

845 
m_shad”_cÚfig
->
m_L1D_cÚfig
.
	`š™
(m_shad”_cÚfig->m_L1D_cÚfig.
m_cÚfig_¡ršg
, 
FuncCacheP»ãrNÚe
);

846 
m_shad”_cÚfig
->
gpgpu_shmem_size
=m_shad”_cÚfig->
gpgpu_shmem_sizeDeçuÉ
;

848 
FuncCacheP»ãrL1
:

849 if((
m_shad”_cÚfig
->
m_L1D_cÚfig
.
m_cÚfig_¡ršgP»fL1
 =ğ
NULL
è|| (m_shad”_cÚfig->
gpgpu_shmem_sizeP»fL1
 == ()-1))

851 
	`´štf
("WARNING: missing Preferred L1 configuration\n");

852 
m_shad”_cÚfig
->
m_L1D_cÚfig
.
	`š™
(m_shad”_cÚfig->m_L1D_cÚfig.
m_cÚfig_¡ršg
, 
FuncCacheP»ãrNÚe
);

853 
m_shad”_cÚfig
->
gpgpu_shmem_size
=m_shad”_cÚfig->
gpgpu_shmem_sizeDeçuÉ
;

856 
m_shad”_cÚfig
->
m_L1D_cÚfig
.
	`š™
(m_shad”_cÚfig->m_L1D_cÚfig.
m_cÚfig_¡ršgP»fL1
, 
FuncCacheP»ãrL1
);

857 
m_shad”_cÚfig
->
gpgpu_shmem_size
=m_shad”_cÚfig->
gpgpu_shmem_sizeP»fL1
;

860 
FuncCacheP»ãrSh¬ed
:

861 if((
m_shad”_cÚfig
->
m_L1D_cÚfig
.
m_cÚfig_¡ršgP»fSh¬ed
 =ğ
NULL
è|| (m_shad”_cÚfig->
gpgpu_shmem_sizeP»fSh¬ed
 == ()-1))

863 
	`´štf
("WARNING: missing Preferred L1 configuration\n");

864 
m_shad”_cÚfig
->
m_L1D_cÚfig
.
	`š™
(m_shad”_cÚfig->m_L1D_cÚfig.
m_cÚfig_¡ršg
, 
FuncCacheP»ãrNÚe
);

865 
m_shad”_cÚfig
->
gpgpu_shmem_size
=m_shad”_cÚfig->
gpgpu_shmem_sizeDeçuÉ
;

867 
m_shad”_cÚfig
->
m_L1D_cÚfig
.
	`š™
(m_shad”_cÚfig->m_L1D_cÚfig.
m_cÚfig_¡ršgP»fSh¬ed
, 
FuncCacheP»ãrSh¬ed
);

868 
m_shad”_cÚfig
->
gpgpu_shmem_size
=m_shad”_cÚfig->
gpgpu_shmem_sizeP»fSh¬ed
;

874 
	}
}

877 
	ggpgpu_sim
::
	$ş—r_execu‹d_k”Ãl_šfo
()

879 
m_execu‹d_k”Ãl_Çmes
.
	`ş—r
();

880 
m_execu‹d_k”Ãl_uids
.
	`ş—r
();

881 
	}
}

882 
	ggpgpu_sim
::
	$gpu_´št_¡©
()

884 
FILE
 *
¡©fout
 = 
¡dout
;

886 
¡d
::
¡ršg
 
k”Ãl_šfo_¡r
 = 
	`execu‹d_k”Ãl_šfo_¡ršg
();

887 
	`årštf
(
¡©fout
, "%s", 
k”Ãl_šfo_¡r
.
	`c_¡r
());

889 
	`´štf
("gpu_sim_cyşğ%Îd\n", 
gpu_sim_cyşe
);

890 
	`´štf
("gpu_sim_š¢ = %Îd\n", 
gpu_sim_š¢
);

891 
	`´štf
("gpu_øğ%12.4f\n", ()
gpu_sim_š¢
 / 
gpu_sim_cyşe
);

892 
	`´štf
("gpu_tÙ_sim_cyşğ%Îd\n", 
gpu_tÙ_sim_cyşe
+
gpu_sim_cyşe
);

893 
	`´štf
("gpu_tÙ_sim_š¢ = %Îd\n", 
gpu_tÙ_sim_š¢
+
gpu_sim_š¢
);

894 
	`´štf
("gpu_tÙ_øğ%12.4f\n", ()(
gpu_tÙ_sim_š¢
+
gpu_sim_š¢
è/ (
gpu_tÙ_sim_cyşe
+
gpu_sim_cyşe
));

895 
	`´štf
("gpu_tÙ_issued_ù¨ğ%Îd\n", 
gpu_tÙ_issued_ùa
);

900 
	`´štf
("gpu_¡®l_d¿mfuÎ = %d\n", 
gpu_¡®l_d¿mfuÎ
);

901 
	`´štf
("gpu_¡®l_iút2sh = %d\n", 
gpu_¡®l_iút2sh
 );

903 
time_t
 
cu¼_time
;

904 
	`time
(&
cu¼_time
);

905 
–­£d_time
 = 
	`MAX
Ğ
cu¼_time
 - 
g_simuÏtiÚ_¡¬‰ime
, 1 );

906 
	`´štf
Ğ"gpu_tÙ®_sim_¿‹=%u\n", ()ĞĞ
gpu_tÙ_sim_š¢
 + 
gpu_sim_š¢
 ) / 
–­£d_time
 ) );

909 
	`shad”_´št_ÿche_¡©s
(
¡dout
);

911 
ÿche_¡©s
 
cÜe_ÿche_¡©s
;

912 
cÜe_ÿche_¡©s
.
	`ş—r
();

913 
i
=0; i<
m_cÚfig
.
	`num_şu¡”
(); i++){

914 
m_şu¡”
[
i
]->
	`g‘_ÿche_¡©s
(
cÜe_ÿche_¡©s
);

916 
	`´štf
("\nTotal_core_cache_stats:\n");

917 
cÜe_ÿche_¡©s
.
	`´št_¡©s
(
¡dout
, "Total_core_cache_stats_breakdown");

918 
	`shad”_´št_scheduËr_¡©
Ğ
¡dout
, 
çl£
 );

920 
m_shad”_¡©s
->
	`´št
(
¡dout
);

921 #ifdeà
GPGPUSIM_POWER_MODEL


922 if(
m_cÚfig
.
g_pow”_simuÏtiÚ_’abËd
){

923 
m_gpgpusim_w¿µ”
->
	`´št_pow”_k”Ãl_¡©s
(
gpu_sim_cyşe
, 
gpu_tÙ_sim_cyşe
, 
gpu_tÙ_sim_š¢
 + 
gpu_sim_š¢
, 
k”Ãl_šfo_¡r
, 
Œue
 );

924 
	`mı©_»£t_³rf_couÁ
(
m_gpgpusim_w¿µ”
);

929 
m_memÜy_¡©s
->
	`memÏt¡©_´št
(
m_memÜy_cÚfig
->
m_n_mem
,m_memÜy_cÚfig->
nbk
);

930 
i
=0;i<
m_memÜy_cÚfig
->
m_n_mem
;i++)

931 
m_memÜy_·¹™iÚ_un™
[
i
]->
	`´št
(
¡dout
);

934 if(!
m_memÜy_cÚfig
->
m_L2_cÚfig
.
	`di§bËd
()){

935 
ÿche_¡©s
 
l2_¡©s
;

936 
ÿche_sub_¡©s
 
l2_css
;

937 
ÿche_sub_¡©s
 
tÙ®_l2_css
;

938 
l2_¡©s
.
	`ş—r
();

939 
l2_css
.
	`ş—r
();

940 
tÙ®_l2_css
.
	`ş—r
();

942 
	`´štf
("\n========= L2 cache stats =========\n");

943 
i
=0;i<
m_memÜy_cÚfig
->
m_n_mem_sub_·¹™iÚ
;i++){

944 
m_memÜy_sub_·¹™iÚ
[
i
]->
	`accumuÏ‹_L2ÿche_¡©s
(
l2_¡©s
);

945 
m_memÜy_sub_·¹™iÚ
[
i
]->
	`g‘_L2ÿche_sub_¡©s
(
l2_css
);

947 
	`årštf
Ğ
¡dout
, "L2_cache_bank[%d]: Access = %u, Miss = %u, Miss_rate = %.3lf, Pending_hits = %u, Reservation_fails = %u\n",

948 
i
, 
l2_css
.
acûs£s
,†2_css.
mis£s
, (î2_css.mis£ / (î2_css.acûs£s,†2_css.
³ndšg_h™s
,†2_css.
»s_çs
);

950 
tÙ®_l2_css
 +ğ
l2_css
;

952 ià(!
m_memÜy_cÚfig
->
m_L2_cÚfig
.
	`di§bËd
(è&& m_memÜy_cÚfig->m_L2_cÚfig.
	`g‘_num_lšes
()) {

954 
	`´štf
("L2_tÙ®_ÿche_acûs£ ğ%u\n", 
tÙ®_l2_css
.
acûs£s
);

955 
	`´štf
("L2_tÙ®_ÿche_mis£ ğ%u\n", 
tÙ®_l2_css
.
mis£s
);

956 if(
tÙ®_l2_css
.
acûs£s
 > 0)

957 
	`´štf
("L2_tÙ®_ÿche_miss_¿‹ = %.4lf\n", ()
tÙ®_l2_css
.
mis£s
/(éÙ®_l2_css.
acûs£s
);

958 
	`´štf
("L2_tÙ®_ÿche_³ndšg_h™ ğ%u\n", 
tÙ®_l2_css
.
³ndšg_h™s
);

959 
	`´štf
("L2_tÙ®_ÿche_»£rv©iÚ_ç ğ%u\n", 
tÙ®_l2_css
.
»s_çs
);

960 
	`´štf
("L2_total_cache_breakdown:\n");

961 
l2_¡©s
.
	`´št_¡©s
(
¡dout
, "L2_cache_stats_breakdown");

962 
tÙ®_l2_css
.
	`´št_pÜt_¡©s
(
¡dout
, "L2_cache");

966 ià(
m_cÚfig
.
gpgpu_cæog_š‹rv®
 != 0) {

967 
	`¥l_log_to_fe
 (
¡dout
, 1, 
gpu_sim_cyşe
);

968 
	`š¢_w¬p_occ_´št
(
¡dout
);

970 iàĞ
gpgpu_±x_š¡ruùiÚ_şassifiÿtiÚ
 ) {

971 
	`StDi¥
Ğ
g_š¡_şassifiÿtiÚ_¡©
[
g_±x_k”Ãl_couÁ
]);

972 
	`StDi¥
Ğ
g_š¡_İ_şassifiÿtiÚ_¡©
[
g_±x_k”Ãl_couÁ
]);

975 #ifdeà
GPGPUSIM_POWER_MODEL


976 if(
m_cÚfig
.
g_pow”_simuÏtiÚ_’abËd
){

977 
m_gpgpusim_w¿µ”
->
	`d‘eù_´št_¡—dy_¡©e
(1,
gpu_tÙ_sim_š¢
+
gpu_sim_š¢
);

983 
tÙ®_simt_to_mem
=0;

984 
tÙ®_mem_to_simt
=0;

985 
‹mp_¡m
=0;

986 
‹mp_mts
 = 0;

987 
i
=0; i<
m_cÚfig
.
	`num_şu¡”
(); i++){

988 
m_şu¡”
[
i
]->
	`g‘_iút_¡©s
(
‹mp_¡m
, 
‹mp_mts
);

989 
tÙ®_simt_to_mem
 +ğ
‹mp_¡m
;

990 
tÙ®_mem_to_simt
 +ğ
‹mp_mts
;

992 
	`´štf
("\niút_tÙ®_pkts_mem_to_simt=%ld\n", 
tÙ®_mem_to_simt
);

993 
	`´štf
("iút_tÙ®_pkts_simt_to_mem=%ld\n", 
tÙ®_simt_to_mem
);

995 
	`time_veùÜ_´št
();

996 
	`fæush
(
¡dout
);

998 
	`ş—r_execu‹d_k”Ãl_šfo
();

999 
	}
}

1003 
	ggpgpu_sim
::
	$th»ads_³r_cÜe
() const

1005  
m_shad”_cÚfig
->
n_th»ad_³r_shad”
;

1006 
	}
}

1008 
	gshad”_cÜe_ùx
::
	$mem_š¡ruùiÚ_¡©s
(cÚ¡ 
w¬p_š¡_t
 &
š¡
)

1010 
aùive_couÁ
 = 
š¡
.
	`aùive_couÁ
();

1012 
š¡
.
¥aû
.
	`g‘_ty³
()) {

1013 
undefšed_¥aû
:

1014 
»g_¥aû
:

1016 
sh¬ed_¥aû
:

1017 
m_¡©s
->
gpgpu_n_shmem_š¢
 +ğ
aùive_couÁ
;

1019 
cÚ¡_¥aû
:

1020 
m_¡©s
->
gpgpu_n_cÚ¡_š¢
 +ğ
aùive_couÁ
;

1022 
·¿m_¥aû_k”Ãl
:

1023 
·¿m_¥aû_loÿl
:

1024 
m_¡©s
->
gpgpu_n_·¿m_š¢
 +ğ
aùive_couÁ
;

1026 
‹x_¥aû
:

1027 
m_¡©s
->
gpgpu_n_‹x_š¢
 +ğ
aùive_couÁ
;

1029 
glob®_¥aû
:

1030 
loÿl_¥aû
:

1031 ifĞ
š¡
.
	`is_¡Üe
() )

1032 
m_¡©s
->
gpgpu_n_¡Üe_š¢
 +ğ
aùive_couÁ
;

1034 
m_¡©s
->
gpgpu_n_lßd_š¢
 +ğ
aùive_couÁ
;

1037 
	`abÜt
();

1039 
	}
}

1051 
	gshad”_cÜe_ùx
::
	$issue_block2cÜe
Ğ
k”Ãl_šfo_t
 &
k”Ãl
 )

1053 
	`£t_max_ùa
(
k”Ãl
);

1056 
ä“_ùa_hw_id
=()-1;

1057 
i
=0;i<
k”Ãl_max_ùa_³r_shad”
;i++ ) {

1058 ifĞ
m_ùa_¡©us
[
i
]==0 ) {

1059 
ä“_ùa_hw_id
=
i
;

1063 
	`as£¹
Ğ
ä“_ùa_hw_id
!=()-1 );

1066 
ùa_size
 = 
k”Ãl
.
	`th»ads_³r_ùa
();

1071 
·dded_ùa_size
 = 
ùa_size
;

1072 ià(
ùa_size
%
m_cÚfig
->
w¬p_size
)

1073 
·dded_ùa_size
 = ((
ùa_size
/
m_cÚfig
->
w¬p_size
)+1)*(m_config->warp_size);

1074 
¡¬t_th»ad
 = 
ä“_ùa_hw_id
 * 
·dded_ùa_size
;

1075 
’d_th»ad
 = 
¡¬t_th»ad
 + 
ùa_size
;

1078 
	`»š™
(
¡¬t_th»ad
, 
’d_th»ad
,
çl£
);

1082 
w¬p_£t_t
 
w¬ps
;

1083 
Áh»ads_š_block
= 0;

1084 
i
 = 
¡¬t_th»ad
; i<
’d_th»ad
; i++) {

1085 
m_th»adS‹
[
i
].
m_ùa_id
 = 
ä“_ùa_hw_id
;

1086 
w¬p_id
 = 
i
/
m_cÚfig
->
w¬p_size
;

1087 
Áh»ads_š_block
 +ğ
	`±x_sim_š™_th»ad
(
k”Ãl
,&
m_th»ad
[
i
],
m_sid
,i,
ùa_size
-(i-
¡¬t_th»ad
),
m_cÚfig
->
n_th»ad_³r_shad”
,
this
,
ä“_ùa_hw_id
,
w¬p_id
,
m_şu¡”
->
	`g‘_gpu
());

1088 
m_th»adS‹
[
i
].
m_aùive
 = 
Œue
;

1089 
w¬ps
.
	`£t
Ğ
w¬p_id
 );

1091 
	`as£¹
Ğ
Áh»ads_š_block
 > 0 &&‚th»ads_š_block <ğ
m_cÚfig
->
n_th»ad_³r_shad”
);

1092 
m_ùa_¡©us
[
ä“_ùa_hw_id
]=
Áh»ads_š_block
;

1096 
m_b¬r›rs
.
	`®loÿ‹_b¬r›r
(
ä“_ùa_hw_id
,
w¬ps
);

1099 
	`š™_w¬ps
Ğ
ä“_ùa_hw_id
, 
¡¬t_th»ad
, 
’d_th»ad
);

1100 
m_n_aùive_ùa
++;

1102 
	`shad”_CTA_couÁ_log
(
m_sid
, 1);

1103 
	`´štf
("GPGPU-Sim uArch: cÜe:%3d, c:%2u in™Ÿlized @(%Îd,%Îd)\n", 
m_sid
, 
ä“_ùa_hw_id
, 
gpu_sim_cyşe
, 
gpu_tÙ_sim_cyşe
 );

1104 
	}
}

1108 
	gd¿m_t
::
	$d¿m_log
Ğ
sk
 )

1110 ià(
sk
 =ğ
SAMPLELOG
) {

1111 
	`StAddSam¶e
(
mrqq_Di¡
, 
	`que_Ëngth
());

1112 } ià(
sk
 =ğ
DUMPLOG
) {

1113 
	`´štf
 ("QueuL’gth DRAM[%d] ",
id
);
	`StDi¥
(
mrqq_Di¡
);

1115 
	}
}

1118 
	ggpgpu_sim
::
	$Ãxt_şock_domaš
()

1120 
sm®Ë¡
 = 
	`mš3
(
cÜe_time
,
iút_time
,
d¿m_time
);

1121 
mask
 = 0x00;

1122 iàĞ
l2_time
 <ğ
sm®Ë¡
 ) {

1123 
sm®Ë¡
 = 
l2_time
;

1124 
mask
 |ğ
L2
 ;

1125 
l2_time
 +ğ
m_cÚfig
.
l2_³riod
;

1127 iàĞ
iút_time
 <ğ
sm®Ë¡
 ) {

1128 
mask
 |ğ
ICNT
;

1129 
iút_time
 +ğ
m_cÚfig
.
iút_³riod
;

1131 iàĞ
d¿m_time
 <ğ
sm®Ë¡
 ) {

1132 
mask
 |ğ
DRAM
;

1133 
d¿m_time
 +ğ
m_cÚfig
.
d¿m_³riod
;

1135 iàĞ
cÜe_time
 <ğ
sm®Ë¡
 ) {

1136 
mask
 |ğ
CORE
;

1137 
cÜe_time
 +ğ
m_cÚfig
.
cÜe_³riod
;

1139  
mask
;

1140 
	}
}

1142 
	ggpgpu_sim
::
	$issue_block2cÜe
()

1144 
Ï¡_issued
 = 
m_Ï¡_şu¡”_issue
;

1145 
i
=0;i<
m_shad”_cÚfig
->
n_simt_şu¡”s
;i++) {

1146 
idx
 = (
i
 + 
Ï¡_issued
 + 1è% 
m_shad”_cÚfig
->
n_simt_şu¡”s
;

1147 
num
 = 
m_şu¡”
[
idx
]->
	`issue_block2cÜe
();

1148 ifĞ
num
 ) {

1149 
m_Ï¡_şu¡”_issue
=
idx
;

1150 
m_tÙ®_ùa_Ïunched
 +ğ
num
;

1153 
	}
}

1155 
	gg_sšgË_¡•
=0;

1157 
	ggpgpu_sim
::
	$cyşe
()

1159 
şock_mask
 = 
	`Ãxt_şock_domaš
();

1161 ià(
şock_mask
 & 
CORE
 ) {

1163 
i
=0;i<
m_shad”_cÚfig
->
n_simt_şu¡”s
;i++)

1164 
m_şu¡”
[
i
]->
	`iút_cyşe
();

1166 ià(
şock_mask
 & 
ICNT
) {

1168 
i
=0;i<
m_memÜy_cÚfig
->
m_n_mem_sub_·¹™iÚ
;i++) {

1169 
mem_ãtch
* 
mf
 = 
m_memÜy_sub_·¹™iÚ
[
i
]->
	`tİ
();

1170 ià(
mf
) {

1171 
»¥Ú£_size
 = 
mf
->
	`g‘_is_wr™e
()?mf->
	`g‘_ù¾_size
():mf->
	`size
();

1172 iàĞ::
	`iút_has_bufãr
Ğ
m_shad”_cÚfig
->
	`mem2deviû
(
i
), 
»¥Ú£_size
 ) ) {

1173 ià(!
mf
->
	`g‘_is_wr™e
())

1174 
mf
->
	`£t_»tuº_time¡amp
(
gpu_sim_cyşe
+
gpu_tÙ_sim_cyşe
);

1175 
mf
->
	`£t_¡©us
(
IN_ICNT_TO_SHADER
,
gpu_sim_cyşe
+
gpu_tÙ_sim_cyşe
);

1176 ::
	`iút_push
Ğ
m_shad”_cÚfig
->
	`mem2deviû
(
i
), 
mf
->
	`g‘_c
(), mf, 
»¥Ú£_size
 );

1177 
m_memÜy_sub_·¹™iÚ
[
i
]->
	`pİ
();

1179 
gpu_¡®l_iút2sh
++;

1182 
m_memÜy_sub_·¹™iÚ
[
i
]->
	`pİ
();

1187 ià(
şock_mask
 & 
DRAM
) {

1188 
i
=0;i<
m_memÜy_cÚfig
->
m_n_mem
;i++){

1189 
m_memÜy_·¹™iÚ_un™
[
i
]->
	`d¿m_cyşe
();

1191 
m_memÜy_·¹™iÚ_un™
[
i
]->
	`£t_d¿m_pow”_¡©s
(
m_pow”_¡©s
->
pwr_mem_¡©
->
n_cmd
[
CURRENT_STAT_IDX
][i], m_pow”_¡©s->pwr_mem_¡©->
n_aùiv™y
[CURRENT_STAT_IDX][i],

1192 
m_pow”_¡©s
->
pwr_mem_¡©
->
n_nİ
[
CURRENT_STAT_IDX
][
i
], m_pow”_¡©s->pwr_mem_¡©->
n_aù
[CURRENT_STAT_IDX][i], m_pow”_¡©s->pwr_mem_¡©->
n_´e
[CURRENT_STAT_IDX][i],

1193 
m_pow”_¡©s
->
pwr_mem_¡©
->
n_rd
[
CURRENT_STAT_IDX
][
i
], m_pow”_¡©s->pwr_mem_¡©->
n_wr
[CURRENT_STAT_IDX][i], m_pow”_¡©s->pwr_mem_¡©->
n_»q
[CURRENT_STAT_IDX][i]);

1198 ià(
şock_mask
 & 
L2
) {

1199 
m_pow”_¡©s
->
pwr_mem_¡©
->
l2_ÿche_¡©s
[
CURRENT_STAT_IDX
].
	`ş—r
();

1200 
i
=0;i<
m_memÜy_cÚfig
->
m_n_mem_sub_·¹™iÚ
;i++) {

1203 iàĞ
m_memÜy_sub_·¹™iÚ
[
i
]->
	`fuÎ
() ) {

1204 
gpu_¡®l_d¿mfuÎ
++;

1206 
mem_ãtch
* 
mf
 = (mem_ãtch*è
	`iút_pİ
Ğ
m_shad”_cÚfig
->
	`mem2deviû
(
i
) );

1207 
m_memÜy_sub_·¹™iÚ
[
i
]->
	`push
Ğ
mf
, 
gpu_sim_cyşe
 + 
gpu_tÙ_sim_cyşe
 );

1209 
m_memÜy_sub_·¹™iÚ
[
i
]->
	`ÿche_cyşe
(
gpu_sim_cyşe
+
gpu_tÙ_sim_cyşe
);

1210 
m_memÜy_sub_·¹™iÚ
[
i
]->
	`accumuÏ‹_L2ÿche_¡©s
(
m_pow”_¡©s
->
pwr_mem_¡©
->
l2_ÿche_¡©s
[
CURRENT_STAT_IDX
]);

1214 ià(
şock_mask
 & 
ICNT
) {

1215 
	`iút_Œªsãr
();

1218 ià(
şock_mask
 & 
CORE
) {

1220 
m_pow”_¡©s
->
pwr_mem_¡©
->
cÜe_ÿche_¡©s
[
CURRENT_STAT_IDX
].
	`ş—r
();

1221 
i
=0;i<
m_shad”_cÚfig
->
n_simt_şu¡”s
;i++) {

1222 ià(
m_şu¡”
[
i
]->
	`g‘_nÙ_com¶‘ed
(è|| 
	`g‘_mÜe_ùa_Ëá
() ) {

1223 
m_şu¡”
[
i
]->
	`cÜe_cyşe
();

1224 *
aùive_sms
+=
m_şu¡”
[
i
]->
	`g‘_n_aùive_sms
();

1227 
m_şu¡”
[
i
]->
	`g‘_iút_¡©s
(
m_pow”_¡©s
->
pwr_mem_¡©
->
n_simt_to_mem
[
CURRENT_STAT_IDX
][i], m_pow”_¡©s->pwr_mem_¡©->
n_mem_to_simt
[CURRENT_STAT_IDX][i]);

1228 
m_şu¡”
[
i
]->
	`g‘_ÿche_¡©s
(
m_pow”_¡©s
->
pwr_mem_¡©
->
cÜe_ÿche_¡©s
[
CURRENT_STAT_IDX
]);

1230 
‹mp
=0;

1231 
i
=0;i<
m_shad”_cÚfig
->
	`num_shad”
();i++){

1232 
‹mp
+=
m_shad”_¡©s
->
m_p–še_duty_cyşe
[
i
];

1234 
‹mp
ñemp/
m_shad”_cÚfig
->
	`num_shad”
();

1235 *
av”age_p–še_duty_cyşe
=((*av”age_p–še_duty_cyşe)+
‹mp
);

1239 ifĞ
g_sšgË_¡•
 && ((
gpu_sim_cyşe
+
gpu_tÙ_sim_cyşe
) >= g_single_step) ) {

1240 
	`asm
("int $03");

1242 
gpu_sim_cyşe
++;

1243 ifĞ
g_š‹¿ùive_debugg”_’abËd
 )

1244 
	`gpgpu_debug
();

1247 #ifdeà
GPGPUSIM_POWER_MODEL


1248 if(
m_cÚfig
.
g_pow”_simuÏtiÚ_’abËd
){

1249 
	`mı©_cyşe
(
m_cÚfig
, 
	`g‘Shad”CÜeCÚfig
(), 
m_gpgpusim_w¿µ”
, 
m_pow”_¡©s
, m_cÚfig.
gpu_¡©_§m¶e_äeq
, 
gpu_tÙ_sim_cyşe
, 
gpu_sim_cyşe
, 
gpu_tÙ_sim_š¢
, 
gpu_sim_š¢
);

1253 
	`issue_block2cÜe
();

1256 
®l_th»ads_com¶‘e
 = 1;

1257 ià(
m_cÚfig
.
gpgpu_æush_l1_ÿche
) {

1258 
i
=0;i<
m_shad”_cÚfig
->
n_simt_şu¡”s
;i++) {

1259 ià(
m_şu¡”
[
i
]->
	`g‘_nÙ_com¶‘ed
() == 0)

1260 
m_şu¡”
[
i
]->
	`ÿche_æush
();

1262 
®l_th»ads_com¶‘e
 = 0 ;

1266 if(
m_cÚfig
.
gpgpu_æush_l2_ÿche
){

1267 if(!
m_cÚfig
.
gpgpu_æush_l1_ÿche
){

1268 
i
=0;i<
m_shad”_cÚfig
->
n_simt_şu¡”s
;i++) {

1269 ià(
m_şu¡”
[
i
]->
	`g‘_nÙ_com¶‘ed
() != 0){

1270 
®l_th»ads_com¶‘e
 = 0 ;

1276 ià(
®l_th»ads_com¶‘e
 && !
m_memÜy_cÚfig
->
m_L2_cÚfig
.
	`di§bËd
() ) {

1277 
	`´štf
("Flushed L2 caches...\n");

1278 ià(
m_memÜy_cÚfig
->
m_L2_cÚfig
.
	`g‘_num_lšes
()) {

1279 
dlc
 = 0;

1280 
i
=0;i<
m_memÜy_cÚfig
->
m_n_mem
;i++) {

1281 
dlc
 = 
m_memÜy_sub_·¹™iÚ
[
i
]->
	`æushL2
();

1282 
	`as£¹
 (
dlc
 == 0);

1283 
	`´štf
("Dœty†še æushed from L2 %d i %d\n", 
i
, 
dlc
 );

1289 ià(!(
gpu_sim_cyşe
 % 
m_cÚfig
.
gpu_¡©_§m¶e_äeq
)) {

1290 
time_t
 
days
, 
hrs
, 
mšu‹s
, 
£c
;

1291 
time_t
 
cu¼_time
;

1292 
	`time
(&
cu¼_time
);

1293 
–­£d_time
 = 
	`MAX
(
cu¼_time
 - 
g_simuÏtiÚ_¡¬‰ime
, 1);

1294 iàĞ(
–­£d_time
 - 
Ï¡_liv’ess_mes§ge_time
è>ğ
m_cÚfig
.
liv’ess_mes§ge_äeq
 ) {

1295 
days
 = 
–­£d_time
/(3600*24);

1296 
hrs
 = 
–­£d_time
/3600 - 24*
days
;

1297 
mšu‹s
 = 
–­£d_time
/60 - 60*(
hrs
 + 24*
days
);

1298 
£c
 = 
–­£d_time
 - 60*(
mšu‹s
 + 60*(
hrs
 + 24*
days
));

1299 
	`´štf
("GPGPU-Sim uArch: cycles simulated: %lld inst.: %lld (ipc=%4.1f) sim_rate=%u (inst/sec)ƒlapsed = %u:%u:%02u:%02u / %s",

1300 
gpu_tÙ_sim_cyşe
 + 
gpu_sim_cyşe
, 
gpu_tÙ_sim_š¢
 + 
gpu_sim_š¢
,

1301 ()
gpu_sim_š¢
/()
gpu_sim_cyşe
,

1302 ()((
gpu_tÙ_sim_š¢
+
gpu_sim_š¢
è/ 
–­£d_time
),

1303 ()
days
,()
hrs
,()
mšu‹s
,()
£c
,

1304 
	`ùime
(&
cu¼_time
));

1305 
	`fæush
(
¡dout
);

1306 
Ï¡_liv’ess_mes§ge_time
 = 
–­£d_time
;

1308 
	`visu®iz”_´št¡©
();

1309 
m_memÜy_¡©s
->
	`memÏt¡©_Ït_pw
();

1310 ià(
m_cÚfig
.
gpgpu_ruÁime_¡©
 && (m_cÚfig.
gpu_ruÁime_¡©_æag
 != 0) ) {

1311 ià(
m_cÚfig
.
gpu_ruÁime_¡©_æag
 & 
GPU_RSTAT_BW_STAT
) {

1312 
i
=0;i<
m_memÜy_cÚfig
->
m_n_mem
;i++)

1313 
m_memÜy_·¹™iÚ_un™
[
i
]->
	`´št_¡©
(
¡dout
);

1314 
	`´štf
("maxmrqÏ‹ncy = %d \n", 
m_memÜy_¡©s
->
max_mrq_Ï‹ncy
);

1315 
	`´štf
("maxmæ©’cy = %d \n", 
m_memÜy_¡©s
->
max_mf_Ï‹ncy
);

1317 ià(
m_cÚfig
.
gpu_ruÁime_¡©_æag
 & 
GPU_RSTAT_SHD_INFO
)

1318 
	`shad”_´št_ruÁime_¡©
Ğ
¡dout
 );

1319 ià(
m_cÚfig
.
gpu_ruÁime_¡©_æag
 & 
GPU_RSTAT_L1MISS
)

1320 
	`shad”_´št_l1_miss_¡©
Ğ
¡dout
 );

1321 ià(
m_cÚfig
.
gpu_ruÁime_¡©_æag
 & 
GPU_RSTAT_SCHED
)

1322 
	`shad”_´št_scheduËr_¡©
Ğ
¡dout
, 
çl£
 );

1326 ià(!(
gpu_sim_cyşe
 % 20000)) {

1328 ià(
m_cÚfig
.
gpu_d—dlock_d‘eù
 && 
gpu_sim_š¢
 =ğ
Ï¡_gpu_sim_š¢
) {

1329 
gpu_d—dlock
 = 
Œue
;

1331 
Ï¡_gpu_sim_š¢
 = 
gpu_sim_š¢
;

1334 
	`Œy_¢­_shÙ
(
gpu_sim_cyşe
);

1335 
	`¥l_log_to_fe
 (
¡dout
, 0, 
gpu_sim_cyşe
);

1337 
	}
}

1340 
	gshad”_cÜe_ùx
::
	$dump_w¬p_¡©e
Ğ
FILE
 *
fout
 ) const

1342 
	`årštf
(
fout
, "\n");

1343 
	`årštf
(
fout
, "per warp functional simulation status:\n");

1344 
w
=0; w < 
m_cÚfig
->
max_w¬ps_³r_shad”
; w++ )

1345 
m_w¬p
[
w
].
	`´št
(
fout
);

1346 
	}
}

1348 
	ggpgpu_sim
::
	$dump_p–še
Ğ
mask
, 
s
, 
m
 ) const

1361 
	`´štf
("Dumping…ipeline state...\n");

1362 if(!
mask
) mask = 0xFFFFFFFF;

1363 
i
=0;i<
m_shad”_cÚfig
->
n_simt_şu¡”s
;i++) {

1364 if(
s
 != -1) {

1365 
i
 = 
s
;

1367 if(
mask
&1è
m_şu¡”
[
m_shad”_cÚfig
->
	`sid_to_şu¡”
(
i
)]->
	`di¥Ïy_p–še
(i,
¡dout
,1,mask & 0x2E);

1368 if(
s
 != -1) {

1372 if(
mask
&0x10000) {

1373 
i
=0;i<
m_memÜy_cÚfig
->
m_n_mem
;i++) {

1374 if(
m
 != -1) {

1375 
i
=
m
;

1377 
	`´štf
("DRAM / memÜy cÚŒŞË¸%u:\n", 
i
);

1378 if(
mask
&0x100000è
m_memÜy_·¹™iÚ_un™
[
i
]->
	`´št_¡©
(
¡dout
);

1379 if(
mask
&0x1000000è
m_memÜy_·¹™iÚ_un™
[
i
]->
	`visu®ize
();

1380 if(
mask
&0x10000000è
m_memÜy_·¹™iÚ_un™
[
i
]->
	`´št
(
¡dout
);

1381 if(
m
 != -1) {

1386 
	`fæush
(
¡dout
);

1387 
	}
}

1389 cÚ¡ 
shad”_cÜe_cÚfig
 * 
	ggpgpu_sim
::
	$g‘Shad”CÜeCÚfig
()

1391  
m_shad”_cÚfig
;

1392 
	}
}

1394 cÚ¡ 
memÜy_cÚfig
 * 
	ggpgpu_sim
::
	$g‘MemÜyCÚfig
()

1396  
m_memÜy_cÚfig
;

1397 
	}
}

1399 
simt_cÜe_şu¡”
 * 
	ggpgpu_sim
::
	$g‘SIMTClu¡”
()

1401  *
m_şu¡”
;

1402 
	}
}

	@gpu-sim.h

28 #iâdeà
GPU_SIM_H


29 
	#GPU_SIM_H


	)

31 
	~"../İtiÚ_·r£r.h
"

32 
	~"../ab¡¿ù_h¬dw¬e_mod–.h
"

33 
	~"../Œaû.h
"

34 
	~"addrdec.h
"

35 
	~"shad”.h
"

36 
	~<io¡»am
>

37 
	~<f¡»am
>

38 
	~<li¡
>

39 
	~<¡dio.h
>

44 
	#GPU_RSTAT_SHD_INFO
 0x1

	)

45 
	#GPU_RSTAT_BW_STAT
 0x2

	)

46 
	#GPU_RSTAT_WARP_DIS
 0x4

	)

47 
	#GPU_RSTAT_DWF_MAP
 0x8

	)

48 
	#GPU_RSTAT_L1MISS
 0x10

	)

49 
	#GPU_RSTAT_PDOM
 0x20

	)

50 
	#GPU_RSTAT_SCHED
 0x40

	)

51 
	#GPU_MEMLATSTAT_MC
 0x2

	)

54 
	#TEX_MSHR_MERGE
 0x4

	)

55 
	#CONST_MSHR_MERGE
 0x2

	)

56 
	#GLOBAL_MSHR_MERGE
 0x1

	)

59 
	#MhZ
 *1000000

	)

61 
	#CREATELOG
 111

	)

62 
	#SAMPLELOG
 222

	)

63 
	#DUMPLOG
 333

	)

69 
	ed¿m_ù¾_t
 {

70 
	mDRAM_FIFO
=0,

71 
	mDRAM_FRFCFS
=1

76 
	spow”_cÚfig
 {

77 
pow”_cÚfig
()

79 
	mm_v®id
 = 
Œue
;

81 
š™
()

85 
time_t
 
	mcu¼_time
;

86 
time
(&
cu¼_time
);

87 *
	md©e
 = 
ùime
(&
cu¼_time
);

88 *
	ms
 = 
d©e
;

89 *
	ms
) {

90 ià(*
	ms
 =ğ' ' || *
s
 == '\t' || *s == ':') *s = '-';

91 ià(*
	ms
 =ğ'\n' || *
s
 == '\r' ) *s = 0;

92 
	ms
++;

94 
	mbuf1
[1024];

95 
¢´štf
(
buf1
,1024,"gpgpusim_pow”_»pÜt__%s.log",
d©e
);

96 
	mg_pow”_f’ame
 = 
¡rdup
(
buf1
);

97 
	mbuf2
[1024];

98 
¢´štf
(
buf2
,1024,"gpgpusim_pow”_Œaû_»pÜt__%s.log.gz",
d©e
);

99 
	mg_pow”_Œaû_f’ame
 = 
¡rdup
(
buf2
);

100 
	mbuf3
[1024];

101 
¢´štf
(
buf3
,1024,"gpgpusim_m‘ric_Œaû_»pÜt__%s.log.gz",
d©e
);

102 
	mg_m‘ric_Œaû_f’ame
 = 
¡rdup
(
buf3
);

103 
	mbuf4
[1024];

104 
¢´štf
(
buf4
,1024,"gpgpusim_¡—dy_¡©e_Œackšg_»pÜt__%s.log.gz",
d©e
);

105 
	mg_¡—dy_¡©e_Œackšg_f’ame
 = 
¡rdup
(
buf4
);

107 if(
	mg_¡—dy_pow”_Ëv–s_’abËd
){

108 
ssÿnf
(
gpu_¡—dy_¡©e_defš™iÚ
,"%lf:%lf", &
gpu_¡—dy_pow”_devŸtiÚ
,&
gpu_¡—dy_mš_³riod
);

113 ià(
	mg_u£_nÚlš—r_mod–
)

114 
ssÿnf
(
gpu_nÚlš—r_mod–_cÚfig
,"%lf:%lf", &
gpu_idË_cÜe_pow”
,&
gpu_mš_šc_³r_aùive_sm
);

117 
»g_İtiÚs
(
şass
 
O±iÚP¬£r
 * 
İp
);

119 *
	mg_pow”_cÚfig_Çme
;

121 
boŞ
 
	mm_v®id
;

122 
boŞ
 
	mg_pow”_simuÏtiÚ_’abËd
;

123 
boŞ
 
	mg_pow”_Œaû_’abËd
;

124 
boŞ
 
	mg_¡—dy_pow”_Ëv–s_’abËd
;

125 
boŞ
 
	mg_pow”_³r_cyşe_dump
;

126 
boŞ
 
	mg_pow”_simuÏtÜ_debug
;

127 *
	mg_pow”_f’ame
;

128 *
	mg_pow”_Œaû_f’ame
;

129 *
	mg_m‘ric_Œaû_f’ame
;

130 * 
	mg_¡—dy_¡©e_Œackšg_f’ame
;

131 
	mg_pow”_Œaû_zËv–
;

132 * 
	mgpu_¡—dy_¡©e_defš™iÚ
;

133 
	mgpu_¡—dy_pow”_devŸtiÚ
;

134 
	mgpu_¡—dy_mš_³riod
;

137 
boŞ
 
	mg_u£_nÚlš—r_mod–
;

138 * 
	mgpu_nÚlš—r_mod–_cÚfig
;

139 
	mgpu_idË_cÜe_pow”
;

140 
	mgpu_mš_šc_³r_aùive_sm
;

147 
	smemÜy_cÚfig
 {

148 
memÜy_cÚfig
()

150 
	mm_v®id
 = 
çl£
;

151 
	mgpgpu_d¿m_timšg_İt
=
NULL
;

152 
	mgpgpu_L2_queue_cÚfig
=
NULL
;

154 
š™
()

156 
as£¹
(
gpgpu_d¿m_timšg_İt
);

157 ià(
¡rchr
(
gpgpu_d¿m_timšg_İt
, '='è=ğ
NULL
) {

160 
nbkg½
 = 1;

161 
	mtCCDL
 = 0;

162 
	mtRTPL
 = 0;

163 
ssÿnf
(
gpgpu_d¿m_timšg_İt
,"%d:%d:%d:%d:%d:%d:%d:%d:%d:%d:%d:%d:%d:%d",

164 &
nbk
,&
tCCD
,&
tRRD
,&
tRCD
,&
tRAS
,&
tRP
,&
tRC
,&
CL
,&
WL
,&
tCDLR
,&
tWR
,&
nbkg½
,&
tCCDL
,&
tRTPL
);

167 
İtiÚ_·r£r_t
 
	md¿m_İp
 = 
İtiÚ_·r£r_ü—‹
();

169 
İtiÚ_·r£r_»gi¡”
(
d¿m_İp
, "nbk", 
OPT_UINT32
, &
nbk
, "number of banks", "");

170 
İtiÚ_·r£r_»gi¡”
(
d¿m_İp
, "CCD", 
OPT_UINT32
, &
tCCD
, "columno column delay", "");

171 
İtiÚ_·r£r_»gi¡”
(
d¿m_İp
, "RRD", 
OPT_UINT32
, &
tRRD
, "minimal delay between‡ctivation of„ows in different banks", "");

172 
İtiÚ_·r£r_»gi¡”
(
d¿m_İp
, "RCD", 
OPT_UINT32
, &
tRCD
, "rowo column delay", "");

173 
İtiÚ_·r£r_»gi¡”
(
d¿m_İp
, "RAS", 
OPT_UINT32
, &
tRAS
, "time‚eededo‡ctivate„ow", "");

174 
İtiÚ_·r£r_»gi¡”
(
d¿m_İp
, "RP", 
OPT_UINT32
, &
tRP
, "time‚eededo…recharge (deactivate)„ow", "");

175 
İtiÚ_·r£r_»gi¡”
(
d¿m_İp
, "RC", 
OPT_UINT32
, &
tRC
, "row cycleime", "");

176 
İtiÚ_·r£r_»gi¡”
(
d¿m_İp
, "CDLR", 
OPT_UINT32
, &
tCDLR
, "switching from writeo„ead (changesWTR)", "");

177 
İtiÚ_·r£r_»gi¡”
(
d¿m_İp
, "WR", 
OPT_UINT32
, &
tWR
, "last data-ino„ow…recharge", "");

179 
İtiÚ_·r£r_»gi¡”
(
d¿m_İp
, "CL", 
OPT_UINT32
, &
CL
, "CAS†atency", "");

180 
İtiÚ_·r£r_»gi¡”
(
d¿m_İp
, "WL", 
OPT_UINT32
, &
WL
, "Write†atency", "");

183 
İtiÚ_·r£r_»gi¡”
(
d¿m_İp
, "nbkg½", 
OPT_UINT32
, &
nbkg½
, "number of bank groups", "1");

184 
İtiÚ_·r£r_»gi¡”
(
d¿m_İp
, "CCDL", 
OPT_UINT32
, &
tCCDL
, "columno column delay between‡ccesseso different bank groups", "0");

185 
İtiÚ_·r£r_»gi¡”
(
d¿m_İp
, "RTPL", 
OPT_UINT32
, &
tRTPL
, "reado…recharge delay between‡ccesseso different bank groups", "0");

187 
İtiÚ_·r£r_d–im™ed_¡ršg
(
d¿m_İp
, 
gpgpu_d¿m_timšg_İt
, "=:;");

188 
årštf
(
¡dout
, "DRAM Timing Options:\n");

189 
İtiÚ_·r£r_´št
(
d¿m_İp
, 
¡dout
);

190 
İtiÚ_·r£r_de¡roy
(
d¿m_İp
);

193 
	mnbkt
 = 
nbk
/
nbkg½
;

194 
	mi
;

195 
	mi
=0; 
	mnbkt
>0; i++) {

196 
	mnbkt
 = 
nbkt
>>1;

198 
	mbk_g_Ëngth
 = 
i
;

199 
as£¹
(
nbkg½
>0 && "Number of bank groups cannot be zero");

200 
	mtRCDWR
 = 
tRCD
-(
WL
+1);

201 
	mtRTW
 = (
CL
+(
BL
/
d©a_commªd_äeq_¿tio
)+2-
WL
);

202 
	mtWTR
 = (
WL
+(
BL
/
d©a_commªd_äeq_¿tio
)+
tCDLR
);

203 
	mtWTP
 = (
WL
+(
BL
/
d©a_commªd_äeq_¿tio
)+
tWR
);

204 
	md¿m_©om_size
 = 
BL
 * 
busW
 * 
gpu_n_mem_³r_ù¾r
;

206 
as£¹
Ğ
m_n_sub_·¹™iÚ_³r_memÜy_chªÃl
 > 0 );

207 
as£¹
Ğ(
nbk
 % 
m_n_sub_·¹™iÚ_³r_memÜy_chªÃl
 == 0)

209 
	mm_n_mem_sub_·¹™iÚ
 = 
m_n_mem
 * 
m_n_sub_·¹™iÚ_³r_memÜy_chªÃl
;

210 
årštf
(
¡dout
, "TÙ®‚umb” oàmemÜy sub…¬t™iÚ = %u\n", 
m_n_mem_sub_·¹™iÚ
);

212 
	mm_add»ss_m­pšg
.
š™
(
m_n_mem
, 
m_n_sub_·¹™iÚ_³r_memÜy_chªÃl
);

213 
	mm_L2_cÚfig
.
š™
(&
m_add»ss_m­pšg
);

215 
	mm_v®id
 = 
Œue
;

216 
	miút_æ™_size
 = 32;

218 
»g_İtiÚs
(
şass
 
O±iÚP¬£r
 * 
İp
);

220 
boŞ
 
	mm_v®id
;

221 
mubË
 
l2_ÿche_cÚfig
 
	mm_L2_cÚfig
;

222 
boŞ
 
	mm_L2_‹xu»_Úly
;

224 *
	mgpgpu_d¿m_timšg_İt
;

225 *
	mgpgpu_L2_queue_cÚfig
;

226 
boŞ
 
	ml2_id—l
;

227 
	mgpgpu_äfcfs_d¿m_sched_queue_size
;

228 
	mgpgpu_d¿m_»tuº_queue_size
;

229 
d¿m_ù¾_t
 
	mscheduËr_ty³
;

230 
boŞ
 
	mgpgpu_memÏ‹ncy_¡©
;

231 
	mm_n_mem
;

232 
	mm_n_sub_·¹™iÚ_³r_memÜy_chªÃl
;

233 
	mm_n_mem_sub_·¹™iÚ
;

234 
	mgpu_n_mem_³r_ù¾r
;

236 
	mrİ_Ï‹ncy
;

237 
	md¿m_Ï‹ncy
;

241 
	mtCCDL
;

242 
	mtRTPL
;

244 
	mtCCD
;

245 
	mtRRD
;

246 
	mtRCD
;

247 
	mtRCDWR
;

248 
	mtRAS
;

249 
	mtRP
;

250 
	mtRC
;

251 
	mtCDLR
;

252 
	mtWR
;

254 
	mCL
;

255 
	mWL
;

256 
	mBL
;

257 
	mtRTW
;

258 
	mtWTR
;

259 
	mtWTP
;

260 
	mbusW
;

262 
	mnbkg½
;

263 
	mbk_g_Ëngth
;

265 
	mnbk
;

267 
	md©a_commªd_äeq_¿tio
;

268 
	md¿m_©om_size
;

270 
lš—r_to_¿w_add»ss_Œª¦©iÚ
 
	mm_add»ss_m­pšg
;

272 
	miút_æ™_size
;

276 
gpu_sim_cyşe
;

277 
gpu_tÙ_sim_cyşe
;

278 
boŞ
 
g_š‹¿ùive_debugg”_’abËd
;

280 
şass
 
	ggpgpu_sim_cÚfig
 : 
public
 
pow”_cÚfig
,…ubliø
	ggpgpu_funùiÚ®_sim_cÚfig
 {

281 
	gpublic
:

282 
gpgpu_sim_cÚfig
(è{ 
m_v®id
 = 
çl£
; }

283 
»g_İtiÚs
(
şass
 
O±iÚP¬£r
 * 
İp
);

284 
š™
()

286 
	ggpu_¡©_§m¶e_äeq
 = 10000;

287 
	ggpu_ruÁime_¡©_æag
 = 0;

288 
ssÿnf
(
gpgpu_ruÁime_¡©
, "%d:%x", &
gpu_¡©_§m¶e_äeq
, &
gpu_ruÁime_¡©_æag
);

289 
	gm_shad”_cÚfig
.
š™
();

290 
±x_£t_‹x_ÿche_lšesize
(
m_shad”_cÚfig
.
m_L1T_cÚfig
.
g‘_lše_sz
());

291 
	gm_memÜy_cÚfig
.
š™
();

292 
š™_şock_domašs
();

293 
	gpow”_cÚfig
::
š™
();

294 
	gT¿û
::
š™
();

298 
time_t
 
	gcu¼_time
;

299 
time
(&
cu¼_time
);

300 *
	gd©e
 = 
ùime
(&
cu¼_time
);

301 *
	gs
 = 
d©e
;

302 *
	gs
) {

303 ià(*
	gs
 =ğ' ' || *
s
 == '\t' || *s == ':') *s = '-';

304 ià(*
	gs
 =ğ'\n' || *
s
 == '\r' ) *s = 0;

305 
	gs
++;

307 
	gbuf
[1024];

308 
¢´štf
(
buf
,1024,"gpgpusim_visu®iz”__%s.log.gz",
d©e
);

309 
	gg_visu®iz”_f’ame
 = 
¡rdup
(
buf
);

311 
	gm_v®id
=
Œue
;

314 
num_shad”
(ècÚ¡ {  
	gm_shad”_cÚfig
.num_shader(); }

315 
num_şu¡”
(ècÚ¡ {  
	gm_shad”_cÚfig
.
	gn_simt_şu¡”s
; }

316 
g‘_max_cÚcu¼’t_k”Ãl
(ècÚ¡ {  
	gmax_cÚcu¼’t_k”Ãl
; }

318 
	g´iv©e
:

319 
š™_şock_domašs
();

322 
boŞ
 
	gm_v®id
;

323 
shad”_cÜe_cÚfig
 
	gm_shad”_cÚfig
;

324 
memÜy_cÚfig
 
	gm_memÜy_cÚfig
;

326 
	gcÜe_äeq
;

327 
	giút_äeq
;

328 
	gd¿m_äeq
;

329 
	gl2_äeq
;

330 
	gcÜe_³riod
;

331 
	giút_³riod
;

332 
	gd¿m_³riod
;

333 
	gl2_³riod
;

336 
	ggpu_max_cyşe_İt
;

337 
	ggpu_max_š¢_İt
;

338 
	ggpu_max_ùa_İt
;

339 *
	ggpgpu_ruÁime_¡©
;

340 
boŞ
 
	ggpgpu_æush_l1_ÿche
;

341 
boŞ
 
	ggpgpu_æush_l2_ÿche
;

342 
boŞ
 
	ggpu_d—dlock_d‘eù
;

343 
	ggpgpu_äfcfs_d¿m_sched_queue_size
;

344 
	ggpgpu_cæog_š‹rv®
;

345 * 
	ggpgpu_şock_domašs
;

346 
	gmax_cÚcu¼’t_k”Ãl
;

349 
boŞ
 
	gg_visu®iz”_’abËd
;

350 *
	gg_visu®iz”_f’ame
;

351 
	gg_visu®iz”_zËv–
;

355 
	ggpu_¡©_§m¶e_äeq
;

356 
	ggpu_ruÁime_¡©_æag
;

360 
	gliv’ess_mes§ge_äeq
;

362 
ä›nd
 
şass
 
	ggpgpu_sim
;

365 şas 
	cgpgpu_sim
 : 
public
 
gpgpu_t
 {

366 
public
:

367 
gpgpu_sim
ĞcÚ¡ 
gpgpu_sim_cÚfig
 &
cÚfig
 );

369 
£t_´İ
Ğ
cudaDeviûPrİ
 *
´İ
 );

371 
Ïunch
Ğ
k”Ãl_šfo_t
 *
kšfo
 );

372 
boŞ
 
ÿn_¡¬t_k”Ãl
();

373 
fšished_k”Ãl
();

374 
£t_k”Ãl_dÚe
Ğ
k”Ãl_šfo_t
 *
k”Ãl
 );

376 
š™
();

377 
cyşe
();

378 
boŞ
 
aùive
();

379 
´št_¡©s
();

380 
upd©e_¡©s
();

381 
d—dlock_check
();

383 
g‘_pdom_¡ack_tİ_šfo
Ğ
sid
, 
tid
, *
pc
, *
½c
 );

385 
	$sh¬ed_mem_size
() const;

386 
	$num_»gi¡”s_³r_cÜe
() const;

387 
	$w½_size
() const;

388 
	$shad”_şock
() const;

389 cÚ¡ 
cudaDeviûPrİ
 *
	$g‘_´İ
() const;

390 
div”g’û_suµÜt_t
 
	$simd_mod–
() const;

392 
	$th»ads_³r_cÜe
() const;

393 
boŞ
 
	$g‘_mÜe_ùa_Ëá
() const;

394 
k”Ãl_šfo_t
 *
	`£Ëù_k”Ãl
();

396 cÚ¡ 
gpgpu_sim_cÚfig
 &
	$g‘_cÚfig
(ècÚ¡ {  
m_cÚfig
; }

397 
	`gpu_´št_¡©
();

398 
	$dump_p–še
Ğ
mask
, 
s
, 
m
 ) const;

406 cÚ¡ 
shad”_cÜe_cÚfig
 * 
	`g‘Shad”CÜeCÚfig
();

413 cÚ¡ 
memÜy_cÚfig
 * 
	`g‘MemÜyCÚfig
();

420 
simt_cÜe_şu¡”
 * 
	`g‘SIMTClu¡”
();

423 
´iv©e
:

425 
	`»š™_şock_domašs
();

426 
	`Ãxt_şock_domaš
();

427 
	`issue_block2cÜe
();

428 
	$´št_d¿m_¡©s
(
FILE
 *
fout
) const;

429 
	`shad”_´št_ruÁime_¡©
Ğ
FILE
 *
fout
 );

430 
	$shad”_´št_l1_miss_¡©
Ğ
FILE
 *
fout
 ) const;

431 
	$shad”_´št_ÿche_¡©s
Ğ
FILE
 *
fout
 ) const;

432 
	$shad”_´št_scheduËr_¡©
Ğ
FILE
* 
fout
, 
boŞ
 
´št_dyÇmic_šfo
 ) const;

433 
	`visu®iz”_´št¡©
();

434 
	$´št_shad”_cyşe_di¡ro
Ğ
FILE
 *
fout
 ) const;

436 
	`gpgpu_debug
();

440 
şass
 
simt_cÜe_şu¡”
 **
m_şu¡”
;

441 
şass
 
memÜy_·¹™iÚ_un™
 **
m_memÜy_·¹™iÚ_un™
;

442 
şass
 
memÜy_sub_·¹™iÚ
 **
m_memÜy_sub_·¹™iÚ
;

444 
¡d
::
veùÜ
<
k”Ãl_šfo_t
*> 
m_ruÂšg_k”Ãls
;

445 
m_Ï¡_issued_k”Ãl
;

447 
¡d
::
li¡
<> 
m_fšished_k”Ãl
;

448 
m_tÙ®_ùa_Ïunched
;

449 
m_Ï¡_şu¡”_issue
;

450 * 
av”age_p–še_duty_cyşe
;

451 * 
aùive_sms
;

453 
cÜe_time
;

454 
iút_time
;

455 
d¿m_time
;

456 
l2_time
;

459 
boŞ
 
gpu_d—dlock
;

462 cÚ¡ 
gpgpu_sim_cÚfig
 &
m_cÚfig
;

464 cÚ¡ 
cudaDeviûPrİ
 *
m_cuda_´İ”t›s
;

465 cÚ¡ 
shad”_cÜe_cÚfig
 *
m_shad”_cÚfig
;

466 cÚ¡ 
memÜy_cÚfig
 *
m_memÜy_cÚfig
;

469 
şass
 
shad”_cÜe_¡©s
 *
m_shad”_¡©s
;

470 
şass
 
memÜy_¡©s_t
 *
m_memÜy_¡©s
;

471 
şass
 
pow”_¡©_t
 *
m_pow”_¡©s
;

472 
şass
 
gpgpu_sim_w¿µ”
 *
m_gpgpusim_w¿µ”
;

473 
gpu_tÙ_issued_ùa
;

474 
Ï¡_gpu_sim_š¢
;

476 
Ï¡_liv’ess_mes§ge_time
;

478 
¡d
::
m­
<¡d::
¡ršg
, 
FuncCache
> 
m_¥ecŸl_ÿche_cÚfig
;

480 
¡d
::
veùÜ
<¡d::
¡ršg
> 
m_execu‹d_k”Ãl_Çmes
;

481 
¡d
::
veùÜ
<> 
m_execu‹d_k”Ãl_uids
;

482 
¡d
::
¡ršg
 
	`execu‹d_k”Ãl_šfo_¡ršg
();

483 
	`ş—r_execu‹d_k”Ãl_šfo
();

485 
public
:

486 
gpu_sim_š¢
;

487 
gpu_tÙ_sim_š¢
;

488 
gpu_sim_š¢_Ï¡_upd©e
;

489 
gpu_sim_š¢_Ï¡_upd©e_sid
;

493 
FuncCache
 
	`g‘_ÿche_cÚfig
(
¡d
::
¡ršg
 
k”Ãl_Çme
);

494 
	`£t_ÿche_cÚfig
(
¡d
::
¡ršg
 
k”Ãl_Çme
, 
FuncCache
 
ÿcheCÚfig
 );

495 
boŞ
 
	`has_¥ecŸl_ÿche_cÚfig
(
¡d
::
¡ršg
 
k”Ãl_Çme
);

496 
	`chªge_ÿche_cÚfig
(
FuncCache
 
ÿche_cÚfig
);

497 
	`£t_ÿche_cÚfig
(
¡d
::
¡ršg
 
k”Ãl_Çme
);

499 
	}
};

	@histogram.cc

28 
	~"hi¡og¿m.h
"

30 
	~<as£¹.h
>

32 
	gbšÃd_hi¡og¿m
::
	$bšÃd_hi¡og¿m
 (
¡d
::
¡ršg
 
Çme
, 
nbšs
, * 
bšs
)

33 : 
	`m_Çme
(
Çme
), 
	`m_nbšs
(
nbšs
), 
	`m_bšs
(
NULL
), 
	`m_bš_úts
(
Ãw
 [
m_nbšs
]), 
	`m_maximum
(0), 
	$m_sum
(0)

35 ià(
bšs
) {

36 
m_bšs
 = 
Ãw
 [
m_nbšs
];

37 
i
 = 0; i < 
nbšs
; i++) {

38 
m_bšs
[
i
] = 
bšs
[i];

42 
	`»£t_bšs
();

43 
	}
}

45 
	gbšÃd_hi¡og¿m
::
	$bšÃd_hi¡og¿m
 (cÚ¡ 
bšÃd_hi¡og¿m
& 
Ùh”
)

46 : 
	`m_Çme
(
Ùh”
.
m_Çme
), 
	`m_nbšs
(Ùh”.
m_nbšs
), 
	`m_bšs
(
NULL
),

47 
	`m_bš_úts
(
Ãw
 [
m_nbšs
]), 
	`m_maximum
(0), 
	$m_sum
(0)

49 
i
 = 0; i < 
m_nbšs
; i++) {

50 
m_bš_úts
[
i
] = 
Ùh”
.m_bin_cnts[i];

52 
	}
}

54 
	gbšÃd_hi¡og¿m
::
	$»£t_bšs
 () {

55 
i
 = 0; i < 
m_nbšs
; i++) {

56 
m_bš_úts
[
i
] = 0;

58 
	}
}

60 
	gbšÃd_hi¡og¿m
::
	$add2bš
 (
§m¶e
) {

61 
	`as£¹
(0);

62 
m_maximum
 = (
§m¶e
 > m_maximum)? sample : m_maximum;

63 
	}
}

65 
	gbšÃd_hi¡og¿m
::
	$åršt
 (
FILE
 *
fout
) const

67 ià(
m_Çme
.
	`c_¡r
(è!ğ
NULL
è
	`årštf
(
fout
, "%s = ", m_name.c_str());

68 
tÙ®_§m¶e
 = 0;

69 
i
 = 0; i < 
m_nbšs
; i++) {

70 
	`årštf
(
fout
, "%d ", 
m_bš_úts
[
i
]);

71 
tÙ®_§m¶e
 +ğ
m_bš_úts
[
i
];

73 
	`årštf
(
fout
, "max=%d ", 
m_maximum
);

74 
avg
 = 0.0f;

75 ià(
tÙ®_§m¶e
 > 0) {

76 
avg
 = ()
m_sum
 / 
tÙ®_§m¶e
;

78 
	`årštf
(
fout
, "avg=%0.2à", 
avg
);

79 
	}
}

81 
	gbšÃd_hi¡og¿m
::~
	$bšÃd_hi¡og¿m
 () {

82 ià(
m_bšs
è
d–‘e
[] m_bins;

83 
d–‘e
[] 
m_bš_úts
;

84 
	}
}

86 
	gpow2_hi¡og¿m
::
	$pow2_hi¡og¿m
 (
¡d
::
¡ršg
 
Çme
, 
nbšs
, * 
bšs
)

87 : 
	$bšÃd_hi¡og¿m
 (
Çme
, 
nbšs
, 
bšs
è{
	}
}

89 
	gpow2_hi¡og¿m
::
	$add2bš
 (
§m¶e
) {

90 
	`as£¹
(
§m¶e
 >= 0);

92 
bš
;

93 
v
 = 
§m¶e
;

94 
shiá
;

96 
bš
 = (
v
 > 0xFFFF) << 4; v >>= bin;

97 
shiá
 = (
v
 > 0xFF ) << 3; v >>ğshiá; 
bš
 |= shift;

98 
shiá
 = (
v
 > 0xF ) << 2; v >>ğshiá; 
bš
 |= shift;

99 
shiá
 = (
v
 > 0x3 ) << 1; v >>ğshiá; 
bš
 |= shift;

100 
bš
 |ğ(
v
 >> 1);

101 
bš
 +ğ(
§m¶e
 > 0)? 1:0;

103 
m_bš_úts
[
bš
] += 1;

105 
m_maximum
 = (
§m¶e
 > m_maximum)? sample : m_maximum;

106 
m_sum
 +ğ
§m¶e
;

107 
	}
}

109 
	glš—r_hi¡og¿m
::
	$lš—r_hi¡og¿m
 (
¡ride
, cÚ¡ *
Çme
, 
nbšs
, * 
bšs
)

110 : 
	`bšÃd_hi¡og¿m
 (
Çme
, 
nbšs
, 
bšs
), 
	$m_¡ride
(
¡ride
)

112 
	}
}

114 
	glš—r_hi¡og¿m
::
	$add2bš
 (
§m¶e
) {

115 
	`as£¹
(
§m¶e
 >= 0);

117 
bš
 = 
§m¶e
 / 
m_¡ride
;

118 ià(
bš
 >ğ
m_nbšs
) bin = m_nbins - 1;

120 
m_bš_úts
[
bš
] += 1;

122 
m_maximum
 = (
§m¶e
 > m_maximum)? sample : m_maximum;

123 
m_sum
 +ğ
§m¶e
;

124 
	}
}

	@histogram.h

28 #iâdeà
HISTOGRAM_H


29 
	#HISTOGRAM_H


	)

31 #ifdeà
__ılu¥lus


33 
	~<¡dio.h
>

34 
	~<¡ršg
>

36 şas 
	cbšÃd_hi¡og¿m
 {

37 
	mpublic
:

39 
bšÃd_hi¡og¿m
 (
¡d
::
¡ršg
 
Çme
 = "", 
nbšs
 = 32, * 
bšs
 = 
NULL
);

40 
bšÃd_hi¡og¿m
 (cÚ¡ bšÃd_hi¡og¿m& 
Ùh”
);

41 
	mvœtu®
 ~
bšÃd_hi¡og¿m
 ();

44 
»£t_bšs
 ();

45 
add2bš
 (
§m¶e
);

48 
	$åršt
 (
FILE
 *
fout
) const;

50 
´Ùeùed
:

51 
¡d
::
¡ršg
 
m_Çme
;

52 
m_nbšs
;

53 *
m_bšs
;

54 *
m_bš_úts
;

55 
m_maximum
;

56 sigÃd 
m_sum
;

59 şas 
	cpow2_hi¡og¿m
 : 
public
 
bšÃd_hi¡og¿m
 {

60 
public
:

61 
	`pow2_hi¡og¿m
 ( 
¡d
::
¡ršg
 
Çme
 = "", 
nbšs
 = 32, * 
bšs
 = 
NULL
);

62 ~
	$pow2_hi¡og¿m
() {}

64 
	`add2bš
 (
§m¶e
);

65 
	}
};

67 şas 
	clš—r_hi¡og¿m
 : 
public
 
bšÃd_hi¡og¿m
 {

68 
public
:

69 
lš—r_hi¡og¿m
 (
¡ride
 = 1, cÚ¡ *
Çme
 = 
NULL
, 
nbšs
 = 32, * 
bšs
 = NULL);

70 ~
	$lš—r_hi¡og¿m
() {}

72 
	`add2bš
 (
§m¶e
);

73 
´iv©e
:

74 
m_¡ride
;

75 
	}
};

	@icnt_wrapper.cc

28 
	~"iút_w¿µ”.h
"

29 
	~<as£¹.h
>

30 
	~"../š‹rsim2/glob®s.hµ
"

31 
	~"../š‹rsim2/š‹rcÚÃù_š‹rçû.hµ
"

33 
iút_ü—‹_p
 
	giút_ü—‹
;

34 
iút_š™_p
 
	giút_š™
;

35 
iút_has_bufãr_p
 
	giút_has_bufãr
;

36 
iút_push_p
 
	giút_push
;

37 
iút_pİ_p
 
	giút_pİ
;

38 
iút_Œªsãr_p
 
	giút_Œªsãr
;

39 
iút_busy_p
 
	giút_busy
;

40 
iút_di¥Ïy_¡©s_p
 
	giút_di¥Ïy_¡©s
;

41 
iút_di¥Ïy_ov”®l_¡©s_p
 
	giút_di¥Ïy_ov”®l_¡©s
;

42 
iút_di¥Ïy_¡©e_p
 
	giút_di¥Ïy_¡©e
;

43 
iút_g‘_æ™_size_p
 
	giút_g‘_æ™_size
;

45 
	gg_ÃtwÜk_mode
;

46 * 
	gg_ÃtwÜk_cÚfig_f’ame
;

48 
	~"../İtiÚ_·r£r.h
"

53 
	$š‹rsim2_ü—‹
(
n_shad”
, 
n_mem
)

55 
g_iút_š‹rçû
->
	`C»©eIÁ”cÚÃù
(
n_shad”
, 
n_mem
);

56 
	}
}

58 
	$š‹rsim2_š™
()

60 
g_iút_š‹rçû
->
	`In™
();

61 
	}
}

63 
boŞ
 
	$š‹rsim2_has_bufãr
(
šput
, 
size
)

65  
g_iút_š‹rçû
->
	`HasBufãr
(
šput
, 
size
);

66 
	}
}

68 
	$š‹rsim2_push
(
šput
, 
ouut
, * 
d©a
, 
size
)

70 
g_iút_š‹rçû
->
	`Push
(
šput
, 
ouut
, 
d©a
, 
size
);

71 
	}
}

73 * 
	$š‹rsim2_pİ
(
ouut
)

75  
g_iút_š‹rçû
->
	`Pİ
(
ouut
);

76 
	}
}

78 
	$š‹rsim2_Œªsãr
()

80 
g_iút_š‹rçû
->
	`Advªû
();

81 
	}
}

83 
boŞ
 
	$š‹rsim2_busy
()

85  
g_iút_š‹rçû
->
	`Busy
();

86 
	}
}

88 
	$š‹rsim2_di¥Ïy_¡©s
()

90 
g_iút_š‹rçû
->
	`Di¥ÏySts
();

91 
	}
}

93 
	$š‹rsim2_di¥Ïy_ov”®l_¡©s
()

95 
g_iút_š‹rçû
->
	`Di¥ÏyOv”®lSts
();

96 
	}
}

98 
	$š‹rsim2_di¥Ïy_¡©e
(
FILE
 *
å
)

100 
g_iút_š‹rçû
->
	`Di¥ÏyS‹
(
å
);

101 
	}
}

103 
	$š‹rsim2_g‘_æ™_size
()

105  
g_iút_š‹rçû
->
	`G‘Fl™Size
();

106 
	}
}

108 
	$iút_»g_İtiÚs
Ğ
şass
 
O±iÚP¬£r
 * 
İp
 )

110 
	`İtiÚ_·r£r_»gi¡”
(
İp
, "-ÃtwÜk_mode", 
OPT_INT32
, &
g_ÃtwÜk_mode
, "Interconnection‚etwork mode", "1");

111 
	`İtiÚ_·r£r_»gi¡”
(
İp
, "-š‹r_cÚfig_fe", 
OPT_CSTR
, &
g_ÃtwÜk_cÚfig_f’ame
, "Interconnection‚etwork config file", "mesh");

112 
	}
}

114 
	$iút_w¿µ”_š™
()

116 
g_ÃtwÜk_mode
) {

117 
INTERSIM
:

119 
g_iút_š‹rçû
 = 
IÁ”cÚÃùIÁ”çû
::
	`New
(
g_ÃtwÜk_cÚfig_f’ame
);

120 
iút_ü—‹
 = 
š‹rsim2_ü—‹
;

121 
iút_š™
 = 
š‹rsim2_š™
;

122 
iút_has_bufãr
 = 
š‹rsim2_has_bufãr
;

123 
iút_push
 = 
š‹rsim2_push
;

124 
iút_pİ
 = 
š‹rsim2_pİ
;

125 
iút_Œªsãr
 = 
š‹rsim2_Œªsãr
;

126 
iút_busy
 = 
š‹rsim2_busy
;

127 
iút_di¥Ïy_¡©s
 = 
š‹rsim2_di¥Ïy_¡©s
;

128 
iút_di¥Ïy_ov”®l_¡©s
 = 
š‹rsim2_di¥Ïy_ov”®l_¡©s
;

129 
iút_di¥Ïy_¡©e
 = 
š‹rsim2_di¥Ïy_¡©e
;

130 
iút_g‘_æ™_size
 = 
š‹rsim2_g‘_æ™_size
;

133 
	`as£¹
(0);

136 
	}
}

	@icnt_wrapper.h

28 #iâdeà
ICNT_WRAPPER_H


29 
	#ICNT_WRAPPER_H


	)

31 
	~<¡dio.h
>

35 (*
	tiút_ü—‹_p
)(
	tn_shad”
, 
	tn_mem
);

36 (*
	tiút_š™_p
)( );

37 
	$boŞ
 (*
	tiút_has_bufãr_p
)(
	tšput
, 
	tsize
);

38 (*
	tiút_push_p
)(
	tšput
, 
	touut
, * 
	td©a
, 
	tsize
);

39 * (*
	tiút_pİ_p
)(
	touut
);

40 (*
	tiút_Œªsãr_p
)( );

41 
	`boŞ
 (*
	tiút_busy_p
)( );

42 (*
	tiút_d¿š_p
)( );

43 (*
	tiút_di¥Ïy_¡©s_p
)( );

44 (*
	tiút_di¥Ïy_ov”®l_¡©s_p
)( );

45 (*
	tiút_di¥Ïy_¡©e_p
)(
	tFILE
* 
	tå
);

46 (*
	tiút_g‘_æ™_size_p
)();

48 
iút_ü—‹_p
 
iút_ü—‹
;

49 
iút_š™_p
 
iút_š™
;

50 
iút_has_bufãr_p
 
iút_has_bufãr
;

51 
iút_push_p
 
iút_push
;

52 
iút_pİ_p
 
iút_pİ
;

53 
iút_Œªsãr_p
 
iút_Œªsãr
;

54 
iút_busy_p
 
iút_busy
;

55 
iút_d¿š_p
 
iút_d¿š
;

56 
iút_di¥Ïy_¡©s_p
 
iút_di¥Ïy_¡©s
;

57 
iút_di¥Ïy_ov”®l_¡©s_p
 
iút_di¥Ïy_ov”®l_¡©s
;

58 
iút_di¥Ïy_¡©e_p
 
iút_di¥Ïy_¡©e
;

59 
iút_g‘_æ™_size_p
 
iút_g‘_æ™_size
;

60 
g_ÃtwÜk_mode
;

62 
	eÃtwÜk_mode
 {

63 
INTERSIM
 = 1,

64 
N_NETWORK_MODE


67 
	`iút_w¿µ”_š™
();

68 
	`iút_»g_İtiÚs
Ğ
şass
 
O±iÚP¬£r
 * 
İp
 );

	@l2cache.cc

28 
	~<¡dlib.h
>

29 
	~<¡dio.h
>

30 
	~<¡ršg.h
>

32 
	~<li¡
>

33 
	~<£t
>

35 
	~"../İtiÚ_·r£r.h
"

36 
	~"mem_ãtch.h
"

37 
	~"d¿m.h
"

38 
	~"gpu-ÿche.h
"

39 
	~"hi¡og¿m.h
"

40 
	~"l2ÿche.h
"

41 
	~"../¡©w¿µ”.h
"

42 
	~"../ab¡¿ù_h¬dw¬e_mod–.h
"

43 
	~"gpu-sim.h
"

44 
	~"shad”.h
"

45 
	~"mem_Ï‹ncy_¡©.h
"

46 
	~"l2ÿche_Œaû.h
"

49 
mem_ãtch
 * 
	g·¹™iÚ_mf_®loÿtÜ
::
	$®loc
(
Ãw_addr_ty³
 
addr
, 
mem_acûss_ty³
 
ty³
, 
size
, 
boŞ
 
wr
 ) const

51 
	`as£¹
Ğ
wr
 );

52 
mem_acûss_t
 
	`acûss
Ğ
ty³
, 
addr
, 
size
, 
wr
 );

53 
mem_ãtch
 *
mf
 = 
Ãw
 
	`mem_ãtch
Ğ
acûss
,

54 
NULL
,

55 
WRITE_PACKET_SIZE
,

59 
m_memÜy_cÚfig
 );

60  
mf
;

61 
	}
}

63 
	gmemÜy_·¹™iÚ_un™
::
	$memÜy_·¹™iÚ_un™
Ğ
·¹™iÚ_id
,

64 cÚ¡ 
memÜy_cÚfig
 *
cÚfig
,

65 
şass
 
memÜy_¡©s_t
 *
¡©s
 )

66 : 
	`m_id
(
·¹™iÚ_id
), 
	`m_cÚfig
(
cÚfig
), 
	`m_¡©s
(
¡©s
), 
	$m_¬b™¿tiÚ_m‘ad©a
(
cÚfig
)

68 
m_d¿m
 = 
Ãw
 
	`d¿m_t
(
m_id
,
m_cÚfig
,
m_¡©s
,
this
);

70 
m_sub_·¹™iÚ
 = 
Ãw
 
memÜy_sub_·¹™iÚ
*[
m_cÚfig
->
m_n_sub_·¹™iÚ_³r_memÜy_chªÃl
];

71 
p
 = 0;… < 
m_cÚfig
->
m_n_sub_·¹™iÚ_³r_memÜy_chªÃl
;…++) {

72 
sub_·¹™iÚ_id
 = 
m_id
 * 
m_cÚfig
->
m_n_sub_·¹™iÚ_³r_memÜy_chªÃl
 + 
p
;

73 
m_sub_·¹™iÚ
[
p
] = 
Ãw
 
	`memÜy_sub_·¹™iÚ
(
sub_·¹™iÚ_id
, 
m_cÚfig
, 
¡©s
);

75 
	}
}

77 
	gmemÜy_·¹™iÚ_un™
::~
	$memÜy_·¹™iÚ_un™
()

79 
d–‘e
 
m_d¿m
;

80 
p
 = 0;… < 
m_cÚfig
->
m_n_sub_·¹™iÚ_³r_memÜy_chªÃl
;…++) {

81 
d–‘e
 
m_sub_·¹™iÚ
[
p
];

83 
d–‘e
[] 
m_sub_·¹™iÚ
;

84 
	}
}

86 
	gmemÜy_·¹™iÚ_un™
::
¬b™¿tiÚ_m‘ad©a
::
	$¬b™¿tiÚ_m‘ad©a
(cÚ¡ 
memÜy_cÚfig
 *
cÚfig
)

87 : 
	`m_Ï¡_bÜrow”
(
cÚfig
->
m_n_sub_·¹™iÚ_³r_memÜy_chªÃl
 - 1),

88 
	`m_´iv©e_üed™
(
cÚfig
->
m_n_sub_·¹™iÚ_³r_memÜy_chªÃl
, 0),

89 
	$m_sh¬ed_üed™
(0)

93 
m_´iv©e_üed™_lim™
 = 1;

94 
m_sh¬ed_üed™_lim™
 = 
cÚfig
->
gpgpu_äfcfs_d¿m_sched_queue_size


95 + 
cÚfig
->
gpgpu_d¿m_»tuº_queue_size


96 - (
cÚfig
->
m_n_sub_·¹™iÚ_³r_memÜy_chªÃl
 - 1);

97 ià(
cÚfig
->
gpgpu_äfcfs_d¿m_sched_queue_size
 == 0

98 
Ü
 
cÚfig
->
gpgpu_d¿m_»tuº_queue_size
 == 0)

100 
m_sh¬ed_üed™_lim™
 = 0;

102 
	`as£¹
(
m_sh¬ed_üed™_lim™
 >= 0);

103 
	}
}

105 
boŞ
 
	gmemÜy_·¹™iÚ_un™
::
¬b™¿tiÚ_m‘ad©a
::
	$has_üed™s
(
šÃr_sub_·¹™iÚ_id
) const

107 
¥id
 = 
šÃr_sub_·¹™iÚ_id
;

108 ià(
m_´iv©e_üed™
[
¥id
] < 
m_´iv©e_üed™_lim™
) {

109  
Œue
;

110 } ià(
m_sh¬ed_üed™_lim™
 =ğ0 || 
m_sh¬ed_üed™
 < m_shared_credit_limit) {

111  
Œue
;

113  
çl£
;

115 
	}
}

117 
	gmemÜy_·¹™iÚ_un™
::
¬b™¿tiÚ_m‘ad©a
::
	$bÜrow_üed™
(
šÃr_sub_·¹™iÚ_id
)

119 
¥id
 = 
šÃr_sub_·¹™iÚ_id
;

120 ià(
m_´iv©e_üed™
[
¥id
] < 
m_´iv©e_üed™_lim™
) {

121 
m_´iv©e_üed™
[
¥id
] += 1;

122 } ià(
m_sh¬ed_üed™_lim™
 =ğ0 || 
m_sh¬ed_üed™
 < m_shared_credit_limit) {

123 
m_sh¬ed_üed™
 += 1;

125 
	`as£¹
(0 && "DRAM‡rbitrationƒrror: Borrowing from depleted credit!");

127 
m_Ï¡_bÜrow”
 = 
¥id
;

128 
	}
}

130 
	gmemÜy_·¹™iÚ_un™
::
¬b™¿tiÚ_m‘ad©a
::
	$»tuº_üed™
(
šÃr_sub_·¹™iÚ_id
)

132 
¥id
 = 
šÃr_sub_·¹™iÚ_id
;

133 ià(
m_´iv©e_üed™
[
¥id
] > 0) {

134 
m_´iv©e_üed™
[
¥id
] -= 1;

136 
m_sh¬ed_üed™
 -= 1;

138 
	`as£¹
((
m_sh¬ed_üed™
 >= 0) && "DRAM‡rbitrationƒrror: Returning morehan‡vailable credits!");

139 
	}
}

141 
	gmemÜy_·¹™iÚ_un™
::
¬b™¿tiÚ_m‘ad©a
::
	$´št
Ğ
FILE
 *
å
 ) const

143 
	`årštf
(
å
, "private_credit = ");

144 
p
 = 0;… < 
m_´iv©e_üed™
.
	`size
();…++) {

145 
	`årštf
(
å
, "%d ", 
m_´iv©e_üed™
[
p
]);

147 
	`årštf
(
å
, "Öim™ = %d)\n", 
m_´iv©e_üed™_lim™
);

148 
	`årštf
(
å
, "sh¬ed_üed™ = %d (lim™ = %d)\n", 
m_sh¬ed_üed™
, 
m_sh¬ed_üed™_lim™
);

149 
	}
}

151 
boŞ
 
	gmemÜy_·¹™iÚ_un™
::
	$busy
() const

153 
boŞ
 
busy
 = 
çl£
;

154 
p
 = 0;… < 
m_cÚfig
->
m_n_sub_·¹™iÚ_³r_memÜy_chªÃl
;…++) {

155 ià(
m_sub_·¹™iÚ
[
p
]->
	`busy
()) {

156 
busy
 = 
Œue
;

159  
busy
;

160 
	}
}

162 
	gmemÜy_·¹™iÚ_un™
::
	$ÿche_cyşe
(
cyşe
)

164 
p
 = 0;… < 
m_cÚfig
->
m_n_sub_·¹™iÚ_³r_memÜy_chªÃl
;…++) {

165 
m_sub_·¹™iÚ
[
p
]->
	`ÿche_cyşe
(
cyşe
);

167 
	}
}

169 
	gmemÜy_·¹™iÚ_un™
::
	$visu®iz”_´št
Ğ
gzFe
 
visu®iz”_fe
 ) const

171 
m_d¿m
->
	`visu®iz”_´št
(
visu®iz”_fe
);

172 
p
 = 0;… < 
m_cÚfig
->
m_n_sub_·¹™iÚ_³r_memÜy_chªÃl
;…++) {

173 
m_sub_·¹™iÚ
[
p
]->
	`visu®iz”_´št
(
visu®iz”_fe
);

175 
	}
}

178 
boŞ
 
	gmemÜy_·¹™iÚ_un™
::
	$ÿn_issue_to_d¿m
(
šÃr_sub_·¹™iÚ_id
)

180 
¥id
 = 
šÃr_sub_·¹™iÚ_id
;

181 
boŞ
 
sub_·¹™iÚ_cÚ‹ÁiÚ
 = 
m_sub_·¹™iÚ
[
¥id
]->
	`d¿m_L2_queue_fuÎ
();

182 
boŞ
 
has_d¿m_»sourû
 = 
m_¬b™¿tiÚ_m‘ad©a
.
	`has_üed™s
(
¥id
);

184 
	`MEMPART_DPRINTF
("sub…artition %d sub_partition_contention=%c has_dram_resource=%c\n",

185 
¥id
, (
sub_·¹™iÚ_cÚ‹ÁiÚ
)? 'T':'F', (
has_d¿m_»sourû
)? 'T':'F');

187  (
has_d¿m_»sourû
 && !
sub_·¹™iÚ_cÚ‹ÁiÚ
);

188 
	}
}

190 
	gmemÜy_·¹™iÚ_un™
::
	$glob®_sub_·¹™iÚ_id_to_loÿl_id
(
glob®_sub_·¹™iÚ_id
) const

192  (
glob®_sub_·¹™iÚ_id
 - 
m_id
 * 
m_cÚfig
->
m_n_sub_·¹™iÚ_³r_memÜy_chªÃl
);

193 
	}
}

195 
	gmemÜy_·¹™iÚ_un™
::
	$d¿m_cyşe
()

199 
mem_ãtch
* 
mf_»tuº
 = 
m_d¿m
->
	`»tuº_queue_tİ
();

200 ià(
mf_»tuº
) {

201 
de¡_glob®_¥id
 = 
mf_»tuº
->
	`g‘_sub_·¹™iÚ_id
();

202 
de¡_¥id
 = 
	`glob®_sub_·¹™iÚ_id_to_loÿl_id
(
de¡_glob®_¥id
);

203 
	`as£¹
(
m_sub_·¹™iÚ
[
de¡_¥id
]->
	`g‘_id
(è=ğ
de¡_glob®_¥id
);

204 ià(!
m_sub_·¹™iÚ
[
de¡_¥id
]->
	`d¿m_L2_queue_fuÎ
()) {

205 ifĞ
mf_»tuº
->
	`g‘_acûss_ty³
(è=ğ
L1_WRBK_ACC
 ) {

206 
m_sub_·¹™iÚ
[
de¡_¥id
]->
	`£t_dÚe
(
mf_»tuº
);

207 
d–‘e
 
mf_»tuº
;

209 
m_sub_·¹™iÚ
[
de¡_¥id
]->
	`d¿m_L2_queue_push
(
mf_»tuº
);

210 
mf_»tuº
->
	`£t_¡©us
(
IN_PARTITION_DRAM_TO_L2_QUEUE
,
gpu_sim_cyşe
+
gpu_tÙ_sim_cyşe
);

211 
m_¬b™¿tiÚ_m‘ad©a
.
	`»tuº_üed™
(
de¡_¥id
);

212 
	`MEMPART_DPRINTF
("mem_ãtch„eque¡ %°»tuº from d¿mØsub…¬t™iÚ %d\n", 
mf_»tuº
, 
de¡_¥id
);

214 
m_d¿m
->
	`»tuº_queue_pİ
();

217 
m_d¿m
->
	`»tuº_queue_pİ
();

220 
m_d¿m
->
	`cyşe
();

221 
m_d¿m
->
	`d¿m_log
(
SAMPLELOG
);

223 ifĞ!
m_d¿m
->
	`fuÎ
() ) {

226 
Ï¡_issued_·¹™iÚ
 = 
m_¬b™¿tiÚ_m‘ad©a
.
	`Ï¡_bÜrow”
();

227 
p
 = 0;… < 
m_cÚfig
->
m_n_sub_·¹™iÚ_³r_memÜy_chªÃl
;…++) {

228 
¥id
 = (
p
 + 
Ï¡_issued_·¹™iÚ
 + 1è% 
m_cÚfig
->
m_n_sub_·¹™iÚ_³r_memÜy_chªÃl
;

229 ià(!
m_sub_·¹™iÚ
[
¥id
]->
	`L2_d¿m_queue_em±y
(è&& 
	`ÿn_issue_to_d¿m
(spid)) {

230 
mem_ãtch
 *
mf
 = 
m_sub_·¹™iÚ
[
¥id
]->
	`L2_d¿m_queue_tİ
();

231 
m_sub_·¹™iÚ
[
¥id
]->
	`L2_d¿m_queue_pİ
();

232 
	`MEMPART_DPRINTF
("Issumem_ãtch„eque¡ %°äom sub…¬t™iÚ %dØd¿m\n", 
mf
, 
¥id
);

233 
d¿m_d–ay_t
 
d
;

234 
d
.
»q
 = 
mf
;

235 
d
.
»ady_cyşe
 = 
gpu_sim_cyşe
+
gpu_tÙ_sim_cyşe
 + 
m_cÚfig
->
d¿m_Ï‹ncy
;

236 
m_d¿m_Ï‹ncy_queue
.
	`push_back
(
d
);

237 
mf
->
	`£t_¡©us
(
IN_PARTITION_DRAM_LATENCY_QUEUE
,
gpu_sim_cyşe
+
gpu_tÙ_sim_cyşe
);

238 
m_¬b™¿tiÚ_m‘ad©a
.
	`bÜrow_üed™
(
¥id
);

245 ifĞ!
m_d¿m_Ï‹ncy_queue
.
	`em±y
(è&& ( (
gpu_sim_cyşe
+
gpu_tÙ_sim_cyşe
è>ğm_d¿m_Ï‹ncy_queue.
	`äÚt
().
»ady_cyşe
 ) && !
m_d¿m
->
	`fuÎ
() ) {

246 
mem_ãtch
* 
mf
 = 
m_d¿m_Ï‹ncy_queue
.
	`äÚt
().
»q
;

247 
m_d¿m_Ï‹ncy_queue
.
	`pİ_äÚt
();

248 
m_d¿m
->
	`push
(
mf
);

250 
	}
}

252 
	gmemÜy_·¹™iÚ_un™
::
	$£t_dÚe
Ğ
mem_ãtch
 *
mf
 )

254 
glob®_¥id
 = 
mf
->
	`g‘_sub_·¹™iÚ_id
();

255 
¥id
 = 
	`glob®_sub_·¹™iÚ_id_to_loÿl_id
(
glob®_¥id
);

256 
	`as£¹
(
m_sub_·¹™iÚ
[
¥id
]->
	`g‘_id
(è=ğ
glob®_¥id
);

257 ià(
mf
->
	`g‘_acûss_ty³
(è=ğ
L1_WRBK_ACC
 || mf->g‘_acûss_ty³(è=ğ
L2_WRBK_ACC
) {

258 
m_¬b™¿tiÚ_m‘ad©a
.
	`»tuº_üed™
(
¥id
);

259 
	`MEMPART_DPRINTF
("mem_ãtch„eque¡ %°»tuº from d¿mØsub…¬t™iÚ %d\n", 
mf
, 
¥id
);

261 
m_sub_·¹™iÚ
[
¥id
]->
	`£t_dÚe
(
mf
);

262 
	}
}

264 
	gmemÜy_·¹™iÚ_un™
::
	$£t_d¿m_pow”_¡©s
(&
n_cmd
,

265 &
n_aùiv™y
,

266 &
n_nİ
,

267 &
n_aù
,

268 &
n_´e
,

269 &
n_rd
,

270 &
n_wr
,

271 &
n_»q
) const

273 
m_d¿m
->
	`£t_d¿m_pow”_¡©s
(
n_cmd
, 
n_aùiv™y
, 
n_nİ
, 
n_aù
, 
n_´e
, 
n_rd
, 
n_wr
, 
n_»q
);

274 
	}
}

276 
	gmemÜy_·¹™iÚ_un™
::
	$´št
Ğ
FILE
 *
å
 ) const

278 
	`årštf
(
å
, "MemÜy P¬t™iÚ %u: \n", 
m_id
);

279 
p
 = 0;… < 
m_cÚfig
->
m_n_sub_·¹™iÚ_³r_memÜy_chªÃl
;…++) {

280 
m_sub_·¹™iÚ
[
p
]->
	`´št
(
å
);

282 
	`årštf
(
å
, "IÀD¿m L©’cy QueuÑÙ® = %zd): \n", 
m_d¿m_Ï‹ncy_queue
.
	`size
());

283 
¡d
::
li¡
<
d¿m_d–ay_t
>::
cÚ¡_™”©Ü
 
mf_dlq
 = 
m_d¿m_Ï‹ncy_queue
.
	`begš
();

284 
mf_dlq
 !ğ
m_d¿m_Ï‹ncy_queue
.
	`’d
(); ++mf_dlq) {

285 
mem_ãtch
 *
mf
 = 
mf_dlq
->
»q
;

286 
	`årštf
(
å
, "R—dy @ %Îu - ", 
mf_dlq
->
»ady_cyşe
);

287 ià(
mf
)

288 
mf
->
	`´št
(
å
);

290 
	`årštf
(
å
, " <NULL mem_fetch?>\n");

292 
m_d¿m
->
	`´št
(
å
);

293 
	}
}

295 
	gmemÜy_sub_·¹™iÚ
::
	$memÜy_sub_·¹™iÚ
Ğ
sub_·¹™iÚ_id
,

296 cÚ¡ 
memÜy_cÚfig
 *
cÚfig
,

297 
şass
 
memÜy_¡©s_t
 *
¡©s
 )

299 
m_id
 = 
sub_·¹™iÚ_id
;

300 
m_cÚfig
=
cÚfig
;

301 
m_¡©s
=
¡©s
;

303 
	`as£¹
(
m_id
 < 
m_cÚfig
->
m_n_mem_sub_·¹™iÚ
);

305 
L2c_Çme
[32];

306 
	`¢´štf
(
L2c_Çme
, 32, "L2_bªk_%03d", 
m_id
);

307 
m_L2š‹rçû
 = 
Ãw
 
	`L2š‹rçû
(
this
);

308 
m_mf_®loÿtÜ
 = 
Ãw
 
	`·¹™iÚ_mf_®loÿtÜ
(
cÚfig
);

310 if(!
m_cÚfig
->
m_L2_cÚfig
.
	`di§bËd
())

311 
m_L2ÿche
 = 
Ãw
 
	`l2_ÿche
(
L2c_Çme
,
m_cÚfig
->
m_L2_cÚfig
,-1,-1,
m_L2š‹rçû
,
m_mf_®loÿtÜ
,
IN_PARTITION_L2_MISS_QUEUE
);

313 
iút_L2
;

314 
L2_d¿m
;

315 
d¿m_L2
;

316 
L2_iút
;

317 
	`ssÿnf
(
m_cÚfig
->
gpgpu_L2_queue_cÚfig
,"%u:%u:%u:%u", &
iút_L2
,&
L2_d¿m
,&
d¿m_L2
,&
L2_iút
 );

318 
m_iút_L2_queue
 = 
Ãw
 
fifo_p–še
<
mem_ãtch
>("iút-to-L2",0,
iút_L2
);

319 
m_L2_d¿m_queue
 = 
Ãw
 
fifo_p–še
<
mem_ãtch
>("L2-to-d¿m",0,
L2_d¿m
);

320 
m_d¿m_L2_queue
 = 
Ãw
 
fifo_p–še
<
mem_ãtch
>("d¿m-to-L2",0,
d¿m_L2
);

321 
m_L2_iút_queue
 = 
Ãw
 
fifo_p–še
<
mem_ãtch
>("L2-to-iút",0,
L2_iút
);

322 
wb_addr
=-1;

323 
	}
}

325 
	gmemÜy_sub_·¹™iÚ
::~
	$memÜy_sub_·¹™iÚ
()

327 
d–‘e
 
m_iút_L2_queue
;

328 
d–‘e
 
m_L2_d¿m_queue
;

329 
d–‘e
 
m_d¿m_L2_queue
;

330 
d–‘e
 
m_L2_iút_queue
;

331 
d–‘e
 
m_L2ÿche
;

332 
d–‘e
 
m_L2š‹rçû
;

333 
	}
}

335 
	gmemÜy_sub_·¹™iÚ
::
	$ÿche_cyşe
Ğ
cyşe
 )

338 ifĞ!
m_cÚfig
->
m_L2_cÚfig
.
	`di§bËd
()) {

339 iàĞ
m_L2ÿche
->
	`acûss_»ady
(è&& !
m_L2_iút_queue
->
	`fuÎ
() ) {

340 
mem_ãtch
 *
mf
 = 
m_L2ÿche
->
	`Ãxt_acûss
();

341 if(
mf
->
	`g‘_acûss_ty³
(è!ğ
L2_WR_ALLOC_R
){

342 
mf
->
	`£t_»¶y
();

343 
mf
->
	`£t_¡©us
(
IN_PARTITION_L2_TO_ICNT_QUEUE
,
gpu_sim_cyşe
+
gpu_tÙ_sim_cyşe
);

344 
m_L2_iút_queue
->
	`push
(
mf
);

346 
m_»que¡_Œack”
.
	`”a£
(
mf
);

347 
d–‘e
 
mf
;

353 iàĞ!
m_d¿m_L2_queue
->
	`em±y
() ) {

354 
mem_ãtch
 *
mf
 = 
m_d¿m_L2_queue
->
	`tİ
();

355 iàĞ!
m_cÚfig
->
m_L2_cÚfig
.
	`di§bËd
(è&& 
m_L2ÿche
->
	`wa™šg_fÜ_fl
(
mf
) ) {

356 ià(
m_L2ÿche
->
	`fl_pÜt_ä“
()) {

357 
mf
->
	`£t_¡©us
(
IN_PARTITION_L2_FILL_QUEUE
,
gpu_sim_cyşe
+
gpu_tÙ_sim_cyşe
);

358 
m_L2ÿche
->
	`fl
(
mf
,
gpu_sim_cyşe
+
gpu_tÙ_sim_cyşe
);

359 
m_d¿m_L2_queue
->
	`pİ
();

361 } iàĞ!
m_L2_iút_queue
->
	`fuÎ
() ) {

362 
mf
->
	`£t_¡©us
(
IN_PARTITION_L2_TO_ICNT_QUEUE
,
gpu_sim_cyşe
+
gpu_tÙ_sim_cyşe
);

363 
m_L2_iút_queue
->
	`push
(
mf
);

364 
m_d¿m_L2_queue
->
	`pİ
();

369 ifĞ!
m_cÚfig
->
m_L2_cÚfig
.
	`di§bËd
() )

370 
m_L2ÿche
->
	`cyşe
();

373 iàĞ!
m_L2_d¿m_queue
->
	`fuÎ
(è&& !
m_iút_L2_queue
->
	`em±y
() ) {

374 
mem_ãtch
 *
mf
 = 
m_iút_L2_queue
->
	`tİ
();

375 iàĞ!
m_cÚfig
->
m_L2_cÚfig
.
	`di§bËd
() &&

376 Ğ(
m_cÚfig
->
m_L2_‹xu»_Úly
 && 
mf
->
	`i¡extu»
()) || (!m_config->m_L2_texure_only) )

379 
boŞ
 
ouut_fuÎ
 = 
m_L2_iút_queue
->
	`fuÎ
();

380 
boŞ
 
pÜt_ä“
 = 
m_L2ÿche
->
	`d©a_pÜt_ä“
();

381 iàĞ!
ouut_fuÎ
 && 
pÜt_ä“
 ) {

382 
¡d
::
li¡
<
ÿche_ev’t
> 
ev’ts
;

383 
ÿche_»que¡_¡©us
 
¡©us
 = 
m_L2ÿche
->
	`acûss
(
mf
->
	`g‘_addr
(),mf,
gpu_sim_cyşe
+
gpu_tÙ_sim_cyşe
,
ev’ts
);

384 
boŞ
 
wr™e_£Á
 = 
	`was_wr™e_£Á
(
ev’ts
);

385 
boŞ
 
»ad_£Á
 = 
	`was_»ad_£Á
(
ev’ts
);

387 iàĞ
¡©us
 =ğ
HIT
 ) {

388 ifĞ!
wr™e_£Á
 ) {

390 
	`as£¹
(!
»ad_£Á
);

391 ifĞ
mf
->
	`g‘_acûss_ty³
(è=ğ
L1_WRBK_ACC
 ) {

392 
m_»que¡_Œack”
.
	`”a£
(
mf
);

393 
d–‘e
 
mf
;

395 
mf
->
	`£t_»¶y
();

396 
mf
->
	`£t_¡©us
(
IN_PARTITION_L2_TO_ICNT_QUEUE
,
gpu_sim_cyşe
+
gpu_tÙ_sim_cyşe
);

397 
m_L2_iút_queue
->
	`push
(
mf
);

399 
m_iút_L2_queue
->
	`pİ
();

401 
	`as£¹
(
wr™e_£Á
);

402 
m_iút_L2_queue
->
	`pİ
();

404 } iàĞ
¡©us
 !ğ
RESERVATION_FAIL
 ) {

406 
m_iút_L2_queue
->
	`pİ
();

408 
	`as£¹
(!
wr™e_£Á
);

409 
	`as£¹
(!
»ad_£Á
);

415 
mf
->
	`£t_¡©us
(
IN_PARTITION_L2_TO_DRAM_QUEUE
,
gpu_sim_cyşe
+
gpu_tÙ_sim_cyşe
);

416 
m_L2_d¿m_queue
->
	`push
(
mf
);

417 
m_iút_L2_queue
->
	`pİ
();

422 ifĞ!
m_rİ
.
	`em±y
(è&& (
cyşe
 >ğm_rİ.
	`äÚt
().
»ady_cyşe
è&& !
m_iút_L2_queue
->
	`fuÎ
() ) {

423 
mem_ãtch
* 
mf
 = 
m_rİ
.
	`äÚt
().
»q
;

424 
m_rİ
.
	`pİ
();

425 
m_iút_L2_queue
->
	`push
(
mf
);

426 
mf
->
	`£t_¡©us
(
IN_PARTITION_ICNT_TO_L2_QUEUE
,
gpu_sim_cyşe
+
gpu_tÙ_sim_cyşe
);

428 
	}
}

430 
boŞ
 
	gmemÜy_sub_·¹™iÚ
::
	$fuÎ
() const

432  
m_iút_L2_queue
->
	`fuÎ
();

433 
	}
}

435 
boŞ
 
	gmemÜy_sub_·¹™iÚ
::
	$L2_d¿m_queue_em±y
() const

437  
m_L2_d¿m_queue
->
	`em±y
();

438 
	}
}

440 
şass
 
mem_ãtch
* 
	gmemÜy_sub_·¹™iÚ
::
	$L2_d¿m_queue_tİ
() const

442  
m_L2_d¿m_queue
->
	`tİ
();

443 
	}
}

445 
	gmemÜy_sub_·¹™iÚ
::
	$L2_d¿m_queue_pİ
()

447 
m_L2_d¿m_queue
->
	`pİ
();

448 
	}
}

450 
boŞ
 
	gmemÜy_sub_·¹™iÚ
::
	$d¿m_L2_queue_fuÎ
() const

452  
m_d¿m_L2_queue
->
	`fuÎ
();

453 
	}
}

455 
	gmemÜy_sub_·¹™iÚ
::
	$d¿m_L2_queue_push
Ğ
şass
 
mem_ãtch
* 
mf
 )

457 
m_d¿m_L2_queue
->
	`push
(
mf
);

458 
	}
}

460 
	gmemÜy_sub_·¹™iÚ
::
	$´št_ÿche_¡©
(&
acûs£s
, &
mis£s
) const

462 
FILE
 *
å
 = 
¡dout
;

463 ifĞ!
m_cÚfig
->
m_L2_cÚfig
.
	`di§bËd
() )

464 
m_L2ÿche
->
	`´št
(
å
,
acûs£s
,
mis£s
);

465 
	}
}

467 
	gmemÜy_sub_·¹™iÚ
::
	$´št
Ğ
FILE
 *
å
 ) const

469 iàĞ!
m_»que¡_Œack”
.
	`em±y
() ) {

470 
	`årštf
(
å
,"MemÜy Sub P¬™iÚ %u:…’dšg memÜy„eque¡s:\n", 
m_id
);

471  
¡d
::
£t
<
mem_ãtch
*>::
cÚ¡_™”©Ü
 
r
=
m_»que¡_Œack”
.
	`begš
();„ !ğm_»que¡_Œack”.
	`’d
(); ++r ) {

472 
mem_ãtch
 *
mf
 = *
r
;

473 iàĞ
mf
 )

474 
mf
->
	`´št
(
å
);

476 
	`årštf
(
å
," <NULL mem_fetch?>\n");

479 ifĞ!
m_cÚfig
->
m_L2_cÚfig
.
	`di§bËd
() )

480 
m_L2ÿche
->
	`di¥Ïy_¡©e
(
å
);

481 
	}
}

483 
	gmemÜy_¡©s_t
::
	$visu®iz”_´št
Ğ
gzFe
 
visu®iz”_fe
 )

489 ià(
num_mfs
)

490 
	`gz´štf
(
visu®iz”_fe
, "av”agemæ©’cy: %Îd\n", 
mf_tÙ®_Ït
/
num_mfs
);

491 
	}
}

493 
	ggpgpu_sim
::
	$´št_d¿m_¡©s
(
FILE
 *
fout
) const

495 
cmd
=0;

496 
aùiv™y
=0;

497 
nİ
=0;

498 
aù
=0;

499 
´e
=0;

500 
rd
=0;

501 
wr
=0;

502 
»q
=0;

503 
tÙ_cmd
=0;

504 
tÙ_nİ
=0;

505 
tÙ_aù
=0;

506 
tÙ_´e
=0;

507 
tÙ_rd
=0;

508 
tÙ_wr
=0;

509 
tÙ_»q
=0;

511 
i
=0;i<
m_memÜy_cÚfig
->
m_n_mem
;i++){

512 
m_memÜy_·¹™iÚ_un™
[
i
]->
	`£t_d¿m_pow”_¡©s
(
cmd
,
aùiv™y
,
nİ
,
aù
,
´e
,
rd
,
wr
,
»q
);

513 
tÙ_cmd
+=
cmd
;

514 
tÙ_nİ
+=
nİ
;

515 
tÙ_aù
+=
aù
;

516 
tÙ_´e
+=
´e
;

517 
tÙ_rd
+=
rd
;

518 
tÙ_wr
+=
wr
;

519 
tÙ_»q
+=
»q
;

521 
	`årštf
(
fout
,"gpgpu_n_d¿m_»ad ğ%d\n",
tÙ_rd
 );

522 
	`årštf
(
fout
,"gpgpu_n_d¿m_wr™e ğ%d\n",
tÙ_wr
 );

523 
	`årštf
(
fout
,"gpgpu_n_d¿m_aùiv©ğ%d\n",
tÙ_aù
 );

524 
	`årštf
(
fout
,"gpgpu_n_d¿m_commªd ğ%d\n",
tÙ_cmd
);

525 
	`årštf
(
fout
,"gpgpu_n_d¿m_noİ ğ%d\n",
tÙ_nİ
 );

526 
	`årštf
(
fout
,"gpgpu_n_d¿m_´ech¬ge ğ%d\n",
tÙ_´e
 );

527 
	`årštf
(
fout
,"gpgpu_n_d¿m_»que¡ ğ%d\n",
tÙ_»q
 );

528 
	}
}

530 
	gmemÜy_sub_·¹™iÚ
::
	$æushL2
()

532 ià(!
m_cÚfig
->
m_L2_cÚfig
.
	`di§bËd
()) {

533 
m_L2ÿche
->
	`æush
();

536 
	}
}

538 
boŞ
 
	gmemÜy_sub_·¹™iÚ
::
	$busy
() const

540  !
m_»que¡_Œack”
.
	`em±y
();

541 
	}
}

543 
	gmemÜy_sub_·¹™iÚ
::
	$push
Ğ
mem_ãtch
* 
»q
, 
cyşe
 )

545 ià(
»q
) {

546 
m_»que¡_Œack”
.
	`š£¹
(
»q
);

547 
m_¡©s
->
	`memÏt¡©_iút2mem_pİ
(
»q
);

548 ifĞ
»q
->
	`i¡extu»
() ) {

549 
m_iút_L2_queue
->
	`push
(
»q
);

550 
»q
->
	`£t_¡©us
(
IN_PARTITION_ICNT_TO_L2_QUEUE
,
gpu_sim_cyşe
+
gpu_tÙ_sim_cyşe
);

552 
rİ_d–ay_t
 
r
;

553 
r
.
»q
 =„eq;

554 
r
.
»ady_cyşe
 = 
cyşe
 + 
m_cÚfig
->
rİ_Ï‹ncy
;

555 
m_rİ
.
	`push
(
r
);

556 
»q
->
	`£t_¡©us
(
IN_PARTITION_ROP_DELAY
,
gpu_sim_cyşe
+
gpu_tÙ_sim_cyşe
);

559 
	}
}

561 
mem_ãtch
* 
	gmemÜy_sub_·¹™iÚ
::
	$pİ
()

563 
mem_ãtch
* 
mf
 = 
m_L2_iút_queue
->
	`pİ
();

564 
m_»que¡_Œack”
.
	`”a£
(
mf
);

565 iàĞ
mf
 && mf->
	`i§tomic
() )

566 
mf
->
	`do_©omic
();

567 ifĞ
mf
 && (mf->
	`g‘_acûss_ty³
(è=ğ
L2_WRBK_ACC
 || mf->g‘_acûss_ty³(è=ğ
L1_WRBK_ACC
) ) {

568 
d–‘e
 
mf
;

569 
mf
 = 
NULL
;

571  
mf
;

572 
	}
}

574 
mem_ãtch
* 
	gmemÜy_sub_·¹™iÚ
::
	$tİ
()

576 
mem_ãtch
 *
mf
 = 
m_L2_iút_queue
->
	`tİ
();

577 ifĞ
mf
 && (mf->
	`g‘_acûss_ty³
(è=ğ
L2_WRBK_ACC
 || mf->g‘_acûss_ty³(è=ğ
L1_WRBK_ACC
) ) {

578 
m_L2_iút_queue
->
	`pİ
();

579 
m_»que¡_Œack”
.
	`”a£
(
mf
);

580 
d–‘e
 
mf
;

581 
mf
 = 
NULL
;

583  
mf
;

584 
	}
}

586 
	gmemÜy_sub_·¹™iÚ
::
	$£t_dÚe
Ğ
mem_ãtch
 *
mf
 )

588 
m_»que¡_Œack”
.
	`”a£
(
mf
);

589 
	}
}

591 
	gmemÜy_sub_·¹™iÚ
::
	$accumuÏ‹_L2ÿche_¡©s
(
şass
 
ÿche_¡©s
 &
l2_¡©s
) const {

592 ià(!
m_cÚfig
->
m_L2_cÚfig
.
	`di§bËd
()) {

593 
l2_¡©s
 +ğ
m_L2ÿche
->
	`g‘_¡©s
();

595 
	}
}

597 
	gmemÜy_sub_·¹™iÚ
::
	$g‘_L2ÿche_sub_¡©s
(
ÿche_sub_¡©s
 &
css
) const{

598 ià(!
m_cÚfig
->
m_L2_cÚfig
.
	`di§bËd
()) {

599 
m_L2ÿche
->
	`g‘_sub_¡©s
(
css
);

601 
	}
}

603 
	gmemÜy_sub_·¹™iÚ
::
	$visu®iz”_´št
Ğ
gzFe
 
visu®iz”_fe
 )

606 
	}
}

	@l2cache.h

28 #iâdeà
MC_PARTITION_INCLUDED


29 
	#MC_PARTITION_INCLUDED


	)

31 
	~"d¿m.h
"

32 
	~"../ab¡¿ù_h¬dw¬e_mod–.h
"

34 
	~<li¡
>

35 
	~<queue
>

37 
şass
 
	gmem_ãtch
;

39 şas 
	c·¹™iÚ_mf_®loÿtÜ
 : 
public
 
mem_ãtch_®loÿtÜ
 {

40 
public
:

41 
	$·¹™iÚ_mf_®loÿtÜ
ĞcÚ¡ 
memÜy_cÚfig
 *
cÚfig
 )

43 
m_memÜy_cÚfig
 = 
cÚfig
;

45 
vœtu®
 
mem_ãtch
 * 
	$®loc
(cÚ¡ 
şass
 
w¬p_š¡_t
 &
š¡
, cÚ¡ 
mem_acûss_t
 &
acûss
) const

47 
	`abÜt
();

48  
NULL
;

49 
	}
}

50 
vœtu®
 
mem_ãtch
 * 
	$®loc
(
Ãw_addr_ty³
 
addr
, 
mem_acûss_ty³
 
ty³
, 
size
, 
boŞ
 
wr
) const;

51 
´iv©e
:

52 cÚ¡ 
memÜy_cÚfig
 *
m_memÜy_cÚfig
;

53 
	}
};

58 şas 
	cmemÜy_·¹™iÚ_un™


60 
	mpublic
:

61 
memÜy_·¹™iÚ_un™
Ğ
·¹™iÚ_id
, cÚ¡ 
memÜy_cÚfig
 *
cÚfig
, 
şass
 
memÜy_¡©s_t
 *
¡©s
 );

62 ~
memÜy_·¹™iÚ_un™
();

64 
boŞ
 
	$busy
() const;

66 
	`ÿche_cyşe
Ğ
cyşe
 );

67 
	`d¿m_cyşe
();

69 
	`£t_dÚe
Ğ
mem_ãtch
 *
mf
 );

71 
	$visu®iz”_´št
Ğ
gzFe
 
visu®iz”_fe
 ) const;

72 
	$´št_¡©
Ğ
FILE
 *
å
 ) { 
m_d¿m
->
	`´št_¡©
(fp); }

73 
	$visu®ize
(ècÚ¡ { 
m_d¿m
->
	`visu®ize
(); 
	}
}

74 
	$´št
Ğ
FILE
 *
å
 ) const;

76 
şass
 
memÜy_sub_·¹™iÚ
 * 
	$g‘_sub_·¹™iÚ
(
sub_·¹™iÚ_id
)

78  
m_sub_·¹™iÚ
[
sub_·¹™iÚ_id
];

79 
	}
}

82 
	$£t_d¿m_pow”_¡©s
(&
n_cmd
,

83 &
n_aùiv™y
,

84 &
n_nİ
,

85 &
n_aù
,

86 &
n_´e
,

87 &
n_rd
,

88 &
n_wr
,

89 &
n_»q
) const;

91 
	$glob®_sub_·¹™iÚ_id_to_loÿl_id
(
glob®_sub_·¹™iÚ_id
) const;

93 
	$g‘_mpid
(ècÚ¡ {  
m_id
; 
	}
}

95 
	g´iv©e
:

97 
m_id
;

98 cÚ¡ 
memÜy_cÚfig
 *
	gm_cÚfig
;

99 
şass
 
memÜy_¡©s_t
 *
	gm_¡©s
;

100 
şass
 
memÜy_sub_·¹™iÚ
 **
	gm_sub_·¹™iÚ
;

101 
şass
 
d¿m_t
 *
	gm_d¿m
;

103 şas 
	c¬b™¿tiÚ_m‘ad©a


105 
	gpublic
:

106 
¬b™¿tiÚ_m‘ad©a
(cÚ¡ 
memÜy_cÚfig
 *
cÚfig
);

109 
boŞ
 
has_üed™s
(
šÃr_sub_·¹™iÚ_id
) const;

111 
bÜrow_üed™
(
šÃr_sub_·¹™iÚ_id
);

113 
»tuº_üed™
(
šÃr_sub_·¹™iÚ_id
);

116 
Ï¡_bÜrow”
(ècÚ¡ {  
	gm_Ï¡_bÜrow”
; }

118 
´št
Ğ
FILE
 *
å
 ) const;

119 
	g´iv©e
:

121 
m_Ï¡_bÜrow”
;

123 
	gm_sh¬ed_üed™_lim™
;

124 
	gm_´iv©e_üed™_lim™
;

127 
	g¡d
::
veùÜ
<> 
m_´iv©e_üed™
;

128 
	gm_sh¬ed_üed™
;

130 
¬b™¿tiÚ_m‘ad©a
 
	gm_¬b™¿tiÚ_m‘ad©a
;

133 
boŞ
 
ÿn_issue_to_d¿m
(
šÃr_sub_·¹™iÚ_id
);

136 
	sd¿m_d–ay_t


138 
	g»ady_cyşe
;

139 
şass
 
mem_ãtch
* 
	g»q
;

141 
	g¡d
::
li¡
<
d¿m_d–ay_t
> 
m_d¿m_Ï‹ncy_queue
;

144 şas 
	cmemÜy_sub_·¹™iÚ


146 
	mpublic
:

147 
memÜy_sub_·¹™iÚ
Ğ
sub_·¹™iÚ_id
, cÚ¡ 
memÜy_cÚfig
 *
cÚfig
, 
şass
 
memÜy_¡©s_t
 *
¡©s
 );

148 ~
memÜy_sub_·¹™iÚ
();

150 
	$g‘_id
(ècÚ¡ {  
m_id
; }

152 
boŞ
 
	$busy
() const;

154 
	`ÿche_cyşe
Ğ
cyşe
 );

156 
boŞ
 
	$fuÎ
() const;

157 
	`push
Ğ
şass
 
mem_ãtch
* 
mf
, 
şock_cyşe
 );

158 
şass
 
mem_ãtch
* 
	`pİ
();

159 
şass
 
mem_ãtch
* 
	`tİ
();

160 
	`£t_dÚe
Ğ
mem_ãtch
 *
mf
 );

162 
	`æushL2
();

165 
boŞ
 
	$L2_d¿m_queue_em±y
() const;

166 
şass
 
mem_ãtch
* 
	$L2_d¿m_queue_tİ
() const;

167 
	`L2_d¿m_queue_pİ
();

170 
boŞ
 
	$d¿m_L2_queue_fuÎ
() const;

171 
	`d¿m_L2_queue_push
Ğ
şass
 
mem_ãtch
* 
mf
 );

173 
	`visu®iz”_´št
Ğ
gzFe
 
visu®iz”_fe
 );

174 
	$´št_ÿche_¡©
(&
acûs£s
, &
mis£s
) const;

175 
	$´št
Ğ
FILE
 *
å
 ) const;

177 
	$accumuÏ‹_L2ÿche_¡©s
(
şass
 
ÿche_¡©s
 &
l2_¡©s
) const;

178 
	$g‘_L2ÿche_sub_¡©s
(
ÿche_sub_¡©s
 &
css
) const;

180 
´iv©e
:

182 
m_id
;

183 cÚ¡ 
memÜy_cÚfig
 *
m_cÚfig
;

184 
şass
 
l2_ÿche
 *
m_L2ÿche
;

185 
şass
 
L2š‹rçû
 *
m_L2š‹rçû
;

186 
·¹™iÚ_mf_®loÿtÜ
 *
m_mf_®loÿtÜ
;

189 
	srİ_d–ay_t


191 
»ady_cyşe
;

192 
şass
 
mem_ãtch
* 
»q
;

193 
	}
};

194 
	g¡d
::
queue
<
rİ_d–ay_t
> 
m_rİ
;

197 
	gfifo_p–še
<
	gmem_ãtch
> *
	gm_iút_L2_queue
;

198 
	gfifo_p–še
<
	gmem_ãtch
> *
	gm_L2_d¿m_queue
;

199 
	gfifo_p–še
<
	gmem_ãtch
> *
	gm_d¿m_L2_queue
;

200 
	gfifo_p–še
<
	gmem_ãtch
> *
	gm_L2_iút_queue
;

202 
şass
 
mem_ãtch
 *
	gL2d¿mout
;

203 
	gwb_addr
;

205 
şass
 
memÜy_¡©s_t
 *
	gm_¡©s
;

207 
	g¡d
::
£t
<
mem_ãtch
*> 
m_»que¡_Œack”
;

209 
ä›nd
 
şass
 
	gL2š‹rçû
;

212 şas 
	cL2š‹rçû
 : 
public
 
mem_ãtch_š‹rçû
 {

213 
public
:

214 
	$L2š‹rçû
Ğ
memÜy_sub_·¹™iÚ
 *
un™
 ) { 
m_un™
=unit; }

215 
vœtu®
 ~
	$L2š‹rçû
(è{
	}
}

216 
vœtu®
 
boŞ
 
	$fuÎ
Ğ
size
, 
boŞ
 
wr™e
) const

219  
m_un™
->
m_L2_d¿m_queue
->
	`fuÎ
();

220 
	}
}

221 
vœtu®
 
	$push
(
mem_ãtch
 *
mf
)

223 
mf
->
	`£t_¡©us
(
IN_PARTITION_L2_TO_DRAM_QUEUE
,0 );

224 
m_un™
->
m_L2_d¿m_queue
->
	`push
(
mf
);

225 
	}
}

226 
	g´iv©e
:

227 
memÜy_sub_·¹™iÚ
 *
m_un™
;

	@l2cache_trace.h

28 #´agm¨
Úû


30 
	~"../Œaû.h
"

32 #ià
TRACING_ON


34 
	#MEMPART_PRINT_STR
 
SIM_PRINT_STR
 " %d - "

	)

35 
	#MEMPART_DTRACE
(
x
èĞ
	`DTRACE
(xè&& (
T¿û
::
§m¶šg_memÜy_·¹™iÚ
 =ğ-1 || T¿û::§m¶šg_memÜy_·¹™iÚ =ğ()
	`g‘_mpid
()è)

	)

39 
	#MEMPART_DPRINTF
(...) do {\

40 ià(
	`MEMPART_DTRACE
(
MEMORY_PARTITION_UNIT
)) {\

41 
	`´štf
Ğ
MEMPART_PRINT_STR
,\

42 
gpu_sim_cyşe
 + 
gpu_tÙ_sim_cyşe
,\

43 
T¿û
::
Œaû_¡»ams_¡r
[T¿û::
MEMORY_PARTITION_UNIT
],\

44 
	`g‘_mpid
() );\

45 
	`´štf
(
__VA_ARGS__
);\

47 } 0)

	)

51 
	#MEMPART_DTRACE
(
x
è(
çl£
)

	)

52 
	#MEMPART_DPRINTF
(
x
, ...èdØ{} 0)

	)

	@mem_fetch.cc

28 
	~"mem_ãtch.h
"

29 
	~"mem_Ï‹ncy_¡©.h
"

30 
	~"shad”.h
"

31 
	~"visu®iz”.h
"

32 
	~"gpu-sim.h
"

34 
	gmem_ãtch
::
sm_Ãxt_mf_»que¡_uid
=1;

36 
	gmem_ãtch
::
	$mem_ãtch
ĞcÚ¡ 
mem_acûss_t
 &
acûss
,

37 cÚ¡ 
w¬p_š¡_t
 *
š¡
,

38 
ù¾_size
,

39 
wid
,

40 
sid
,

41 
c
,

42 cÚ¡ 
şass
 
memÜy_cÚfig
 *
cÚfig
 )

44 
m_»que¡_uid
 = 
sm_Ãxt_mf_»que¡_uid
++;

45 
m_acûss
 = 
acûss
;

46 ifĞ
š¡
 ) {

47 
m_š¡
 = *
š¡
;

48 
	`as£¹
Ğ
wid
 =ğ
m_š¡
.
	`w¬p_id
() );

50 
m_d©a_size
 = 
acûss
.
	`g‘_size
();

51 
m_ù¾_size
 = 
ù¾_size
;

52 
m_sid
 = 
sid
;

53 
m_c
 = 
c
;

54 
m_wid
 = 
wid
;

55 
cÚfig
->
m_add»ss_m­pšg
.
	`addrdec_x
(
acûss
.
	`g‘_addr
(),&
m_¿w_addr
);

56 
m_·¹™iÚ_addr
 = 
cÚfig
->
m_add»ss_m­pšg
.
	`·¹™iÚ_add»ss
(
acûss
.
	`g‘_addr
());

57 
m_ty³
 = 
m_acûss
.
	`is_wr™e
()?
WRITE_REQUEST
:
READ_REQUEST
;

58 
m_time¡amp
 = 
gpu_sim_cyşe
 + 
gpu_tÙ_sim_cyşe
;

59 
m_time¡amp2
 = 0;

60 
m_¡©us
 = 
MEM_FETCH_INITIALIZED
;

61 
m_¡©us_chªge
 = 
gpu_sim_cyşe
 + 
gpu_tÙ_sim_cyşe
;

62 
m_mem_cÚfig
 = 
cÚfig
;

63 
iút_æ™_size
 = 
cÚfig
->icnt_flit_size;

64 
	}
}

66 
	gmem_ãtch
::~
	$mem_ãtch
()

68 
m_¡©us
 = 
MEM_FETCH_DELETED
;

69 
	}
}

71 
	#MF_TUP_BEGIN
(
X
ècÚ¡ * 
Stus_¡r
[] = {

	)

72 
	#MF_TUP
(
X
è#X

	)

73 
	#MF_TUP_END
(
X
è};

	)

74 
	~"mem_ãtch_¡©us.tup
"

75 #undeà
MF_TUP_BEGIN


76 #undeà
MF_TUP


77 #undeà
MF_TUP_END


79 
	gmem_ãtch
::
	$´št
Ğ
FILE
 *
å
, 
boŞ
 
´št_š¡
 ) const

81 ifĞ
this
 =ğ
NULL
 ) {

82 
	`årštf
(
å
," <NULL mem_fetch…ointer>\n");

85 
	`årštf
(
å
," mf: uid=%6u, sid%02u:w%02u,…¬t=%u, ", 
m_»que¡_uid
, 
m_sid
, 
m_wid
, 
m_¿w_addr
.
ch
 );

86 
m_acûss
.
	`´št
(
å
);

87 ifĞ()
m_¡©us
 < 
NUM_MEM_REQ_STAT
 )

88 
	`årštf
(
å
," stu ğ% (%Îu), ", 
Stus_¡r
[
m_¡©us
], 
m_¡©us_chªge
 );

90 
	`årštf
(
å
," stu ğ%u??? (%Îu), ", 
m_¡©us
, 
m_¡©us_chªge
 );

91 ifĞ!
m_š¡
.
	`em±y
(è&& 
´št_š¡
 ) m_š¡.
	`´št
(
å
);

92 
	`årštf
(
å
,"\n");

93 
	}
}

95 
	gmem_ãtch
::
	$£t_¡©us
Ğ
mem_ãtch_¡©us
 
¡©us
, 
cyşe
 )

97 
m_¡©us
 = 
¡©us
;

98 
m_¡©us_chªge
 = 
cyşe
;

99 
	}
}

101 
boŞ
 
	gmem_ãtch
::
	$i§tomic
() const

103 ifĞ
m_š¡
.
	`em±y
(èè 
çl£
;

104  
m_š¡
.
	`i§tomic
();

105 
	}
}

107 
	gmem_ãtch
::
	$do_©omic
()

109 
m_š¡
.
	`do_©omic
Ğ
m_acûss
.
	`g‘_w¬p_mask
() );

110 
	}
}

112 
boŞ
 
	gmem_ãtch
::
	$i¡extu»
() const

114 ifĞ
m_š¡
.
	`em±y
(èè 
çl£
;

115  
m_š¡
.
¥aû
.
	`g‘_ty³
(è=ğ
‹x_¥aû
;

116 
	}
}

118 
boŞ
 
	gmem_ãtch
::
	$iscÚ¡
() const

120 ifĞ
m_š¡
.
	`em±y
(èè 
çl£
;

121  (
m_š¡
.
¥aû
.
	`g‘_ty³
(è=ğ
cÚ¡_¥aû
è|| (m_š¡.¥aû.g‘_ty³(è=ğ
·¿m_¥aû_k”Ãl
);

122 
	}
}

125 
	gmem_ãtch
::
	$g‘_num_æ™s
(
boŞ
 
simt_to_mem
){

126 
sz
=0;

128 ifĞ
	`i§tomic
(è|| (
simt_to_mem
 && 
	`g‘_is_wr™e
()) || !(simt_to_mem || get_is_write()) )

129 
sz
 = 
	`size
();

131 
sz
 = 
	`g‘_ù¾_size
();

133  (
sz
/
iút_æ™_size
) + ( (sz % icnt_flit_size)? 1:0);

134 
	}
}

	@mem_fetch.h

28 #iâdeà
MEM_FETCH_H


29 
	#MEM_FETCH_H


	)

31 
	~"addrdec.h
"

32 
	~"../ab¡¿ù_h¬dw¬e_mod–.h
"

33 
	~<b™£t
>

35 
	emf_ty³
 {

36 
	mREAD_REQUEST
 = 0,

37 
	mWRITE_REQUEST
,

38 
	mREAD_REPLY
,

39 
	mWRITE_ACK


42 
	#MF_TUP_BEGIN
(
X
è
	eX
 {

	)

43 
	#MF_TUP
(
X
è
	)
X

44 
	#MF_TUP_END
(
X
è};

	)

45 
	~"mem_ãtch_¡©us.tup
"

46 #undeà
MF_TUP_BEGIN


47 #undeà
MF_TUP


48 #undeà
MF_TUP_END


50 şas 
	cmem_ãtch
 {

51 
	mpublic
:

52 
mem_ãtch
ĞcÚ¡ 
mem_acûss_t
 &
acûss
,

53 cÚ¡ 
w¬p_š¡_t
 *
š¡
,

54 
ù¾_size
,

55 
wid
,

56 
sid
,

57 
c
,

58 cÚ¡ 
şass
 
memÜy_cÚfig
 *
cÚfig
 );

59 ~
mem_ãtch
();

61 
£t_¡©us
Ğ
mem_ãtch_¡©us
 
¡©us
, 
cyşe
 );

62 
	$£t_»¶y
()

64 
	`as£¹
Ğ
m_acûss
.
	`g‘_ty³
(è!ğ
L1_WRBK_ACC
 && m_acûss.g‘_ty³(è!ğ
L2_WRBK_ACC
 );

65 ifĞ
m_ty³
==
READ_REQUEST
 ) {

66 
	`as£¹
Ğ!
	`g‘_is_wr™e
() );

67 
m_ty³
 = 
READ_REPLY
;

68 } ifĞ
m_ty³
 =ğ
WRITE_REQUEST
 ) {

69 
	`as£¹
Ğ
	`g‘_is_wr™e
() );

70 
m_ty³
 = 
WRITE_ACK
;

73 
	`do_©omic
();

75 
	$´št
Ğ
FILE
 *
å
, 
boŞ
 
´št_š¡
 = 
Œue
 ) const;

77 cÚ¡ 
addrdec_t
 &
	$g‘_x_addr
(ècÚ¡ {  
m_¿w_addr
; 
	}
}

78 
	$g‘_d©a_size
(ècÚ¡ {  
m_d©a_size
; 
	}
}

79 
	$£t_d©a_size
Ğ
size
 ) { 
m_d©a_size
=size; 
	}
}

80 
	$g‘_ù¾_size
(ècÚ¡ {  
m_ù¾_size
; 
	}
}

81 
	$size
(ècÚ¡ {  
m_d©a_size
+
m_ù¾_size
; 
	}
}

82 
boŞ
 
	$is_wr™e
(è{ 
m_acûss
.
	`is_wr™e
();
	}
}

83 
	$£t_addr
(
Ãw_addr_ty³
 
addr
è{ 
m_acûss
.
	`£t_addr
×ddr); 
	}
}

84 
Ãw_addr_ty³
 
	$g‘_addr
(ècÚ¡ {  
m_acûss
.
	`g‘_addr
(); 
	}
}

85 
Ãw_addr_ty³
 
	$g‘_·¹™iÚ_addr
(ècÚ¡ {  
m_·¹™iÚ_addr
; 
	}
}

86 
	$g‘_sub_·¹™iÚ_id
(ècÚ¡ {  
m_¿w_addr
.
sub_·¹™iÚ
; 
	}
}

87 
boŞ
 
	$g‘_is_wr™e
(ècÚ¡ {  
m_acûss
.
	`is_wr™e
(); 
	}
}

88 
	$g‘_»que¡_uid
(ècÚ¡ {  
m_»que¡_uid
; 
	}
}

89 
	$g‘_sid
(ècÚ¡ {  
m_sid
; 
	}
}

90 
	$g‘_c
(ècÚ¡ {  
m_c
; 
	}
}

91 
	$g‘_wid
(ècÚ¡ {  
m_wid
; 
	}
}

92 
boŞ
 
	$i¡extu»
() const;

93 
boŞ
 
	$iscÚ¡
() const;

94 
mf_ty³
 
	$g‘_ty³
(ècÚ¡ {  
m_ty³
; 
	}
}

95 
boŞ
 
	$i§tomic
() const;

97 
	$£t_»tuº_time¡amp
Ğ
t
 ) { 
m_time¡amp2
ñ; 
	}
}

98 
	$£t_iút_»ûive_time
Ğ
t
 ) { 
m_iút_»ûive_time
ñ; 
	}
}

99 
	$g‘_time¡amp
(ècÚ¡ {  
m_time¡amp
; 
	}
}

100 
	$g‘_»tuº_time¡amp
(ècÚ¡ {  
m_time¡amp2
; 
	}
}

101 
	$g‘_iút_»ûive_time
(ècÚ¡ {  
m_iút_»ûive_time
; 
	}
}

103 
mem_acûss_ty³
 
	$g‘_acûss_ty³
(ècÚ¡ {  
m_acûss
.
	`g‘_ty³
(); 
	}
}

104 cÚ¡ 
	gaùive_mask_t
& 
	$g‘_acûss_w¬p_mask
(ècÚ¡ {  
m_acûss
.
	`g‘_w¬p_mask
(); 
	}
}

105 
mem_acûss_by‹_mask_t
 
	$g‘_acûss_by‹_mask
(ècÚ¡ {  
m_acûss
.
	`g‘_by‹_mask
(); 
	}
}

107 
add»ss_ty³
 
	$g‘_pc
(ècÚ¡ {  
m_š¡
.
	`em±y
()?-1:m_š¡.
pc
; 
	}
}

108 cÚ¡ 
	gw¬p_š¡_t
 &
	$g‘_š¡
(è{  
m_š¡
; 
	}
}

109 
mem_ãtch_¡©us
 
	$g‘_¡©us
(ècÚ¡ {  
m_¡©us
; 
	}
}

111 cÚ¡ 
memÜy_cÚfig
 *
	$g‘_mem_cÚfig
(){ 
m_mem_cÚfig
;
	}
}

113 
g‘_num_æ™s
(
boŞ
 
simt_to_mem
);

114 
	g´iv©e
:

116 
m_»que¡_uid
;

117 
	gm_sid
;

118 
	gm_c
;

119 
	gm_wid
;

122 
mem_ãtch_¡©us
 
	gm_¡©us
;

123 
	gm_¡©us_chªge
;

126 
mem_acûss_t
 
	gm_acûss
;

127 
	gm_d©a_size
;

128 
	gm_ù¾_size
;

129 
Ãw_addr_ty³
 
	gm_·¹™iÚ_addr
;

130 
addrdec_t
 
	gm_¿w_addr
;

131 
mf_ty³
 
	gm_ty³
;

134 
	gm_time¡amp
;

135 
	gm_time¡amp2
;

136 
	gm_iút_»ûive_time
;

139 
w¬p_š¡_t
 
	gm_š¡
;

141 
	gsm_Ãxt_mf_»que¡_uid
;

143 cÚ¡ 
şass
 
memÜy_cÚfig
 *
	gm_mem_cÚfig
;

144 
	giút_æ™_size
;

	@mem_latency_stat.cc

29 
	~"../ab¡¿ù_h¬dw¬e_mod–.h
"

30 
	~"mem_Ï‹ncy_¡©.h
"

31 
	~"gpu-sim.h
"

32 
	~"gpu-misc.h
"

33 
	~"gpu-ÿche.h
"

34 
	~"shad”.h
"

35 
	~"mem_ãtch.h
"

36 
	~"¡©-toŞ.h
"

37 
	~"../cuda-sim/±x-¡©s.h
"

38 
	~"visu®iz”.h
"

39 
	~"d¿m.h
"

41 
	~<¡ršg.h
>

42 
	~<¡dlib.h
>

43 
	~<¡dio.h
>

45 
	gmemÜy_¡©s_t
::
	$memÜy_¡©s_t
Ğ
n_shad”
, cÚ¡ 
shad”_cÜe_cÚfig
 *
shad”_cÚfig
, cÚ¡ 
memÜy_cÚfig
 *
mem_cÚfig
 )

47 
	`as£¹
Ğ
mem_cÚfig
->
m_v®id
 );

48 
	`as£¹
Ğ
shad”_cÚfig
->
m_v®id
 );

50 
i
,
j
;

53 
cÚcu¼’t_row_acûss
 = (**è
	`ÿÎoc
(
mem_cÚfig
->
m_n_mem
, (*));

54 
num_aùiv©es
 = (**è
	`ÿÎoc
(
mem_cÚfig
->
m_n_mem
, (*));

55 
row_acûss
 = (**è
	`ÿÎoc
(
mem_cÚfig
->
m_n_mem
, (*));

56 
max_cÚc_acûss2§m”ow
 = (**è
	`ÿÎoc
(
mem_cÚfig
->
m_n_mem
, (*));

57 
max_£rviûtime2§m”ow
 = (**è
	`ÿÎoc
(
mem_cÚfig
->
m_n_mem
, (*));

59 
i
=0;i<
mem_cÚfig
->
m_n_mem
 ;i++ ) {

60 
cÚcu¼’t_row_acûss
[
i
] = (*è
	`ÿÎoc
(
mem_cÚfig
->
nbk
, ());

61 
row_acûss
[
i
] = (*è
	`ÿÎoc
(
mem_cÚfig
->
nbk
, ());

62 
num_aùiv©es
[
i
] = (*è
	`ÿÎoc
(
mem_cÚfig
->
nbk
, ());

63 
max_cÚc_acûss2§m”ow
[
i
] = (*è
	`ÿÎoc
(
mem_cÚfig
->
nbk
, ());

64 
max_£rviûtime2§m”ow
[
i
] = (*è
	`ÿÎoc
(
mem_cÚfig
->
nbk
, ());

68 
m_n_shad”
=
n_shad”
;

69 
m_memÜy_cÚfig
=
mem_cÚfig
;

70 
tÙ®_n_acûss
=0;

71 
tÙ®_n_»ads
=0;

72 
tÙ®_n_wr™es
=0;

73 
max_mrq_Ï‹ncy
 = 0;

74 
max_dq_Ï‹ncy
 = 0;

75 
max_mf_Ï‹ncy
 = 0;

76 
max_iút2mem_Ï‹ncy
 = 0;

77 
max_iút2sh_Ï‹ncy
 = 0;

78 
	`mem£t
(
mrq_Ït_bË
, 0, ()*32);

79 
	`mem£t
(
dq_Ït_bË
, 0, ()*32);

80 
	`mem£t
(
mf_Ït_bË
, 0, ()*32);

81 
	`mem£t
(
iút2mem_Ït_bË
, 0, ()*24);

82 
	`mem£t
(
iút2sh_Ït_bË
, 0, ()*24);

83 
	`mem£t
(
mf_Ït_pw_bË
, 0, ()*32);

84 
mf_num_Ït_pw
 = 0;

85 
max_w¬ps
 = 
n_shad”
 * (
shad”_cÚfig
->
n_th»ad_³r_shad”
 / shad”_cÚfig->
w¬p_size
+1);

86 
mf_tÙ_Ït_pw
 = 0;

87 
mf_tÙ®_Ït
 = 0;

88 
num_mfs
 = 0;

89 
	`´štf
("*** Initializing Memory Statistics ***\n");

90 
tÙ®bªk»ads
 = (**è
	`ÿÎoc
(
mem_cÚfig
->
m_n_mem
, (*));

91 
tÙ®bªkwr™es
 = (**è
	`ÿÎoc
(
mem_cÚfig
->
m_n_mem
, (*));

92 
tÙ®bªkacûs£s
 = (**è
	`ÿÎoc
(
mem_cÚfig
->
m_n_mem
, (*));

93 
mf_tÙ®_Ït_bË
 = (**è
	`ÿÎoc
(
mem_cÚfig
->
m_n_mem
, (*));

94 
mf_max_Ït_bË
 = (**è
	`ÿÎoc
(
mem_cÚfig
->
m_n_mem
, (*));

95 
bªk»ads
 = (***è
	`ÿÎoc
(
n_shad”
, (**));

96 
bªkwr™es
 = (***è
	`ÿÎoc
(
n_shad”
, (**));

97 
num_MCBs_acûs£d
 = (*è
	`ÿÎoc
(
mem_cÚfig
->
m_n_mem
*mem_cÚfig->
nbk
, ());

98 ià(
mem_cÚfig
->
gpgpu_äfcfs_d¿m_sched_queue_size
) {

99 
pos™iÚ_of_mrq_cho£n
 = (*è
	`ÿÎoc
(
mem_cÚfig
->
gpgpu_äfcfs_d¿m_sched_queue_size
, ());

101 
pos™iÚ_of_mrq_cho£n
 = (*è
	`ÿÎoc
(1024, ());

102 
i
=0;i<
n_shad”
 ;i++ ) {

103 
bªk»ads
[
i
] = (**è
	`ÿÎoc
(
mem_cÚfig
->
m_n_mem
, (*));

104 
bªkwr™es
[
i
] = (**è
	`ÿÎoc
(
mem_cÚfig
->
m_n_mem
, (*));

105 
j
=0;j<
mem_cÚfig
->
m_n_mem
 ;j++ ) {

106 
bªk»ads
[
i
][
j
] = (*è
	`ÿÎoc
(
mem_cÚfig
->
nbk
, ());

107 
bªkwr™es
[
i
][
j
] = (*è
	`ÿÎoc
(
mem_cÚfig
->
nbk
, ());

111 
i
=0;i<
mem_cÚfig
->
m_n_mem
 ;i++ ) {

112 
tÙ®bªk»ads
[
i
] = (*è
	`ÿÎoc
(
mem_cÚfig
->
nbk
, ());

113 
tÙ®bªkwr™es
[
i
] = (*è
	`ÿÎoc
(
mem_cÚfig
->
nbk
, ());

114 
tÙ®bªkacûs£s
[
i
] = (*è
	`ÿÎoc
(
mem_cÚfig
->
nbk
, ());

115 
mf_tÙ®_Ït_bË
[
i
] = (*è
	`ÿÎoc
(
mem_cÚfig
->
nbk
, ());

116 
mf_max_Ït_bË
[
i
] = (*è
	`ÿÎoc
(
mem_cÚfig
->
nbk
, ());

119 
mem_acûss_ty³_¡©s
 = (***è
	`m®loc
(
NUM_MEM_ACCESS_TYPE
 * (**));

120 
i
 = 0; i < 
NUM_MEM_ACCESS_TYPE
; i++) {

121 
j
;

122 
mem_acûss_ty³_¡©s
[
i
] = (**è
	`ÿÎoc
(
mem_cÚfig
->
m_n_mem
, (*));

123 
j
=0; (èj< 
mem_cÚfig
->
m_n_mem
; j++) {

124 
mem_acûss_ty³_¡©s
[
i
][
j
] = (*è
	`ÿÎoc
((
mem_cÚfig
->
nbk
+1), (*));

128 
L2_cbtoL2Ëngth
 = (*è
	`ÿÎoc
(
mem_cÚfig
->
m_n_mem
, ());

129 
L2_cbtoL2wr™–’gth
 = (*è
	`ÿÎoc
(
mem_cÚfig
->
m_n_mem
, ());

130 
L2_L2tocbËngth
 = (*è
	`ÿÎoc
(
mem_cÚfig
->
m_n_mem
, ());

131 
L2_d¿mtoL2Ëngth
 = (*è
	`ÿÎoc
(
mem_cÚfig
->
m_n_mem
, ());

132 
L2_d¿mtoL2wr™–’gth
 = (*è
	`ÿÎoc
(
mem_cÚfig
->
m_n_mem
, ());

133 
L2_L2tod¿mËngth
 = (*è
	`ÿÎoc
(
mem_cÚfig
->
m_n_mem
, ());

134 
	}
}

137 
	gmemÜy_¡©s_t
::
	$memÏt¡©_dÚe
(
mem_ãtch
 *
mf
 )

139 
mf_Ï‹ncy
;

140 
mf_Ï‹ncy
 = (
gpu_sim_cyşe
+
gpu_tÙ_sim_cyşe
è- 
mf
->
	`g‘_time¡amp
();

141 
mf_num_Ït_pw
++;

142 
mf_tÙ_Ït_pw
 +ğ
mf_Ï‹ncy
;

143 
idx
 = 
	`LOGB2
(
mf_Ï‹ncy
);

144 
	`as£¹
(
idx
<32);

145 
mf_Ït_bË
[
idx
]++;

146 
	`shad”_mem_Ït_log
(
mf
->
	`g‘_sid
(), 
mf_Ï‹ncy
);

147 
mf_tÙ®_Ït_bË
[
mf
->
	`g‘_x_addr
().
ch
][mf->g‘_x_addr().
bk
] +ğ
mf_Ï‹ncy
;

148 ià(
mf_Ï‹ncy
 > 
max_mf_Ï‹ncy
)

149 
max_mf_Ï‹ncy
 = 
mf_Ï‹ncy
;

150  
mf_Ï‹ncy
;

151 
	}
}

153 
	gmemÜy_¡©s_t
::
	$memÏt¡©_»ad_dÚe
(
mem_ãtch
 *
mf
)

155 ià(
m_memÜy_cÚfig
->
gpgpu_memÏ‹ncy_¡©
) {

156 
mf_Ï‹ncy
 = 
	`memÏt¡©_dÚe
(
mf
);

157 ià(
mf_Ï‹ncy
 > 
mf_max_Ït_bË
[
mf
->
	`g‘_x_addr
().
ch
][mf->g‘_x_addr().
bk
])

158 
mf_max_Ït_bË
[
mf
->
	`g‘_x_addr
().
ch
][mf->g‘_x_addr().
bk
] = 
mf_Ï‹ncy
;

159 
iút2sh_Ï‹ncy
;

160 
iút2sh_Ï‹ncy
 = (
gpu_tÙ_sim_cyşe
+
gpu_sim_cyşe
è- 
mf
->
	`g‘_»tuº_time¡amp
();

161 
iút2sh_Ït_bË
[
	`LOGB2
(
iút2sh_Ï‹ncy
)]++;

162 ià(
iút2sh_Ï‹ncy
 > 
max_iút2sh_Ï‹ncy
)

163 
max_iút2sh_Ï‹ncy
 = 
iút2sh_Ï‹ncy
;

165 
	}
}

167 
	gmemÜy_¡©s_t
::
	$memÏt¡©_d¿m_acûss
(
mem_ãtch
 *
mf
)

169 
d¿m_id
 = 
mf
->
	`g‘_x_addr
().
ch
;

170 
bªk
 = 
mf
->
	`g‘_x_addr
().
bk
;

171 ià(
m_memÜy_cÚfig
->
gpgpu_memÏ‹ncy_¡©
) {

172 ià(
mf
->
	`g‘_is_wr™e
()) {

173 iàĞ
mf
->
	`g‘_sid
(è< 
m_n_shad”
 ) {

174 
bªkwr™es
[
mf
->
	`g‘_sid
()][
d¿m_id
][
bªk
]++;

175 
	`shad”_mem_acc_log
Ğ
mf
->
	`g‘_sid
(), 
d¿m_id
, 
bªk
, 'w');

177 
tÙ®bªkwr™es
[
d¿m_id
][
bªk
]++;

179 
bªk»ads
[
mf
->
	`g‘_sid
()][
d¿m_id
][
bªk
]++;

180 
	`shad”_mem_acc_log
Ğ
mf
->
	`g‘_sid
(), 
d¿m_id
, 
bªk
, 'r');

181 
tÙ®bªk»ads
[
d¿m_id
][
bªk
]++;

183 
mem_acûss_ty³_¡©s
[
mf
->
	`g‘_acûss_ty³
()][
d¿m_id
][
bªk
]++;

185 ià(
mf
->
	`g‘_pc
() != ()-1)

186 
	`±x_fe_lše_¡©s_add_d¿m_Œaffic
(
mf
->
	`g‘_pc
(), mf->
	`g‘_d©a_size
());

187 
	}
}

189 
	gmemÜy_¡©s_t
::
	$memÏt¡©_iút2mem_pİ
(
mem_ãtch
 *
mf
)

191 ià(
m_memÜy_cÚfig
->
gpgpu_memÏ‹ncy_¡©
) {

192 
iút2mem_Ï‹ncy
;

193 
iút2mem_Ï‹ncy
 = (
gpu_tÙ_sim_cyşe
+
gpu_sim_cyşe
è- 
mf
->
	`g‘_time¡amp
();

194 
iút2mem_Ït_bË
[
	`LOGB2
(
iút2mem_Ï‹ncy
)]++;

195 ià(
iút2mem_Ï‹ncy
 > 
max_iút2mem_Ï‹ncy
)

196 
max_iút2mem_Ï‹ncy
 = 
iút2mem_Ï‹ncy
;

198 
	}
}

200 
	gmemÜy_¡©s_t
::
	$memÏt¡©_Ït_pw
()

202 ià(
mf_num_Ït_pw
 && 
m_memÜy_cÚfig
->
gpgpu_memÏ‹ncy_¡©
) {

203 
	`as£¹
(
mf_tÙ_Ït_pw
);

204 
mf_tÙ®_Ït
 +ğ
mf_tÙ_Ït_pw
;

205 
num_mfs
 +ğ
mf_num_Ït_pw
;

206 
mf_Ït_pw_bË
[
	`LOGB2
(
mf_tÙ_Ït_pw
/
mf_num_Ït_pw
)]++;

207 
mf_tÙ_Ït_pw
 = 0;

208 
mf_num_Ït_pw
 = 0;

210 
	}
}

213 
	gmemÜy_¡©s_t
::
	$memÏt¡©_´št
Ğ
n_mem
, 
gpu_mem_n_bk
 )

215 
i
,
j
,
k
,
l
,
m
;

216 
max_bªk_acûs£s
, 
mš_bªk_acûs£s
, 
max_ch_acûs£s
, 
mš_ch_acûs£s
;

218 ià(
m_memÜy_cÚfig
->
gpgpu_memÏ‹ncy_¡©
) {

219 
	`´štf
("maxmrqÏ‹ncy = %d \n", 
max_mrq_Ï‹ncy
);

220 
	`´štf
("maxdqÏ‹ncy = %d \n", 
max_dq_Ï‹ncy
);

221 
	`´štf
("maxmæ©’cy = %d \n", 
max_mf_Ï‹ncy
);

222 ià(
num_mfs
) {

223 
	`´štf
("av”agemæ©’cy = %Îd \n", 
mf_tÙ®_Ït
/
num_mfs
);

225 
	`´štf
("max_iút2mem_Ï‹ncy = %d \n", 
max_iút2mem_Ï‹ncy
);

226 
	`´štf
("max_iút2sh_Ï‹ncy = %d \n", 
max_iút2sh_Ï‹ncy
);

227 
	`´štf
("mrq_lat_table:");

228 
i
=0; i< 32; i++) {

229 
	`´štf
("%d \t", 
mrq_Ït_bË
[
i
]);

231 
	`´štf
("\n");

232 
	`´štf
("dq_lat_table:");

233 
i
=0; i< 32; i++) {

234 
	`´štf
("%d \t", 
dq_Ït_bË
[
i
]);

236 
	`´štf
("\n");

237 
	`´štf
("mf_lat_table:");

238 
i
=0; i< 32; i++) {

239 
	`´štf
("%d \t", 
mf_Ït_bË
[
i
]);

241 
	`´štf
("\n");

242 
	`´štf
("icnt2mem_lat_table:");

243 
i
=0; i< 24; i++) {

244 
	`´štf
("%d \t", 
iút2mem_Ït_bË
[
i
]);

246 
	`´štf
("\n");

247 
	`´štf
("icnt2sh_lat_table:");

248 
i
=0; i< 24; i++) {

249 
	`´štf
("%d \t", 
iút2sh_Ït_bË
[
i
]);

251 
	`´štf
("\n");

252 
	`´štf
("mf_lat_pw_table:");

253 
i
=0; i< 32; i++) {

254 
	`´štf
("%d \t", 
mf_Ït_pw_bË
[
i
]);

256 
	`´štf
("\n");

259 
	`´štf
("maximum concurrent‡ccesseso same„ow:\n");

260 
i
=0;i<
n_mem
 ;i++ ) {

261 
	`´štf
("d¿m[%d]: ", 
i
);

262 
j
=0;j<
gpu_mem_n_bk
;j++ ) {

263 
	`´štf
("%9d ",
max_cÚc_acûss2§m”ow
[
i
][
j
]);

265 
	`´štf
("\n");

269 
	`´štf
("maximum serviceimeo same„ow:\n");

270 
i
=0;i<
n_mem
 ;i++ ) {

271 
	`´štf
("d¿m[%d]: ", 
i
);

272 
j
=0;j<
gpu_mem_n_bk
;j++ ) {

273 
	`´štf
("%9d ",
max_£rviûtime2§m”ow
[
i
][
j
]);

275 
	`´štf
("\n");

279 
tÙ®_row_acûs£s
 = 0;

280 
tÙ®_num_aùiv©es
 = 0;

281 
	`´štf
("average„ow‡ccesses…er‡ctivate:\n");

282 
i
=0;i<
n_mem
 ;i++ ) {

283 
	`´štf
("d¿m[%d]: ", 
i
);

284 
j
=0;j<
gpu_mem_n_bk
;j++ ) {

285 
tÙ®_row_acûs£s
 +ğ
row_acûss
[
i
][
j
];

286 
tÙ®_num_aùiv©es
 +ğ
num_aùiv©es
[
i
][
j
];

287 
	`´štf
("%9à",(è
row_acûss
[
i
][
j
]/
num_aùiv©es
[i][j]);

289 
	`´štf
("\n");

291 
	`´štf
("av”agrow†oÿl™y = %d/%d = %f\n", 
tÙ®_row_acûs£s
, 
tÙ®_num_aùiv©es
, ()total_row_accesses/total_num_activates);

293 
k
 = 0;

294 
l
 = 0;

295 
m
 = 0;

296 
max_bªk_acûs£s
 = 0;

297 
max_ch_acûs£s
 = 0;

298 
mš_bªk_acûs£s
 = 0xFFFFFFFF;

299 
mš_ch_acûs£s
 = 0xFFFFFFFF;

300 
	`´štf
("number ofotal memory‡ccesses made:\n");

301 
i
=0;i<
n_mem
 ;i++ ) {

302 
	`´štf
("d¿m[%d]: ", 
i
);

303 
j
=0;j<
gpu_mem_n_bk
;j++ ) {

304 
l
 = 
tÙ®bªkacûs£s
[
i
][
j
];

305 ià(
l
 < 
mš_bªk_acûs£s
)

306 
mš_bªk_acûs£s
 = 
l
;

307 ià(
l
 > 
max_bªk_acûs£s
)

308 
max_bªk_acûs£s
 = 
l
;

309 
k
 +ğ
l
;

310 
m
 +ğ
l
;

311 
	`´štf
("%9d ",
l
);

313 ià(
m
 < 
mš_ch_acûs£s
)

314 
mš_ch_acûs£s
 = 
m
;

315 ià(
m
 > 
max_ch_acûs£s
)

316 
max_ch_acûs£s
 = 
m
;

317 
m
 = 0;

318 
	`´štf
("\n");

320 
	`´štf
("tÙ®‡cûs£s: %d\n", 
k
);

321 ià(
mš_bªk_acûs£s
)

322 
	`´štf
("bªk skew: %d/%d = %4.2f\n", 
max_bªk_acûs£s
, 
mš_bªk_acûs£s
, ()max_bank_accesses/min_bank_accesses);

324 
	`´štf
("min_bank_accesses = 0!\n");

325 ià(
mš_ch_acûs£s
)

326 
	`´štf
("ch skew: %d/%d = %4.2f\n", 
max_ch_acûs£s
, 
mš_ch_acûs£s
, ()max_chip_accesses/min_chip_accesses);

328 
	`´štf
("min_chip_accesses = 0!\n");

331 
k
 = 0;

332 
l
 = 0;

333 
m
 = 0;

334 
max_bªk_acûs£s
 = 0;

335 
max_ch_acûs£s
 = 0;

336 
mš_bªk_acûs£s
 = 0xFFFFFFFF;

337 
mš_ch_acûs£s
 = 0xFFFFFFFF;

338 
	`´štf
("number ofotal„ead‡ccesses:\n");

339 
i
=0;i<
n_mem
 ;i++ ) {

340 
	`´štf
("d¿m[%d]: ", 
i
);

341 
j
=0;j<
gpu_mem_n_bk
;j++ ) {

342 
l
 = 
tÙ®bªk»ads
[
i
][
j
];

343 ià(
l
 < 
mš_bªk_acûs£s
)

344 
mš_bªk_acûs£s
 = 
l
;

345 ià(
l
 > 
max_bªk_acûs£s
)

346 
max_bªk_acûs£s
 = 
l
;

347 
k
 +ğ
l
;

348 
m
 +ğ
l
;

349 
	`´štf
("%9d ",
l
);

351 ià(
m
 < 
mš_ch_acûs£s
)

352 
mš_ch_acûs£s
 = 
m
;

353 ià(
m
 > 
max_ch_acûs£s
)

354 
max_ch_acûs£s
 = 
m
;

355 
m
 = 0;

356 
	`´štf
("\n");

358 
	`´štf
("tÙ®„—ds: %d\n", 
k
);

359 ià(
mš_bªk_acûs£s
)

360 
	`´štf
("bªk skew: %d/%d = %4.2f\n", 
max_bªk_acûs£s
, 
mš_bªk_acûs£s
, ()max_bank_accesses/min_bank_accesses);

362 
	`´štf
("min_bank_accesses = 0!\n");

363 ià(
mš_ch_acûs£s
)

364 
	`´štf
("ch skew: %d/%d = %4.2f\n", 
max_ch_acûs£s
, 
mš_ch_acûs£s
, ()max_chip_accesses/min_chip_accesses);

366 
	`´štf
("min_chip_accesses = 0!\n");

369 
k
 = 0;

370 
l
 = 0;

371 
m
 = 0;

372 
max_bªk_acûs£s
 = 0;

373 
max_ch_acûs£s
 = 0;

374 
mš_bªk_acûs£s
 = 0xFFFFFFFF;

375 
mš_ch_acûs£s
 = 0xFFFFFFFF;

376 
	`´štf
("number ofotal write‡ccesses:\n");

377 
i
=0;i<
n_mem
 ;i++ ) {

378 
	`´štf
("d¿m[%d]: ", 
i
);

379 
j
=0;j<
gpu_mem_n_bk
;j++ ) {

380 
l
 = 
tÙ®bªkwr™es
[
i
][
j
];

381 ià(
l
 < 
mš_bªk_acûs£s
)

382 
mš_bªk_acûs£s
 = 
l
;

383 ià(
l
 > 
max_bªk_acûs£s
)

384 
max_bªk_acûs£s
 = 
l
;

385 
k
 +ğ
l
;

386 
m
 +ğ
l
;

387 
	`´štf
("%9d ",
l
);

389 ià(
m
 < 
mš_ch_acûs£s
)

390 
mš_ch_acûs£s
 = 
m
;

391 ià(
m
 > 
max_ch_acûs£s
)

392 
max_ch_acûs£s
 = 
m
;

393 
m
 = 0;

394 
	`´štf
("\n");

396 
	`´štf
("tÙ®„—ds: %d\n", 
k
);

397 ià(
mš_bªk_acûs£s
)

398 
	`´štf
("bªk skew: %d/%d = %4.2f\n", 
max_bªk_acûs£s
, 
mš_bªk_acûs£s
, ()max_bank_accesses/min_bank_accesses);

400 
	`´štf
("min_bank_accesses = 0!\n");

401 ià(
mš_ch_acûs£s
)

402 
	`´štf
("ch skew: %d/%d = %4.2f\n", 
max_ch_acûs£s
, 
mš_ch_acûs£s
, ()max_chip_accesses/min_chip_accesses);

404 
	`´štf
("min_chip_accesses = 0!\n");

408 
	`´štf
("average mf†atency…er bank:\n");

409 
i
=0;i<
n_mem
 ;i++ ) {

410 
	`´štf
("d¿m[%d]: ", 
i
);

411 
j
=0;j<
gpu_mem_n_bk
;j++ ) {

412 
k
 = 
tÙ®bªkwr™es
[
i
][
j
] + 
tÙ®bªk»ads
[i][j];

413 ià(
k
)

414 
	`´štf
("%10Îd", 
mf_tÙ®_Ït_bË
[
i
][
j
] / 
k
);

416 
	`´štf
("‚one ");

418 
	`´štf
("\n");

422 
	`´štf
("maximum mf†atency…er bank:\n");

423 
i
=0;i<
n_mem
 ;i++ ) {

424 
	`´štf
("d¿m[%d]: ", 
i
);

425 
j
=0;j<
gpu_mem_n_bk
;j++ ) {

426 
	`´štf
("%10d", 
mf_max_Ït_bË
[
i
][
j
]);

428 
	`´štf
("\n");

432 ià(
m_memÜy_cÚfig
->
gpgpu_memÏ‹ncy_¡©
 & 
GPU_MEMLATSTAT_MC
) {

433 
	`´štf
("\nNumber of Memory Banks Accessed…er Memory Operation…er Warp (from 0):\n");

434 
accum_MCBs_acûs£d
 = 0;

435 
tÙ_mem_İs_³r_w¬p
 = 0;

436 
i
=0;i< 
n_mem
*
gpu_mem_n_bk
 ; i++ ) {

437 
accum_MCBs_acûs£d
 +ğ
i
*
num_MCBs_acûs£d
[i];

438 
tÙ_mem_İs_³r_w¬p
 +ğ
num_MCBs_acûs£d
[
i
];

439 
	`´štf
("%d\t", 
num_MCBs_acûs£d
[
i
]);

442 
	`´štf
("\nAv”ag# oàMemÜy Bªk Acûs£d…” MemÜy O³¿tiÚ…” W¬p=%f\n", ()
accum_MCBs_acûs£d
/
tÙ_mem_İs_³r_w¬p
);

447 
	`´štf
("\nposition of mrq chosen\n");

449 ià(!
m_memÜy_cÚfig
->
gpgpu_äfcfs_d¿m_sched_queue_size
)

450 
j
 = 1024;

452 
j
 = 
m_memÜy_cÚfig
->
gpgpu_äfcfs_d¿m_sched_queue_size
;

453 
k
=0;
l
=0;

454 
i
=0;i< 
j
; i++ ) {

455 
	`´štf
("%d\t", 
pos™iÚ_of_mrq_cho£n
[
i
]);

456 
k
 +ğ
pos™iÚ_of_mrq_cho£n
[
i
];

457 
l
 +ğ
i
*
pos™iÚ_of_mrq_cho£n
[i];

459 
	`´štf
("\n");

460 
	`´štf
("\Çv”agpos™iÚ oàmrq cho£Àğ%f\n", ()
l
/
k
);

462 
	}
}

	@mem_latency_stat.h

28 #iâdeà
MEM_LATENCY_STAT_H


29 
	#MEM_LATENCY_STAT_H


	)

31 
	~<¡dio.h
>

32 
	~<zlib.h
>

33 
	~<m­
>

35 şas 
	cmemÜy_¡©s_t
 {

36 
	mpublic
:

37 
memÜy_¡©s_t
Ğ
n_shad”
,

38 cÚ¡ 
shad”_cÜe_cÚfig
 *
shad”_cÚfig
,

39 cÚ¡ 
memÜy_cÚfig
 *
mem_cÚfig
 );

41 
memÏt¡©_dÚe
Ğ
şass
 
mem_ãtch
 *
mf
 );

42 
memÏt¡©_»ad_dÚe
Ğ
şass
 
mem_ãtch
 *
mf
 );

43 
memÏt¡©_d¿m_acûss
Ğ
şass
 
mem_ãtch
 *
mf
 );

44 
memÏt¡©_iút2mem_pİ
Ğ
şass
 
mem_ãtch
 *
mf
);

45 
memÏt¡©_Ït_pw
();

46 
memÏt¡©_´št
(
n_mem
, 
gpu_mem_n_bk
);

48 
visu®iz”_´št
Ğ
gzFe
 
visu®iz”_fe
 );

50 
	mm_n_shad”
;

52 cÚ¡ 
shad”_cÜe_cÚfig
 *
	mm_shad”_cÚfig
;

53 cÚ¡ 
memÜy_cÚfig
 *
	mm_memÜy_cÚfig
;

55 
	mmax_mrq_Ï‹ncy
;

56 
	mmax_dq_Ï‹ncy
;

57 
	mmax_mf_Ï‹ncy
;

58 
	mmax_iút2mem_Ï‹ncy
;

59 
	mmax_iút2sh_Ï‹ncy
;

60 
	mmrq_Ït_bË
[32];

61 
	mdq_Ït_bË
[32];

62 
	mmf_Ït_bË
[32];

63 
	miút2mem_Ït_bË
[24];

64 
	miút2sh_Ït_bË
[24];

65 
	mmf_Ït_pw_bË
[32];

66 
	mmf_num_Ït_pw
;

67 
	mmax_w¬ps
;

68 
	mmf_tÙ_Ït_pw
;

69 
	mmf_tÙ®_Ït
;

70 ** 
	mmf_tÙ®_Ït_bË
;

71 ** 
	mmf_max_Ït_bË
;

72 
	mnum_mfs
;

73 ***
	mbªkwr™es
;

74 ***
	mbªk»ads
;

75 **
	mtÙ®bªkwr™es
;

76 **
	mtÙ®bªk»ads
;

77 **
	mtÙ®bªkacûs£s
;

78 *
	mnum_MCBs_acûs£d
;

79 *
	mpos™iÚ_of_mrq_cho£n
;

81 ***
	mmem_acûss_ty³_¡©s
;

85 *
	mL2_cbtoL2Ëngth
;

86 *
	mL2_cbtoL2wr™–’gth
;

87 *
	mL2_L2tocbËngth
;

88 *
	mL2_d¿mtoL2Ëngth
;

89 *
	mL2_d¿mtoL2wr™–’gth
;

90 *
	mL2_L2tod¿mËngth
;

93 **
	mcÚcu¼’t_row_acûss
;

94 **
	mnum_aùiv©es
;

95 **
	mrow_acûss
;

96 **
	mmax_cÚc_acûss2§m”ow
;

97 **
	mmax_£rviûtime2§m”ow
;

100 
	mtÙ®_n_acûss
;

101 
	mtÙ®_n_»ads
;

102 
	mtÙ®_n_wr™es
;

	@power_interface.cc

28 
	~"pow”_š‹rçû.h
"

30 
	$š™_mı©
(cÚ¡ 
gpgpu_sim_cÚfig
 &
cÚfig
, 
şass
 
gpgpu_sim_w¿µ”
 *
w¿µ”
, 
¡©_§m¶e_äeq
, 
tÙ_š¡
, 
š¡
){

32 
w¿µ”
->
	`š™_mı©
(
cÚfig
.
g_pow”_cÚfig_Çme
, cÚfig.
g_pow”_f’ame
, cÚfig.
g_pow”_Œaû_f’ame
,

33 
cÚfig
.
g_m‘ric_Œaû_f’ame
,cÚfig.
g_¡—dy_¡©e_Œackšg_f’ame
,cÚfig.
g_pow”_simuÏtiÚ_’abËd
,

34 
cÚfig
.
g_pow”_Œaû_’abËd
,cÚfig.
g_¡—dy_pow”_Ëv–s_’abËd
,cÚfig.
g_pow”_³r_cyşe_dump
,

35 
cÚfig
.
gpu_¡—dy_pow”_devŸtiÚ
,cÚfig.
gpu_¡—dy_mš_³riod
,cÚfig.
g_pow”_Œaû_zËv–
,

36 
tÙ_š¡
+
š¡
,
¡©_§m¶e_äeq


39 
	}
}

41 
	$mı©_cyşe
(cÚ¡ 
gpgpu_sim_cÚfig
 &
cÚfig
, cÚ¡ 
shad”_cÜe_cÚfig
 *
shdr_cÚfig
, 
şass
 
gpgpu_sim_w¿µ”
 *
w¿µ”
, cÏs 
pow”_¡©_t
 *
pow”_¡©s
, 
¡©_§m¶e_äeq
, 
tÙ_cyşe
, 
cyşe
, 
tÙ_š¡
, 
š¡
){

43 
boŞ
 
mı©_š™
=
Œue
;

45 if(
mı©_š™
){

46 
mı©_š™
=
çl£
;

50 ià((
tÙ_cyşe
+
cyşe
è% 
¡©_§m¶e_äeq
 == 0) {

52 
w¿µ”
->
	`£t_š¡_pow”
(
shdr_cÚfig
->
gpgpu_şock_g©ed_ÏÃs
,

53 
¡©_§m¶e_äeq
, stat_sample_freq,

54 
pow”_¡©s
->
	`g‘_tÙ®_š¡
(),…ow”_¡©s->
	`g‘_tÙ®_št_š¡
(),

55 
pow”_¡©s
->
	`g‘_tÙ®_å_š¡
(),…ow”_¡©s->
	`g‘_l1d_»ad_acûs£s
(),

56 
pow”_¡©s
->
	`g‘_l1d_wr™e_acûs£s
(),…ow”_¡©s->
	`g‘_comm™‹d_š¡
());

59 
w¿µ”
->
	`£t_»gfe_pow”
(
pow”_¡©s
->
	`g‘_»gfe_»ads
(),…ow”_¡©s->
	`g‘_»gfe_wr™es
(),…ow”_¡©s->
	`g‘_nÚ_»gfe_İ”ªds
());

62 
w¿µ”
->
	`£t_iÿche_pow”
(
pow”_¡©s
->
	`g‘_š¡_c_h™s
(),…ow”_¡©s->
	`g‘_š¡_c_mis£s
());

65 
w¿µ”
->
	`£t_cÿche_pow”
(
pow”_¡©s
->
	`g‘_cÚ¡ªt_c_h™s
(),…ow”_¡©s->
	`g‘_cÚ¡ªt_c_mis£s
());

66 
w¿µ”
->
	`£t_tÿche_pow”
(
pow”_¡©s
->
	`g‘_‹xtu»_c_h™s
(),…ow”_¡©s->
	`g‘_‹xtu»_c_mis£s
());

67 
w¿µ”
->
	`£t_shrd_mem_pow”
(
pow”_¡©s
->
	`g‘_shmem_»ad_acûss
());

69 
w¿µ”
->
	`£t_l1ÿche_pow”
(
pow”_¡©s
->
	`g‘_l1d_»ad_h™s
(),…ow”_¡©s->
	`g‘_l1d_»ad_mis£s
(),

70 
pow”_¡©s
->
	`g‘_l1d_wr™e_h™s
(),…ow”_¡©s->
	`g‘_l1d_wr™e_mis£s
());

73 
w¿µ”
->
	`£t_l2ÿche_pow”
(
pow”_¡©s
->
	`g‘_l2_»ad_h™s
(),…ow”_¡©s->
	`g‘_l2_»ad_mis£s
(),

74 
pow”_¡©s
->
	`g‘_l2_wr™e_h™s
(),…ow”_¡©s->
	`g‘_l2_wr™e_mis£s
());

77 
aùive_sms
=(*
pow”_¡©s
->
m_aùive_sms
)/
¡©_§m¶e_äeq
;

78 
num_cÜes
 = 
shdr_cÚfig
->
	`num_shad”
();

79 
num_idË_cÜe
 = 
num_cÜes
 - 
aùive_sms
;

80 
w¿µ”
->
	`£t_idË_cÜe_pow”
(
num_idË_cÜe
);

83 
p–še_duty_cyşe
=((*
pow”_¡©s
->
m_av”age_p–še_duty_cyşe
/Ğ
¡©_§m¶e_äeq
)) < 0.8)?((*power_stats->m_average_pipeline_duty_cycle)/stat_sample_freq):0.8;

84 
w¿µ”
->
	`£t_duty_cyşe_pow”
(
p–še_duty_cyşe
);

87 
w¿µ”
->
	`£t_mem_ù¾_pow”
(
pow”_¡©s
->
	`g‘_d¿m_rd
(),…ow”_¡©s->
	`g‘_d¿m_wr
(),…ow”_¡©s->
	`g‘_d¿m_´e
());

91 
w¿µ”
->
	`£t_exec_un™_pow”
(
pow”_¡©s
->
	`g‘_tÙ_åu_acûs£ss
(),…ow”_¡©s->
	`g‘_Ÿlu_acûs£ss
(),…ow”_¡©s->
	`g‘_tÙ_sfu_acûs£ss
());

94 
avg_¥_aùive_ÏÃs
=(
pow”_¡©s
->
	`g‘_¥_aùive_ÏÃs
())/
¡©_§m¶e_äeq
;

95 
avg_sfu_aùive_ÏÃs
=(
pow”_¡©s
->
	`g‘_sfu_aùive_ÏÃs
())/
¡©_§m¶e_äeq
;

96 
	`as£¹
(
avg_¥_aùive_ÏÃs
<=32);

97 
	`as£¹
(
avg_sfu_aùive_ÏÃs
<=32);

98 
w¿µ”
->
	`£t_aùive_ÏÃs_pow”
((
pow”_¡©s
->
	`g‘_¥_aùive_ÏÃs
())/
¡©_§m¶e_äeq
,

99 (
pow”_¡©s
->
	`g‘_sfu_aùive_ÏÃs
())/
¡©_§m¶e_äeq
);

102 
n_iút_simt_to_mem
 = ()
pow”_¡©s
->
	`g‘_iút_simt_to_mem
();

103 
n_iút_mem_to_simt
 = ()
pow”_¡©s
->
	`g‘_iút_mem_to_simt
();

104 
w¿µ”
->
	`£t_NoC_pow”
(
n_iút_mem_to_simt
, 
n_iút_simt_to_mem
);

106 
w¿µ”
->
	`compu‹
();

109 
w¿µ”
->
	`upd©e_compÚ’ts_pow”
();

110 
w¿µ”
->
	`´št_Œaû_fes
();

111 
pow”_¡©s
->
	`§ve_¡©s
();

113 
w¿µ”
->
	`d‘eù_´št_¡—dy_¡©e
(0,
tÙ_š¡
+
š¡
);

115 
w¿µ”
->
	`pow”_m‘rics_ÿlcuÏtiÚs
();

118 
w¿µ”
->
	`dump
();

121 
	}
}

123 
	$mı©_»£t_³rf_couÁ
(
şass
 
gpgpu_sim_w¿µ”
 *
w¿µ”
){

124 
w¿µ”
->
	`»£t_couÁ”s
();

125 
	}
}

	@power_interface.h

28 #iâdeà
POWER_INTERFACE_H_


29 
	#POWER_INTERFACE_H_


	)

31 
	~"gpu-sim.h
"

32 
	~"pow”_¡©.h
"

33 
	~"shad”.h
"

36 
	~"gpgpu_sim_w¿µ”.h
"

38 
š™_mı©
(cÚ¡ 
gpgpu_sim_cÚfig
 &
cÚfig
, 
şass
 
gpgpu_sim_w¿µ”
 *
w¿µ”
, 
¡©_§m¶e_äeq
, 
tÙ_š¡
, 
š¡
);

39 
mı©_cyşe
(cÚ¡ 
gpgpu_sim_cÚfig
 &
cÚfig
, cÚ¡ 
shad”_cÜe_cÚfig
 *
shdr_cÚfig
, 
şass
 
gpgpu_sim_w¿µ”
 *
w¿µ”
, cÏs 
pow”_¡©_t
 *
pow”_¡©s
,

40 
¡©_§m¶e_äeq
, 
tÙ_cyşe
, 
cyşe
, 
tÙ_š¡
, 
š¡
);

41 
mı©_»£t_³rf_couÁ
(
şass
 
gpgpu_sim_w¿µ”
 *
w¿µ”
);

	@power_stat.cc

28 
	~"../ab¡¿ù_h¬dw¬e_mod–.h
"

29 
	~"pow”_¡©.h
"

30 
	~"gpu-sim.h
"

31 
	~"gpu-misc.h
"

32 
	~"shad”.h
"

33 
	~"mem_ãtch.h
"

34 
	~"¡©-toŞ.h
"

35 
	~"../cuda-sim/±x-¡©s.h
"

36 
	~"visu®iz”.h
"

37 
	~"d¿m.h
"

39 
	~<¡ršg.h
>

40 
	~<¡dlib.h
>

41 
	~<¡dio.h
>

45 
	gpow”_mem_¡©_t
::
	$pow”_mem_¡©_t
(cÚ¡ 
memÜy_cÚfig
 *
mem_cÚfig
, cÚ¡ 
shad”_cÜe_cÚfig
 *
shdr_cÚfig
, 
memÜy_¡©s_t
 *
mem_¡©s
, 
shad”_cÜe_¡©s
 *
shdr_¡©s
){

46 
	`as£¹
Ğ
mem_cÚfig
->
m_v®id
 );

47 
m_mem_¡©s
 = 
mem_¡©s
;

48 
m_cÚfig
 = 
mem_cÚfig
;

49 
m_cÜe_¡©s
 = 
shdr_¡©s
;

50 
m_cÜe_cÚfig
 = 
shdr_cÚfig
;

52 
	`š™
();

53 
	}
}

55 
	gpow”_mem_¡©_t
::
	$š™
(){

57 
shmem_»ad_acûss
[
CURRENT_STAT_IDX
] = 
m_cÜe_¡©s
->
gpgpu_n_shmem_bªk_acûss
;

58 
shmem_»ad_acûss
[
PREV_STAT_IDX
] = (*)
	`ÿÎoc
(
m_cÜe_cÚfig
->
	`num_shad”
(),());

60 
i
=0; i<
NUM_STAT_IDX
; ++i){

61 
cÜe_ÿche_¡©s
[
i
].
	`ş—r
();

62 
l2_ÿche_¡©s
[
i
].
	`ş—r
();

64 
n_cmd
[
i
] = (*)
	`ÿÎoc
(
m_cÚfig
->
m_n_mem
,());

65 
n_aùiv™y
[
i
] = (*)
	`ÿÎoc
(
m_cÚfig
->
m_n_mem
,());

66 
n_nİ
[
i
] = (*)
	`ÿÎoc
(
m_cÚfig
->
m_n_mem
,());

67 
n_aù
[
i
] = (*)
	`ÿÎoc
(
m_cÚfig
->
m_n_mem
,());

68 
n_´e
[
i
] = (*)
	`ÿÎoc
(
m_cÚfig
->
m_n_mem
,());

69 
n_rd
[
i
] = (*)
	`ÿÎoc
(
m_cÚfig
->
m_n_mem
,());

70 
n_wr
[
i
] = (*)
	`ÿÎoc
(
m_cÚfig
->
m_n_mem
,());

71 
n_»q
[
i
] = (*)
	`ÿÎoc
(
m_cÚfig
->
m_n_mem
,());

74 
n_mem_to_simt
[
i
] = (*)
	`ÿÎoc
(
m_cÜe_cÚfig
->
n_simt_şu¡”s
,());

75 
n_simt_to_mem
[
i
] = (*)
	`ÿÎoc
(
m_cÜe_cÚfig
->
n_simt_şu¡”s
,());

77 
	}
}

79 
	gpow”_mem_¡©_t
::
	$§ve_¡©s
(){

81 
cÜe_ÿche_¡©s
[
PREV_STAT_IDX
] = cÜe_ÿche_¡©s[
CURRENT_STAT_IDX
];

82 
l2_ÿche_¡©s
[
PREV_STAT_IDX
] =†2_ÿche_¡©s[
CURRENT_STAT_IDX
];

84 
i
=0; i<
m_cÜe_cÚfig
->
	`num_shad”
(); ++i){

85 
shmem_»ad_acûss
[
PREV_STAT_IDX
][
i
] = shmem_»ad_acûss[
CURRENT_STAT_IDX
][i] ;

88 
i
=0; i<
m_cÚfig
->
m_n_mem
; ++i){

89 
n_cmd
[
PREV_STAT_IDX
][
i
] =‚_cmd[
CURRENT_STAT_IDX
][i];

90 
n_aùiv™y
[
PREV_STAT_IDX
][
i
] =‚_aùiv™y[
CURRENT_STAT_IDX
][i];

91 
n_nİ
[
PREV_STAT_IDX
][
i
] =‚_nİ[
CURRENT_STAT_IDX
][i];

92 
n_aù
[
PREV_STAT_IDX
][
i
] =‚_aù[
CURRENT_STAT_IDX
][i];

93 
n_´e
[
PREV_STAT_IDX
][
i
] =‚_´e[
CURRENT_STAT_IDX
][i];

94 
n_rd
[
PREV_STAT_IDX
][
i
] =‚_rd[
CURRENT_STAT_IDX
][i];

95 
n_wr
[
PREV_STAT_IDX
][
i
] =‚_wr[
CURRENT_STAT_IDX
][i];

96 
n_»q
[
PREV_STAT_IDX
][
i
] =‚_»q[
CURRENT_STAT_IDX
][i];

99 
i
=0; i<
m_cÜe_cÚfig
->
n_simt_şu¡”s
;i++){

100 
n_simt_to_mem
[
PREV_STAT_IDX
][
i
] =‚_simt_to_mem[
CURRENT_STAT_IDX
][i];

101 
n_mem_to_simt
[
PREV_STAT_IDX
][
i
] =‚_mem_to_simt[
CURRENT_STAT_IDX
][i];

103 
	}
}

105 
	gpow”_mem_¡©_t
::
	$visu®iz”_´št
Ğ
gzFe
 
pow”_visu®iz”_fe
 ){

107 
	}
}

109 
pow”_mem_¡©_t
::
	$´št
 (
FILE
 *
fout
) const {

110 
	`årštf
(
fout
, "\n\n==========Power Metrics -- Memory==========\n");

111 
tÙ®_mem_»ads
=0;

112 
tÙ®_mem_wr™es
=0;

113 
i
=0; i<
m_cÚfig
->
m_n_mem
; ++i){

114 
tÙ®_mem_»ads
 +ğ
n_rd
[
CURRENT_STAT_IDX
][
i
];

115 
tÙ®_mem_wr™es
 +ğ
n_wr
[
CURRENT_STAT_IDX
][
i
];

117 
	`årštf
(
fout
, "TÙ® memÜy cÚŒŞË¸acûs£s: %u\n", 
tÙ®_mem_»ads
+
tÙ®_mem_wr™es
);

118 
	`årštf
(
fout
, "TÙ® memÜy cÚŒŞË¸»ads: %u\n", 
tÙ®_mem_»ads
);

119 
	`årštf
(
fout
, "TÙ® memÜy cÚŒŞË¸wr™es: %u\n", 
tÙ®_mem_wr™es
);

121 
	`årštf
(
fout
, "Core cache stats:\n");

122 
cÜe_ÿche_¡©s
->
	`´št_¡©s
(
fout
);

123 
	`årštf
(
fout
, "L2 cache stats:\n");

124 
l2_ÿche_¡©s
->
	`´št_¡©s
(
fout
);

125 
	}
}

128 
	gpow”_cÜe_¡©_t
::
	$pow”_cÜe_¡©_t
ĞcÚ¡ 
shad”_cÜe_cÚfig
 *
shad”_cÚfig
, 
shad”_cÜe_¡©s
 *
cÜe_¡©s
 )

130 
	`as£¹
Ğ
shad”_cÚfig
->
m_v®id
 );

131 
m_cÚfig
 = 
shad”_cÚfig
;

132 
shad”_cÜe_pow”_¡©s_pod
 *
pod
 = 
this
;

133 
	`mem£t
(
pod
,0,(
shad”_cÜe_pow”_¡©s_pod
));

134 
m_cÜe_¡©s
=
cÜe_¡©s
;

136 
	`š™
();

138 
	}
}

140 
	gpow”_cÜe_¡©_t
::
	$visu®iz”_´št
Ğ
gzFe
 
visu®iz”_fe
 )

143 
	}
}

145 
pow”_cÜe_¡©_t
::
	$´št
 (
FILE
 *
fout
)

148 
	`årštf
(
fout
,"Power Metrics: \n");

149 
i
=0; i<
m_cÚfig
->
	`num_shad”
();i++){

150 
	`årštf
(
fout
,"cÜ%u:\n",
i
);

151 
	`årštf
(
fout
,"\–šduty cyş=%f\n",
m_p–še_duty_cyşe
[
CURRENT_STAT_IDX
][
i
]);

152 
	`årštf
(
fout
,"\tTÙ® Deocded In¡ruùiÚs=%u\n",
m_num_decoded_š¢
[
CURRENT_STAT_IDX
][
i
]);

153 
	`årštf
(
fout
,"\tTÙ® FP Deocded In¡ruùiÚs=%u\n",
m_num_FPdecoded_š¢
[
CURRENT_STAT_IDX
][
i
]);

154 
	`årštf
(
fout
,"\tTÙ® INT Deocded In¡ruùiÚs=%u\n",
m_num_INTdecoded_š¢
[
CURRENT_STAT_IDX
][
i
]);

155 
	`årštf
(
fout
,"\tTÙ® LOAD Queued In¡ruùiÚs=%u\n",
m_num_lßdqueued_š¢
[
CURRENT_STAT_IDX
][
i
]);

156 
	`årštf
(
fout
,"\tTÙ® STORE Queued In¡ruùiÚs=%u\n",
m_num_¡Üequeued_š¢
[
CURRENT_STAT_IDX
][
i
]);

157 
	`årštf
(
fout
,"\tTÙ® IALU Aûs£s=%u\n",
m_num_Ÿlu_aûs£s
[
CURRENT_STAT_IDX
][
i
]);

158 
	`årštf
(
fout
,"\tTÙ® FP Aûs£s=%u\n",
m_num_å_aûs£s
[
CURRENT_STAT_IDX
][
i
]);

159 
	`årštf
(
fout
,"\tTÙ® IMUL Aûs£s=%u\n",
m_num_imul_aûs£s
[
CURRENT_STAT_IDX
][
i
]);

160 
	`årštf
(
fout
,"\tTÙ® IMUL24 Aûs£s=%u\n",
m_num_imul24_aûs£s
[
CURRENT_STAT_IDX
][
i
]);

161 
	`årštf
(
fout
,"\tTÙ® IMUL32 Aûs£s=%u\n",
m_num_imul32_aûs£s
[
CURRENT_STAT_IDX
][
i
]);

162 
	`årštf
(
fout
,"\tTÙ® IDIV Aûs£s=%u\n",
m_num_idiv_aûs£s
[
CURRENT_STAT_IDX
][
i
]);

163 
	`årštf
(
fout
,"\tTÙ® FPMUL Aûs£s=%u\n",
m_num_åmul_aûs£s
[
CURRENT_STAT_IDX
][
i
]);

164 
	`årštf
(
fout
,"\tTÙ® SFU Aûs£s=%u\n",
m_num_Œªs_aûs£s
[
CURRENT_STAT_IDX
][
i
]);

165 
	`årštf
(
fout
,"\tTÙ® FPDIV Aûs£s=%u\n",
m_num_ådiv_aûs£s
[
CURRENT_STAT_IDX
][
i
]);

166 
	`årštf
(
fout
,"\tTÙ® SFU Aûs£s=%u\n",
m_num_sfu_aûs£s
[
CURRENT_STAT_IDX
][
i
]);

167 
	`årštf
(
fout
,"\tTÙ® SP Aûs£s=%u\n",
m_num_¥_aûs£s
[
CURRENT_STAT_IDX
][
i
]);

168 
	`årštf
(
fout
,"\tTÙ® MEM Aûs£s=%u\n",
m_num_mem_aûs£s
[
CURRENT_STAT_IDX
][
i
]);

169 
	`årštf
(
fout
,"\tTÙ® SFU CommissiÚs=%u\n",
m_num_sfu_comm™‹d
[
CURRENT_STAT_IDX
][
i
]);

170 
	`årštf
(
fout
,"\tTÙ® SP CommissiÚs=%u\n",
m_num_¥_comm™‹d
[
CURRENT_STAT_IDX
][
i
]);

171 
	`årštf
(
fout
,"\tTÙ® MEM CommissiÚs=%u\n",
m_num_mem_comm™‹d
[
CURRENT_STAT_IDX
][
i
]);

172 
	`årštf
(
fout
,"\tTÙ® REG R—ds=%u\n",
m_»ad_»gfe_aûs£s
[
CURRENT_STAT_IDX
][
i
]);

173 
	`årštf
(
fout
,"\tTÙ® REG Wr™es=%u\n",
m_wr™e_»gfe_aûs£s
[
CURRENT_STAT_IDX
][
i
]);

174 
	`årštf
(
fout
,"\tTÙ® NON REG=%u\n",
m_nÚ_rf_İ”ªds
[
CURRENT_STAT_IDX
][
i
]);

176 
	}
}

177 
	gpow”_cÜe_¡©_t
::
	$š™
()

179 
m_p–še_duty_cyşe
[
CURRENT_STAT_IDX
]=
m_cÜe_¡©s
->m_pipeline_duty_cycle;

180 
m_num_decoded_š¢
[
CURRENT_STAT_IDX
]=
m_cÜe_¡©s
->m_num_decoded_insn;

181 
m_num_FPdecoded_š¢
[
CURRENT_STAT_IDX
]=
m_cÜe_¡©s
->m_num_FPdecoded_insn;

182 
m_num_INTdecoded_š¢
[
CURRENT_STAT_IDX
]=
m_cÜe_¡©s
->m_num_INTdecoded_insn;

183 
m_num_¡Üequeued_š¢
[
CURRENT_STAT_IDX
]=
m_cÜe_¡©s
->m_num_storequeued_insn;

184 
m_num_lßdqueued_š¢
[
CURRENT_STAT_IDX
]=
m_cÜe_¡©s
->m_num_loadqueued_insn;

185 
m_num_Ÿlu_aûs£s
[
CURRENT_STAT_IDX
]=
m_cÜe_¡©s
->m_num_ialu_acesses;

186 
m_num_å_aûs£s
[
CURRENT_STAT_IDX
]=
m_cÜe_¡©s
->m_num_fp_acesses;

187 
m_num_imul_aûs£s
[
CURRENT_STAT_IDX
]=
m_cÜe_¡©s
->m_num_imul_acesses;

188 
m_num_imul24_aûs£s
[
CURRENT_STAT_IDX
]=
m_cÜe_¡©s
->m_num_imul24_acesses;

189 
m_num_imul32_aûs£s
[
CURRENT_STAT_IDX
]=
m_cÜe_¡©s
->m_num_imul32_acesses;

190 
m_num_åmul_aûs£s
[
CURRENT_STAT_IDX
]=
m_cÜe_¡©s
->m_num_fpmul_acesses;

191 
m_num_idiv_aûs£s
[
CURRENT_STAT_IDX
]=
m_cÜe_¡©s
->m_num_idiv_acesses;

192 
m_num_ådiv_aûs£s
[
CURRENT_STAT_IDX
]=
m_cÜe_¡©s
->m_num_fpdiv_acesses;

193 
m_num_¥_aûs£s
[
CURRENT_STAT_IDX
]=
m_cÜe_¡©s
->m_num_sp_acesses;

194 
m_num_sfu_aûs£s
[
CURRENT_STAT_IDX
]=
m_cÜe_¡©s
->m_num_sfu_acesses;

195 
m_num_Œªs_aûs£s
[
CURRENT_STAT_IDX
]=
m_cÜe_¡©s
->m_num_trans_acesses;

196 
m_num_mem_aûs£s
[
CURRENT_STAT_IDX
]=
m_cÜe_¡©s
->m_num_mem_acesses;

197 
m_num_¥_comm™‹d
[
CURRENT_STAT_IDX
]=
m_cÜe_¡©s
->m_num_sp_committed;

198 
m_num_sfu_comm™‹d
[
CURRENT_STAT_IDX
]=
m_cÜe_¡©s
->m_num_sfu_committed;

199 
m_num_mem_comm™‹d
[
CURRENT_STAT_IDX
]=
m_cÜe_¡©s
->m_num_mem_committed;

200 
m_»ad_»gfe_aûs£s
[
CURRENT_STAT_IDX
]=
m_cÜe_¡©s
->m_read_regfile_acesses;

201 
m_wr™e_»gfe_aûs£s
[
CURRENT_STAT_IDX
]=
m_cÜe_¡©s
->m_write_regfile_acesses;

202 
m_nÚ_rf_İ”ªds
[
CURRENT_STAT_IDX
]=
m_cÜe_¡©s
->m_non_rf_operands;

203 
m_aùive_¥_ÏÃs
[
CURRENT_STAT_IDX
]=
m_cÜe_¡©s
->m_active_sp_lanes;

204 
m_aùive_sfu_ÏÃs
[
CURRENT_STAT_IDX
]=
m_cÜe_¡©s
->m_active_sfu_lanes;

205 
m_num_‹x_š¡
[
CURRENT_STAT_IDX
]=
m_cÜe_¡©s
->m_num_tex_inst;

208 
m_p–še_duty_cyşe
[
PREV_STAT_IDX
]=(*)
	`ÿÎoc
(
m_cÚfig
->
	`num_shad”
(),());

209 
m_num_decoded_š¢
[
PREV_STAT_IDX
]=(*)
	`ÿÎoc
(
m_cÚfig
->
	`num_shad”
(),());

210 
m_num_FPdecoded_š¢
[
PREV_STAT_IDX
]=(*)
	`ÿÎoc
(
m_cÚfig
->
	`num_shad”
(),());

211 
m_num_INTdecoded_š¢
[
PREV_STAT_IDX
]=(*)
	`ÿÎoc
(
m_cÚfig
->
	`num_shad”
(),());

212 
m_num_¡Üequeued_š¢
[
PREV_STAT_IDX
]=(*)
	`ÿÎoc
(
m_cÚfig
->
	`num_shad”
(),());

213 
m_num_lßdqueued_š¢
[
PREV_STAT_IDX
]=(*)
	`ÿÎoc
(
m_cÚfig
->
	`num_shad”
(),());

214 
m_num_Ÿlu_aûs£s
[
PREV_STAT_IDX
]=(*)
	`ÿÎoc
(
m_cÚfig
->
	`num_shad”
(),());

215 
m_num_å_aûs£s
[
PREV_STAT_IDX
]=(*)
	`ÿÎoc
(
m_cÚfig
->
	`num_shad”
(),());

216 
m_num_‹x_š¡
[
PREV_STAT_IDX
]=(*)
	`ÿÎoc
(
m_cÚfig
->
	`num_shad”
(),());

217 
m_num_imul_aûs£s
[
PREV_STAT_IDX
]=(*)
	`ÿÎoc
(
m_cÚfig
->
	`num_shad”
(),());

218 
m_num_imul24_aûs£s
[
PREV_STAT_IDX
]=(*)
	`ÿÎoc
(
m_cÚfig
->
	`num_shad”
(),());

219 
m_num_imul32_aûs£s
[
PREV_STAT_IDX
]=(*)
	`ÿÎoc
(
m_cÚfig
->
	`num_shad”
(),());

220 
m_num_åmul_aûs£s
[
PREV_STAT_IDX
]=(*)
	`ÿÎoc
(
m_cÚfig
->
	`num_shad”
(),());

221 
m_num_idiv_aûs£s
[
PREV_STAT_IDX
]=(*)
	`ÿÎoc
(
m_cÚfig
->
	`num_shad”
(),());

222 
m_num_ådiv_aûs£s
[
PREV_STAT_IDX
]=(*)
	`ÿÎoc
(
m_cÚfig
->
	`num_shad”
(),());

223 
m_num_¥_aûs£s
[
PREV_STAT_IDX
]=(*)
	`ÿÎoc
(
m_cÚfig
->
	`num_shad”
(),());

224 
m_num_sfu_aûs£s
[
PREV_STAT_IDX
]=(*)
	`ÿÎoc
(
m_cÚfig
->
	`num_shad”
(),());

225 
m_num_Œªs_aûs£s
[
PREV_STAT_IDX
]=(*)
	`ÿÎoc
(
m_cÚfig
->
	`num_shad”
(),());

226 
m_num_mem_aûs£s
[
PREV_STAT_IDX
]=(*)
	`ÿÎoc
(
m_cÚfig
->
	`num_shad”
(),());

227 
m_num_¥_comm™‹d
[
PREV_STAT_IDX
]=(*)
	`ÿÎoc
(
m_cÚfig
->
	`num_shad”
(),());

228 
m_num_sfu_comm™‹d
[
PREV_STAT_IDX
]=(*)
	`ÿÎoc
(
m_cÚfig
->
	`num_shad”
(),());

229 
m_num_mem_comm™‹d
[
PREV_STAT_IDX
]=(*)
	`ÿÎoc
(
m_cÚfig
->
	`num_shad”
(),());

230 
m_»ad_»gfe_aûs£s
[
PREV_STAT_IDX
]=(*)
	`ÿÎoc
(
m_cÚfig
->
	`num_shad”
(),());

231 
m_wr™e_»gfe_aûs£s
[
PREV_STAT_IDX
]=(*)
	`ÿÎoc
(
m_cÚfig
->
	`num_shad”
(),());

232 
m_nÚ_rf_İ”ªds
[
PREV_STAT_IDX
]=(*)
	`ÿÎoc
(
m_cÚfig
->
	`num_shad”
(),());

233 
m_aùive_¥_ÏÃs
[
PREV_STAT_IDX
]=(*)
	`ÿÎoc
(
m_cÚfig
->
	`num_shad”
(),());

234 
m_aùive_sfu_ÏÃs
[
PREV_STAT_IDX
]=(*)
	`ÿÎoc
(
m_cÚfig
->
	`num_shad”
(),());

235 
	}
}

237 
	gpow”_cÜe_¡©_t
::
	$§ve_¡©s
(){

238 
i
=0; i<
m_cÚfig
->
	`num_shad”
(); ++i){

239 
m_p–še_duty_cyşe
[
PREV_STAT_IDX
][
i
]=m_p–še_duty_cyşe[
CURRENT_STAT_IDX
][i];

240 
m_num_decoded_š¢
[
PREV_STAT_IDX
][
i
]ğm_num_decoded_š¢[
CURRENT_STAT_IDX
][i];

241 
m_num_FPdecoded_š¢
[
PREV_STAT_IDX
][
i
]=m_num_FPdecoded_š¢[
CURRENT_STAT_IDX
][i];

242 
m_num_INTdecoded_š¢
[
PREV_STAT_IDX
][
i
]=m_num_INTdecoded_š¢[
CURRENT_STAT_IDX
][i];

243 
m_num_¡Üequeued_š¢
[
PREV_STAT_IDX
][
i
]=m_num_¡Üequeued_š¢[
CURRENT_STAT_IDX
][i];

244 
m_num_lßdqueued_š¢
[
PREV_STAT_IDX
][
i
]=m_num_lßdqueued_š¢[
CURRENT_STAT_IDX
][i];

245 
m_num_Ÿlu_aûs£s
[
PREV_STAT_IDX
][
i
]=m_num_Ÿlu_aûs£s[
CURRENT_STAT_IDX
][i];

246 
m_num_å_aûs£s
[
PREV_STAT_IDX
][
i
]=m_num_å_aûs£s[
CURRENT_STAT_IDX
][i];

247 
m_num_‹x_š¡
[
PREV_STAT_IDX
][
i
]=m_num_‹x_š¡[
CURRENT_STAT_IDX
][i];

248 
m_num_imul_aûs£s
[
PREV_STAT_IDX
][
i
]=m_num_imul_aûs£s[
CURRENT_STAT_IDX
][i];

249 
m_num_imul24_aûs£s
[
PREV_STAT_IDX
][
i
]=m_num_imul24_aûs£s[
CURRENT_STAT_IDX
][i];

250 
m_num_imul32_aûs£s
[
PREV_STAT_IDX
][
i
]=m_num_imul32_aûs£s[
CURRENT_STAT_IDX
][i];

251 
m_num_åmul_aûs£s
[
PREV_STAT_IDX
][
i
]=m_num_åmul_aûs£s[
CURRENT_STAT_IDX
][i];

252 
m_num_idiv_aûs£s
[
PREV_STAT_IDX
][
i
]=m_num_idiv_aûs£s[
CURRENT_STAT_IDX
][i];

253 
m_num_ådiv_aûs£s
[
PREV_STAT_IDX
][
i
]=m_num_ådiv_aûs£s[
CURRENT_STAT_IDX
][i];

254 
m_num_¥_aûs£s
[
PREV_STAT_IDX
][
i
]=m_num_¥_aûs£s[
CURRENT_STAT_IDX
][i];

255 
m_num_sfu_aûs£s
[
PREV_STAT_IDX
][
i
]=m_num_sfu_aûs£s[
CURRENT_STAT_IDX
][i];

256 
m_num_Œªs_aûs£s
[
PREV_STAT_IDX
][
i
]=m_num_Œªs_aûs£s[
CURRENT_STAT_IDX
][i];

257 
m_num_mem_aûs£s
[
PREV_STAT_IDX
][
i
]=m_num_mem_aûs£s[
CURRENT_STAT_IDX
][i];

258 
m_num_¥_comm™‹d
[
PREV_STAT_IDX
][
i
]=m_num_¥_comm™‹d[
CURRENT_STAT_IDX
][i];

259 
m_num_sfu_comm™‹d
[
PREV_STAT_IDX
][
i
]=m_num_sfu_comm™‹d[
CURRENT_STAT_IDX
][i];

260 
m_num_mem_comm™‹d
[
PREV_STAT_IDX
][
i
]=m_num_mem_comm™‹d[
CURRENT_STAT_IDX
][i];

261 
m_»ad_»gfe_aûs£s
[
PREV_STAT_IDX
][
i
]=m_»ad_»gfe_aûs£s[
CURRENT_STAT_IDX
][i];

262 
m_wr™e_»gfe_aûs£s
[
PREV_STAT_IDX
][
i
]=m_wr™e_»gfe_aûs£s[
CURRENT_STAT_IDX
][i];

263 
m_nÚ_rf_İ”ªds
[
PREV_STAT_IDX
][
i
]=m_nÚ_rf_İ”ªds[
CURRENT_STAT_IDX
][i];

264 
m_aùive_¥_ÏÃs
[
PREV_STAT_IDX
][
i
]=m_aùive_¥_ÏÃs[
CURRENT_STAT_IDX
][i];

265 
m_aùive_sfu_ÏÃs
[
PREV_STAT_IDX
][
i
]=m_aùive_sfu_ÏÃs[
CURRENT_STAT_IDX
][i];

267 
	}
}

269 
	gpow”_¡©_t
::
	$pow”_¡©_t
ĞcÚ¡ 
shad”_cÜe_cÚfig
 *
shad”_cÚfig
,* 
av”age_p–še_duty_cyşe
,*
aùive_sms
,
shad”_cÜe_¡©s
 * 
shad”_¡©s
, cÚ¡ 
memÜy_cÚfig
 *
mem_cÚfig
,
memÜy_¡©s_t
 * 
memÜy_¡©s
)

271 
	`as£¹
Ğ
shad”_cÚfig
->
m_v®id
 );

272 
	`as£¹
Ğ
mem_cÚfig
->
m_v®id
 );

273 
pwr_cÜe_¡©
ğ
Ãw
 
	`pow”_cÜe_¡©_t
(
shad”_cÚfig
,
shad”_¡©s
);

274 
pwr_mem_¡©
ğ
Ãw
 
	`pow”_mem_¡©_t
(
mem_cÚfig
,
shad”_cÚfig
, 
memÜy_¡©s
, 
shad”_¡©s
);

275 
m_av”age_p–še_duty_cyşe
=
av”age_p–še_duty_cyşe
;

276 
m_aùive_sms
=
aùive_sms
;

277 
m_cÚfig
 = 
shad”_cÚfig
;

278 
m_mem_cÚfig
 = 
mem_cÚfig
;

279 
	}
}

281 
	gpow”_¡©_t
::
	$visu®iz”_´št
Ğ
gzFe
 
visu®iz”_fe
 )

283 
pwr_cÜe_¡©
->
	`visu®iz”_´št
(
visu®iz”_fe
);

284 
pwr_mem_¡©
->
	`visu®iz”_´št
(
visu®iz”_fe
);

285 
	}
}

287 
	gpow”_¡©_t
::
	$´št
 (
FILE
 *
fout
) const

289 
	`årštf
(
fout
,"av”age_p–še_duty_cyşe=%f\n",*
m_av”age_p–še_duty_cyşe
);

290 
pwr_cÜe_¡©
->
	`´št
(
fout
);

291 
pwr_mem_¡©
->
	`´št
(
fout
);

292 
	}
}

	@power_stat.h

28 #iâdeà
POWER_STAT_H


29 
	#POWER_STAT_H


	)

31 
	~<¡dio.h
>

32 
	~<zlib.h
>

33 
	~"mem_Ï‹ncy_¡©.h
"

34 
	~"gpu-sim.h
"

36 
	e_¡©_idx
{

37 
	mCURRENT_STAT_IDX
 = 0,

38 
	mPREV_STAT_IDX
,

39 
	mNUM_STAT_IDX


40 }
	t¡©_idx
;

43 
	sshad”_cÜe_pow”_¡©s_pod
 {

45 *
	mm_p–še_duty_cyşe
[
NUM_STAT_IDX
];

46 *
	mm_num_decoded_š¢
[
NUM_STAT_IDX
];

47 *
	mm_num_FPdecoded_š¢
[
NUM_STAT_IDX
];

48 *
	mm_num_INTdecoded_š¢
[
NUM_STAT_IDX
];

49 *
	mm_num_¡Üequeued_š¢
[
NUM_STAT_IDX
];

50 *
	mm_num_lßdqueued_š¢
[
NUM_STAT_IDX
];

51 *
	mm_num_Ÿlu_aûs£s
[
NUM_STAT_IDX
];

52 *
	mm_num_å_aûs£s
[
NUM_STAT_IDX
];

53 *
	mm_num_‹x_š¡
[
NUM_STAT_IDX
];

54 *
	mm_num_imul_aûs£s
[
NUM_STAT_IDX
];

55 *
	mm_num_imul32_aûs£s
[
NUM_STAT_IDX
];

56 *
	mm_num_imul24_aûs£s
[
NUM_STAT_IDX
];

57 *
	mm_num_åmul_aûs£s
[
NUM_STAT_IDX
];

58 *
	mm_num_idiv_aûs£s
[
NUM_STAT_IDX
];

59 *
	mm_num_ådiv_aûs£s
[
NUM_STAT_IDX
];

60 *
	mm_num_¥_aûs£s
[
NUM_STAT_IDX
];

61 *
	mm_num_sfu_aûs£s
[
NUM_STAT_IDX
];

62 *
	mm_num_Œªs_aûs£s
[
NUM_STAT_IDX
];

63 *
	mm_num_mem_aûs£s
[
NUM_STAT_IDX
];

64 *
	mm_num_¥_comm™‹d
[
NUM_STAT_IDX
];

65 *
	mm_num_sfu_comm™‹d
[
NUM_STAT_IDX
];

66 *
	mm_num_mem_comm™‹d
[
NUM_STAT_IDX
];

67 *
	mm_aùive_¥_ÏÃs
[
NUM_STAT_IDX
];

68 *
	mm_aùive_sfu_ÏÃs
[
NUM_STAT_IDX
];

69 *
	mm_»ad_»gfe_aûs£s
[
NUM_STAT_IDX
];

70 *
	mm_wr™e_»gfe_aûs£s
[
NUM_STAT_IDX
];

71 *
	mm_nÚ_rf_İ”ªds
[
NUM_STAT_IDX
];

74 şas 
	cpow”_cÜe_¡©_t
 : 
public
 
shad”_cÜe_pow”_¡©s_pod
 {

75 
public
:

76 
pow”_cÜe_¡©_t
(cÚ¡ 
shad”_cÜe_cÚfig
 *
shad”_cÚfig
, 
shad”_cÜe_¡©s
 *
cÜe_¡©s
);

77 
visu®iz”_´št
Ğ
gzFe
 
visu®iz”_fe
 );

78 
´št
 (
FILE
 *
fout
);

79 
š™
();

80 
§ve_¡©s
();

82 
	m´iv©e
:

83 
shad”_cÜe_¡©s
 * 
m_cÜe_¡©s
;

84 cÚ¡ 
shad”_cÜe_cÚfig
 *
	mm_cÚfig
;

85 
	mav”age_duty_cyşe
;

90 
	smem_pow”_¡©s_pod
{

92 
şass
 
ÿche_¡©s
 
	mcÜe_ÿche_¡©s
[
NUM_STAT_IDX
];

93 
şass
 
ÿche_¡©s
 
	ml2_ÿche_¡©s
[
NUM_STAT_IDX
];

95 *
	mshmem_»ad_acûss
[
NUM_STAT_IDX
];

98 *
	mn_cmd
[
NUM_STAT_IDX
];

99 *
	mn_aùiv™y
[
NUM_STAT_IDX
];

100 *
	mn_nİ
[
NUM_STAT_IDX
];

101 *
	mn_aù
[
NUM_STAT_IDX
];

102 *
	mn_´e
[
NUM_STAT_IDX
];

103 *
	mn_rd
[
NUM_STAT_IDX
];

104 *
	mn_wr
[
NUM_STAT_IDX
];

105 *
	mn_»q
[
NUM_STAT_IDX
];

108 *
	mn_simt_to_mem
[
NUM_STAT_IDX
];

109 *
	mn_mem_to_simt
[
NUM_STAT_IDX
];

114 şas 
	cpow”_mem_¡©_t
 : 
public
 
mem_pow”_¡©s_pod
{

115 
public
:

116 
pow”_mem_¡©_t
(cÚ¡ 
memÜy_cÚfig
 *
mem_cÚfig
, cÚ¡ 
shad”_cÜe_cÚfig
 *
shdr_cÚfig
, 
memÜy_¡©s_t
 *
mem_¡©s
, 
shad”_cÜe_¡©s
 *
shdr_¡©s
);

117 
visu®iz”_´št
Ğ
gzFe
 
visu®iz”_fe
 );

118 
	$´št
 (
FILE
 *
fout
) const;

119 
	`š™
();

120 
	`§ve_¡©s
();

121 
´iv©e
:

122 
memÜy_¡©s_t
 *
m_mem_¡©s
;

123 
shad”_cÜe_¡©s
 * 
m_cÜe_¡©s
;

124 cÚ¡ 
memÜy_cÚfig
 *
m_cÚfig
;

125 cÚ¡ 
shad”_cÜe_cÚfig
 *
m_cÜe_cÚfig
;

129 şas 
	cpow”_¡©_t
 {

130 
public
:

131 
	`pow”_¡©_t
ĞcÚ¡ 
shad”_cÜe_cÚfig
 *
shad”_cÚfig
,* 
av”age_p–še_duty_cyşe
,* 
aùive_sms
,
shad”_cÜe_¡©s
 * 
shad”_¡©s
, cÚ¡ 
memÜy_cÚfig
 *
mem_cÚfig
,
memÜy_¡©s_t
 * 
memÜy_¡©s
);

132 
	`visu®iz”_´št
Ğ
gzFe
 
visu®iz”_fe
 );

133 
	$´št
 (
FILE
 *
fout
) const;

134 
	$§ve_¡©s
(){

135 
pwr_cÜe_¡©
->
	`§ve_¡©s
();

136 
pwr_mem_¡©
->
	`§ve_¡©s
();

137 *
m_av”age_p–še_duty_cyşe
=0;

138 *
m_aùive_sms
=0;

141 
	$g‘_tÙ®_š¡
(){

142 
tÙ®_š¡
=0;

143 
i
=0; i<
m_cÚfig
->
	`num_shad”
();i++){

144 
tÙ®_š¡
+=(
pwr_cÜe_¡©
->
m_num_decoded_š¢
[
CURRENT_STAT_IDX
][
i
]è- (pwr_cÜe_¡©->m_num_decoded_š¢[
PREV_STAT_IDX
][i]);

146  
tÙ®_š¡
;

147 
	}
}

148 
	$g‘_tÙ®_št_š¡
(){

149 
tÙ®_š¡
=0;

150 
i
=0; i<
m_cÚfig
->
	`num_shad”
();i++){

151 
tÙ®_š¡
+=(
pwr_cÜe_¡©
->
m_num_INTdecoded_š¢
[
CURRENT_STAT_IDX
][
i
]è- (pwr_cÜe_¡©->m_num_INTdecoded_š¢[
PREV_STAT_IDX
][i]);

153  
tÙ®_š¡
;

154 
	}
}

155 
	$g‘_tÙ®_å_š¡
(){

156 
tÙ®_š¡
=0;

157 
i
=0; i<
m_cÚfig
->
	`num_shad”
();i++){

158 
tÙ®_š¡
+=(
pwr_cÜe_¡©
->
m_num_FPdecoded_š¢
[
CURRENT_STAT_IDX
][
i
]è- (pwr_cÜe_¡©->m_num_FPdecoded_š¢[
PREV_STAT_IDX
][i]);

160  
tÙ®_š¡
;

161 
	}
}

162 
	$g‘_tÙ®_lßd_š¡
(){

163 
tÙ®_š¡
=0;

164 
i
=0; i<
m_cÚfig
->
	`num_shad”
();i++){

165 
tÙ®_š¡
+=(
pwr_cÜe_¡©
->
m_num_lßdqueued_š¢
[
CURRENT_STAT_IDX
][
i
]è- (pwr_cÜe_¡©->m_num_lßdqueued_š¢[
PREV_STAT_IDX
][i]);

167  
tÙ®_š¡
;

168 
	}
}

169 
	$g‘_tÙ®_¡Üe_š¡
(){

170 
tÙ®_š¡
=0;

171 
i
=0; i<
m_cÚfig
->
	`num_shad”
();i++){

172 
tÙ®_š¡
+=(
pwr_cÜe_¡©
->
m_num_¡Üequeued_š¢
[
CURRENT_STAT_IDX
][
i
]è- (pwr_cÜe_¡©->m_num_¡Üequeued_š¢[
PREV_STAT_IDX
][i]);

174  
tÙ®_š¡
;

175 
	}
}

176 
	$g‘_¥_comm™‹d_š¡
(){

177 
tÙ®_š¡
=0;

178 
i
=0; i<
m_cÚfig
->
	`num_shad”
();i++){

179 
tÙ®_š¡
+=(
pwr_cÜe_¡©
->
m_num_¥_comm™‹d
[
CURRENT_STAT_IDX
][
i
]è- (pwr_cÜe_¡©->m_num_¥_comm™‹d[
PREV_STAT_IDX
][i]);

181  
tÙ®_š¡
;

182 
	}
}

183 
	$g‘_sfu_comm™‹d_š¡
(){

184 
tÙ®_š¡
=0;

185 
i
=0; i<
m_cÚfig
->
	`num_shad”
();i++){

186 
tÙ®_š¡
+=(
pwr_cÜe_¡©
->
m_num_sfu_comm™‹d
[
CURRENT_STAT_IDX
][
i
]è- (pwr_cÜe_¡©->m_num_sfu_comm™‹d[
PREV_STAT_IDX
][i]);

188  
tÙ®_š¡
;

189 
	}
}

190 
	$g‘_mem_comm™‹d_š¡
(){

191 
tÙ®_š¡
=0;

192 
i
=0; i<
m_cÚfig
->
	`num_shad”
();i++){

193 
tÙ®_š¡
+=(
pwr_cÜe_¡©
->
m_num_mem_comm™‹d
[
CURRENT_STAT_IDX
][
i
]è- (pwr_cÜe_¡©->m_num_mem_comm™‹d[
PREV_STAT_IDX
][i]);

195  
tÙ®_š¡
;

196 
	}
}

197 
	$g‘_comm™‹d_š¡
(){

198 
tÙ®_š¡
=0;

199 
i
=0; i<
m_cÚfig
->
	`num_shad”
();i++){

200 
tÙ®_š¡
+=(
pwr_cÜe_¡©
->
m_num_mem_comm™‹d
[
CURRENT_STAT_IDX
][
i
]è- (pwr_cÜe_¡©->m_num_mem_comm™‹d[
PREV_STAT_IDX
][i])

201 +(
pwr_cÜe_¡©
->
m_num_sfu_comm™‹d
[
CURRENT_STAT_IDX
][
i
]è- (pwr_cÜe_¡©->m_num_sfu_comm™‹d[
PREV_STAT_IDX
][i])

202 +(
pwr_cÜe_¡©
->
m_num_¥_comm™‹d
[
CURRENT_STAT_IDX
][
i
]è- (pwr_cÜe_¡©->m_num_¥_comm™‹d[
PREV_STAT_IDX
][i]);

204  
tÙ®_š¡
;

205 
	}
}

206 
	$g‘_»gfe_»ads
(){

207 
tÙ®_š¡
=0;

208 
i
=0; i<
m_cÚfig
->
	`num_shad”
();i++){

209 
tÙ®_š¡
+=(
pwr_cÜe_¡©
->
m_»ad_»gfe_aûs£s
[
CURRENT_STAT_IDX
][
i
]è- (pwr_cÜe_¡©->m_»ad_»gfe_aûs£s[
PREV_STAT_IDX
][i]);

211  
tÙ®_š¡
;

212 
	}
}

213 
	$g‘_»gfe_wr™es
(){

214 
tÙ®_š¡
=0;

215 
i
=0; i<
m_cÚfig
->
	`num_shad”
();i++){

216 
tÙ®_š¡
+=(
pwr_cÜe_¡©
->
m_wr™e_»gfe_aûs£s
[
CURRENT_STAT_IDX
][
i
]è- (pwr_cÜe_¡©->m_wr™e_»gfe_aûs£s[
PREV_STAT_IDX
][i]);

218  
tÙ®_š¡
;

219 
	}
}

221 
	$g‘_p–še_duty
(){

222 
tÙ®_š¡
=0;

223 
i
=0; i<
m_cÚfig
->
	`num_shad”
();i++){

224 
tÙ®_š¡
+=(
pwr_cÜe_¡©
->
m_p–še_duty_cyşe
[
CURRENT_STAT_IDX
][
i
]è- (pwr_cÜe_¡©->m_p–še_duty_cyşe[
PREV_STAT_IDX
][i]);

226  
tÙ®_š¡
;

227 
	}
}

229 
	$g‘_nÚ_»gfe_İ”ªds
(){

230 
tÙ®_š¡
=0;

231 
i
=0; i<
m_cÚfig
->
	`num_shad”
();i++){

232 
tÙ®_š¡
+=(
pwr_cÜe_¡©
->
m_nÚ_rf_İ”ªds
[
CURRENT_STAT_IDX
][
i
]è- (pwr_cÜe_¡©->m_nÚ_rf_İ”ªds[
PREV_STAT_IDX
][i]);

234  
tÙ®_š¡
;

235 
	}
}

237 
	$g‘_¥_acûs£ss
(){

238 
tÙ®_š¡
=0;

239 
i
=0; i<
m_cÚfig
->
	`num_shad”
();i++){

240 
tÙ®_š¡
+=(
pwr_cÜe_¡©
->
m_num_¥_aûs£s
[
CURRENT_STAT_IDX
][
i
]è- (pwr_cÜe_¡©->m_num_¥_aûs£s[
PREV_STAT_IDX
][i]);

242  
tÙ®_š¡
;

243 
	}
}

245 
	$g‘_sfu_acûs£ss
(){

246 
tÙ®_š¡
=0;

247 
i
=0; i<
m_cÚfig
->
	`num_shad”
();i++){

248 
tÙ®_š¡
+=(
pwr_cÜe_¡©
->
m_num_sfu_aûs£s
[
CURRENT_STAT_IDX
][
i
]è- (pwr_cÜe_¡©->m_num_sfu_aûs£s[
PREV_STAT_IDX
][i]);

250  
tÙ®_š¡
;

251 
	}
}

252 
	$g‘_Œªs_acûs£ss
(){

253 
tÙ®_š¡
=0;

254 
i
=0; i<
m_cÚfig
->
	`num_shad”
();i++){

255 
tÙ®_š¡
+=(
pwr_cÜe_¡©
->
m_num_Œªs_aûs£s
[
CURRENT_STAT_IDX
][
i
]è- (pwr_cÜe_¡©->m_num_Œªs_aûs£s[
PREV_STAT_IDX
][i]);

257  
tÙ®_š¡
;

258 
	}
}

260 
	$g‘_mem_acûs£ss
(){

261 
tÙ®_š¡
=0;

262 
i
=0; i<
m_cÚfig
->
	`num_shad”
();i++){

263 
tÙ®_š¡
+=(
pwr_cÜe_¡©
->
m_num_mem_aûs£s
[
CURRENT_STAT_IDX
][
i
]è- (pwr_cÜe_¡©->m_num_mem_aûs£s[
PREV_STAT_IDX
][i]);

265  
tÙ®_š¡
;

266 
	}
}

268 
	$g‘_štdiv_acûs£ss
(){

269 
tÙ®_š¡
=0;

270 
i
=0; i<
m_cÚfig
->
	`num_shad”
();i++){

271 
tÙ®_š¡
+=(
pwr_cÜe_¡©
->
m_num_idiv_aûs£s
[
CURRENT_STAT_IDX
][
i
]è- (pwr_cÜe_¡©->m_num_idiv_aûs£s[
PREV_STAT_IDX
][i]);

273  
tÙ®_š¡
;

274 
	}
}

276 
	$g‘_ådiv_acûs£ss
(){

277 
tÙ®_š¡
=0;

278 
i
=0; i<
m_cÚfig
->
	`num_shad”
();i++){

279 
tÙ®_š¡
+=(
pwr_cÜe_¡©
->
m_num_ådiv_aûs£s
[
CURRENT_STAT_IDX
][
i
]è- (pwr_cÜe_¡©->m_num_ådiv_aûs£s[
PREV_STAT_IDX
][i]);

281  
tÙ®_š¡
;

282 
	}
}

284 
	$g‘_štmul32_acûs£ss
(){

285 
tÙ®_š¡
=0;

286 
i
=0; i<
m_cÚfig
->
	`num_shad”
();i++){

287 
tÙ®_š¡
+=(
pwr_cÜe_¡©
->
m_num_imul32_aûs£s
[
CURRENT_STAT_IDX
][
i
]è- (pwr_cÜe_¡©->m_num_imul32_aûs£s[
PREV_STAT_IDX
][i]);

289  
tÙ®_š¡
;

290 
	}
}

292 
	$g‘_štmul24_acûs£ss
(){

293 
tÙ®_š¡
=0;

294 
i
=0; i<
m_cÚfig
->
	`num_shad”
();i++){

295 
tÙ®_š¡
+=(
pwr_cÜe_¡©
->
m_num_imul24_aûs£s
[
CURRENT_STAT_IDX
][
i
]è- (pwr_cÜe_¡©->m_num_imul24_aûs£s[
PREV_STAT_IDX
][i]);

297  
tÙ®_š¡
;

298 
	}
}

300 
	$g‘_štmul_acûs£ss
(){

301 
tÙ®_š¡
=0;

302 
i
=0; i<
m_cÚfig
->
	`num_shad”
();i++){

303 
tÙ®_š¡
+=(
pwr_cÜe_¡©
->
m_num_imul_aûs£s
[
CURRENT_STAT_IDX
][
i
]è- (pwr_cÜe_¡©->m_num_imul_aûs£s[
PREV_STAT_IDX
][i])+

304 (
pwr_cÜe_¡©
->
m_num_imul24_aûs£s
[
CURRENT_STAT_IDX
][
i
]è- (pwr_cÜe_¡©->m_num_imul24_aûs£s[
PREV_STAT_IDX
][i])+

305 (
pwr_cÜe_¡©
->
m_num_imul32_aûs£s
[
CURRENT_STAT_IDX
][
i
]è- (pwr_cÜe_¡©->m_num_imul32_aûs£s[
PREV_STAT_IDX
][i]);

307  
tÙ®_š¡
;

308 
	}
}

310 
	$g‘_åmul_acûs£ss
(){

311 
tÙ®_š¡
=0;

312 
i
=0; i<
m_cÚfig
->
	`num_shad”
();i++){

313 
tÙ®_š¡
+=(
pwr_cÜe_¡©
->
m_num_å_aûs£s
[
CURRENT_STAT_IDX
][
i
]è- (pwr_cÜe_¡©->m_num_å_aûs£s[
PREV_STAT_IDX
][i]);

315  
tÙ®_š¡
;

316 
	}
}

318 
	$g‘_¥_aùive_ÏÃs
(){

319 
tÙ®_š¡
=0;

320 
i
=0; i<
m_cÚfig
->
	`num_shad”
();i++){

321 
tÙ®_š¡
+=(
pwr_cÜe_¡©
->
m_aùive_¥_ÏÃs
[
CURRENT_STAT_IDX
][
i
]è- (pwr_cÜe_¡©->m_aùive_¥_ÏÃs[
PREV_STAT_IDX
][i]);

323  (
tÙ®_š¡
/
m_cÚfig
->
	`num_shad”
())/m_cÚfig->
gpgpu_num_¥_un™s
;

324 
	}
}

326 
	$g‘_sfu_aùive_ÏÃs
(){

327 
tÙ®_š¡
=0;

328 
i
=0; i<
m_cÚfig
->
	`num_shad”
();i++){

329 
tÙ®_š¡
+=(
pwr_cÜe_¡©
->
m_aùive_sfu_ÏÃs
[
CURRENT_STAT_IDX
][
i
]è- (pwr_cÜe_¡©->m_aùive_sfu_ÏÃs[
PREV_STAT_IDX
][i]);

332  (
tÙ®_š¡
/
m_cÚfig
->
	`num_shad”
())/m_cÚfig->
gpgpu_num_sfu_un™s
;

333 
	}
}

335 
	$g‘_tÙ_åu_acûs£ss
(){

336 
tÙ®_š¡
=0;

337 
i
=0; i<
m_cÚfig
->
	`num_shad”
();i++){

338 
tÙ®_š¡
+=(
pwr_cÜe_¡©
->
m_num_å_aûs£s
[
CURRENT_STAT_IDX
][
i
]è- (pwr_cÜe_¡©->m_num_å_aûs£s[
PREV_STAT_IDX
][i])+

339 (
pwr_cÜe_¡©
->
m_num_ådiv_aûs£s
[
CURRENT_STAT_IDX
][
i
]è- (pwr_cÜe_¡©->m_num_ådiv_aûs£s[
PREV_STAT_IDX
][i])+

340 (
pwr_cÜe_¡©
->
m_num_åmul_aûs£s
[
CURRENT_STAT_IDX
][
i
]è- (pwr_cÜe_¡©->m_num_åmul_aûs£s[
PREV_STAT_IDX
][i])+

341 (
pwr_cÜe_¡©
->
m_num_imul24_aûs£s
[
CURRENT_STAT_IDX
][
i
]è- (pwr_cÜe_¡©->m_num_imul24_aûs£s[
PREV_STAT_IDX
][i])+

342 (
pwr_cÜe_¡©
->
m_num_imul_aûs£s
[
CURRENT_STAT_IDX
][
i
]è- (pwr_cÜe_¡©->m_num_imul_aûs£s[
PREV_STAT_IDX
][i]);

344 
tÙ®_š¡
 +ğ
	`g‘_tÙ®_lßd_š¡
()+
	`g‘_tÙ®_¡Üe_š¡
()+
	`g‘_‹x_š¡
();

345  
tÙ®_š¡
;

346 
	}
}

348 
	$g‘_tÙ_sfu_acûs£ss
(){

349 
tÙ®_š¡
=0;

350 
i
=0; i<
m_cÚfig
->
	`num_shad”
();i++){

351 
tÙ®_š¡
+ğ(
pwr_cÜe_¡©
->
m_num_idiv_aûs£s
[
CURRENT_STAT_IDX
][
i
]è- (pwr_cÜe_¡©->m_num_idiv_aûs£s[
PREV_STAT_IDX
][i])+

352 (
pwr_cÜe_¡©
->
m_num_imul32_aûs£s
[
CURRENT_STAT_IDX
][
i
]è- (pwr_cÜe_¡©->m_num_imul32_aûs£s[
PREV_STAT_IDX
][i])+

353 (
pwr_cÜe_¡©
->
m_num_Œªs_aûs£s
[
CURRENT_STAT_IDX
][
i
]è- (pwr_cÜe_¡©->m_num_Œªs_aûs£s[
PREV_STAT_IDX
][i]);

355  
tÙ®_š¡
;

356 
	}
}

358 
	$g‘_Ÿlu_acûs£ss
(){

359 
tÙ®_š¡
=0;

360 
i
=0; i<
m_cÚfig
->
	`num_shad”
();i++){

361 
tÙ®_š¡
+=(
pwr_cÜe_¡©
->
m_num_Ÿlu_aûs£s
[
CURRENT_STAT_IDX
][
i
]è- (pwr_cÜe_¡©->m_num_Ÿlu_aûs£s[
PREV_STAT_IDX
][i]);

363  
tÙ®_š¡
;

364 
	}
}

366 
	$g‘_‹x_š¡
(){

367 
tÙ®_š¡
=0;

368 
i
=0; i<
m_cÚfig
->
	`num_shad”
();i++){

369 
tÙ®_š¡
+=(
pwr_cÜe_¡©
->
m_num_‹x_š¡
[
CURRENT_STAT_IDX
][
i
]è- (pwr_cÜe_¡©->m_num_‹x_š¡[
PREV_STAT_IDX
][i]);

371  
tÙ®_š¡
;

372 
	}
}

374 
	$g‘_cÚ¡ªt_c_acûs£s
(){

375 
mem_acûss_ty³
 
acûss_ty³
[] = {
CONST_ACC_R
};

376 
ÿche_»que¡_¡©us
 
»que¡_¡©us
[] = {
HIT
, 
MISS
, 
HIT_RESERVED
};

377 
num_acûss_ty³
 = (
acûss_ty³
)/(
mem_acûss_ty³
);

378 
num_»que¡_¡©us
 = (
»que¡_¡©us
)/(
ÿche_»que¡_¡©us
);

380  (
pwr_mem_¡©
->
cÜe_ÿche_¡©s
[
CURRENT_STAT_IDX
].
	`g‘_¡©s
(
acûss_ty³
, 
num_acûss_ty³
, 
»que¡_¡©us
, 
num_»que¡_¡©us
)) -

381 (
pwr_mem_¡©
->
cÜe_ÿche_¡©s
[
PREV_STAT_IDX
].
	`g‘_¡©s
(
acûss_ty³
, 
num_acûss_ty³
, 
»que¡_¡©us
, 
num_»que¡_¡©us
));

382 
	}
}

383 
	$g‘_cÚ¡ªt_c_mis£s
(){

384 
mem_acûss_ty³
 
acûss_ty³
[] = {
CONST_ACC_R
};

385 
ÿche_»que¡_¡©us
 
»que¡_¡©us
[] = {
MISS
};

386 
num_acûss_ty³
 = (
acûss_ty³
)/(
mem_acûss_ty³
);

387 
num_»que¡_¡©us
 = (
»que¡_¡©us
)/(
ÿche_»que¡_¡©us
);

389  (
pwr_mem_¡©
->
cÜe_ÿche_¡©s
[
CURRENT_STAT_IDX
].
	`g‘_¡©s
(
acûss_ty³
, 
num_acûss_ty³
, 
»que¡_¡©us
, 
num_»que¡_¡©us
)) -

390 (
pwr_mem_¡©
->
cÜe_ÿche_¡©s
[
PREV_STAT_IDX
].
	`g‘_¡©s
(
acûss_ty³
, 
num_acûss_ty³
, 
»que¡_¡©us
, 
num_»que¡_¡©us
));

391 
	}
}

392 
	$g‘_cÚ¡ªt_c_h™s
(){

393  (
	`g‘_cÚ¡ªt_c_acûs£s
()-
	`g‘_cÚ¡ªt_c_mis£s
());

394 
	}
}

395 
	$g‘_‹xtu»_c_acûs£s
(){

396 
mem_acûss_ty³
 
acûss_ty³
[] = {
TEXTURE_ACC_R
};

397 
ÿche_»que¡_¡©us
 
»que¡_¡©us
[] = {
HIT
, 
MISS
, 
HIT_RESERVED
};

398 
num_acûss_ty³
 = (
acûss_ty³
)/(
mem_acûss_ty³
);

399 
num_»que¡_¡©us
 = (
»que¡_¡©us
)/(
ÿche_»que¡_¡©us
);

401  (
pwr_mem_¡©
->
cÜe_ÿche_¡©s
[
CURRENT_STAT_IDX
].
	`g‘_¡©s
(
acûss_ty³
, 
num_acûss_ty³
, 
»que¡_¡©us
, 
num_»que¡_¡©us
)) -

402 (
pwr_mem_¡©
->
cÜe_ÿche_¡©s
[
PREV_STAT_IDX
].
	`g‘_¡©s
(
acûss_ty³
, 
num_acûss_ty³
, 
»que¡_¡©us
, 
num_»que¡_¡©us
));

403 
	}
}

404 
	$g‘_‹xtu»_c_mis£s
(){

405 
mem_acûss_ty³
 
acûss_ty³
[] = {
TEXTURE_ACC_R
};

406 
ÿche_»que¡_¡©us
 
»que¡_¡©us
[] = {
MISS
};

407 
num_acûss_ty³
 = (
acûss_ty³
)/(
mem_acûss_ty³
);

408 
num_»que¡_¡©us
 = (
»que¡_¡©us
)/(
ÿche_»que¡_¡©us
);

410  (
pwr_mem_¡©
->
cÜe_ÿche_¡©s
[
CURRENT_STAT_IDX
].
	`g‘_¡©s
(
acûss_ty³
, 
num_acûss_ty³
, 
»que¡_¡©us
, 
num_»que¡_¡©us
)) -

411 (
pwr_mem_¡©
->
cÜe_ÿche_¡©s
[
PREV_STAT_IDX
].
	`g‘_¡©s
(
acûss_ty³
, 
num_acûss_ty³
, 
»que¡_¡©us
, 
num_»que¡_¡©us
));

412 
	}
}

413 
	$g‘_‹xtu»_c_h™s
(){

414  ( 
	`g‘_‹xtu»_c_acûs£s
()- 
	`g‘_‹xtu»_c_mis£s
());

415 
	}
}

416 
	$g‘_š¡_c_acûs£s
(){

417 
mem_acûss_ty³
 
acûss_ty³
[] = {
INST_ACC_R
};

418 
ÿche_»que¡_¡©us
 
»que¡_¡©us
[] = {
HIT
, 
MISS
, 
HIT_RESERVED
};

419 
num_acûss_ty³
 = (
acûss_ty³
)/(
mem_acûss_ty³
);

420 
num_»que¡_¡©us
 = (
»que¡_¡©us
)/(
ÿche_»que¡_¡©us
);

422  (
pwr_mem_¡©
->
cÜe_ÿche_¡©s
[
CURRENT_STAT_IDX
].
	`g‘_¡©s
(
acûss_ty³
, 
num_acûss_ty³
, 
»que¡_¡©us
, 
num_»que¡_¡©us
)) -

423 (
pwr_mem_¡©
->
cÜe_ÿche_¡©s
[
PREV_STAT_IDX
].
	`g‘_¡©s
(
acûss_ty³
, 
num_acûss_ty³
, 
»que¡_¡©us
, 
num_»que¡_¡©us
));

424 
	}
}

425 
	$g‘_š¡_c_mis£s
(){

426 
mem_acûss_ty³
 
acûss_ty³
[] = {
INST_ACC_R
};

427 
ÿche_»que¡_¡©us
 
»que¡_¡©us
[] = {
MISS
};

428 
num_acûss_ty³
 = (
acûss_ty³
)/(
mem_acûss_ty³
);

429 
num_»que¡_¡©us
 = (
»que¡_¡©us
)/(
ÿche_»que¡_¡©us
);

431  (
pwr_mem_¡©
->
cÜe_ÿche_¡©s
[
CURRENT_STAT_IDX
].
	`g‘_¡©s
(
acûss_ty³
, 
num_acûss_ty³
, 
»que¡_¡©us
, 
num_»que¡_¡©us
)) -

432 (
pwr_mem_¡©
->
cÜe_ÿche_¡©s
[
PREV_STAT_IDX
].
	`g‘_¡©s
(
acûss_ty³
, 
num_acûss_ty³
, 
»que¡_¡©us
, 
num_»que¡_¡©us
));

433 
	}
}

434 
	$g‘_š¡_c_h™s
(){

435  (
	`g‘_š¡_c_acûs£s
()-
	`g‘_š¡_c_mis£s
());

436 
	}
}

438 
	$g‘_l1d_»ad_acûs£s
(){

439 
mem_acûss_ty³
 
acûss_ty³
[] = {
GLOBAL_ACC_R
, 
LOCAL_ACC_R
};

440 
ÿche_»que¡_¡©us
 
»que¡_¡©us
[] = {
HIT
, 
MISS
, 
HIT_RESERVED
};

441 
num_acûss_ty³
 = (
acûss_ty³
)/(
mem_acûss_ty³
);

442 
num_»que¡_¡©us
 = (
»que¡_¡©us
)/(
ÿche_»que¡_¡©us
);

444  (
pwr_mem_¡©
->
cÜe_ÿche_¡©s
[
CURRENT_STAT_IDX
].
	`g‘_¡©s
(
acûss_ty³
, 
num_acûss_ty³
, 
»que¡_¡©us
, 
num_»que¡_¡©us
)) -

445 (
pwr_mem_¡©
->
cÜe_ÿche_¡©s
[
PREV_STAT_IDX
].
	`g‘_¡©s
(
acûss_ty³
, 
num_acûss_ty³
, 
»que¡_¡©us
, 
num_»que¡_¡©us
));

446 
	}
}

447 
	$g‘_l1d_»ad_mis£s
(){

448 
mem_acûss_ty³
 
acûss_ty³
[] = {
GLOBAL_ACC_R
, 
LOCAL_ACC_R
};

449 
ÿche_»que¡_¡©us
 
»que¡_¡©us
[] = {
MISS
};

450 
num_acûss_ty³
 = (
acûss_ty³
)/(
mem_acûss_ty³
);

451 
num_»que¡_¡©us
 = (
»que¡_¡©us
)/(
ÿche_»que¡_¡©us
);

453  (
pwr_mem_¡©
->
cÜe_ÿche_¡©s
[
CURRENT_STAT_IDX
].
	`g‘_¡©s
(
acûss_ty³
, 
num_acûss_ty³
, 
»que¡_¡©us
, 
num_»que¡_¡©us
)) -

454 (
pwr_mem_¡©
->
cÜe_ÿche_¡©s
[
PREV_STAT_IDX
].
	`g‘_¡©s
(
acûss_ty³
, 
num_acûss_ty³
, 
»que¡_¡©us
, 
num_»que¡_¡©us
));

455 
	}
}

456 
	$g‘_l1d_»ad_h™s
(){

457  (
	`g‘_l1d_»ad_acûs£s
()-
	`g‘_l1d_»ad_mis£s
());

458 
	}
}

459 
	$g‘_l1d_wr™e_acûs£s
(){

460 
mem_acûss_ty³
 
acûss_ty³
[] = {
GLOBAL_ACC_W
, 
LOCAL_ACC_W
};

461 
ÿche_»que¡_¡©us
 
»que¡_¡©us
[] = {
HIT
, 
MISS
, 
HIT_RESERVED
};

462 
num_acûss_ty³
 = (
acûss_ty³
)/(
mem_acûss_ty³
);

463 
num_»que¡_¡©us
 = (
»que¡_¡©us
)/(
ÿche_»que¡_¡©us
);

465  (
pwr_mem_¡©
->
cÜe_ÿche_¡©s
[
CURRENT_STAT_IDX
].
	`g‘_¡©s
(
acûss_ty³
, 
num_acûss_ty³
, 
»que¡_¡©us
, 
num_»que¡_¡©us
)) -

466 (
pwr_mem_¡©
->
cÜe_ÿche_¡©s
[
PREV_STAT_IDX
].
	`g‘_¡©s
(
acûss_ty³
, 
num_acûss_ty³
, 
»que¡_¡©us
, 
num_»que¡_¡©us
));

467 
	}
}

468 
	$g‘_l1d_wr™e_mis£s
(){

469 
mem_acûss_ty³
 
acûss_ty³
[] = {
GLOBAL_ACC_W
, 
LOCAL_ACC_W
};

470 
ÿche_»que¡_¡©us
 
»que¡_¡©us
[] = {
MISS
};

471 
num_acûss_ty³
 = (
acûss_ty³
)/(
mem_acûss_ty³
);

472 
num_»que¡_¡©us
 = (
»que¡_¡©us
)/(
ÿche_»que¡_¡©us
);

474  (
pwr_mem_¡©
->
cÜe_ÿche_¡©s
[
CURRENT_STAT_IDX
].
	`g‘_¡©s
(
acûss_ty³
, 
num_acûss_ty³
, 
»que¡_¡©us
, 
num_»que¡_¡©us
)) -

475 (
pwr_mem_¡©
->
cÜe_ÿche_¡©s
[
PREV_STAT_IDX
].
	`g‘_¡©s
(
acûss_ty³
, 
num_acûss_ty³
, 
»que¡_¡©us
, 
num_»que¡_¡©us
));

476 
	}
}

477 
	$g‘_l1d_wr™e_h™s
(){

478  (
	`g‘_l1d_wr™e_acûs£s
()-
	`g‘_l1d_wr™e_mis£s
());

479 
	}
}

480 
	$g‘_ÿche_mis£s
(){

481  
	`g‘_l1d_»ad_mis£s
()+
	`g‘_cÚ¡ªt_c_mis£s
()+
	`g‘_l1d_wr™e_mis£s
()+
	`g‘_‹xtu»_c_mis£s
();

482 
	}
}

484 
	$g‘_ÿche_»ad_mis£s
(){

485  
	`g‘_l1d_»ad_mis£s
()+
	`g‘_cÚ¡ªt_c_mis£s
()+
	`g‘_‹xtu»_c_mis£s
();

486 
	}
}

488 
	$g‘_ÿche_wr™e_mis£s
(){

489  
	`g‘_l1d_wr™e_mis£s
();

490 
	}
}

492 
	$g‘_shmem_»ad_acûss
(){

493 
tÙ®_š¡
=0;

494 
i
=0; i<
m_cÚfig
->
	`num_shad”
();i++){

495 
tÙ®_š¡
+=(
pwr_mem_¡©
->
shmem_»ad_acûss
[
CURRENT_STAT_IDX
][
i
]è- (pwr_mem_¡©->shmem_»ad_acûss[
PREV_STAT_IDX
][i]);

497  
tÙ®_š¡
;

498 
	}
}

500 
	$g‘_l2_»ad_acûs£s
(){

501 
mem_acûss_ty³
 
acûss_ty³
[] = {
GLOBAL_ACC_R
, 
LOCAL_ACC_R
, 
CONST_ACC_R
, 
TEXTURE_ACC_R
, 
INST_ACC_R
};

502 
ÿche_»que¡_¡©us
 
»que¡_¡©us
[] = {
HIT
, 
MISS
, 
HIT_RESERVED
};

503 
num_acûss_ty³
 = (
acûss_ty³
)/(
mem_acûss_ty³
);

504 
num_»que¡_¡©us
 = (
»que¡_¡©us
)/(
ÿche_»que¡_¡©us
);

506  (
pwr_mem_¡©
->
l2_ÿche_¡©s
[
CURRENT_STAT_IDX
].
	`g‘_¡©s
(
acûss_ty³
, 
num_acûss_ty³
, 
»que¡_¡©us
, 
num_»que¡_¡©us
)) -

507 (
pwr_mem_¡©
->
l2_ÿche_¡©s
[
PREV_STAT_IDX
].
	`g‘_¡©s
(
acûss_ty³
, 
num_acûss_ty³
, 
»que¡_¡©us
, 
num_»que¡_¡©us
));

508 
	}
}

510 
	$g‘_l2_»ad_mis£s
(){

511 
mem_acûss_ty³
 
acûss_ty³
[] = {
GLOBAL_ACC_R
, 
LOCAL_ACC_R
, 
CONST_ACC_R
, 
TEXTURE_ACC_R
, 
INST_ACC_R
};

512 
ÿche_»que¡_¡©us
 
»que¡_¡©us
[] = {
MISS
};

513 
num_acûss_ty³
 = (
acûss_ty³
)/(
mem_acûss_ty³
);

514 
num_»que¡_¡©us
 = (
»que¡_¡©us
)/(
ÿche_»que¡_¡©us
);

516  (
pwr_mem_¡©
->
l2_ÿche_¡©s
[
CURRENT_STAT_IDX
].
	`g‘_¡©s
(
acûss_ty³
, 
num_acûss_ty³
, 
»que¡_¡©us
, 
num_»que¡_¡©us
)) -

517 (
pwr_mem_¡©
->
l2_ÿche_¡©s
[
PREV_STAT_IDX
].
	`g‘_¡©s
(
acûss_ty³
, 
num_acûss_ty³
, 
»que¡_¡©us
, 
num_»que¡_¡©us
));

518 
	}
}

520 
	$g‘_l2_»ad_h™s
(){

521  (
	`g‘_l2_»ad_acûs£s
()-
	`g‘_l2_»ad_mis£s
());

522 
	}
}

524 
	$g‘_l2_wr™e_acûs£s
(){

525 
mem_acûss_ty³
 
acûss_ty³
[] = {
GLOBAL_ACC_W
, 
LOCAL_ACC_W
, 
L1_WRBK_ACC
};

526 
ÿche_»que¡_¡©us
 
»que¡_¡©us
[] = {
HIT
, 
MISS
, 
HIT_RESERVED
};

527 
num_acûss_ty³
 = (
acûss_ty³
)/(
mem_acûss_ty³
);

528 
num_»que¡_¡©us
 = (
»que¡_¡©us
)/(
ÿche_»que¡_¡©us
);

530  (
pwr_mem_¡©
->
l2_ÿche_¡©s
[
CURRENT_STAT_IDX
].
	`g‘_¡©s
(
acûss_ty³
, 
num_acûss_ty³
, 
»que¡_¡©us
, 
num_»que¡_¡©us
)) -

531 (
pwr_mem_¡©
->
l2_ÿche_¡©s
[
PREV_STAT_IDX
].
	`g‘_¡©s
(
acûss_ty³
, 
num_acûss_ty³
, 
»que¡_¡©us
, 
num_»que¡_¡©us
));

532 
	}
}

534 
	$g‘_l2_wr™e_mis£s
(){

535 
mem_acûss_ty³
 
acûss_ty³
[] = {
GLOBAL_ACC_W
, 
LOCAL_ACC_W
, 
L1_WRBK_ACC
};

536 
ÿche_»que¡_¡©us
 
»que¡_¡©us
[] = {
MISS
};

537 
num_acûss_ty³
 = (
acûss_ty³
)/(
mem_acûss_ty³
);

538 
num_»que¡_¡©us
 = (
»que¡_¡©us
)/(
ÿche_»que¡_¡©us
);

540  (
pwr_mem_¡©
->
l2_ÿche_¡©s
[
CURRENT_STAT_IDX
].
	`g‘_¡©s
(
acûss_ty³
, 
num_acûss_ty³
, 
»que¡_¡©us
, 
num_»que¡_¡©us
)) -

541 (
pwr_mem_¡©
->
l2_ÿche_¡©s
[
PREV_STAT_IDX
].
	`g‘_¡©s
(
acûss_ty³
, 
num_acûss_ty³
, 
»que¡_¡©us
, 
num_»que¡_¡©us
));

542 
	}
}

543 
	$g‘_l2_wr™e_h™s
(){

544  (
	`g‘_l2_wr™e_acûs£s
()-
	`g‘_l2_wr™e_mis£s
());

545 
	}
}

546 
	$g‘_d¿m_cmd
(){

547 
tÙ®
=0;

548 
i
=0; i<
m_mem_cÚfig
->
m_n_mem
; ++i){

549 
tÙ®
 +ğ(
pwr_mem_¡©
->
n_cmd
[
CURRENT_STAT_IDX
][
i
] -…wr_mem_¡©->n_cmd[
PREV_STAT_IDX
][i]);

551  
tÙ®
;

552 
	}
}

553 
	$g‘_d¿m_aùiv™y
(){

554 
tÙ®
=0;

555 
i
=0; i<
m_mem_cÚfig
->
m_n_mem
; ++i){

556 
tÙ®
 +ğ(
pwr_mem_¡©
->
n_aùiv™y
[
CURRENT_STAT_IDX
][
i
] -…wr_mem_¡©->n_aùiv™y[
PREV_STAT_IDX
][i]);

558  
tÙ®
;

559 
	}
}

560 
	$g‘_d¿m_nİ
(){

561 
tÙ®
=0;

562 
i
=0; i<
m_mem_cÚfig
->
m_n_mem
; ++i){

563 
tÙ®
 +ğ(
pwr_mem_¡©
->
n_nİ
[
CURRENT_STAT_IDX
][
i
] -…wr_mem_¡©->n_nİ[
PREV_STAT_IDX
][i]);

565  
tÙ®
;

566 
	}
}

567 
	$g‘_d¿m_aù
(){

568 
tÙ®
=0;

569 
i
=0; i<
m_mem_cÚfig
->
m_n_mem
; ++i){

570 
tÙ®
 +ğ(
pwr_mem_¡©
->
n_aù
[
CURRENT_STAT_IDX
][
i
] -…wr_mem_¡©->n_aù[
PREV_STAT_IDX
][i]);

572  
tÙ®
;

573 
	}
}

574 
	$g‘_d¿m_´e
(){

575 
tÙ®
=0;

576 
i
=0; i<
m_mem_cÚfig
->
m_n_mem
; ++i){

577 
tÙ®
 +ğ(
pwr_mem_¡©
->
n_´e
[
CURRENT_STAT_IDX
][
i
] -…wr_mem_¡©->n_´e[
PREV_STAT_IDX
][i]);

579  
tÙ®
;

580 
	}
}

581 
	$g‘_d¿m_rd
(){

582 
tÙ®
=0;

583 
i
=0; i<
m_mem_cÚfig
->
m_n_mem
; ++i){

584 
tÙ®
 +ğ(
pwr_mem_¡©
->
n_rd
[
CURRENT_STAT_IDX
][
i
] -…wr_mem_¡©->n_rd[
PREV_STAT_IDX
][i]);

586  
tÙ®
;

587 
	}
}

588 
	$g‘_d¿m_wr
(){

589 
tÙ®
=0;

590 
i
=0; i<
m_mem_cÚfig
->
m_n_mem
; ++i){

591 
tÙ®
 +ğ(
pwr_mem_¡©
->
n_wr
[
CURRENT_STAT_IDX
][
i
] -…wr_mem_¡©->n_wr[
PREV_STAT_IDX
][i]);

593  
tÙ®
;

594 
	}
}

595 
	$g‘_d¿m_»q
(){

596 
tÙ®
=0;

597 
i
=0; i<
m_mem_cÚfig
->
m_n_mem
; ++i){

598 
tÙ®
 +ğ(
pwr_mem_¡©
->
n_»q
[
CURRENT_STAT_IDX
][
i
] -…wr_mem_¡©->n_»q[
PREV_STAT_IDX
][i]);

600  
tÙ®
;

601 
	}
}

603 
	$g‘_iút_simt_to_mem
(){

604 
tÙ®
=0;

605 
i
=0; i<
m_cÚfig
->
n_simt_şu¡”s
; ++i){

606 
tÙ®
 +ğ(
pwr_mem_¡©
->
n_simt_to_mem
[
CURRENT_STAT_IDX
][
i
] -…wr_mem_¡©->n_simt_to_mem[
PREV_STAT_IDX
][i]);

608  
tÙ®
;

609 
	}
}

611 
	$g‘_iút_mem_to_simt
(){

612 
tÙ®
=0;

613 
i
=0; i<
m_cÚfig
->
n_simt_şu¡”s
; ++i){

614 
tÙ®
 +ğ(
pwr_mem_¡©
->
n_mem_to_simt
[
CURRENT_STAT_IDX
][
i
] -…wr_mem_¡©->n_mem_to_simt[
PREV_STAT_IDX
][i]);

616  
tÙ®
;

617 
	}
}

619 
pow”_cÜe_¡©_t
 * 
	gpwr_cÜe_¡©
;

620 
pow”_mem_¡©_t
 * 
	gpwr_mem_¡©
;

621 * 
	gm_av”age_p–še_duty_cyşe
;

622 * 
	gm_aùive_sms
;

623 cÚ¡ 
shad”_cÜe_cÚfig
 *
	gm_cÚfig
;

624 cÚ¡ 
memÜy_cÚfig
 *
	gm_mem_cÚfig
;

	@scoreboard.cc

28 
	~"scÜebßrd.h
"

29 
	~"shad”.h
"

30 
	~"../cuda-sim/±x_sim.h
"

31 
	~"shad”_Œaû.h
"

35 
	gScÜebßrd
::
	$ScÜebßrd
Ğ
sid
, 
n_w¬ps
 )

36 : 
	$lÚgİ»gs
()

38 
m_sid
 = 
sid
;

40 
»g_bË
.
	`»size
(
n_w¬ps
);

41 
lÚgİ»gs
.
	`»size
(
n_w¬ps
);

42 
	}
}

45 
	gScÜebßrd
::
	$´štCÚ‹Ás
() const

47 
	`´štf
("scÜebßrd cÚ‹Á (sid=%d): \n", 
m_sid
);

48 
i
=0; i<
»g_bË
.
	`size
(); i++) {

49 if(
»g_bË
[
i
].
	`size
() == 0 ) ;

50 
	`´štf
(" wid = %2d: ", 
i
);

51 
¡d
::
£t
<>::
cÚ¡_™”©Ü
 
™
;

52  
™
=
»g_bË
[
i
].
	`begš
(è; iˆ!ğ»g_bË[i].
	`’d
(); it++ )

53 
	`´štf
("%u ", *
™
);

54 
	`´štf
("\n");

56 
	}
}

58 
	gScÜebßrd
::
	$»£rveRegi¡”
(
wid
, 
»gnum
)

60 ifĞ!(
»g_bË
[
wid
].
	`fšd
(
»gnum
è=ğ»g_bË[wid].
	`’d
()) ){

61 
	`´štf
("E¼Ü:ryšgØ»£rvª‡Ì—dy„e£rved„egi¡” (sid=%d, wid=%d,„egnum=%d).", 
m_sid
, 
wid
, 
»gnum
);

62 
	`abÜt
();

64 
	`SHADER_DPRINTF
Ğ
SCOREBOARD
,

65 "Re£rved Regi¡” - w¬p:%d,„eg: %d\n", 
wid
, 
»gnum
 );

66 
»g_bË
[
wid
].
	`š£¹
(
»gnum
);

67 
	}
}

70 
	gScÜebßrd
::
	$»Ëa£Regi¡”
(
wid
, 
»gnum
)

72 ifĞ!(
»g_bË
[
wid
].
	`fšd
(
»gnum
è!ğ»g_bË[wid].
	`’d
()) )

74 
	`SHADER_DPRINTF
Ğ
SCOREBOARD
,

75 "R–—£„egi¡” - w¬p:%d,„eg: %d\n", 
wid
, 
»gnum
 );

76 
»g_bË
[
wid
].
	`”a£
(
»gnum
);

77 
	}
}

79 cÚ¡ 
boŞ
 
	gScÜebßrd
::
	$i¦Úgİ
 (
w¬p_id
,
»gnum
) {

80  
lÚgİ»gs
[
w¬p_id
].
	`fšd
(
»gnum
è!ğlÚgİ»gs[w¬p_id].
	`’d
();

81 
	}
}

83 
	gScÜebßrd
::
	$»£rveRegi¡”s
(cÚ¡ 
şass
 
w¬p_š¡_t
* 
š¡
)

85  
r
=0;„ < 4;„++) {

86 if(
š¡
->
out
[
r
] > 0) {

87 
	`»£rveRegi¡”
(
š¡
->
	`w¬p_id
(), in¡->
out
[
r
]);

88 
	`SHADER_DPRINTF
Ğ
SCOREBOARD
,

90 
š¡
->
	`w¬p_id
(),

91 
š¡
->
out
[
r
] );

96 ià(
š¡
->
	`is_lßd
() &&

97 Ğ
š¡
->
¥aû
.
	`g‘_ty³
(è=ğ
glob®_¥aû
 ||

98 
š¡
->
¥aû
.
	`g‘_ty³
(è=ğ
loÿl_¥aû
 ||

99 
š¡
->
¥aû
.
	`g‘_ty³
(è=ğ
·¿m_¥aû_k”Ãl
 ||

100 
š¡
->
¥aû
.
	`g‘_ty³
(è=ğ
·¿m_¥aû_loÿl
 ||

101 
š¡
->
¥aû
.
	`g‘_ty³
(è=ğ
·¿m_¥aû_unşassif›d
 ||

102 
š¡
->
¥aû
.
	`g‘_ty³
(è=ğ
‹x_¥aû
)){

103  
r
=0;„<4;„++) {

104 if(
š¡
->
out
[
r
] > 0) {

105 
	`SHADER_DPRINTF
Ğ
SCOREBOARD
,

107 
š¡
->
	`w¬p_id
(),

108 
š¡
->
out
[
r
] );

109 
lÚgİ»gs
[
š¡
->
	`w¬p_id
()].
	`š£¹
(š¡->
out
[
r
]);

113 
	}
}

116 
	gScÜebßrd
::
	$»Ëa£Regi¡”s
(cÚ¡ 
şass
 
w¬p_š¡_t
 *
š¡
)

118  
r
=0;„ < 4;„++) {

119 if(
š¡
->
out
[
r
] > 0) {

120 
	`SHADER_DPRINTF
Ğ
SCOREBOARD
,

122 
š¡
->
	`w¬p_id
(),

123 
š¡
->
out
[
r
] );

124 
	`»Ëa£Regi¡”
(
š¡
->
	`w¬p_id
(), in¡->
out
[
r
]);

125 
lÚgİ»gs
[
š¡
->
	`w¬p_id
()].
	`”a£
(š¡->
out
[
r
]);

128 
	}
}

136 
boŞ
 
	gScÜebßrd
::
	$checkCŞlisiÚ
Ğ
wid
, cÚ¡ 
şass
 
š¡_t
 *
š¡
 ) const

139 
¡d
::
£t
<> 
š¡_»gs
;

141 if(
š¡
->
out
[0] > 0è
š¡_»gs
.
	`š£¹
(inst->out[0]);

142 if(
š¡
->
out
[1] > 0è
š¡_»gs
.
	`š£¹
(inst->out[1]);

143 if(
š¡
->
out
[2] > 0è
š¡_»gs
.
	`š£¹
(inst->out[2]);

144 if(
š¡
->
out
[3] > 0è
š¡_»gs
.
	`š£¹
(inst->out[3]);

145 if(
š¡
->
š
[0] > 0è
š¡_»gs
.
	`š£¹
(inst->in[0]);

146 if(
š¡
->
š
[1] > 0è
š¡_»gs
.
	`š£¹
(inst->in[1]);

147 if(
š¡
->
š
[2] > 0è
š¡_»gs
.
	`š£¹
(inst->in[2]);

148 if(
š¡
->
š
[3] > 0è
š¡_»gs
.
	`š£¹
(inst->in[3]);

149 if(
š¡
->
´ed
 > 0è
š¡_»gs
.
	`š£¹
(inst->pred);

150 if(
š¡
->
¬1
 > 0è
š¡_»gs
.
	`š£¹
(inst->ar1);

151 if(
š¡
->
¬2
 > 0è
š¡_»gs
.
	`š£¹
(inst->ar2);

154 
¡d
::
£t
<>::
cÚ¡_™”©Ü
 
™2
;

155  
™2
=
š¡_»gs
.
	`begš
(è; it2 !ğš¡_»gs.
	`’d
(); it2++ )

156 if(
»g_bË
[
wid
].
	`fšd
(*
™2
è!ğ»g_bË[wid].
	`’d
()) {

157  
Œue
;

159  
çl£
;

160 
	}
}

162 
boŞ
 
	gScÜebßrd
::
	$³ndšgWr™es
(
wid
) const

164  !
»g_bË
[
wid
].
	`em±y
();

165 
	}
}

	@scoreboard.h

28 
	~<¡dio.h
>

29 
	~<¡dlib.h
>

30 
	~<veùÜ
>

31 
	~<£t
>

32 
	~"as£¹.h
"

34 #iâdeà
SCOREBOARD_H_


35 
	#SCOREBOARD_H_


	)

37 
	~"../ab¡¿ù_h¬dw¬e_mod–.h
"

39 şas 
	cScÜebßrd
 {

40 
	mpublic
:

41 
ScÜebßrd
Ğ
sid
, 
n_w¬ps
 );

43 
»£rveRegi¡”s
(cÚ¡ 
w¬p_š¡_t
 *
š¡
);

44 
»Ëa£Regi¡”s
(cÚ¡ 
w¬p_š¡_t
 *
š¡
);

45 
»Ëa£Regi¡”
(
wid
, 
»gnum
);

47 
boŞ
 
	$checkCŞlisiÚ
(
wid
, cÚ¡ 
š¡_t
 *
š¡
) const;

48 
boŞ
 
	$³ndšgWr™es
(
wid
) const;

49 
	$´štCÚ‹Ás
() const;

50 cÚ¡ 
boŞ
 
	`i¦Úgİ
(
w¬p_id
, 
»gnum
);

51 
´iv©e
:

52 
	`»£rveRegi¡”
(
wid
, 
»gnum
);

53 
	$g‘_sid
(ècÚ¡ {  
m_sid
; }

55 
m_sid
;

59 
¡d
::
veùÜ
< std::
£t
<> > 
»g_bË
;

61 
¡d
::
veùÜ
< std::
£t
<> > 
lÚgİ»gs
;

62 
	}
};

	@shader.cc

29 
	~<æßt.h
>

30 
	~"shad”.h
"

31 
	~"gpu-sim.h
"

32 
	~"addrdec.h
"

33 
	~"d¿m.h
"

34 
	~"¡©-toŞ.h
"

35 
	~"gpu-misc.h
"

36 
	~"../cuda-sim/±x_sim.h
"

37 
	~"../cuda-sim/±x-¡©s.h
"

38 
	~"../cuda-sim/cuda-sim.h
"

39 
	~"gpu-sim.h
"

40 
	~"mem_ãtch.h
"

41 
	~"mem_Ï‹ncy_¡©.h
"

42 
	~"visu®iz”.h
"

43 
	~"../¡©w¿µ”.h
"

44 
	~"iút_w¿µ”.h
"

45 
	~<¡ršg.h
>

46 
	~<lim™s.h
>

47 
	~"Œaffic_b»akdown.h
"

48 
	~"shad”_Œaû.h
"

50 
	#PRIORITIZE_MSHR_OVER_WB
 1

	)

51 
	#MAX
(
a
,
b
è((×)>(b))?×):(b))

	)

52 
	#MIN
(
a
,
b
è((×)<(b))?×):(b))

	)

57 
	g¡d
::
li¡
<> 
shad”_cÜe_ùx
::
	$g‘_»gs_wr™‹n
ĞcÚ¡ 
š¡_t
 &
fvt
 ) const

59 
¡d
::
li¡
<> 
»suÉ
;

60  
İ
=0; o°< 
MAX_REG_OPERANDS
; op++ ) {

61 
»g_num
 = 
fvt
.
¬ch_»g
.
d¡
[
İ
];

62 ifĞ
»g_num
 >= 0 )

63 
»suÉ
.
	`push_back
(
»g_num
);

65  
»suÉ
;

66 
	}
}

68 
	gshad”_cÜe_ùx
::
	$shad”_cÜe_ùx
Ğ
şass
 
gpgpu_sim
 *
gpu
,

69 
şass
 
simt_cÜe_şu¡”
 *
şu¡”
,

70 
shad”_id
,

71 
c_id
,

72 cÚ¡ 
shad”_cÜe_cÚfig
 *
cÚfig
,

73 cÚ¡ 
memÜy_cÚfig
 *
mem_cÚfig
,

74 
shad”_cÜe_¡©s
 *
¡©s
 )

75 : 
	`cÜe_t
Ğ
gpu
, 
NULL
, 
cÚfig
->
w¬p_size
, cÚfig->
n_th»ad_³r_shad”
 ),

76 
	`m_b¬r›rs
Ğ
this
, 
cÚfig
->
max_w¬ps_³r_shad”
, cÚfig->
max_ùa_³r_cÜe
, cÚfig->
max_b¬r›rs_³r_ùa
, cÚfig->
w¬p_size
 ),

77 
	$m_dyÇmic_w¬p_id
(0)

79 
m_şu¡”
 = 
şu¡”
;

80 
m_cÚfig
 = 
cÚfig
;

81 
m_memÜy_cÚfig
 = 
mem_cÚfig
;

82 
m_¡©s
 = 
¡©s
;

83 
w¬p_size
=
cÚfig
->warp_size;

85 
m_sid
 = 
shad”_id
;

86 
m_c
 = 
c_id
;

88 
m_p–še_»g
.
	`»£rve
(
N_PIPELINE_STAGES
);

89 
j
 = 0; j<
N_PIPELINE_STAGES
; j++) {

90 
m_p–še_»g
.
	`push_back
(
	`»gi¡”_£t
(
m_cÚfig
->
pe_widths
[
j
],
p–še_¡age_Çme_decode
[j]));

93 
m_th»adS‹
 = (
th»ad_ùx_t
*è
	`ÿÎoc
(Ñh»ad_ùx_t), 
cÚfig
->
n_th»ad_³r_shad”
);

95 
m_nÙ_com¶‘ed
 = 0;

96 
m_aùive_th»ads
.
	`»£t
();

97 
m_n_aùive_ùa
 = 0;

98  
i
 = 0; i<
MAX_CTA_PER_SHADER
; i++ )

99 
m_ùa_¡©us
[
i
]=0;

100 
i
 = 0; i<
cÚfig
->
n_th»ad_³r_shad”
; i++) {

101 
m_th»ad
[
i
]ğ
NULL
;

102 
m_th»adS‹
[
i
].
m_ùa_id
 = -1;

103 
m_th»adS‹
[
i
].
m_aùive
 = 
çl£
;

107 iàĞ
m_cÚfig
->
gpgpu_³rãù_mem
 ) {

108 
m_iút
 = 
Ãw
 
	`³rãù_memÜy_š‹rçû
(
this
,
şu¡”
);

110 
m_iút
 = 
Ãw
 
	`shad”_memÜy_š‹rçû
(
this
,
şu¡”
);

112 
m_mem_ãtch_®loÿtÜ
 = 
Ãw
 
	`shad”_cÜe_mem_ãtch_®loÿtÜ
(
shad”_id
,
c_id
,
mem_cÚfig
);

115 
m_Ï¡_w¬p_ãtched
 = 0;

117 
	#STRSIZE
 1024

	)

118 
Çme
[
STRSIZE
];

119 
	`¢´štf
(
Çme
, 
STRSIZE
, "L1I_%03d", 
m_sid
);

120 
m_L1I
 = 
Ãw
 
	`»ad_Úly_ÿche
Ğ
Çme
,
m_cÚfig
->
m_L1I_cÚfig
,
m_sid
,
	`g‘_shad”_š¡ruùiÚ_ÿche_id
(),
m_iút
,
IN_L1I_MISS_QUEUE
);

122 
m_w¬p
.
	`»size
(
m_cÚfig
->
max_w¬ps_³r_shad”
, 
	`shd_w¬p_t
(
this
, 
w¬p_size
));

123 
m_scÜebßrd
 = 
Ãw
 
	`ScÜebßrd
(
m_sid
, 
m_cÚfig
->
max_w¬ps_³r_shad”
);

127 
¡d
::
¡ršg
 
sched_cÚfig
 = 
m_cÚfig
->
gpgpu_scheduËr_¡ršg
;

128 cÚ¡ 
cÚü‘e_scheduËr
 
scheduËr
 = 
sched_cÚfig
.
	`fšd
("Ìr"è!ğ
¡d
::
¡ršg
::
Åos
 ?

129 
CONCRETE_SCHEDULER_LRR
 :

130 
sched_cÚfig
.
	`fšd
("two_Ëv–_aùive"è!ğ
¡d
::
¡ršg
::
Åos
 ?

131 
CONCRETE_SCHEDULER_TWO_LEVEL_ACTIVE
 :

132 
sched_cÚfig
.
	`fšd
("gto"è!ğ
¡d
::
¡ršg
::
Åos
 ?

133 
CONCRETE_SCHEDULER_GTO
 :

134 
sched_cÚfig
.
	`fšd
("w¬p_lim™šg"è!ğ
¡d
::
¡ršg
::
Åos
 ?

135 
CONCRETE_SCHEDULER_WARP_LIMITING
:

136 
NUM_CONCRETE_SCHEDULERS
;

137 
	`as£¹
 ( 
scheduËr
 !ğ
NUM_CONCRETE_SCHEDULERS
 );

139 
i
 = 0; i < 
m_cÚfig
->
gpgpu_num_sched_³r_cÜe
; i++) {

140  
scheduËr
 )

142 
CONCRETE_SCHEDULER_LRR
:

143 
scheduËrs
.
	`push_back
(

144 
Ãw
 
	`Ìr_scheduËr
Ğ
m_¡©s
,

145 
this
,

146 
m_scÜebßrd
,

147 
m_simt_¡ack
,

148 &
m_w¬p
,

149 &
m_p–še_»g
[
ID_OC_SP
],

150 &
m_p–še_»g
[
ID_OC_SFU
],

151 &
m_p–še_»g
[
ID_OC_MEM
],

152 
i


156 
CONCRETE_SCHEDULER_TWO_LEVEL_ACTIVE
:

157 
scheduËrs
.
	`push_back
(

158 
Ãw
 
	`two_Ëv–_aùive_scheduËr
Ğ
m_¡©s
,

159 
this
,

160 
m_scÜebßrd
,

161 
m_simt_¡ack
,

162 &
m_w¬p
,

163 &
m_p–še_»g
[
ID_OC_SP
],

164 &
m_p–še_»g
[
ID_OC_SFU
],

165 &
m_p–še_»g
[
ID_OC_MEM
],

166 
i
,

167 
cÚfig
->
gpgpu_scheduËr_¡ršg


171 
CONCRETE_SCHEDULER_GTO
:

172 
scheduËrs
.
	`push_back
(

173 
Ãw
 
	`gto_scheduËr
Ğ
m_¡©s
,

174 
this
,

175 
m_scÜebßrd
,

176 
m_simt_¡ack
,

177 &
m_w¬p
,

178 &
m_p–še_»g
[
ID_OC_SP
],

179 &
m_p–še_»g
[
ID_OC_SFU
],

180 &
m_p–še_»g
[
ID_OC_MEM
],

181 
i


185 
CONCRETE_SCHEDULER_WARP_LIMITING
:

186 
scheduËrs
.
	`push_back
(

187 
Ãw
 
	`swl_scheduËr
Ğ
m_¡©s
,

188 
this
,

189 
m_scÜebßrd
,

190 
m_simt_¡ack
,

191 &
m_w¬p
,

192 &
m_p–še_»g
[
ID_OC_SP
],

193 &
m_p–še_»g
[
ID_OC_SFU
],

194 &
m_p–še_»g
[
ID_OC_MEM
],

195 
i
,

196 
cÚfig
->
gpgpu_scheduËr_¡ršg


201 
	`abÜt
();

205 
i
 = 0; i < 
m_w¬p
.
	`size
(); i++) {

207 
scheduËrs
[
i
%
m_cÚfig
->
gpgpu_num_sched_³r_cÜe
]->
	`add_su³rvi£d_w¬p_id
(i);

209  
i
 = 0; i < 
m_cÚfig
->
gpgpu_num_sched_³r_cÜe
; ++i ) {

210 
scheduËrs
[
i
]->
	`dÚe_addšg_su³rvi£d_w¬ps
();

214 ’um { 
SP_CUS
, 
SFU_CUS
, 
MEM_CUS
, 
GEN_CUS
 };

215 
m_İ”ªd_cŞËùÜ
.
	`add_cu_£t
(
SP_CUS
, 
m_cÚfig
->
gpgpu_İ”ªd_cŞËùÜ_num_un™s_¥
, m_cÚfig->
gpgpu_İ”ªd_cŞËùÜ_num_out_pÜts_¥
);

216 
m_İ”ªd_cŞËùÜ
.
	`add_cu_£t
(
SFU_CUS
, 
m_cÚfig
->
gpgpu_İ”ªd_cŞËùÜ_num_un™s_sfu
, m_cÚfig->
gpgpu_İ”ªd_cŞËùÜ_num_out_pÜts_sfu
);

217 
m_İ”ªd_cŞËùÜ
.
	`add_cu_£t
(
MEM_CUS
, 
m_cÚfig
->
gpgpu_İ”ªd_cŞËùÜ_num_un™s_mem
, m_cÚfig->
gpgpu_İ”ªd_cŞËùÜ_num_out_pÜts_mem
);

218 
m_İ”ªd_cŞËùÜ
.
	`add_cu_£t
(
GEN_CUS
, 
m_cÚfig
->
gpgpu_İ”ªd_cŞËùÜ_num_un™s_g’
, m_cÚfig->
gpgpu_İ”ªd_cŞËùÜ_num_out_pÜts_g’
);

220 
İndcŞl_rfu_t
::
pÜt_veùÜ_t
 
š_pÜts
;

221 
İndcŞl_rfu_t
::
pÜt_veùÜ_t
 
out_pÜts
;

222 
İndcŞl_rfu_t
::
ušt_veùÜ_t
 
cu_£ts
;

223 
i
 = 0; i < 
m_cÚfig
->
gpgpu_İ”ªd_cŞËùÜ_num_š_pÜts_¥
; i++) {

224 
š_pÜts
.
	`push_back
(&
m_p–še_»g
[
ID_OC_SP
]);

225 
out_pÜts
.
	`push_back
(&
m_p–še_»g
[
OC_EX_SP
]);

226 
cu_£ts
.
	`push_back
(()
SP_CUS
);

227 
cu_£ts
.
	`push_back
(()
GEN_CUS
);

228 
m_İ”ªd_cŞËùÜ
.
	`add_pÜt
(
š_pÜts
,
out_pÜts
,
cu_£ts
);

229 
š_pÜts
.
	`ş—r
(),
out_pÜts
.ş—r(),
cu_£ts
.clear();

232 
i
 = 0; i < 
m_cÚfig
->
gpgpu_İ”ªd_cŞËùÜ_num_š_pÜts_sfu
; i++) {

233 
š_pÜts
.
	`push_back
(&
m_p–še_»g
[
ID_OC_SFU
]);

234 
out_pÜts
.
	`push_back
(&
m_p–še_»g
[
OC_EX_SFU
]);

235 
cu_£ts
.
	`push_back
(()
SFU_CUS
);

236 
cu_£ts
.
	`push_back
(()
GEN_CUS
);

237 
m_İ”ªd_cŞËùÜ
.
	`add_pÜt
(
š_pÜts
,
out_pÜts
,
cu_£ts
);

238 
š_pÜts
.
	`ş—r
(),
out_pÜts
.ş—r(),
cu_£ts
.clear();

241 
i
 = 0; i < 
m_cÚfig
->
gpgpu_İ”ªd_cŞËùÜ_num_š_pÜts_mem
; i++) {

242 
š_pÜts
.
	`push_back
(&
m_p–še_»g
[
ID_OC_MEM
]);

243 
out_pÜts
.
	`push_back
(&
m_p–še_»g
[
OC_EX_MEM
]);

244 
cu_£ts
.
	`push_back
(()
MEM_CUS
);

245 
cu_£ts
.
	`push_back
(()
GEN_CUS
);

246 
m_İ”ªd_cŞËùÜ
.
	`add_pÜt
(
š_pÜts
,
out_pÜts
,
cu_£ts
);

247 
š_pÜts
.
	`ş—r
(),
out_pÜts
.ş—r(),
cu_£ts
.clear();

251 
i
 = 0; i < 
m_cÚfig
->
gpgpu_İ”ªd_cŞËùÜ_num_š_pÜts_g’
; i++) {

252 
š_pÜts
.
	`push_back
(&
m_p–še_»g
[
ID_OC_SP
]);

253 
š_pÜts
.
	`push_back
(&
m_p–še_»g
[
ID_OC_SFU
]);

254 
š_pÜts
.
	`push_back
(&
m_p–še_»g
[
ID_OC_MEM
]);

255 
out_pÜts
.
	`push_back
(&
m_p–še_»g
[
OC_EX_SP
]);

256 
out_pÜts
.
	`push_back
(&
m_p–še_»g
[
OC_EX_SFU
]);

257 
out_pÜts
.
	`push_back
(&
m_p–še_»g
[
OC_EX_MEM
]);

258 
cu_£ts
.
	`push_back
(()
GEN_CUS
);

259 
m_İ”ªd_cŞËùÜ
.
	`add_pÜt
(
š_pÜts
,
out_pÜts
,
cu_£ts
);

260 
š_pÜts
.
	`ş—r
(),
out_pÜts
.ş—r(),
cu_£ts
.clear();

263 
m_İ”ªd_cŞËùÜ
.
	`š™
Ğ
m_cÚfig
->
gpgpu_num_»g_bªks
, 
this
 );

266 
m_num_funùiÚ_un™s
 = 
m_cÚfig
->
gpgpu_num_¥_un™s
 + m_cÚfig->
gpgpu_num_sfu_un™s
 + 1;

272 
k
 = 0; k < 
m_cÚfig
->
gpgpu_num_¥_un™s
; k++) {

273 
m_fu
.
	`push_back
(
Ãw
 
	`¥_un™
Ğ&
m_p–še_»g
[
EX_WB
], 
m_cÚfig
, 
this
 ));

274 
m_di¥©ch_pÜt
.
	`push_back
(
ID_OC_SP
);

275 
m_issue_pÜt
.
	`push_back
(
OC_EX_SP
);

278 
k
 = 0; k < 
m_cÚfig
->
gpgpu_num_sfu_un™s
; k++) {

279 
m_fu
.
	`push_back
(
Ãw
 
	`sfu
Ğ&
m_p–še_»g
[
EX_WB
], 
m_cÚfig
, 
this
 ));

280 
m_di¥©ch_pÜt
.
	`push_back
(
ID_OC_SFU
);

281 
m_issue_pÜt
.
	`push_back
(
OC_EX_SFU
);

284 
m_ld¡_un™
 = 
Ãw
 
	`ld¡_un™
Ğ
m_iút
, 
m_mem_ãtch_®loÿtÜ
, 
this
, &
m_İ”ªd_cŞËùÜ
, 
m_scÜebßrd
, 
cÚfig
, 
mem_cÚfig
, 
¡©s
, 
shad”_id
, 
c_id
 );

285 
m_fu
.
	`push_back
(
m_ld¡_un™
);

286 
m_di¥©ch_pÜt
.
	`push_back
(
ID_OC_MEM
);

287 
m_issue_pÜt
.
	`push_back
(
OC_EX_MEM
);

289 
	`as£¹
(
m_num_funùiÚ_un™s
 =ğ
m_fu
.
	`size
(è
ªd
 m_fu.size(è=ğ
m_di¥©ch_pÜt
.size(èªd m_fu.size(è=ğ
m_issue_pÜt
.size());

292 
num_»suÉ_bus
 = 
cÚfig
->
pe_widths
[
EX_WB
];

293 
i
=0; i<
num_»suÉ_bus
; i++){

294 
this
->
m_»suÉ_bus
.
	`push_back
(
Ãw
 
¡d
::
b™£t
<
MAX_ALU_LATENCY
>());

297 
m_Ï¡_š¡_gpu_sim_cyşe
 = 0;

298 
m_Ï¡_š¡_gpu_tÙ_sim_cyşe
 = 0;

299 
	}
}

301 
	gshad”_cÜe_ùx
::
	$»š™
(
¡¬t_th»ad
, 
’d_th»ad
, 
boŞ
 
»£t_nÙ_com¶‘ed
 )

303 ifĞ
»£t_nÙ_com¶‘ed
 ) {

304 
m_nÙ_com¶‘ed
 = 0;

305 
m_aùive_th»ads
.
	`»£t
();

307 
i
 = 
¡¬t_th»ad
; i<
’d_th»ad
; i++) {

308 
m_th»adS‹
[
i
].
n_š¢
 = 0;

309 
m_th»adS‹
[
i
].
m_ùa_id
 = -1;

311 
i
 = 
¡¬t_th»ad
 / 
m_cÚfig
->
w¬p_size
; i < 
’d_th»ad
 / m_config->warp_size; ++i) {

312 
m_w¬p
[
i
].
	`»£t
();

313 
m_simt_¡ack
[
i
]->
	`»£t
();

315 
	}
}

317 
	gshad”_cÜe_ùx
::
	$š™_w¬ps
Ğ
ùa_id
, 
¡¬t_th»ad
, 
’d_th»ad
 )

319 
add»ss_ty³
 
¡¬t_pc
 = 
	`Ãxt_pc
(
¡¬t_th»ad
);

320 ià(
m_cÚfig
->
mod–
 =ğ
POST_DOMINATOR
) {

321 
¡¬t_w¬p
 = 
¡¬t_th»ad
 / 
m_cÚfig
->
w¬p_size
;

322 
’d_w¬p
 = 
’d_th»ad
 / 
m_cÚfig
->
w¬p_size
 + ((end_thread % m_config->warp_size)? 1 : 0);

323 
i
 = 
¡¬t_w¬p
; i < 
’d_w¬p
; ++i) {

324 
n_aùive
=0;

325 
simt_mask_t
 
aùive_th»ads
;

326 
t
 = 0; < 
m_cÚfig
->
w¬p_size
;++) {

327 
hwtid
 = 
i
 * 
m_cÚfig
->
w¬p_size
 + 
t
;

328 iàĞ
hwtid
 < 
’d_th»ad
 ) {

329 
n_aùive
++;

330 
	`as£¹
Ğ!
m_aùive_th»ads
.
	`‹¡
(
hwtid
) );

331 
m_aùive_th»ads
.
	`£t
Ğ
hwtid
 );

332 
aùive_th»ads
.
	`£t
(
t
);

335 
m_simt_¡ack
[
i
]->
	`Ïunch
(
¡¬t_pc
,
aùive_th»ads
);

336 
m_w¬p
[
i
].
	`š™
(
¡¬t_pc
,
ùa_id
,i,
aùive_th»ads
, 
m_dyÇmic_w¬p_id
);

337 ++
m_dyÇmic_w¬p_id
;

338 
m_nÙ_com¶‘ed
 +ğ
n_aùive
;

341 
	}
}

344 
add»ss_ty³
 
	gshad”_cÜe_ùx
::
	$Ãxt_pc
Ğ
tid
 ) const

346 ifĞ
tid
 == -1 )

348 
±x_th»ad_šfo
 *
the_th»ad
 = 
m_th»ad
[
tid
];

349 iàĞ
the_th»ad
 =ğ
NULL
 )

351  
the_th»ad
->
	`g‘_pc
();

352 
	}
}

354 
	ggpgpu_sim
::
	$g‘_pdom_¡ack_tİ_šfo
Ğ
sid
, 
tid
, *
pc
, *
½c
 )

356 
şu¡”_id
 = 
m_shad”_cÚfig
->
	`sid_to_şu¡”
(
sid
);

357 
m_şu¡”
[
şu¡”_id
]->
	`g‘_pdom_¡ack_tİ_šfo
(
sid
,
tid
,
pc
,
½c
);

358 
	}
}

360 
	gshad”_cÜe_ùx
::
	$g‘_pdom_¡ack_tİ_šfo
Ğ
tid
, *
pc
, *
½c
 ) const

362 
w¬p_id
 = 
tid
/
m_cÚfig
->
w¬p_size
;

363 
m_simt_¡ack
[
w¬p_id
]->
	`g‘_pdom_¡ack_tİ_šfo
(
pc
,
½c
);

364 
	}
}

366 
	gshad”_cÜe_¡©s
::
	$´št
Ğ
FILE
* 
fout
 ) const

368 
th»ad_icouÁ_u¬ch
=0;

369 
w¬p_icouÁ_u¬ch
=0;

371 
i
=0; i < 
m_cÚfig
->
	`num_shad”
(); i++) {

372 
th»ad_icouÁ_u¬ch
 +ğ
m_num_sim_š¢
[
i
];

373 
w¬p_icouÁ_u¬ch
 +ğ
m_num_sim_wš¢
[
i
];

375 
	`årštf
(
fout
,"gpgpu_n_tÙ_thrd_icouÁ = %Îd\n", 
th»ad_icouÁ_u¬ch
);

376 
	`årštf
(
fout
,"gpgpu_n_tÙ_w_icouÁ = %Îd\n", 
w¬p_icouÁ_u¬ch
);

378 
	`årštf
(
fout
,"gpgpu_n_¡®l_shd_mem = %d\n", 
gpgpu_n_¡®l_shd_mem
 );

379 
	`årštf
(
fout
,"gpgpu_n_mem_»ad_loÿÈğ%d\n", 
gpgpu_n_mem_»ad_loÿl
);

380 
	`årštf
(
fout
,"gpgpu_n_mem_wr™e_loÿÈğ%d\n", 
gpgpu_n_mem_wr™e_loÿl
);

381 
	`årštf
(
fout
,"gpgpu_n_mem_»ad_glob® = %d\n", 
gpgpu_n_mem_»ad_glob®
);

382 
	`årštf
(
fout
,"gpgpu_n_mem_wr™e_glob® = %d\n", 
gpgpu_n_mem_wr™e_glob®
);

383 
	`årštf
(
fout
,"gpgpu_n_mem_‹xtu» = %d\n", 
gpgpu_n_mem_‹xtu»
);

384 
	`årštf
(
fout
,"gpgpu_n_mem_cÚ¡ = %d\n", 
gpgpu_n_mem_cÚ¡
);

386 
	`årštf
(
fout
, "gpgpu_n_lßd_š¢ = %d\n", 
gpgpu_n_lßd_š¢
);

387 
	`årštf
(
fout
, "gpgpu_n_¡Üe_š¢ = %d\n", 
gpgpu_n_¡Üe_š¢
);

388 
	`årštf
(
fout
, "gpgpu_n_shmem_š¢ = %d\n", 
gpgpu_n_shmem_š¢
);

389 
	`årštf
(
fout
, "gpgpu_n_‹x_š¢ = %d\n", 
gpgpu_n_‹x_š¢
);

390 
	`årštf
(
fout
, "gpgpu_n_cÚ¡_mem_š¢ = %d\n", 
gpgpu_n_cÚ¡_š¢
);

391 
	`årštf
(
fout
, "gpgpu_n_·¿m_mem_š¢ = %d\n", 
gpgpu_n_·¿m_š¢
);

393 
	`årštf
(
fout
, "gpgpu_n_shmem_bkcÚæiù = %d\n", 
gpgpu_n_shmem_bkcÚæiù
);

394 
	`årštf
(
fout
, "gpgpu_n_ÿche_bkcÚæiù = %d\n", 
gpgpu_n_ÿche_bkcÚæiù
);

396 
	`årštf
(
fout
, "gpgpu_n_šŒaw¬p_mshr_m”gğ%d\n", 
gpgpu_n_šŒaw¬p_mshr_m”ge
);

397 
	`årštf
(
fout
, "gpgpu_n_cmem_pÜtcÚæiù = %d\n", 
gpgpu_n_cmem_pÜtcÚæiù
);

399 
	`årštf
(
fout
, "gpgpu_¡®l_shd_mem[c_mem][bk_cÚf] = %d\n", 
gpu_¡®l_shd_mem_b»akdown
[
C_MEM
][
BK_CONF
]);

400 
	`årštf
(
fout
, "gpgpu_¡®l_shd_mem[c_mem][mshr_rc] = %d\n", 
gpu_¡®l_shd_mem_b»akdown
[
C_MEM
][
MSHR_RC_FAIL
]);

401 
	`årštf
(
fout
, "gpgpu_¡®l_shd_mem[c_mem][iút_rc] = %d\n", 
gpu_¡®l_shd_mem_b»akdown
[
C_MEM
][
ICNT_RC_FAIL
]);

402 
	`årštf
(
fout
, "gpgpu_¡®l_shd_mem[c_mem][d©a_pÜt_¡®l] = %d\n", 
gpu_¡®l_shd_mem_b»akdown
[
C_MEM
][
DATA_PORT_STALL
]);

403 
	`årštf
(
fout
, "gpgpu_¡®l_shd_mem[t_mem][mshr_rc] = %d\n", 
gpu_¡®l_shd_mem_b»akdown
[
T_MEM
][
MSHR_RC_FAIL
]);

404 
	`årštf
(
fout
, "gpgpu_¡®l_shd_mem[t_mem][iút_rc] = %d\n", 
gpu_¡®l_shd_mem_b»akdown
[
T_MEM
][
ICNT_RC_FAIL
]);

405 
	`årštf
(
fout
, "gpgpu_¡®l_shd_mem[t_mem][d©a_pÜt_¡®l] = %d\n", 
gpu_¡®l_shd_mem_b»akdown
[
T_MEM
][
DATA_PORT_STALL
]);

406 
	`årštf
(
fout
, "gpgpu_¡®l_shd_mem[s_mem][bk_cÚf] = %d\n", 
gpu_¡®l_shd_mem_b»akdown
[
S_MEM
][
BK_CONF
]);

407 
	`årštf
(
fout
, "gpgpu_stall_shd_mem[gl_mem][bk_conf] = %d\n",

408 
gpu_¡®l_shd_mem_b»akdown
[
G_MEM_LD
][
BK_CONF
] +

409 
gpu_¡®l_shd_mem_b»akdown
[
G_MEM_ST
][
BK_CONF
] +

410 
gpu_¡®l_shd_mem_b»akdown
[
L_MEM_LD
][
BK_CONF
] +

411 
gpu_¡®l_shd_mem_b»akdown
[
L_MEM_ST
][
BK_CONF
]

413 
	`årštf
(
fout
, "gpgpu_stall_shd_mem[gl_mem][coal_stall] = %d\n",

414 
gpu_¡®l_shd_mem_b»akdown
[
G_MEM_LD
][
COAL_STALL
] +

415 
gpu_¡®l_shd_mem_b»akdown
[
G_MEM_ST
][
COAL_STALL
] +

416 
gpu_¡®l_shd_mem_b»akdown
[
L_MEM_LD
][
COAL_STALL
] +

417 
gpu_¡®l_shd_mem_b»akdown
[
L_MEM_ST
][
COAL_STALL
]

419 
	`årštf
(
fout
, "gpgpu_stall_shd_mem[gl_mem][data_port_stall] = %d\n",

420 
gpu_¡®l_shd_mem_b»akdown
[
G_MEM_LD
][
DATA_PORT_STALL
] +

421 
gpu_¡®l_shd_mem_b»akdown
[
G_MEM_ST
][
DATA_PORT_STALL
] +

422 
gpu_¡®l_shd_mem_b»akdown
[
L_MEM_LD
][
DATA_PORT_STALL
] +

423 
gpu_¡®l_shd_mem_b»akdown
[
L_MEM_ST
][
DATA_PORT_STALL
]

425 
	`årštf
(
fout
, "gpgpu_¡®l_shd_mem[g_mem_ld][mshr_rc] = %d\n", 
gpu_¡®l_shd_mem_b»akdown
[
G_MEM_LD
][
MSHR_RC_FAIL
]);

426 
	`årštf
(
fout
, "gpgpu_¡®l_shd_mem[g_mem_ld][iút_rc] = %d\n", 
gpu_¡®l_shd_mem_b»akdown
[
G_MEM_LD
][
ICNT_RC_FAIL
]);

427 
	`årštf
(
fout
, "gpgpu_¡®l_shd_mem[g_mem_ld][wb_iút_rc] = %d\n", 
gpu_¡®l_shd_mem_b»akdown
[
G_MEM_LD
][
WB_ICNT_RC_FAIL
]);

428 
	`årštf
(
fout
, "gpgpu_¡®l_shd_mem[g_mem_ld][wb_r¤v_ç] = %d\n", 
gpu_¡®l_shd_mem_b»akdown
[
G_MEM_LD
][
WB_CACHE_RSRV_FAIL
]);

429 
	`årštf
(
fout
, "gpgpu_¡®l_shd_mem[g_mem_¡][mshr_rc] = %d\n", 
gpu_¡®l_shd_mem_b»akdown
[
G_MEM_ST
][
MSHR_RC_FAIL
]);

430 
	`årštf
(
fout
, "gpgpu_¡®l_shd_mem[g_mem_¡][iút_rc] = %d\n", 
gpu_¡®l_shd_mem_b»akdown
[
G_MEM_ST
][
ICNT_RC_FAIL
]);

431 
	`årštf
(
fout
, "gpgpu_¡®l_shd_mem[g_mem_¡][wb_iút_rc] = %d\n", 
gpu_¡®l_shd_mem_b»akdown
[
G_MEM_ST
][
WB_ICNT_RC_FAIL
]);

432 
	`årštf
(
fout
, "gpgpu_¡®l_shd_mem[g_mem_¡][wb_r¤v_ç] = %d\n", 
gpu_¡®l_shd_mem_b»akdown
[
G_MEM_ST
][
WB_CACHE_RSRV_FAIL
]);

433 
	`årštf
(
fout
, "gpgpu_¡®l_shd_mem[l_mem_ld][mshr_rc] = %d\n", 
gpu_¡®l_shd_mem_b»akdown
[
L_MEM_LD
][
MSHR_RC_FAIL
]);

434 
	`årštf
(
fout
, "gpgpu_¡®l_shd_mem[l_mem_ld][iút_rc] = %d\n", 
gpu_¡®l_shd_mem_b»akdown
[
L_MEM_LD
][
ICNT_RC_FAIL
]);

435 
	`årštf
(
fout
, "gpgpu_¡®l_shd_mem[l_mem_ld][wb_iút_rc] = %d\n", 
gpu_¡®l_shd_mem_b»akdown
[
L_MEM_LD
][
WB_ICNT_RC_FAIL
]);

436 
	`årštf
(
fout
, "gpgpu_¡®l_shd_mem[l_mem_ld][wb_r¤v_ç] = %d\n", 
gpu_¡®l_shd_mem_b»akdown
[
L_MEM_LD
][
WB_CACHE_RSRV_FAIL
]);

437 
	`årštf
(
fout
, "gpgpu_¡®l_shd_mem[l_mem_¡][mshr_rc] = %d\n", 
gpu_¡®l_shd_mem_b»akdown
[
L_MEM_ST
][
MSHR_RC_FAIL
]);

438 
	`årštf
(
fout
, "gpgpu_¡®l_shd_mem[l_mem_¡][iút_rc] = %d\n", 
gpu_¡®l_shd_mem_b»akdown
[
L_MEM_ST
][
ICNT_RC_FAIL
]);

439 
	`årštf
(
fout
, "gpgpu_¡®l_shd_mem[l_mem_ld][wb_iút_rc] = %d\n", 
gpu_¡®l_shd_mem_b»akdown
[
L_MEM_ST
][
WB_ICNT_RC_FAIL
]);

440 
	`årštf
(
fout
, "gpgpu_¡®l_shd_mem[l_mem_ld][wb_r¤v_ç] = %d\n", 
gpu_¡®l_shd_mem_b»akdown
[
L_MEM_ST
][
WB_CACHE_RSRV_FAIL
]);

442 
	`årštf
(
fout
, "gpu_»g_bªk_cÚæiù_¡®l ğ%d\n", 
gpu_»g_bªk_cÚæiù_¡®ls
);

444 
	`årštf
(
fout
, "Warp Occupancy Distribution:\n");

445 
	`årštf
(
fout
, "SÎ:%d\t", 
shad”_cyşe_di¡ro
[2]);

446 
	`årštf
(
fout
, "W0_IdË:%d\t", 
shad”_cyşe_di¡ro
[0]);

447 
	`årštf
(
fout
, "W0_ScÜebßrd:%d", 
shad”_cyşe_di¡ro
[1]);

448 
i
 = 3; i < 
m_cÚfig
->
w¬p_size
 + 3; i++)

449 
	`årštf
(
fout
, "\tW%d:%d", 
i
-2, 
shad”_cyşe_di¡ro
[i]);

450 
	`årštf
(
fout
, "\n");

452 
m_outgošg_Œaffic_¡©s
->
	`´št
(
fout
);

453 
m_šcomšg_Œaffic_¡©s
->
	`´št
(
fout
);

454 
	}
}

456 
	gshad”_cÜe_¡©s
::
	$ev’t_w¬p_issued
Ğ
s_id
, 
w¬p_id
, 
num_issued
, 
dyÇmic_w¬p_id
 ) {

457 
	`as£¹
Ğ
w¬p_id
 <ğ
m_cÚfig
->
max_w¬ps_³r_shad”
 );

458  
i
 = 0; i < 
num_issued
; ++i ) {

459 iàĞ
m_shad”_dyÇmic_w¬p_issue_di¡ro
[ 
s_id
 ].
	`size
(è<ğ
dyÇmic_w¬p_id
 ) {

460 
m_shad”_dyÇmic_w¬p_issue_di¡ro
[ 
s_id
 ].
	`»size
(
dyÇmic_w¬p_id
 + 1);

462 ++
m_shad”_dyÇmic_w¬p_issue_di¡ro
[ 
s_id
 ][ 
dyÇmic_w¬p_id
 ];

463 iàĞ
m_shad”_w¬p_¦Ù_issue_di¡ro
[ 
s_id
 ].
	`size
(è<ğ
w¬p_id
 ) {

464 
m_shad”_w¬p_¦Ù_issue_di¡ro
[ 
s_id
 ].
	`»size
(
w¬p_id
 + 1);

466 ++
m_shad”_w¬p_¦Ù_issue_di¡ro
[ 
s_id
 ][ 
w¬p_id
 ];

468 
	}
}

470 
	gshad”_cÜe_¡©s
::
	$visu®iz”_´št
Ğ
gzFe
 
visu®iz”_fe
 )

473 
	`gz´štf
(
visu®iz”_fe
, "WarpDivergenceBreakdown:");

474 
tÙ®
=0;

475 
cf
 = (
m_cÚfig
->
gpgpu_w¬pdi¡ro_shad”
==-1)?m_cÚfig->
	`num_shad”
():1;

476 
	`gz´štf
(
visu®iz”_fe
, " %d", (
shad”_cyşe_di¡ro
[0] - 
Ï¡_shad”_cyşe_di¡ro
[0]è/ 
cf
 );

477 
	`gz´štf
(
visu®iz”_fe
, " %d", (
shad”_cyşe_di¡ro
[1] - 
Ï¡_shad”_cyşe_di¡ro
[1]è/ 
cf
 );

478 
	`gz´štf
(
visu®iz”_fe
, " %d", (
shad”_cyşe_di¡ro
[2] - 
Ï¡_shad”_cyşe_di¡ro
[2]è/ 
cf
 );

479 
i
=0; i<
m_cÚfig
->
w¬p_size
+3; i++) {

480 iàĞ
i
>=3 ) {

481 
tÙ®
 +ğ(
shad”_cyşe_di¡ro
[
i
] - 
Ï¡_shad”_cyşe_di¡ro
[i]);

482 iàĞ((
i
-3è% (
m_cÚfig
->
w¬p_size
/8)) == ((m_config->warp_size/8)-1) ) {

483 
	`gz´štf
(
visu®iz”_fe
, " %d", 
tÙ®
 / 
cf
 );

484 
tÙ®
=0;

487 
Ï¡_shad”_cyşe_di¡ro
[
i
] = 
shad”_cyşe_di¡ro
[i];

489 
	`gz´štf
(
visu®iz”_fe
,"\n");

492 
sid
 = 
m_cÚfig
->
gpgpu_w¬p_issue_shad”
;

493 
couÁ
 = 0;

494 
w¬p_id_issued_sum
 = 0;

495 
	`gz´štf
(
visu®iz”_fe
, "WarpIssueSlotBreakdown:");

496 if(
m_shad”_w¬p_¦Ù_issue_di¡ro
[
sid
].
	`size
() > 0){

497  
¡d
::
veùÜ
<>::
cÚ¡_™”©Ü
 
™”
 = 
m_shad”_w¬p_¦Ù_issue_di¡ro
[ 
sid
 ].
	`begš
();

498 
™”
 !ğ
m_shad”_w¬p_¦Ù_issue_di¡ro
[ 
sid
 ].
	`’d
(); i‹r++, 
couÁ
++ ) {

499 
diff
 = 
couÁ
 < 
m_Ï¡_shad”_w¬p_¦Ù_issue_di¡ro
.
	`size
() ?

500 *
™”
 - 
m_Ï¡_shad”_w¬p_¦Ù_issue_di¡ro
[ 
couÁ
 ] :

501 *
™”
;

502 
	`gz´štf
Ğ
visu®iz”_fe
, " %d", 
diff
 );

503 
w¬p_id_issued_sum
 +ğ
diff
;

505 
m_Ï¡_shad”_w¬p_¦Ù_issue_di¡ro
 = 
m_shad”_w¬p_¦Ù_issue_di¡ro
[ 
sid
 ];

507 
	`gz´štf
Ğ
visu®iz”_fe
, " 0");

509 
	`gz´štf
(
visu®iz”_fe
,"\n");

511 
	#DYNAMIC_WARP_PRINT_RESOLUTION
 32

	)

512 
tÙ®_issued_this_»sŞutiÚ
 = 0;

513 
dyÇmic_id_issued_sum
 = 0;

514 
couÁ
 = 0;

515 
	`gz´štf
(
visu®iz”_fe
, "WarpIssueDynamicIdBreakdown:");

516 if(
m_shad”_dyÇmic_w¬p_issue_di¡ro
[
sid
].
	`size
() > 0){

517  
¡d
::
veùÜ
<>::
cÚ¡_™”©Ü
 
™”
 = 
m_shad”_dyÇmic_w¬p_issue_di¡ro
[ 
sid
 ].
	`begš
();

518 
™”
 !ğ
m_shad”_dyÇmic_w¬p_issue_di¡ro
[ 
sid
 ].
	`’d
(); i‹r++, 
couÁ
++ ) {

519 
diff
 = 
couÁ
 < 
m_Ï¡_shad”_dyÇmic_w¬p_issue_di¡ro
.
	`size
() ?

520 *
™”
 - 
m_Ï¡_shad”_dyÇmic_w¬p_issue_di¡ro
[ 
couÁ
 ] :

521 *
™”
;

522 
tÙ®_issued_this_»sŞutiÚ
 +ğ
diff
;

523 iàĞĞ
couÁ
 + 1 ) % 
DYNAMIC_WARP_PRINT_RESOLUTION
 == 0 ) {

524 
	`gz´štf
Ğ
visu®iz”_fe
, " %d", 
tÙ®_issued_this_»sŞutiÚ
 );

525 
dyÇmic_id_issued_sum
 +ğ
tÙ®_issued_this_»sŞutiÚ
;

526 
tÙ®_issued_this_»sŞutiÚ
 = 0;

529 iàĞ
couÁ
 % 
DYNAMIC_WARP_PRINT_RESOLUTION
 != 0 ) {

530 
	`gz´štf
Ğ
visu®iz”_fe
, " %d", 
tÙ®_issued_this_»sŞutiÚ
 );

531 
dyÇmic_id_issued_sum
 +ğ
tÙ®_issued_this_»sŞutiÚ
;

533 
m_Ï¡_shad”_dyÇmic_w¬p_issue_di¡ro
 = 
m_shad”_dyÇmic_w¬p_issue_di¡ro
[ 
sid
 ];

534 
	`as£¹
Ğ
w¬p_id_issued_sum
 =ğ
dyÇmic_id_issued_sum
 );

536 
	`gz´štf
Ğ
visu®iz”_fe
, " 0");

538 
	`gz´štf
(
visu®iz”_fe
,"\n");

541 
	`gz´štf
(
visu®iz”_fe
, "gpgpu_n_ÿche_bkcÚæiù: %d\n", 
gpgpu_n_ÿche_bkcÚæiù
);

542 
	`gz´štf
(
visu®iz”_fe
, "gpgpu_n_shmem_bkcÚæiù: %d\n", 
gpgpu_n_shmem_bkcÚæiù
);

546 
	`gz´štf
(
visu®iz”_fe
, "shaderinsncount: ");

547 
i
=0;i<
m_cÚfig
->
	`num_shad”
();i++)

548 
	`gz´štf
(
visu®iz”_fe
, "%u ", 
m_num_sim_š¢
[
i
] );

549 
	`gz´štf
(
visu®iz”_fe
, "\n");

551 
	`gz´štf
(
visu®iz”_fe
, "shaderwarpinsncount: ");

552 
i
=0;i<
m_cÚfig
->
	`num_shad”
();i++)

553 
	`gz´štf
(
visu®iz”_fe
, "%u ", 
m_num_sim_wš¢
[
i
] );

554 
	`gz´štf
(
visu®iz”_fe
, "\n");

556 
	`gz´štf
(
visu®iz”_fe
, "shaderwarpdiv: ");

557 
i
=0;i<
m_cÚfig
->
	`num_shad”
();i++)

558 
	`gz´štf
(
visu®iz”_fe
, "%u ", 
m_n_div”ge
[
i
] );

559 
	`gz´štf
(
visu®iz”_fe
, "\n");

560 
	}
}

562 
	#PROGRAM_MEM_START
 0xF0000000

	)

565 
	gshad”_cÜe_ùx
::
	$decode
()

567 ifĞ
m_š¡_ãtch_bufãr
.
m_v®id
 ) {

569 
add»ss_ty³
 
pc
 = 
m_š¡_ãtch_bufãr
.
m_pc
;

570 cÚ¡ 
w¬p_š¡_t
* 
pI1
 = 
	`±x_ãtch_š¡
(
pc
);

571 
m_w¬p
[
m_š¡_ãtch_bufãr
.
m_w¬p_id
].
	`ibufãr_fl
(0,
pI1
);

572 
m_w¬p
[
m_š¡_ãtch_bufãr
.
m_w¬p_id
].
	`šc_š¡_š_p–še
();

573 ifĞ
pI1
 ) {

574 
m_¡©s
->
m_num_decoded_š¢
[
m_sid
]++;

575 if(
pI1
->
İºd_ty³
==
INT_OP
){

576 
m_¡©s
->
m_num_INTdecoded_š¢
[
m_sid
]++;

577 }if(
pI1
->
İºd_ty³
==
FP_OP
) {

578 
m_¡©s
->
m_num_FPdecoded_š¢
[
m_sid
]++;

580 cÚ¡ 
w¬p_š¡_t
* 
pI2
 = 
	`±x_ãtch_š¡
(
pc
+
pI1
->
isize
);

581 ifĞ
pI2
 ) {

582 
m_w¬p
[
m_š¡_ãtch_bufãr
.
m_w¬p_id
].
	`ibufãr_fl
(1,
pI2
);

583 
m_w¬p
[
m_š¡_ãtch_bufãr
.
m_w¬p_id
].
	`šc_š¡_š_p–še
();

584 
m_¡©s
->
m_num_decoded_š¢
[
m_sid
]++;

585 if(
pI2
->
İºd_ty³
==
INT_OP
){

586 
m_¡©s
->
m_num_INTdecoded_š¢
[
m_sid
]++;

587 }if(
pI2
->
İºd_ty³
==
FP_OP
) {

588 
m_¡©s
->
m_num_FPdecoded_š¢
[
m_sid
]++;

592 
m_š¡_ãtch_bufãr
.
m_v®id
 = 
çl£
;

594 
	}
}

596 
	gshad”_cÜe_ùx
::
	$ãtch
()

598 ifĞ!
m_š¡_ãtch_bufãr
.
m_v®id
 ) {

601  
i
=0; i < 
m_cÚfig
->
max_w¬ps_³r_shad”
; i++ ) {

602 
w¬p_id
 = (
m_Ï¡_w¬p_ãtched
+1+
i
è% 
m_cÚfig
->
max_w¬ps_³r_shad”
;

605 ifĞ
m_w¬p
[
w¬p_id
].
	`h¬dw¬e_dÚe
(è&& !
m_scÜebßrd
->
	`³ndšgWr™es
(w¬p_idè&& !m_w¬p[w¬p_id].
	`dÚe_ex™
() ) {

606 
boŞ
 
did_ex™
=
çl£
;

607  
t
=0;<
m_cÚfig
->
w¬p_size
;t++) {

608 
tid
=
w¬p_id
*
m_cÚfig
->
w¬p_size
+
t
;

609 ifĞ
m_th»adS‹
[
tid
].
m_aùive
 =ğ
Œue
 ) {

610 
m_th»adS‹
[
tid
].
m_aùive
 = 
çl£
;

611 
ùa_id
 = 
m_w¬p
[
w¬p_id
].
	`g‘_ùa_id
();

612 
	`»gi¡”_ùa_th»ad_ex™
(
ùa_id
);

613 
m_nÙ_com¶‘ed
 -= 1;

614 
m_aùive_th»ads
.
	`»£t
(
tid
);

615 
	`as£¹
Ğ
m_th»ad
[
tid
]!ğ
NULL
 );

616 
did_ex™
=
Œue
;

619 ifĞ
did_ex™
 )

620 
m_w¬p
[
w¬p_id
].
	`£t_dÚe_ex™
();

624 ifĞ!
m_w¬p
[
w¬p_id
].
	`funùiÚ®_dÚe
(è&& !m_w¬p[w¬p_id].
	`imiss_³ndšg
(è&& m_w¬p[w¬p_id].
	`ibufãr_em±y
() ) {

625 
add»ss_ty³
 
pc
 = 
m_w¬p
[
w¬p_id
].
	`g‘_pc
();

626 
add»ss_ty³
 
µc
 = 
pc
 + 
PROGRAM_MEM_START
;

627 
nby‹s
=16;

628 
off£t_š_block
 = 
pc
 & (
m_cÚfig
->
m_L1I_cÚfig
.
	`g‘_lše_sz
()-1);

629 ifĞ(
off£t_š_block
+
nby‹s
è> 
m_cÚfig
->
m_L1I_cÚfig
.
	`g‘_lše_sz
() )

630 
nby‹s
 = (
m_cÚfig
->
m_L1I_cÚfig
.
	`g‘_lše_sz
()-
off£t_š_block
);

634 
mem_acûss_t
 
	`acc
(
INST_ACC_R
,
µc
,
nby‹s
,
çl£
);

635 
mem_ãtch
 *
mf
 = 
Ãw
 
	`mem_ãtch
(
acc
,

636 
NULL
 ,

637 
READ_PACKET_SIZE
,

638 
w¬p_id
,

639 
m_sid
,

640 
m_c
,

641 
m_memÜy_cÚfig
 );

642 
¡d
::
li¡
<
ÿche_ev’t
> 
ev’ts
;

643 
ÿche_»que¡_¡©us
 
¡©us
 = 
m_L1I
->
	`acûss
Ğ(
Ãw_addr_ty³
)
µc
, 
mf
, 
gpu_sim_cyşe
+
gpu_tÙ_sim_cyşe
,
ev’ts
);

644 ifĞ
¡©us
 =ğ
MISS
 ) {

645 
m_Ï¡_w¬p_ãtched
=
w¬p_id
;

646 
m_w¬p
[
w¬p_id
].
	`£t_imiss_³ndšg
();

647 
m_w¬p
[
w¬p_id
].
	`£t_Ï¡_ãtch
(
gpu_sim_cyşe
);

648 } ifĞ
¡©us
 =ğ
HIT
 ) {

649 
m_Ï¡_w¬p_ãtched
=
w¬p_id
;

650 
m_š¡_ãtch_bufãr
 = 
	`iãtch_bufãr_t
(
pc
,
nby‹s
,
w¬p_id
);

651 
m_w¬p
[
w¬p_id
].
	`£t_Ï¡_ãtch
(
gpu_sim_cyşe
);

652 
d–‘e
 
mf
;

654 
m_Ï¡_w¬p_ãtched
=
w¬p_id
;

655 
	`as£¹
Ğ
¡©us
 =ğ
RESERVATION_FAIL
 );

656 
d–‘e
 
mf
;

663 
m_L1I
->
	`cyşe
();

665 ifĞ
m_L1I
->
	`acûss_»ady
() ) {

666 
mem_ãtch
 *
mf
 = 
m_L1I
->
	`Ãxt_acûss
();

667 
m_w¬p
[
mf
->
	`g‘_wid
()].
	`ş—r_imiss_³ndšg
();

668 
d–‘e
 
mf
;

670 
	}
}

672 
	gshad”_cÜe_ùx
::
	$func_exec_š¡
Ğ
w¬p_š¡_t
 &
š¡
 )

674 
	`execu‹_w¬p_š¡_t
(
š¡
);

675 ifĞ
š¡
.
	`is_lßd
(è|| in¡.
	`is_¡Üe
() )

676 
š¡
.
	`g’”©e_mem_acûs£s
();

677 
	}
}

679 
	gshad”_cÜe_ùx
::
	$issue_w¬p
Ğ
»gi¡”_£t
& 
pe_»g_£t
, cÚ¡ 
w¬p_š¡_t
* 
Ãxt_š¡
, cÚ¡ 
aùive_mask_t
 &
aùive_mask
, 
w¬p_id
 )

681 
w¬p_š¡_t
** 
pe_»g
 = 
pe_»g_£t
.
	`g‘_ä“
();

682 
	`as£¹
(
pe_»g
);

684 
m_w¬p
[
w¬p_id
].
	`ibufãr_ä“
();

685 
	`as£¹
(
Ãxt_š¡
->
	`v®id
());

686 **
pe_»g
 = *
Ãxt_š¡
;

687 (*
pe_»g
)->
	`issue
Ğ
aùive_mask
, 
w¬p_id
, 
gpu_tÙ_sim_cyşe
 + 
gpu_sim_cyşe
, 
m_w¬p
[w¬p_id].
	`g‘_dyÇmic_w¬p_id
() );

688 
m_¡©s
->
shad”_cyşe_di¡ro
[2+(*
pe_»g
)->
	`aùive_couÁ
()]++;

689 
	`func_exec_š¡
Ğ**
pe_»g
 );

690 ifĞ
Ãxt_š¡
->
İ
 =ğ
BARRIER_OP
 ){

691 
m_w¬p
[
w¬p_id
].
	`¡Üe_šfo_of_Ï¡_š¡_©_b¬r›r
(*
pe_»g
);

692 
m_b¬r›rs
.
	`w¬p_»aches_b¬r›r
(
m_w¬p
[
w¬p_id
].
	`g‘_ùa_id
(),w¬p_id,
cÚ¡_ÿ¡
<
w¬p_š¡_t
*> (
Ãxt_š¡
));

694 }ifĞ
Ãxt_š¡
->
İ
 =ğ
MEMORY_BARRIER_OP
 ){

695 
m_w¬p
[
w¬p_id
].
	`£t_memb¬
();

698 
	`upd©eSIMTSck
(
w¬p_id
,*
pe_»g
);

699 
m_scÜebßrd
->
	`»£rveRegi¡”s
(*
pe_»g
);

700 
m_w¬p
[
w¬p_id
].
	`£t_Ãxt_pc
(
Ãxt_š¡
->
pc
 +‚ext_š¡->
isize
);

701 
	}
}

703 
	gshad”_cÜe_ùx
::
	$issue
(){

705 
i
 = 0; i < 
scheduËrs
.
	`size
(); i++) {

706 
scheduËrs
[
i
]->
	`cyşe
();

708 
	}
}

710 
	gshd_w¬p_t
& 
	gscheduËr_un™
::
	$w¬p
(
i
){

711  (*
m_w¬p
)[
i
];

712 
	}
}

734 
	g‹m¶©e
 < 
şass
 
	gT
 >

735 
	gscheduËr_un™
::
Üd”_Ìr
Ğ
¡d
::
veùÜ
< 
T
 >& 
»suÉ_li¡
,

736 cÚ¡ 
ty³Çme
 
¡d
::
veùÜ
< 
T
 >& 
šput_li¡
,

737 cÚ¡ 
ty³Çme
 
¡d
::
veùÜ
< 
T
 >::
cÚ¡_™”©Ü
& 
Ï¡_issued_äom_šput
,

738 
num_w¬ps_to_add
 )

740 
as£¹
Ğ
num_w¬ps_to_add
 <ğ
šput_li¡
.
size
() );

741 
	g»suÉ_li¡
.
ş—r
();

742 
ty³Çme
 
	g¡d
::
veùÜ
< 
T
 >::
cÚ¡_™”©Ü
 
™”


743 ğĞ
Ï¡_issued_äom_šput
 =ğ
šput_li¡
.
’d
(èè? iÅut_li¡.
begš
()

744 : 
Ï¡_issued_äom_šput
 + 1;

746  
	gcouÁ
 = 0;

747 
	gcouÁ
 < 
	gnum_w¬ps_to_add
;

748 ++
	g™”
, ++
	gcouÁ
) {

749 iàĞ
	g™”
 =ğ
šput_li¡
.
’d
() ) {

750 
™”
 = 
šput_li¡
.
begš
();

752 
	g»suÉ_li¡
.
push_back
Ğ*
™”
 );

767 
	g‹m¶©e
 < 
şass
 
	gT
 >

768 
	gscheduËr_un™
::
Üd”_by_´iÜ™y
Ğ
¡d
::
veùÜ
< 
T
 >& 
»suÉ_li¡
,

769 cÚ¡ 
ty³Çme
 
¡d
::
veùÜ
< 
T
 >& 
šput_li¡
,

770 cÚ¡ 
ty³Çme
 
¡d
::
veùÜ
< 
T
 >::
cÚ¡_™”©Ü
& 
Ï¡_issued_äom_šput
,

771 
num_w¬ps_to_add
,

772 
Ord”šgTy³
 
Üd”šg
,

773 
	$boŞ
 (*
´iÜ™y_func
)(
T
 
lhs
, T 
rhs
) )

775 
	`as£¹
Ğ
num_w¬ps_to_add
 <ğ
šput_li¡
.
	`size
() );

776 
»suÉ_li¡
.
	`ş—r
();

777 
ty³Çme
 
¡d
::
veùÜ
< 
T
 > 
‹mp
 = 
šput_li¡
;

779 iàĞ
ORDERING_GREEDY_THEN_PRIORITY_FUNC
 =ğ
Üd”šg
 ) {

780 
T
 
g»edy_v®ue
 = *
Ï¡_issued_äom_šput
;

781 
»suÉ_li¡
.
	`push_back
Ğ
g»edy_v®ue
 );

783 
¡d
::
	`sÜt
Ğ
‹mp
.
	`begš
(),emp.
	`’d
(), 
´iÜ™y_func
 );

784 
ty³Çme
 
¡d
::
veùÜ
< 
T
 >::
™”©Ü
 
™”
 = 
‹mp
.
	`begš
();

785  
couÁ
 = 0; couÁ < 
num_w¬ps_to_add
; ++couÁ, ++
™”
 ) {

786 iàĞ*
™”
 !ğ
g»edy_v®ue
 ) {

787 
»suÉ_li¡
.
	`push_back
Ğ*
™”
 );

790 } iàĞ
ORDERED_PRIORITY_FUNC_ONLY
 =ğ
Üd”šg
 ) {

791 
¡d
::
	`sÜt
Ğ
‹mp
.
	`begš
(),emp.
	`’d
(), 
´iÜ™y_func
 );

792 
ty³Çme
 
¡d
::
veùÜ
< 
T
 >::
™”©Ü
 
™”
 = 
‹mp
.
	`begš
();

793  
couÁ
 = 0; couÁ < 
num_w¬ps_to_add
; ++couÁ, ++
™”
 ) {

794 
»suÉ_li¡
.
	`push_back
Ğ*
™”
 );

797 
	`årštf
Ğ
¡d”r
, "UnknowÀÜd”šg - %d\n", 
Üd”šg
 );

798 
	`abÜt
();

800 
	}
}

802 
	gscheduËr_un™
::
	$cyşe
()

804 
	`SCHED_DPRINTF
( "scheduler_unit::cycle()\n" );

805 
boŞ
 
v®id_š¡
 = 
çl£
;

806 
boŞ
 
»ady_š¡
 = 
çl£
;

807 
boŞ
 
issued_š¡
 = 
çl£
;

809 
	`Üd”_w¬ps
();

810  
¡d
::
veùÜ
< 
shd_w¬p_t
* >::
cÚ¡_™”©Ü
 
™”
 = 
m_Ãxt_cyşe_´iÜ™ized_w¬ps
.
	`begš
();

811 
™”
 !ğ
m_Ãxt_cyşe_´iÜ™ized_w¬ps
.
	`’d
();

812 
™”
++ ) {

814 iàĞ(*
™”
è=ğ
NULL
 || (*™”)->
	`dÚe_ex™
() ) {

817 
	`SCHED_DPRINTF
( "Testing (warp_id %u, dynamic_warp_id %u)\n",

818 (*
™”
)->
	`g‘_w¬p_id
(), (*™”)->
	`g‘_dyÇmic_w¬p_id
() );

819 
w¬p_id
 = (*
™”
)->
	`g‘_w¬p_id
();

820 
checked
=0;

821 
issued
=0;

822 
max_issue
 = 
m_shad”
->
m_cÚfig
->
gpgpu_max_š¢_issue_³r_w¬p
;

823  !
	`w¬p
(
w¬p_id
).
	`wa™šg
(è&& !w¬p(w¬p_id).
	`ibufãr_em±y
(è&& (
checked
 < 
max_issue
è&& (checked <ğ
issued
) && (issued < max_issue) ) {

824 cÚ¡ 
w¬p_š¡_t
 *
pI
 = 
	`w¬p
(
w¬p_id
).
	`ibufãr_Ãxt_š¡
();

825 
boŞ
 
v®id
 = 
	`w¬p
(
w¬p_id
).
	`ibufãr_Ãxt_v®id
();

826 
boŞ
 
w¬p_š¡_issued
 = 
çl£
;

827 
pc
,
½c
;

828 
m_simt_¡ack
[
w¬p_id
]->
	`g‘_pdom_¡ack_tİ_šfo
(&
pc
,&
½c
);

829 
	`SCHED_DPRINTF
( "Warp (warp_id %u, dynamic_warp_id %u) has valid instruction (%s)\n",

830 (*
™”
)->
	`g‘_w¬p_id
(), (*™”)->
	`g‘_dyÇmic_w¬p_id
(),

831 
	`±x_g‘_š¢_¡r
Ğ
pc
).
	`c_¡r
() );

832 ifĞ
pI
 ) {

833 
	`as£¹
(
v®id
);

834 ifĞ
pc
 !ğ
pI
->pc ) {

835 
	`SCHED_DPRINTF
( "Warp (warp_id %u, dynamic_warp_id %u) control hazard instruction flush\n",

836 (*
™”
)->
	`g‘_w¬p_id
(), (*™”)->
	`g‘_dyÇmic_w¬p_id
() );

838 
	`w¬p
(
w¬p_id
).
	`£t_Ãxt_pc
(
pc
);

839 
	`w¬p
(
w¬p_id
).
	`ibufãr_æush
();

841 
v®id_š¡
 = 
Œue
;

842 iàĞ!
m_scÜebßrd
->
	`checkCŞlisiÚ
(
w¬p_id
, 
pI
) ) {

843 
	`SCHED_DPRINTF
( "Warp (warp_id %u, dynamic_warp_id %u)…asses scoreboard\n",

844 (*
™”
)->
	`g‘_w¬p_id
(), (*™”)->
	`g‘_dyÇmic_w¬p_id
() );

845 
»ady_š¡
 = 
Œue
;

846 cÚ¡ 
aùive_mask_t
 &
aùive_mask
 = 
m_simt_¡ack
[
w¬p_id
]->
	`g‘_aùive_mask
();

847 
	`as£¹
Ğ
	`w¬p
(
w¬p_id
).
	`š¡_š_p–še
() );

848 iàĞ(
pI
->
İ
 =ğ
LOAD_OP
è|| (pI->İ =ğ
STORE_OP
è|| (pI->İ =ğ
MEMORY_BARRIER_OP
) ) {

849 ifĞ
m_mem_out
->
	`has_ä“
() ) {

850 
m_shad”
->
	`issue_w¬p
(*
m_mem_out
,
pI
,
aùive_mask
,
w¬p_id
);

851 
issued
++;

852 
issued_š¡
=
Œue
;

853 
w¬p_š¡_issued
 = 
Œue
;

856 
boŞ
 
¥_pe_ava
 = 
m_¥_out
->
	`has_ä“
();

857 
boŞ
 
sfu_pe_ava
 = 
m_sfu_out
->
	`has_ä“
();

858 ifĞ
¥_pe_ava
 && (
pI
->
İ
 !ğ
SFU_OP
) ) {

860 
m_shad”
->
	`issue_w¬p
(*
m_¥_out
,
pI
,
aùive_mask
,
w¬p_id
);

861 
issued
++;

862 
issued_š¡
=
Œue
;

863 
w¬p_š¡_issued
 = 
Œue
;

864 } iàĞ(
pI
->
İ
 =ğ
SFU_OP
è|| (pI->İ =ğ
ALU_SFU_OP
) ) {

865 ifĞ
sfu_pe_ava
 ) {

866 
m_shad”
->
	`issue_w¬p
(*
m_sfu_out
,
pI
,
aùive_mask
,
w¬p_id
);

867 
issued
++;

868 
issued_š¡
=
Œue
;

869 
w¬p_š¡_issued
 = 
Œue
;

873 
	`SCHED_DPRINTF
( "Warp (warp_id %u, dynamic_warp_id %u) fails scoreboard\n",

874 (*
™”
)->
	`g‘_w¬p_id
(), (*™”)->
	`g‘_dyÇmic_w¬p_id
() );

877 } ifĞ
v®id
 ) {

879 
	`SCHED_DPRINTF
( "Warp (warp_id %u, dynamic_warp_id %u)„eturn from diverged warp flush\n",

880 (*
™”
)->
	`g‘_w¬p_id
(), (*™”)->
	`g‘_dyÇmic_w¬p_id
() );

881 
	`w¬p
(
w¬p_id
).
	`£t_Ãxt_pc
(
pc
);

882 
	`w¬p
(
w¬p_id
).
	`ibufãr_æush
();

884 if(
w¬p_š¡_issued
) {

885 
	`SCHED_DPRINTF
( "Warp (warp_id %u, dynamic_warp_id %u) issued %u instructions\n",

886 (*
™”
)->
	`g‘_w¬p_id
(),

887 (*
™”
)->
	`g‘_dyÇmic_w¬p_id
(),

888 
issued
 );

889 
	`do_Ú_w¬p_issued
Ğ
w¬p_id
, 
issued
, 
™”
 );

891 
checked
++;

893 iàĞ
issued
 ) {

899  
¡d
::
veùÜ
< 
shd_w¬p_t
* >::
cÚ¡_™”©Ü
 
su³rvi£d_™”
 = 
m_su³rvi£d_w¬ps
.
	`begš
();

900 
su³rvi£d_™”
 !ğ
m_su³rvi£d_w¬ps
.
	`’d
();

901 ++
su³rvi£d_™”
 ) {

902 iàĞ*
™”
 =ğ*
su³rvi£d_™”
 ) {

903 
m_Ï¡_su³rvi£d_issued
 = 
su³rvi£d_™”
;

911 ifĞ!
v®id_š¡
 )

912 
m_¡©s
->
shad”_cyşe_di¡ro
[0]++;

913 ifĞ!
»ady_š¡
 )

914 
m_¡©s
->
shad”_cyşe_di¡ro
[1]++;

915 ifĞ!
issued_š¡
 )

916 
m_¡©s
->
shad”_cyşe_di¡ro
[2]++;

917 
	}
}

919 
	gscheduËr_un™
::
do_Ú_w¬p_issued
Ğ
w¬p_id
,

920 
num_issued
,

921 cÚ¡ 
¡d
::
veùÜ
< 
shd_w¬p_t
* >::
cÚ¡_™”©Ü
& 
´iÜ™ized_™”
 )

923 
m_¡©s
->
ev’t_w¬p_issued
Ğ
m_shad”
->
g‘_sid
(),

924 
w¬p_id
,

925 
num_issued
,

926 
w¬p
(
w¬p_id
).
g‘_dyÇmic_w¬p_id
() );

927 
w¬p
(
w¬p_id
).
ibufãr_¡•
();

930 
boŞ
 
	gscheduËr_un™
::
	$sÜt_w¬ps_by_Şde¡_dyÇmic_id
(
shd_w¬p_t
* 
lhs
, shd_w¬p_t* 
rhs
)

932 ià(
rhs
 && 
lhs
) {

933 iàĞ
lhs
->
	`dÚe_ex™
(è||†hs->
	`wa™šg
() ) {

934  
çl£
;

935 } iàĞ
rhs
->
	`dÚe_ex™
(è||„hs->
	`wa™šg
() ) {

936  
Œue
;

938  
lhs
->
	`g‘_dyÇmic_w¬p_id
(è< 
rhs
->get_dynamic_warp_id();

941  
lhs
 < 
rhs
;

943 
	}
}

945 
	gÌr_scheduËr
::
	$Üd”_w¬ps
()

947 
	`Üd”_Ìr
Ğ
m_Ãxt_cyşe_´iÜ™ized_w¬ps
,

948 
m_su³rvi£d_w¬ps
,

949 
m_Ï¡_su³rvi£d_issued
,

950 
m_su³rvi£d_w¬ps
.
	`size
() );

951 
	}
}

953 
	ggto_scheduËr
::
	$Üd”_w¬ps
()

955 
	`Üd”_by_´iÜ™y
Ğ
m_Ãxt_cyşe_´iÜ™ized_w¬ps
,

956 
m_su³rvi£d_w¬ps
,

957 
m_Ï¡_su³rvi£d_issued
,

958 
m_su³rvi£d_w¬ps
.
	`size
(),

959 
ORDERING_GREEDY_THEN_PRIORITY_FUNC
,

960 
scheduËr_un™
::
sÜt_w¬ps_by_Şde¡_dyÇmic_id
 );

961 
	}
}

964 
	gtwo_Ëv–_aùive_scheduËr
::
do_Ú_w¬p_issued
Ğ
w¬p_id
,

965 
num_issued
,

966 cÚ¡ 
¡d
::
veùÜ
< 
shd_w¬p_t
* >::
cÚ¡_™”©Ü
& 
´iÜ™ized_™”
 )

968 
scheduËr_un™
::
do_Ú_w¬p_issued
Ğ
w¬p_id
, 
num_issued
, 
´iÜ™ized_™”
 );

969 iàĞ
	gSCHEDULER_PRIORITIZATION_LRR
 =ğ
m_šÃr_Ëv–_´iÜ™iz©iÚ
 ) {

970 
¡d
::
veùÜ
< 
shd_w¬p_t
* > 
Ãw_aùive
;

971 
Üd”_Ìr
Ğ
Ãw_aùive
,

972 
m_Ãxt_cyşe_´iÜ™ized_w¬ps
,

973 
´iÜ™ized_™”
,

974 
m_Ãxt_cyşe_´iÜ™ized_w¬ps
.
size
() );

975 
	gm_Ãxt_cyşe_´iÜ™ized_w¬ps
 = 
Ãw_aùive
;

977 
årštf
Ğ
¡d”r
,

979 
m_šÃr_Ëv–_´iÜ™iz©iÚ
 );

980 
abÜt
();

984 
	gtwo_Ëv–_aùive_scheduËr
::
	$Üd”_w¬ps
()

987 
num_demÙed
 = 0;

988  
¡d
::
veùÜ
< 
shd_w¬p_t
* >::
™”©Ü
 
™”
 = 
m_Ãxt_cyşe_´iÜ™ized_w¬ps
.
	`begš
();

989 
™”
 !ğ
m_Ãxt_cyşe_´iÜ™ized_w¬ps
.
	`’d
(); ) {

990 
boŞ
 
wa™šg
 = (*
™”
)->
	`wa™šg
();

991 
i
=0; i<4; i++){

992 cÚ¡ 
w¬p_š¡_t
* 
š¡
 = (*
™”
)->
	`ibufãr_Ãxt_š¡
();

994 iàĞ
š¡
 && in¡->
š
[
i
] > 0 && 
this
->
m_scÜebßrd
->
	`i¦Úgİ
((*
™”
)->
	`g‘_w¬p_id
(), inst->in[i])){

995 
wa™šg
 = 
Œue
;

999 ifĞ
wa™šg
 ) {

1000 
m_³ndšg_w¬ps
.
	`push_back
(*
™”
);

1001 
™”
 = 
m_Ãxt_cyşe_´iÜ™ized_w¬ps
.
	`”a£
(iter);

1002 
	`SCHED_DPRINTF
( "DEMOTED warp_id=%d, dynamic_warp_id=%d\n",

1003 (*
™”
)->
	`g‘_w¬p_id
(),

1004 (*
™”
)->
	`g‘_dyÇmic_w¬p_id
() );

1005 ++
num_demÙed
;

1007 ++
™”
;

1012 
num_´omÙed
 = 0;

1013 iàĞ
SCHEDULER_PRIORITIZATION_SRR
 =ğ
m_ou‹r_Ëv–_´iÜ™iz©iÚ
 ) {

1014  
m_Ãxt_cyşe_´iÜ™ized_w¬ps
.
	`size
(è< 
m_max_aùive_w¬ps
 ) {

1015 
m_Ãxt_cyşe_´iÜ™ized_w¬ps
.
	`push_back
(
m_³ndšg_w¬ps
.
	`äÚt
());

1016 
m_³ndšg_w¬ps
.
	`pİ_äÚt
();

1017 
	`SCHED_DPRINTF
( "PROMOTED warp_id=%d, dynamic_warp_id=%d\n",

1018 (
m_Ãxt_cyşe_´iÜ™ized_w¬ps
.
	`back
())->
	`g‘_w¬p_id
(),

1019 (
m_Ãxt_cyşe_´iÜ™ized_w¬ps
.
	`back
())->
	`g‘_dyÇmic_w¬p_id
() );

1020 ++
num_´omÙed
;

1023 
	`årštf
Ğ
¡d”r
,

1025 
m_ou‹r_Ëv–_´iÜ™iz©iÚ
 );

1026 
	`abÜt
();

1028 
	`as£¹
Ğ
num_´omÙed
 =ğ
num_demÙed
 );

1029 
	}
}

1031 
	gswl_scheduËr
::
swl_scheduËr
 ( 
shad”_cÜe_¡©s
* 
¡©s
, 
shad”_cÜe_ùx
* 
shad”
,

1032 
ScÜebßrd
* 
scÜebßrd
, 
simt_¡ack
** 
simt
,

1033 
¡d
::
veùÜ
<
shd_w¬p_t
>* 
w¬p
,

1034 
»gi¡”_£t
* 
¥_out
,

1035 
»gi¡”_£t
* 
sfu_out
,

1036 
»gi¡”_£t
* 
mem_out
,

1037 
id
,

1038 * 
cÚfig_¡ršg
 )

1039 : 
	$scheduËr_un™
 ( 
¡©s
, 
shad”
, 
scÜebßrd
, 
simt
, 
w¬p
, 
¥_out
, 
sfu_out
, 
mem_out
, 
id
 )

1041 
m_´iÜ™iz©iÚ_»adš
;

1042 
»t
 = 
	`ssÿnf
Ğ
cÚfig_¡ršg
,

1044 &
m_´iÜ™iz©iÚ_»adš
,

1045 &
m_num_w¬ps_to_lim™


1047 
	`as£¹
Ğ2 =ğ
»t
 );

1048 
m_´iÜ™iz©iÚ
 = (
scheduËr_´iÜ™iz©iÚ_ty³
)
m_´iÜ™iz©iÚ_»adš
;

1050 
	`as£¹
Ğ
m_´iÜ™iz©iÚ
 =ğ
SCHEDULER_PRIORITIZATION_GTO
 );

1051 
	`as£¹
Ğ
m_num_w¬ps_to_lim™
 <ğ
shad”
->
	`g‘_cÚfig
()->
max_w¬ps_³r_shad”
 );

1052 
	}
}

1054 
	gswl_scheduËr
::
	$Üd”_w¬ps
()

1056 iàĞ
SCHEDULER_PRIORITIZATION_GTO
 =ğ
m_´iÜ™iz©iÚ
 ) {

1057 
	`Üd”_by_´iÜ™y
Ğ
m_Ãxt_cyşe_´iÜ™ized_w¬ps
,

1058 
m_su³rvi£d_w¬ps
,

1059 
m_Ï¡_su³rvi£d_issued
,

1060 
	`MIN
Ğ
m_num_w¬ps_to_lim™
, 
m_su³rvi£d_w¬ps
.
	`size
() ),

1061 
ORDERING_GREEDY_THEN_PRIORITY_FUNC
,

1062 
scheduËr_un™
::
sÜt_w¬ps_by_Şde¡_dyÇmic_id
 );

1064 
	`årštf
(
¡d”r
, "swl_scheduË¸m_´iÜ™iz©iÚ = %d\n", 
m_´iÜ™iz©iÚ
);

1065 
	`abÜt
();

1067 
	}
}

1069 
	gshad”_cÜe_ùx
::
	$»ad_İ”ªds
()

1071 
	}
}

1073 
add»ss_ty³
 
	$cßËsûd_£gm’t
(
add»ss_ty³
 
addr
, 
£gm’t_size_lg2by‹s
)

1075  (
addr
 >> 
£gm’t_size_lg2by‹s
);

1076 
	}
}

1079 
	gshad”_cÜe_ùx
::
	$Œª¦©e_loÿl_memaddr
Ğ
add»ss_ty³
 
loÿÏddr
, 
tid
, 
num_shad”
, 
d©asize
, 
Ãw_addr_ty³
* 
Œª¦©ed_addrs
 )

1084 
add»ss_ty³
 
th»ad_ba£
 = 0;

1085 
max_cÚcu¼’t_th»ads
=0;

1086 ià(
m_cÚfig
->
gpgpu_loÿl_mem_m­
) {

1099 
th»ad_ba£
 = 4*(
k”Ãl_·dded_th»ads_³r_ùa
 * (
m_sid
 + 
num_shad”
 * (
tid
 / kernel_padded_threads_per_cta))

1100 + 
tid
 % 
k”Ãl_·dded_th»ads_³r_ùa
);

1101 
max_cÚcu¼’t_th»ads
 = 
k”Ãl_·dded_th»ads_³r_ùa
 * 
k”Ãl_max_ùa_³r_shad”
 * 
num_shad”
;

1105 
th»ad_ba£
 = 4*(
m_cÚfig
->
n_th»ad_³r_shad”
 * 
m_sid
 + 
tid
);

1106 
max_cÚcu¼’t_th»ads
 = 
num_shad”
 * 
m_cÚfig
->
n_th»ad_³r_shad”
;

1108 
	`as£¹
Ğ
th»ad_ba£
 < 4 *
max_cÚcu¼’t_th»ads
 );

1112 
num_acûs£s
 = 0;

1114 if(
d©asize
 >= 4) {

1116 
	`as£¹
(
d©asize
%4 == 0);

1117 
num_acûs£s
 = 
d©asize
/4;

1118 
	`as£¹
(
num_acûs£s
 <ğ
MAX_ACCESSES_PER_INSN_PER_THREAD
);

1119 
	`as£¹
(
loÿÏddr
%4 == 0);

1120 
i
=0; i<
num_acûs£s
; i++) {

1121 
add»ss_ty³
 
loÿl_wÜd
 = 
loÿÏddr
/4 + 
i
;

1122 
add»ss_ty³
 
lš—r_add»ss
 = 
loÿl_wÜd
*
max_cÚcu¼’t_th»ads
*4 + 
th»ad_ba£
 + 
LOCAL_GENERIC_START
;

1123 
Œª¦©ed_addrs
[
i
] = 
lš—r_add»ss
;

1127 
	`as£¹
(
d©asize
 > 0);

1128 
num_acûs£s
 = 1;

1129 
add»ss_ty³
 
loÿl_wÜd
 = 
loÿÏddr
/4;

1130 
add»ss_ty³
 
loÿl_wÜd_off£t
 = 
loÿÏddr
%4;

1131 
	`as£¹
Ğ(
loÿÏddr
+
d©asize
-1)/4 =ğ
loÿl_wÜd
 );

1132 
add»ss_ty³
 
lš—r_add»ss
 = 
loÿl_wÜd
*
max_cÚcu¼’t_th»ads
*4 + 
loÿl_wÜd_off£t
 + 
th»ad_ba£
 + 
LOCAL_GENERIC_START
;

1133 
Œª¦©ed_addrs
[0] = 
lš—r_add»ss
;

1135  
num_acûs£s
;

1136 
	}
}

1139 
	gshad”_cÜe_ùx
::
	$‹¡_»s_bus
(
Ï‹ncy
){

1140 
i
=0; i<
num_»suÉ_bus
; i++){

1141 if(!
m_»suÉ_bus
[
i
]->
	`‹¡
(
Ï‹ncy
)){ i;}

1144 
	}
}

1146 
	gshad”_cÜe_ùx
::
	$execu‹
()

1148 
i
=0; i<
num_»suÉ_bus
; i++){

1149 *(
m_»suÉ_bus
[
i
]) >>=1;

1151  
n
=0;‚ < 
m_num_funùiÚ_un™s
;‚++ ) {

1152 
muÉl›r
 = 
m_fu
[
n
]->
	`şock_muÉl›r
();

1153  
c
=0; c < 
muÉl›r
; c++ )

1154 
m_fu
[
n
]->
	`cyşe
();

1155 
m_fu
[
n
]->
	`aùive_ÏÃs_š_p–še
();

1156 
p–še_¡age_Çme_t
 
issue_pÜt
 = 
m_issue_pÜt
[
n
];

1157 
»gi¡”_£t
& 
issue_š¡
 = 
m_p–še_»g
[ 
issue_pÜt
 ];

1158 
w¬p_š¡_t
** 
»ady_»g
 = 
issue_š¡
.
	`g‘_»ady
();

1159 ifĞ
issue_š¡
.
	`has_»ady
(è&& 
m_fu
[
n
]->
	`ÿn_issue
Ğ**
»ady_»g
 ) ) {

1160 
boŞ
 
scheduË_wb_now
 = !
m_fu
[
n
]->
	`¡®ÏbË
();

1161 
»sbus
 = -1;

1162 ifĞ
scheduË_wb_now
 && (
»sbus
=
	`‹¡_»s_bus
Ğ(*
»ady_»g
)->
Ï‹ncy
 ))!=-1 ) {

1163 
	`as£¹
Ğ(*
»ady_»g
)->
Ï‹ncy
 < 
MAX_ALU_LATENCY
 );

1164 
m_»suÉ_bus
[
»sbus
]->
	`£t
Ğ(*
»ady_»g
)->
Ï‹ncy
 );

1165 
m_fu
[
n
]->
	`issue
Ğ
issue_š¡
 );

1166 } ifĞ!
scheduË_wb_now
 ) {

1167 
m_fu
[
n
]->
	`issue
Ğ
issue_š¡
 );

1173 
	}
}

1175 
	gld¡_un™
::
	$´št_ÿche_¡©s
Ğ
FILE
 *
å
, & 
dl1_acûs£s
, & 
dl1_mis£s
 ) {

1176 ifĞ
m_L1D
 ) {

1177 
m_L1D
->
	`´št
Ğ
å
, 
dl1_acûs£s
, 
dl1_mis£s
 );

1179 
	}
}

1181 
	gld¡_un™
::
	$g‘_ÿche_¡©s
(
ÿche_¡©s
 &
cs
) {

1183 if(
m_L1D
)

1184 
cs
 +ğ
m_L1D
->
	`g‘_¡©s
();

1185 if(
m_L1C
)

1186 
cs
 +ğ
m_L1C
->
	`g‘_¡©s
();

1187 if(
m_L1T
)

1188 
cs
 +ğ
m_L1T
->
	`g‘_¡©s
();

1190 
	}
}

1192 
	gld¡_un™
::
	$g‘_L1D_sub_¡©s
(
ÿche_sub_¡©s
 &
css
) const{

1193 if(
m_L1D
)

1194 
m_L1D
->
	`g‘_sub_¡©s
(
css
);

1195 
	}
}

1196 
	gld¡_un™
::
	$g‘_L1C_sub_¡©s
(
ÿche_sub_¡©s
 &
css
) const{

1197 if(
m_L1C
)

1198 
m_L1C
->
	`g‘_sub_¡©s
(
css
);

1199 
	}
}

1200 
	gld¡_un™
::
	$g‘_L1T_sub_¡©s
(
ÿche_sub_¡©s
 &
css
) const{

1201 if(
m_L1T
)

1202 
m_L1T
->
	`g‘_sub_¡©s
(
css
);

1203 
	}
}

1205 
	gshad”_cÜe_ùx
::
	$w¬p_š¡_com¶‘e
(cÚ¡ 
w¬p_š¡_t
 &
š¡
)

1208 
	`´štf
("[warp_inst_complete] uid=%u core=%u warp=%u…c=%#x @ime=%llu issued@%llu\n",

1209 
š¡
.
	`g‘_uid
(), 
m_sid
, in¡.
	`w¬p_id
(), in¡.
pc
, 
gpu_tÙ_sim_cyşe
 + 
gpu_sim_cyşe
, in¡.
	`g‘_issue_cyşe
());

1211 if(
š¡
.
İ_pe
==
SP__OP
)

1212 
m_¡©s
->
m_num_¥_comm™‹d
[
m_sid
]++;

1213 if(
š¡
.
İ_pe
==
SFU__OP
)

1214 
m_¡©s
->
m_num_sfu_comm™‹d
[
m_sid
]++;

1215 if(
š¡
.
İ_pe
==
MEM__OP
)

1216 
m_¡©s
->
m_num_mem_comm™‹d
[
m_sid
]++;

1218 if(
m_cÚfig
->
gpgpu_şock_g©ed_ÏÃs
==
çl£
)

1219 
m_¡©s
->
m_num_sim_š¢
[
m_sid
] +ğ
m_cÚfig
->
w¬p_size
;

1221 
m_¡©s
->
m_num_sim_š¢
[
m_sid
] +ğ
š¡
.
	`aùive_couÁ
();

1223 
m_¡©s
->
m_num_sim_wš¢
[
m_sid
]++;

1224 
m_gpu
->
gpu_sim_š¢
 +ğ
š¡
.
	`aùive_couÁ
();

1225 
š¡
.
	`com¶‘ed
(
gpu_tÙ_sim_cyşe
 + 
gpu_sim_cyşe
);

1226 
	}
}

1228 
	gshad”_cÜe_ùx
::
	$wr™eback
()

1231 
max_comm™‹d_th»ad_š¡ruùiÚs
=
m_cÚfig
->
w¬p_size
 * (m_cÚfig->
pe_widths
[
EX_WB
]);

1232 
m_¡©s
->
m_p–še_duty_cyşe
[
m_sid
]=(()(m_¡©s->
m_num_sim_š¢
[m_sid]-m_¡©s->
m_Ï¡_num_sim_š¢
[m_sid]))/
max_comm™‹d_th»ad_š¡ruùiÚs
;

1234 
m_¡©s
->
m_Ï¡_num_sim_š¢
[
m_sid
]=m_¡©s->
m_num_sim_š¢
[m_sid];

1235 
m_¡©s
->
m_Ï¡_num_sim_wš¢
[
m_sid
]=m_¡©s->
m_num_sim_wš¢
[m_sid];

1237 
w¬p_š¡_t
** 
´eg
 = 
m_p–še_»g
[
EX_WB
].
	`g‘_»ady
();

1238 
w¬p_š¡_t
* 
pe_»g
 = (
´eg
==
NULL
)? NULL:*preg;

1239  
´eg
 
ªd
 !
pe_»g
->
	`em±y
()) {

1257 
m_İ”ªd_cŞËùÜ
.
	`wr™eback
(*
pe_»g
);

1258 
w¬p_id
 = 
pe_»g
->
	`w¬p_id
();

1259 
m_scÜebßrd
->
	`»Ëa£Regi¡”s
Ğ
pe_»g
 );

1260 
m_w¬p
[
w¬p_id
].
	`dec_š¡_š_p–še
();

1261 
	`w¬p_š¡_com¶‘e
(*
pe_»g
);

1262 
m_gpu
->
gpu_sim_š¢_Ï¡_upd©e_sid
 = 
m_sid
;

1263 
m_gpu
->
gpu_sim_š¢_Ï¡_upd©e
 = 
gpu_sim_cyşe
;

1264 
m_Ï¡_š¡_gpu_sim_cyşe
 = 
gpu_sim_cyşe
;

1265 
m_Ï¡_š¡_gpu_tÙ_sim_cyşe
 = 
gpu_tÙ_sim_cyşe
;

1266 
pe_»g
->
	`ş—r
();

1267 
´eg
 = 
m_p–še_»g
[
EX_WB
].
	`g‘_»ady
();

1268 
pe_»g
 = (
´eg
==
NULL
)? NULL:*preg;

1270 
	}
}

1272 
boŞ
 
	gld¡_un™
::
	$sh¬ed_cyşe
Ğ
w¬p_š¡_t
 &
š¡
, 
mem_¡age_¡®l_ty³
 &
rc_ç
, 
mem_¡age_acûss_ty³
 &
ç_ty³
)

1274 ifĞ
š¡
.
¥aû
.
	`g‘_ty³
(è!ğ
sh¬ed_¥aû
 )

1275  
Œue
;

1277 if(
š¡
.
	`has_di¥©ch_d–ay
()){

1278 
m_¡©s
->
gpgpu_n_shmem_bªk_acûss
[
m_sid
]++;

1281 
boŞ
 
¡®l
 = 
š¡
.
	`di¥©ch_d–ay
();

1282 ifĞ
¡®l
 ) {

1283 
ç_ty³
 = 
S_MEM
;

1284 
rc_ç
 = 
BK_CONF
;

1286 
rc_ç
 = 
NO_RC_FAIL
;

1287  !
¡®l
;

1288 
	}
}

1290 
mem_¡age_¡®l_ty³


1291 
	gld¡_un™
::
´oûss_ÿche_acûss
Ğ
ÿche_t
* 
ÿche
,

1292 
Ãw_addr_ty³
 
add»ss
,

1293 
w¬p_š¡_t
 &
š¡
,

1294 
¡d
::
li¡
<
ÿche_ev’t
>& 
ev’ts
,

1295 
mem_ãtch
 *
mf
,

1296 
ÿche_»que¡_¡©us
 
¡©us
 )

1298 
mem_¡age_¡®l_ty³
 
	g»suÉ
 = 
NO_RC_FAIL
;

1299 
boŞ
 
	gwr™e_£Á
 = 
was_wr™e_£Á
(
ev’ts
);

1300 
boŞ
 
	g»ad_£Á
 = 
was_»ad_£Á
(
ev’ts
);

1301 ifĞ
	gwr™e_£Á
 )

1302 
	gm_cÜe
->
šc_¡Üe_»q
Ğ
š¡
.
w¬p_id
() );

1303 iàĞ
	g¡©us
 =ğ
HIT
 ) {

1304 
as£¹
Ğ!
»ad_£Á
 );

1305 
	gš¡
.
acûssq_pİ_back
();

1306 iàĞ
	gš¡
.
is_lßd
() ) {

1307  
	gr
=0;„ < 4;„++)

1308 ià(
	gš¡
.
	gout
[
r
] > 0)

1309 
	gm_³ndšg_wr™es
[
š¡
.
w¬p_id
()][š¡.
out
[
r
]]--;

1311 ifĞ!
	gwr™e_£Á
 )

1312 
d–‘e
 
	gmf
;

1313 } iàĞ
	g¡©us
 =ğ
RESERVATION_FAIL
 ) {

1314 
»suÉ
 = 
COAL_STALL
;

1315 
as£¹
Ğ!
»ad_£Á
 );

1316 
as£¹
Ğ!
wr™e_£Á
 );

1317 
d–‘e
 
	gmf
;

1319 
as£¹
Ğ
¡©us
 =ğ
MISS
 || stu =ğ
HIT_RESERVED
 );

1321 
	gš¡
.
acûssq_pİ_back
();

1323 ifĞ!
	gš¡
.
acûssq_em±y
() )

1324 
	g»suÉ
 = 
BK_CONF
;

1325  
	g»suÉ
;

1328 
mem_¡age_¡®l_ty³
 
	gld¡_un™
::
	$´oûss_memÜy_acûss_queue
Ğ
ÿche_t
 *
ÿche
, 
w¬p_š¡_t
 &
š¡
 )

1330 
mem_¡age_¡®l_ty³
 
»suÉ
 = 
NO_RC_FAIL
;

1331 ifĞ
š¡
.
	`acûssq_em±y
() )

1332  
»suÉ
;

1334 ifĞ!
ÿche
->
	`d©a_pÜt_ä“
() )

1335  
DATA_PORT_STALL
;

1338 
mem_ãtch
 *
mf
 = 
m_mf_®loÿtÜ
->
	`®loc
(
š¡
,š¡.
	`acûssq_back
());

1339 
¡d
::
li¡
<
ÿche_ev’t
> 
ev’ts
;

1340 
ÿche_»que¡_¡©us
 
¡©us
 = 
ÿche
->
	`acûss
(
mf
->
	`g‘_addr
(),mf,
gpu_sim_cyşe
+
gpu_tÙ_sim_cyşe
,
ev’ts
);

1341  
	`´oûss_ÿche_acûss
Ğ
ÿche
, 
mf
->
	`g‘_addr
(), 
š¡
, 
ev’ts
, mf, 
¡©us
 );

1342 
	}
}

1344 
boŞ
 
	gld¡_un™
::
	$cÚ¡ªt_cyşe
Ğ
w¬p_š¡_t
 &
š¡
, 
mem_¡age_¡®l_ty³
 &
rc_ç
, 
mem_¡age_acûss_ty³
 &
ç_ty³
)

1346 ifĞ
š¡
.
	`em±y
(è|| ((š¡.
¥aû
.
	`g‘_ty³
(è!ğ
cÚ¡_¥aû
è&& (š¡.¥aû.g‘_ty³(è!ğ
·¿m_¥aû_k”Ãl
)) )

1347  
Œue
;

1348 ifĞ
š¡
.
	`aùive_couÁ
() == 0 )

1349  
Œue
;

1350 
mem_¡age_¡®l_ty³
 
ç
 = 
	`´oûss_memÜy_acûss_queue
(
m_L1C
,
š¡
);

1351 ià(
ç
 !ğ
NO_RC_FAIL
){

1352 
rc_ç
 = 
ç
;

1353 
ç_ty³
 = 
C_MEM
;

1354 ià(
rc_ç
 =ğ
BK_CONF
 
Ü
„c_ç =ğ
COAL_STALL
) {

1355 
m_¡©s
->
gpgpu_n_cmem_pÜtcÚæiù
++;

1358  
š¡
.
	`acûssq_em±y
();

1359 
	}
}

1361 
boŞ
 
	gld¡_un™
::
	$‹xtu»_cyşe
Ğ
w¬p_š¡_t
 &
š¡
, 
mem_¡age_¡®l_ty³
 &
rc_ç
, 
mem_¡age_acûss_ty³
 &
ç_ty³
)

1363 ifĞ
š¡
.
	`em±y
(è|| in¡.
¥aû
.
	`g‘_ty³
(è!ğ
‹x_¥aû
 )

1364  
Œue
;

1365 ifĞ
š¡
.
	`aùive_couÁ
() == 0 )

1366  
Œue
;

1367 
mem_¡age_¡®l_ty³
 
ç
 = 
	`´oûss_memÜy_acûss_queue
(
m_L1T
,
š¡
);

1368 ià(
ç
 !ğ
NO_RC_FAIL
){

1369 
rc_ç
 = 
ç
;

1370 
ç_ty³
 = 
T_MEM
;

1372  
š¡
.
	`acûssq_em±y
();

1373 
	}
}

1375 
boŞ
 
	gld¡_un™
::
	$memÜy_cyşe
Ğ
w¬p_š¡_t
 &
š¡
, 
mem_¡age_¡®l_ty³
 &
¡®l_»asÚ
, 
mem_¡age_acûss_ty³
 &
acûss_ty³
 )

1377 ifĞ
š¡
.
	`em±y
() ||

1378 ((
š¡
.
¥aû
.
	`g‘_ty³
(è!ğ
glob®_¥aû
) &&

1379 (
š¡
.
¥aû
.
	`g‘_ty³
(è!ğ
loÿl_¥aû
) &&

1380 (
š¡
.
¥aû
.
	`g‘_ty³
(è!ğ
·¿m_¥aû_loÿl
)) )

1381  
Œue
;

1382 ifĞ
š¡
.
	`aùive_couÁ
() == 0 )

1383  
Œue
;

1384 
	`as£¹
Ğ!
š¡
.
	`acûssq_em±y
() );

1385 
mem_¡age_¡®l_ty³
 
¡®l_cÚd
 = 
NO_RC_FAIL
;

1386 cÚ¡ 
mem_acûss_t
 &
acûss
 = 
š¡
.
	`acûssq_back
();

1388 
boŞ
 
by·ssL1D
 = 
çl£
;

1389 iàĞ
CACHE_GLOBAL
 =ğ
š¡
.
ÿche_İ
 || (
m_L1D
 =ğ
NULL
) ) {

1390 
by·ssL1D
 = 
Œue
;

1391 } ià(
š¡
.
¥aû
.
	`is_glob®
()) {

1393 ià(
m_cÜe
->
	`g‘_cÚfig
()->
gmem_sk_L1D
)

1394 
by·ssL1D
 = 
Œue
;

1397 ifĞ
by·ssL1D
 ) {

1399 
cÚŒŞ_size
 = 
š¡
.
	`is_¡Üe
(è? 
WRITE_PACKET_SIZE
 : 
READ_PACKET_SIZE
;

1400 
size
 = 
acûss
.
	`g‘_size
(è+ 
cÚŒŞ_size
;

1401 ifĞ
m_iút
->
	`fuÎ
(
size
, 
š¡
.
	`is_¡Üe
(è|| in¡.
	`i§tomic
()) ) {

1402 
¡®l_cÚd
 = 
ICNT_RC_FAIL
;

1404 
mem_ãtch
 *
mf
 = 
m_mf_®loÿtÜ
->
	`®loc
(
š¡
,
acûss
);

1405 
m_iút
->
	`push
(
mf
);

1406 
š¡
.
	`acûssq_pİ_back
();

1408 ifĞ
š¡
.
	`is_lßd
() ) {

1409  
r
=0;„ < 4;„++)

1410 if(
š¡
.
out
[
r
] > 0)

1411 
	`as£¹
Ğ
m_³ndšg_wr™es
[
š¡
.
	`w¬p_id
()][š¡.
out
[
r
]] > 0 );

1412 } ifĞ
š¡
.
	`is_¡Üe
() )

1413 
m_cÜe
->
	`šc_¡Üe_»q
Ğ
š¡
.
	`w¬p_id
() );

1416 
	`as£¹
Ğ
CACHE_UNDEFINED
 !ğ
š¡
.
ÿche_İ
 );

1417 
¡®l_cÚd
 = 
	`´oûss_memÜy_acûss_queue
(
m_L1D
,
š¡
);

1419 ifĞ!
š¡
.
	`acûssq_em±y
() )

1420 
¡®l_cÚd
 = 
COAL_STALL
;

1421 ià(
¡®l_cÚd
 !ğ
NO_RC_FAIL
) {

1422 
¡®l_»asÚ
 = 
¡®l_cÚd
;

1423 
boŞ
 
iswr™e
 = 
š¡
.
	`is_¡Üe
();

1424 ià(
š¡
.
¥aû
.
	`is_loÿl
())

1425 
acûss_ty³
 = (
iswr™e
)?
L_MEM_ST
:
L_MEM_LD
;

1427 
acûss_ty³
 = (
iswr™e
)?
G_MEM_ST
:
G_MEM_LD
;

1429  
š¡
.
	`acûssq_em±y
();

1430 
	}
}

1433 
boŞ
 
	gld¡_un™
::
	$»¥Ú£_bufãr_fuÎ
() const

1435  
m_»¥Ú£_fifo
.
	`size
(è>ğ
m_cÚfig
->
ld¡_un™_»¥Ú£_queue_size
;

1436 
	}
}

1438 
	gld¡_un™
::
	$fl
Ğ
mem_ãtch
 *
mf
 )

1440 
mf
->
	`£t_¡©us
(
IN_SHADER_LDST_RESPONSE_FIFO
,
gpu_sim_cyşe
+
gpu_tÙ_sim_cyşe
);

1441 
m_»¥Ú£_fifo
.
	`push_back
(
mf
);

1442 
	}
}

1444 
	gld¡_un™
::
	$æush
(){

1446 
m_L1D
->
	`æush
();

1447 
	}
}

1449 
	gsimd_funùiÚ_un™
::
	$simd_funùiÚ_un™
ĞcÚ¡ 
shad”_cÜe_cÚfig
 *
cÚfig
 )

1451 
m_cÚfig
=
cÚfig
;

1452 
m_di¥©ch_»g
 = 
Ãw
 
	`w¬p_š¡_t
(
cÚfig
);

1453 
	}
}

1456 
	gsfu
:: 
	$sfu
Ğ
»gi¡”_£t
* 
»suÉ_pÜt
, cÚ¡ 
shad”_cÜe_cÚfig
 *
cÚfig
,
shad”_cÜe_ùx
 *
cÜe
 )

1457 : 
	`p–šed_simd_un™
(
»suÉ_pÜt
,
cÚfig
,cÚfig->
max_sfu_Ï‹ncy
,
cÜe
)

1459 
m_Çme
 = "SFU";

1460 
	}
}

1462 
	gsfu
::
	$issue
Ğ
»gi¡”_£t
& 
sourû_»g
 )

1464 
w¬p_š¡_t
** 
»ady_»g
 = 
sourû_»g
.
	`g‘_»ady
();

1467 (*
»ady_»g
)->
İ_pe
=
SFU__OP
;

1468 
m_cÜe
->
	`šcsfu_¡©
(m_cÜe->
	`g‘_cÚfig
()->
w¬p_size
,(*
»ady_»g
)->
Ï‹ncy
);

1469 
p–šed_simd_un™
::
	`issue
(
sourû_»g
);

1470 
	}
}

1472 
	gld¡_un™
::
	$aùive_ÏÃs_š_p–še
(){

1473 
aùive_couÁ
=
p–šed_simd_un™
::
	`g‘_aùive_ÏÃs_š_p–še
();

1474 
	`as£¹
(
aùive_couÁ
<=
m_cÜe
->
	`g‘_cÚfig
()->
w¬p_size
);

1475 
m_cÜe
->
	`šcfumemaùiv–ªes_¡©
(
aùive_couÁ
);

1476 
	}
}

1477 
	g¥_un™
::
	$aùive_ÏÃs_š_p–še
(){

1478 
aùive_couÁ
=
p–šed_simd_un™
::
	`g‘_aùive_ÏÃs_š_p–še
();

1479 
	`as£¹
(
aùive_couÁ
<=
m_cÜe
->
	`g‘_cÚfig
()->
w¬p_size
);

1480 
m_cÜe
->
	`šc¥aùiv–ªes_¡©
(
aùive_couÁ
);

1481 
m_cÜe
->
	`šcfuaùiv–ªes_¡©
(
aùive_couÁ
);

1482 
m_cÜe
->
	`šcfumemaùiv–ªes_¡©
(
aùive_couÁ
);

1483 
	}
}

1485 
	gsfu
::
	$aùive_ÏÃs_š_p–še
(){

1486 
aùive_couÁ
=
p–šed_simd_un™
::
	`g‘_aùive_ÏÃs_š_p–še
();

1487 
	`as£¹
(
aùive_couÁ
<=
m_cÜe
->
	`g‘_cÚfig
()->
w¬p_size
);

1488 
m_cÜe
->
	`šcsfuaùiv–ªes_¡©
(
aùive_couÁ
);

1489 
m_cÜe
->
	`šcfuaùiv–ªes_¡©
(
aùive_couÁ
);

1490 
m_cÜe
->
	`šcfumemaùiv–ªes_¡©
(
aùive_couÁ
);

1491 
	}
}

1493 
	g¥_un™
::
	$¥_un™
Ğ
»gi¡”_£t
* 
»suÉ_pÜt
, cÚ¡ 
shad”_cÜe_cÚfig
 *
cÚfig
,
shad”_cÜe_ùx
 *
cÜe
)

1494 : 
	`p–šed_simd_un™
(
»suÉ_pÜt
,
cÚfig
,cÚfig->
max_¥_Ï‹ncy
,
cÜe
)

1496 
m_Çme
 = "SP ";

1497 
	}
}

1499 
	g¥_un™
 :: 
	$issue
(
»gi¡”_£t
& 
sourû_»g
)

1501 
w¬p_š¡_t
** 
»ady_»g
 = 
sourû_»g
.
	`g‘_»ady
();

1503 (*
»ady_»g
)->
İ_pe
=
SP__OP
;

1504 
m_cÜe
->
	`šc¥_¡©
(m_cÜe->
	`g‘_cÚfig
()->
w¬p_size
,(*
»ady_»g
)->
Ï‹ncy
);

1505 
p–šed_simd_un™
::
	`issue
(
sourû_»g
);

1506 
	}
}

1509 
	gp–šed_simd_un™
::
	$p–šed_simd_un™
Ğ
»gi¡”_£t
* 
»suÉ_pÜt
, cÚ¡ 
shad”_cÜe_cÚfig
 *
cÚfig
, 
max_Ï‹ncy
,
shad”_cÜe_ùx
 *
cÜe
 )

1510 : 
	$simd_funùiÚ_un™
(
cÚfig
)

1512 
m_»suÉ_pÜt
 = 
»suÉ_pÜt
;

1513 
m_p–še_d•th
 = 
max_Ï‹ncy
;

1514 
m_p–še_»g
 = 
Ãw
 
w¬p_š¡_t
*[
m_p–še_d•th
];

1515  
i
=0; i < 
m_p–še_d•th
; i++ )

1516 
m_p–še_»g
[
i
] = 
Ãw
 
	`w¬p_š¡_t
Ğ
cÚfig
 );

1517 
m_cÜe
=
cÜe
;

1518 
	}
}

1520 
	gp–šed_simd_un™
::
	$cyşe
()

1522 ifĞ!
m_p–še_»g
[0]->
	`em±y
() ){

1523 
m_»suÉ_pÜt
->
	`move_š
(
m_p–še_»g
[0]);

1525  
¡age
=0; (¡age+1)<
m_p–še_d•th
; stage++ )

1526 
	`move_w¬p
(
m_p–še_»g
[
¡age
], m_pipeline_reg[stage+1]);

1527 ifĞ!
m_di¥©ch_»g
->
	`em±y
() ) {

1528 ifĞ!
m_di¥©ch_»g
->
	`di¥©ch_d–ay
()){

1529 
¡¬t_¡age
 = 
m_di¥©ch_»g
->
Ï‹ncy
 - m_di¥©ch_»g->
š™ŸtiÚ_š‹rv®
;

1530 
	`move_w¬p
(
m_p–še_»g
[
¡¬t_¡age
],
m_di¥©ch_»g
);

1533 
occup›d
 >>=1;

1534 
	}
}

1537 
	gp–šed_simd_un™
::
	$issue
Ğ
»gi¡”_£t
& 
sourû_»g
 )

1540 
w¬p_š¡_t
** 
»ady_»g
 = 
sourû_»g
.
	`g‘_»ady
();

1541 
m_cÜe
->
	`šûxec¡©
((*
»ady_»g
));

1543 
simd_funùiÚ_un™
::
	`issue
(
sourû_»g
);

1544 
	}
}

1555 
	gld¡_un™
::
	$š™
Ğ
mem_ãtch_š‹rçû
 *
iút
,

1556 
shad”_cÜe_mem_ãtch_®loÿtÜ
 *
mf_®loÿtÜ
,

1557 
shad”_cÜe_ùx
 *
cÜe
,

1558 
İndcŞl_rfu_t
 *
İ”ªd_cŞËùÜ
,

1559 
ScÜebßrd
 *
scÜebßrd
,

1560 cÚ¡ 
shad”_cÜe_cÚfig
 *
cÚfig
,

1561 cÚ¡ 
memÜy_cÚfig
 *
mem_cÚfig
,

1562 
shad”_cÜe_¡©s
 *
¡©s
,

1563 
sid
,

1564 
c
 )

1566 
m_memÜy_cÚfig
 = 
mem_cÚfig
;

1567 
m_iút
 = 
iút
;

1568 
m_mf_®loÿtÜ
=
mf_®loÿtÜ
;

1569 
m_cÜe
 = 
cÜe
;

1570 
m_İ”ªd_cŞËùÜ
 = 
İ”ªd_cŞËùÜ
;

1571 
m_scÜebßrd
 = 
scÜebßrd
;

1572 
m_¡©s
 = 
¡©s
;

1573 
m_sid
 = 
sid
;

1574 
m_c
 = 
c
;

1575 
	#STRSIZE
 1024

	)

1576 
L1T_Çme
[
STRSIZE
];

1577 
L1C_Çme
[
STRSIZE
];

1578 
	`¢´štf
(
L1T_Çme
, 
STRSIZE
, "L1T_%03d", 
m_sid
);

1579 
	`¢´štf
(
L1C_Çme
, 
STRSIZE
, "L1C_%03d", 
m_sid
);

1580 
m_L1T
 = 
Ãw
 
	`‹x_ÿche
(
L1T_Çme
,
m_cÚfig
->
m_L1T_cÚfig
,
m_sid
,
	`g‘_shad”_‹xtu»_ÿche_id
(),
iút
,
IN_L1T_MISS_QUEUE
,
IN_SHADER_L1T_ROB
);

1581 
m_L1C
 = 
Ãw
 
	`»ad_Úly_ÿche
(
L1C_Çme
,
m_cÚfig
->
m_L1C_cÚfig
,
m_sid
,
	`g‘_shad”_cÚ¡ªt_ÿche_id
(),
iút
,
IN_L1C_MISS_QUEUE
);

1582 
m_L1D
 = 
NULL
;

1583 
m_mem_rc
 = 
NO_RC_FAIL
;

1584 
m_num_wr™eback_ş›Ás
=5;

1585 
m_wr™eback_¬b
 = 0;

1586 
m_Ãxt_glob®
=
NULL
;

1587 
m_Ï¡_š¡_gpu_sim_cyşe
=0;

1588 
m_Ï¡_š¡_gpu_tÙ_sim_cyşe
=0;

1589 
	}
}

1592 
	gld¡_un™
::
	$ld¡_un™
Ğ
mem_ãtch_š‹rçû
 *
iút
,

1593 
shad”_cÜe_mem_ãtch_®loÿtÜ
 *
mf_®loÿtÜ
,

1594 
shad”_cÜe_ùx
 *
cÜe
,

1595 
İndcŞl_rfu_t
 *
İ”ªd_cŞËùÜ
,

1596 
ScÜebßrd
 *
scÜebßrd
,

1597 cÚ¡ 
shad”_cÜe_cÚfig
 *
cÚfig
,

1598 cÚ¡ 
memÜy_cÚfig
 *
mem_cÚfig
,

1599 
shad”_cÜe_¡©s
 *
¡©s
,

1600 
sid
,

1601 
c
 ) : 
	`p–šed_simd_un™
(
NULL
,
cÚfig
,3,
cÜe
), 
	$m_Ãxt_wb
(
cÚfig
)

1603 
	`š™
Ğ
iút
,

1604 
mf_®loÿtÜ
,

1605 
cÜe
,

1606 
İ”ªd_cŞËùÜ
,

1607 
scÜebßrd
,

1608 
cÚfig
,

1609 
mem_cÚfig
,

1610 
¡©s
,

1611 
sid
,

1612 
c
 );

1613 ifĞ!
m_cÚfig
->
m_L1D_cÚfig
.
	`di§bËd
() ) {

1614 
L1D_Çme
[
STRSIZE
];

1615 
	`¢´štf
(
L1D_Çme
, 
STRSIZE
, "L1D_%03d", 
m_sid
);

1616 
m_L1D
 = 
Ãw
 
	`l1_ÿche
Ğ
L1D_Çme
,

1617 
m_cÚfig
->
m_L1D_cÚfig
,

1618 
m_sid
,

1619 
	`g‘_shad”_nÜm®_ÿche_id
(),

1620 
m_iút
,

1621 
m_mf_®loÿtÜ
,

1622 
IN_L1D_MISS_QUEUE
 );

1624 
	}
}

1626 
	gld¡_un™
::
	$ld¡_un™
Ğ
mem_ãtch_š‹rçû
 *
iút
,

1627 
shad”_cÜe_mem_ãtch_®loÿtÜ
 *
mf_®loÿtÜ
,

1628 
shad”_cÜe_ùx
 *
cÜe
,

1629 
İndcŞl_rfu_t
 *
İ”ªd_cŞËùÜ
,

1630 
ScÜebßrd
 *
scÜebßrd
,

1631 cÚ¡ 
shad”_cÜe_cÚfig
 *
cÚfig
,

1632 cÚ¡ 
memÜy_cÚfig
 *
mem_cÚfig
,

1633 
shad”_cÜe_¡©s
 *
¡©s
,

1634 
sid
,

1635 
c
,

1636 
l1_ÿche
* 
Ãw_l1d_ÿche
 )

1637 : 
	`p–šed_simd_un™
(
NULL
,
cÚfig
,3,
cÜe
), 
	`m_L1D
(
Ãw_l1d_ÿche
), 
	$m_Ãxt_wb
(
cÚfig
)

1639 
	`š™
Ğ
iút
,

1640 
mf_®loÿtÜ
,

1641 
cÜe
,

1642 
İ”ªd_cŞËùÜ
,

1643 
scÜebßrd
,

1644 
cÚfig
,

1645 
mem_cÚfig
,

1646 
¡©s
,

1647 
sid
,

1648 
c
 );

1649 
	}
}

1651 
	gld¡_un™
:: 
	$issue
Ğ
»gi¡”_£t
 &
»g_£t
 )

1653 
w¬p_š¡_t
* 
š¡
 = *(
»g_£t
.
	`g‘_»ady
());

1656 
	`as£¹
(
š¡
->
	`em±y
(è=ğ
çl£
);

1657 ià(
š¡
->
	`is_lßd
(è
ªd
 in¡->
¥aû
.
	`g‘_ty³
(è!ğ
sh¬ed_¥aû
) {

1658 
w¬p_id
 = 
š¡
->
	`w¬p_id
();

1659 
n_acûs£s
 = 
š¡
->
	`acûssq_couÁ
();

1660 
r
 = 0;„ < 4;„++) {

1661 
»g_id
 = 
š¡
->
out
[
r
];

1662 ià(
»g_id
 > 0) {

1663 
m_³ndšg_wr™es
[
w¬p_id
][
»g_id
] +ğ
n_acûs£s
;

1669 
š¡
->
İ_pe
=
MEM__OP
;

1671 
m_cÜe
->
	`mem_š¡ruùiÚ_¡©s
(*
š¡
);

1672 
m_cÜe
->
	`šcmem_¡©
(m_cÜe->
	`g‘_cÚfig
()->
w¬p_size
,1);

1673 
p–šed_simd_un™
::
	`issue
(
»g_£t
);

1674 
	}
}

1676 
	gld¡_un™
::
	$wr™eback
()

1679 ifĞ!
m_Ãxt_wb
.
	`em±y
() ) {

1680 ifĞ
m_İ”ªd_cŞËùÜ
->
	`wr™eback
(
m_Ãxt_wb
) ) {

1681 
boŞ
 
š¢_com¶‘ed
 = 
çl£
;

1682  
r
=0;„ < 4;„++ ) {

1683 ifĞ
m_Ãxt_wb
.
out
[
r
] > 0 ) {

1684 ifĞ
m_Ãxt_wb
.
¥aû
.
	`g‘_ty³
(è!ğ
sh¬ed_¥aû
 ) {

1685 
	`as£¹
Ğ
m_³ndšg_wr™es
[
m_Ãxt_wb
.
	`w¬p_id
()][m_Ãxt_wb.
out
[
r
]] > 0 );

1686 
¡l_³ndšg
 = --
m_³ndšg_wr™es
[
m_Ãxt_wb
.
	`w¬p_id
()][m_Ãxt_wb.
out
[
r
]];

1687 ifĞ!
¡l_³ndšg
 ) {

1688 
m_³ndšg_wr™es
[
m_Ãxt_wb
.
	`w¬p_id
()].
	`”a£
(m_Ãxt_wb.
out
[
r
]);

1689 
m_scÜebßrd
->
	`»Ëa£Regi¡”
Ğ
m_Ãxt_wb
.
	`w¬p_id
(), m_Ãxt_wb.
out
[
r
] );

1690 
š¢_com¶‘ed
 = 
Œue
;

1693 
m_scÜebßrd
->
	`»Ëa£Regi¡”
Ğ
m_Ãxt_wb
.
	`w¬p_id
(), m_Ãxt_wb.
out
[
r
] );

1694 
š¢_com¶‘ed
 = 
Œue
;

1698 ifĞ
š¢_com¶‘ed
 ) {

1699 
m_cÜe
->
	`w¬p_š¡_com¶‘e
(
m_Ãxt_wb
);

1701 
m_Ãxt_wb
.
	`ş—r
();

1702 
m_Ï¡_š¡_gpu_sim_cyşe
 = 
gpu_sim_cyşe
;

1703 
m_Ï¡_š¡_gpu_tÙ_sim_cyşe
 = 
gpu_tÙ_sim_cyşe
;

1707 
£rviûd_ş›Á
 = -1;

1708  
c
 = 0; 
m_Ãxt_wb
.
	`em±y
(è&& (ø< 
m_num_wr™eback_ş›Ás
); c++ ) {

1709 
Ãxt_ş›Á
 = (
c
+
m_wr™eback_¬b
)%
m_num_wr™eback_ş›Ás
;

1710  
Ãxt_ş›Á
 ) {

1712 ifĞ!
m_p–še_»g
[0]->
	`em±y
() ) {

1713 
m_Ãxt_wb
 = *
m_p–še_»g
[0];

1714 if(
m_Ãxt_wb
.
	`i§tomic
()) {

1715 
m_Ãxt_wb
.
	`do_©omic
();

1716 
m_cÜe
->
	`deüem’t_©omic_couÁ
(
m_Ãxt_wb
.
	`w¬p_id
(), m_Ãxt_wb.
	`aùive_couÁ
());

1718 
m_cÜe
->
	`dec_š¡_š_p–še
(
m_p–še_»g
[0]->
	`w¬p_id
());

1719 
m_p–še_»g
[0]->
	`ş—r
();

1720 
£rviûd_ş›Á
 = 
Ãxt_ş›Á
;

1724 ifĞ
m_L1T
->
	`acûss_»ady
() ) {

1725 
mem_ãtch
 *
mf
 = 
m_L1T
->
	`Ãxt_acûss
();

1726 
m_Ãxt_wb
 = 
mf
->
	`g‘_š¡
();

1727 
d–‘e
 
mf
;

1728 
£rviûd_ş›Á
 = 
Ãxt_ş›Á
;

1732 ifĞ
m_L1C
->
	`acûss_»ady
() ) {

1733 
mem_ãtch
 *
mf
 = 
m_L1C
->
	`Ãxt_acûss
();

1734 
m_Ãxt_wb
 = 
mf
->
	`g‘_š¡
();

1735 
d–‘e
 
mf
;

1736 
£rviûd_ş›Á
 = 
Ãxt_ş›Á
;

1740 ifĞ
m_Ãxt_glob®
 ) {

1741 
m_Ãxt_wb
 = 
m_Ãxt_glob®
->
	`g‘_š¡
();

1742 ifĞ
m_Ãxt_glob®
->
	`i§tomic
() )

1743 
m_cÜe
->
	`deüem’t_©omic_couÁ
(
m_Ãxt_glob®
->
	`g‘_wid
(),m_Ãxt_glob®->
	`g‘_acûss_w¬p_mask
().
	`couÁ
());

1744 
d–‘e
 
m_Ãxt_glob®
;

1745 
m_Ãxt_glob®
 = 
NULL
;

1746 
£rviûd_ş›Á
 = 
Ãxt_ş›Á
;

1750 ifĞ
m_L1D
 && m_L1D->
	`acûss_»ady
() ) {

1751 
mem_ãtch
 *
mf
 = 
m_L1D
->
	`Ãxt_acûss
();

1752 
m_Ãxt_wb
 = 
mf
->
	`g‘_š¡
();

1753 
d–‘e
 
mf
;

1754 
£rviûd_ş›Á
 = 
Ãxt_ş›Á
;

1757 : 
	`abÜt
();

1763 ià(
£rviûd_ş›Á
 != ()-1) {

1764 
m_wr™eback_¬b
 = (
£rviûd_ş›Á
 + 1è% 
m_num_wr™eback_ş›Ás
;

1766 
	}
}

1768 
	gld¡_un™
::
	$şock_muÉl›r
() const

1770  
m_cÚfig
->
mem_w¬p_·¹s
;

1771 
	}
}

1795 
	gld¡_un™
::
	$cyşe
()

1797 
	`wr™eback
();

1798 
m_İ”ªd_cŞËùÜ
->
	`¡•
();

1799  
¡age
=0; (¡age+1)<
m_p–še_d•th
; stage++ )

1800 ifĞ
m_p–še_»g
[
¡age
]->
	`em±y
() && !m_pipeline_reg[stage+1]->empty() )

1801 
	`move_w¬p
(
m_p–še_»g
[
¡age
], m_pipeline_reg[stage+1]);

1803 ifĞ!
m_»¥Ú£_fifo
.
	`em±y
() ) {

1804 
mem_ãtch
 *
mf
 = 
m_»¥Ú£_fifo
.
	`äÚt
();

1805 ià(
mf
->
	`i¡extu»
()) {

1806 ià(
m_L1T
->
	`fl_pÜt_ä“
()) {

1807 
m_L1T
->
	`fl
(
mf
,
gpu_sim_cyşe
+
gpu_tÙ_sim_cyşe
);

1808 
m_»¥Ú£_fifo
.
	`pİ_äÚt
();

1810 } ià(
mf
->
	`iscÚ¡
()) {

1811 ià(
m_L1C
->
	`fl_pÜt_ä“
()) {

1812 
mf
->
	`£t_¡©us
(
IN_SHADER_FETCHED
,
gpu_sim_cyşe
+
gpu_tÙ_sim_cyşe
);

1813 
m_L1C
->
	`fl
(
mf
,
gpu_sim_cyşe
+
gpu_tÙ_sim_cyşe
);

1814 
m_»¥Ú£_fifo
.
	`pİ_äÚt
();

1817 ifĞ
mf
->
	`g‘_ty³
(è=ğ
WRITE_ACK
 || ( 
m_cÚfig
->
gpgpu_³rãù_mem
 && mf->
	`g‘_is_wr™e
() )) {

1818 
m_cÜe
->
	`¡Üe_ack
(
mf
);

1819 
m_»¥Ú£_fifo
.
	`pİ_äÚt
();

1820 
d–‘e
 
mf
;

1822 
	`as£¹
Ğ!
mf
->
	`g‘_is_wr™e
() );

1824 
boŞ
 
by·ssL1D
 = 
çl£
;

1825 iàĞ
CACHE_GLOBAL
 =ğ
mf
->
	`g‘_š¡
().
ÿche_İ
 || (
m_L1D
 =ğ
NULL
) ) {

1826 
by·ssL1D
 = 
Œue
;

1827 } ià(
mf
->
	`g‘_acûss_ty³
(è=ğ
GLOBAL_ACC_R
 || mf->g‘_acûss_ty³(è=ğ
GLOBAL_ACC_W
) {

1828 ià(
m_cÜe
->
	`g‘_cÚfig
()->
gmem_sk_L1D
)

1829 
by·ssL1D
 = 
Œue
;

1831 ifĞ
by·ssL1D
 ) {

1832 iàĞ
m_Ãxt_glob®
 =ğ
NULL
 ) {

1833 
mf
->
	`£t_¡©us
(
IN_SHADER_FETCHED
,
gpu_sim_cyşe
+
gpu_tÙ_sim_cyşe
);

1834 
m_»¥Ú£_fifo
.
	`pİ_äÚt
();

1835 
m_Ãxt_glob®
 = 
mf
;

1838 ià(
m_L1D
->
	`fl_pÜt_ä“
()) {

1839 
m_L1D
->
	`fl
(
mf
,
gpu_sim_cyşe
+
gpu_tÙ_sim_cyşe
);

1840 
m_»¥Ú£_fifo
.
	`pİ_äÚt
();

1847 
m_L1T
->
	`cyşe
();

1848 
m_L1C
->
	`cyşe
();

1849 ifĞ
m_L1D
 ) m_L1D->
	`cyşe
();

1851 
w¬p_š¡_t
 &
pe_»g
 = *
m_di¥©ch_»g
;

1852 
mem_¡age_¡®l_ty³
 
rc_ç
 = 
NO_RC_FAIL
;

1853 
mem_¡age_acûss_ty³
 
ty³
;

1854 
boŞ
 
dÚe
 = 
Œue
;

1855 
dÚe
 &ğ
	`sh¬ed_cyşe
(
pe_»g
, 
rc_ç
, 
ty³
);

1856 
dÚe
 &ğ
	`cÚ¡ªt_cyşe
(
pe_»g
, 
rc_ç
, 
ty³
);

1857 
dÚe
 &ğ
	`‹xtu»_cyşe
(
pe_»g
, 
rc_ç
, 
ty³
);

1858 
dÚe
 &ğ
	`memÜy_cyşe
(
pe_»g
, 
rc_ç
, 
ty³
);

1859 
m_mem_rc
 = 
rc_ç
;

1861 ià(!
dÚe
) {

1862 
	`as£¹
(
rc_ç
 !ğ
NO_RC_FAIL
);

1863 
m_¡©s
->
gpgpu_n_¡®l_shd_mem
++;

1864 
m_¡©s
->
gpu_¡®l_shd_mem_b»akdown
[
ty³
][
rc_ç
]++;

1868 ifĞ!
pe_»g
.
	`em±y
() ) {

1869 
w¬p_id
 = 
pe_»g
.
	`w¬p_id
();

1870 ifĞ
pe_»g
.
	`is_lßd
() ) {

1871 ifĞ
pe_»g
.
¥aû
.
	`g‘_ty³
(è=ğ
sh¬ed_¥aû
 ) {

1872 ifĞ
m_p–še_»g
[2]->
	`em±y
() ) {

1874 
	`move_w¬p
(
m_p–še_»g
[2],
m_di¥©ch_»g
);

1875 
m_di¥©ch_»g
->
	`ş—r
();

1883 
boŞ
 
³ndšg_»que¡s
=
çl£
;

1884  
r
=0;„<4;„++ ) {

1885 
»g_id
 = 
pe_»g
.
out
[
r
];

1886 ifĞ
»g_id
 > 0 ) {

1887 ifĞ
m_³ndšg_wr™es
[
w¬p_id
].
	`fšd
(
»g_id
è!ğm_³ndšg_wr™es[w¬p_id].
	`’d
() ) {

1888 iàĞ
m_³ndšg_wr™es
[
w¬p_id
][
»g_id
] > 0 ) {

1889 
³ndšg_»que¡s
=
Œue
;

1893 
m_³ndšg_wr™es
[
w¬p_id
].
	`”a£
(
»g_id
);

1898 ifĞ!
³ndšg_»que¡s
 ) {

1899 
m_cÜe
->
	`w¬p_š¡_com¶‘e
(*
m_di¥©ch_»g
);

1900 
m_scÜebßrd
->
	`»Ëa£Regi¡”s
(
m_di¥©ch_»g
);

1902 
m_cÜe
->
	`dec_š¡_š_p–še
(
w¬p_id
);

1903 
m_di¥©ch_»g
->
	`ş—r
();

1907 
m_cÜe
->
	`dec_š¡_š_p–še
(
w¬p_id
);

1908 
m_cÜe
->
	`w¬p_š¡_com¶‘e
(*
m_di¥©ch_»g
);

1909 
m_di¥©ch_»g
->
	`ş—r
();

1912 
	}
}

1914 
	gshad”_cÜe_ùx
::
	$»gi¡”_ùa_th»ad_ex™
Ğ
ùa_num
 )

1916 
	`as£¹
Ğ
m_ùa_¡©us
[
ùa_num
] > 0 );

1917 
m_ùa_¡©us
[
ùa_num
]--;

1918 ià(!
m_ùa_¡©us
[
ùa_num
]) {

1919 
m_n_aùive_ùa
--;

1920 
m_b¬r›rs
.
	`d—Îoÿ‹_b¬r›r
(
ùa_num
);

1921 
	`shad”_CTA_couÁ_uÆog
(
m_sid
, 1);

1922 
	`´štf
("GPGPU-Sim uArch: Shad” %d fšished CTA #%d (%Îd,%Îd), %u CTA ruÂšg\n", 
m_sid
, 
ùa_num
, 
gpu_sim_cyşe
, 
gpu_tÙ_sim_cyşe
,

1923 
m_n_aùive_ùa
 );

1924 ifĞ
m_n_aùive_ùa
 == 0 ) {

1925 
	`as£¹
Ğ
m_k”Ãl
 !ğ
NULL
 );

1926 
m_k”Ãl
->
	`dec_ruÂšg
();

1927 
	`´štf
("GPGPU-Sim uArch: Shad” %uƒm±y (»Ëa£ k”ÃÈ%u \'%s\').\n", 
m_sid
, 
m_k”Ãl
->
	`g‘_uid
(),

1928 
m_k”Ãl
->
	`Çme
().
	`c_¡r
() );

1929 ifĞ
m_k”Ãl
->
	`no_mÜe_ùas_to_run
() ) {

1930 ifĞ!
m_k”Ãl
->
	`ruÂšg
() ) {

1931 
	`´štf
("GPGPU-Sim uArch: GPU d‘eùed k”ÃÈ\'%s\' fšished oÀshad” %u.\n", 
m_k”Ãl
->
	`Çme
().
	`c_¡r
(), 
m_sid
 );

1932 
m_gpu
->
	`£t_k”Ãl_dÚe
Ğ
m_k”Ãl
 );

1935 
m_k”Ãl
=
NULL
;

1936 
	`fæush
(
¡dout
);

1939 
	}
}

1941 
	ggpgpu_sim
::
	$shad”_´št_ruÁime_¡©
Ğ
FILE
 *
fout
 )

1962 
	}
}

1965 
gpgpu_sim
::
	$shad”_´št_scheduËr_¡©
Ğ
FILE
* 
fout
, 
boŞ
 
´št_dyÇmic_šfo
 ) const

1968 cÚ¡ 
scheduËr_§m¶šg_cÜe
 = 
m_shad”_cÚfig
->
gpgpu_w¬p_issue_shad”
;

1969 
	#STR_SIZE
 55

	)

1970 
Çme_buff
[ 
STR_SIZE
 ];

1971 
Çme_buff
[ 
STR_SIZE
 - 1 ] = '\0';

1972 cÚ¡ 
¡d
::
veùÜ
< >& 
di¡ro


1973 ğ
´št_dyÇmic_šfo
 ?

1974 
m_shad”_¡©s
->
	`g‘_dyÇmic_w¬p_issue
()[ 
scheduËr_§m¶šg_cÜe
 ] :

1975 
m_shad”_¡©s
->
	`g‘_w¬p_¦Ù_issue
()[ 
scheduËr_§m¶šg_cÜe
 ];

1976 iàĞ
´št_dyÇmic_šfo
 ) {

1977 
	`¢´štf
Ğ
Çme_buff
, 
STR_SIZE
 - 1, "dynamic_warp_id" );

1979 
	`¢´štf
Ğ
Çme_buff
, 
STR_SIZE
 - 1, "warp_id" );

1981 
	`årštf
Ğ
fout
,

1983 
scheduËr_§m¶šg_cÜe
,

1984 
Çme_buff
 );

1985 cÚ¡ 
num_w¬p_ids
 = 
di¡ro
.
	`size
();

1987 
	`årštf
Ğ
fout
, "%s:\n", 
Çme_buff
 );

1988  
w¬p_id
 = 0;

1989 
w¬p_id
 < 
num_w¬p_ids
;

1990 ++
w¬p_id
 ) {

1991 
	`årštf
Ğ
fout
, "%d, ", 
w¬p_id
 );

1994 
	`årštf
Ğ
fout
, "\ndistro:\n" );

1996  
¡d
::
veùÜ
< >::
cÚ¡_™”©Ü
 
™”
 = 
di¡ro
.
	`begš
();

1997 
™”
 !ğ
di¡ro
.
	`’d
();

1998 
™”
++ ) {

1999 
	`årštf
Ğ
fout
, "%d, ", *
™”
 );

2001 
	`årštf
Ğ
fout
, "\n" );

2002 
	}
}

2004 
	ggpgpu_sim
::
	$shad”_´št_ÿche_¡©s
Ğ
FILE
 *
fout
 ) const{

2007 
ÿche_sub_¡©s
 
tÙ®_css
;

2008 
ÿche_sub_¡©s
 
css
;

2010 if(!
m_shad”_cÚfig
->
m_L1I_cÚfig
.
	`di§bËd
()){

2011 
tÙ®_css
.
	`ş—r
();

2012 
css
.
	`ş—r
();

2013 
	`årštf
(
fout
, "\n========= Core cache stats =========\n");

2014 
	`årštf
(
fout
, "L1I_cache:\n");

2015  
i
 = 0; i < 
m_shad”_cÚfig
->
n_simt_şu¡”s
; ++i ) {

2016 
m_şu¡”
[
i
]->
	`g‘_L1I_sub_¡©s
(
css
);

2017 
tÙ®_css
 +ğ
css
;

2019 
	`årštf
(
fout
, "\tL1I_tÙ®_ÿche_acûs£ ğ%u\n", 
tÙ®_css
.
acûs£s
);

2020 
	`årštf
(
fout
, "\tL1I_tÙ®_ÿche_mis£ ğ%u\n", 
tÙ®_css
.
mis£s
);

2021 if(
tÙ®_css
.
acûs£s
 > 0){

2022 
	`årštf
(
fout
, "\tL1I_tÙ®_ÿche_miss_¿‹ = %.4lf\n", ()
tÙ®_css
.
mis£s
 / (éÙ®_css.
acûs£s
);

2024 
	`årštf
(
fout
, "\tL1I_tÙ®_ÿche_³ndšg_h™ ğ%u\n", 
tÙ®_css
.
³ndšg_h™s
);

2025 
	`årštf
(
fout
, "\tL1I_tÙ®_ÿche_»£rv©iÚ_ç ğ%u\n", 
tÙ®_css
.
»s_çs
);

2029 if(!
m_shad”_cÚfig
->
m_L1D_cÚfig
.
	`di§bËd
()){

2030 
tÙ®_css
.
	`ş—r
();

2031 
css
.
	`ş—r
();

2032 
	`årštf
(
fout
, "L1D_cache:\n");

2033 
i
=0;i<
m_shad”_cÚfig
->
n_simt_şu¡”s
;i++){

2034 
m_şu¡”
[
i
]->
	`g‘_L1D_sub_¡©s
(
css
);

2036 
	`årštf
Ğ
¡dout
, "\tL1D_cache_core[%d]: Access = %d, Miss = %d, Miss_rate = %.3lf, Pending_hits = %u, Reservation_fails = %u\n",

2037 
i
, 
css
.
acûs£s
, css.
mis£s
, ()css.mis£ / ()css.acûs£s, css.
³ndšg_h™s
, css.
»s_çs
);

2039 
tÙ®_css
 +ğ
css
;

2041 
	`årštf
(
fout
, "\tL1D_tÙ®_ÿche_acûs£ ğ%u\n", 
tÙ®_css
.
acûs£s
);

2042 
	`årštf
(
fout
, "\tL1D_tÙ®_ÿche_mis£ ğ%u\n", 
tÙ®_css
.
mis£s
);

2043 if(
tÙ®_css
.
acûs£s
 > 0){

2044 
	`årštf
(
fout
, "\tL1D_tÙ®_ÿche_miss_¿‹ = %.4lf\n", ()
tÙ®_css
.
mis£s
 / (éÙ®_css.
acûs£s
);

2046 
	`årštf
(
fout
, "\tL1D_tÙ®_ÿche_³ndšg_h™ ğ%u\n", 
tÙ®_css
.
³ndšg_h™s
);

2047 
	`årštf
(
fout
, "\tL1D_tÙ®_ÿche_»£rv©iÚ_ç ğ%u\n", 
tÙ®_css
.
»s_çs
);

2048 
tÙ®_css
.
	`´št_pÜt_¡©s
(
fout
, "\tL1D_cache");

2052 if(!
m_shad”_cÚfig
->
m_L1C_cÚfig
.
	`di§bËd
()){

2053 
tÙ®_css
.
	`ş—r
();

2054 
css
.
	`ş—r
();

2055 
	`årštf
(
fout
, "L1C_cache:\n");

2056  
i
 = 0; i < 
m_shad”_cÚfig
->
n_simt_şu¡”s
; ++i ) {

2057 
m_şu¡”
[
i
]->
	`g‘_L1C_sub_¡©s
(
css
);

2058 
tÙ®_css
 +ğ
css
;

2060 
	`årštf
(
fout
, "\tL1C_tÙ®_ÿche_acûs£ ğ%u\n", 
tÙ®_css
.
acûs£s
);

2061 
	`årštf
(
fout
, "\tL1C_tÙ®_ÿche_mis£ ğ%u\n", 
tÙ®_css
.
mis£s
);

2062 if(
tÙ®_css
.
acûs£s
 > 0){

2063 
	`årštf
(
fout
, "\tL1C_tÙ®_ÿche_miss_¿‹ = %.4lf\n", ()
tÙ®_css
.
mis£s
 / (éÙ®_css.
acûs£s
);

2065 
	`årštf
(
fout
, "\tL1C_tÙ®_ÿche_³ndšg_h™ ğ%u\n", 
tÙ®_css
.
³ndšg_h™s
);

2066 
	`årštf
(
fout
, "\tL1C_tÙ®_ÿche_»£rv©iÚ_ç ğ%u\n", 
tÙ®_css
.
»s_çs
);

2070 if(!
m_shad”_cÚfig
->
m_L1T_cÚfig
.
	`di§bËd
()){

2071 
tÙ®_css
.
	`ş—r
();

2072 
css
.
	`ş—r
();

2073 
	`årštf
(
fout
, "L1T_cache:\n");

2074  
i
 = 0; i < 
m_shad”_cÚfig
->
n_simt_şu¡”s
; ++i ) {

2075 
m_şu¡”
[
i
]->
	`g‘_L1T_sub_¡©s
(
css
);

2076 
tÙ®_css
 +ğ
css
;

2078 
	`årštf
(
fout
, "\tL1T_tÙ®_ÿche_acûs£ ğ%u\n", 
tÙ®_css
.
acûs£s
);

2079 
	`årštf
(
fout
, "\tL1T_tÙ®_ÿche_mis£ ğ%u\n", 
tÙ®_css
.
mis£s
);

2080 if(
tÙ®_css
.
acûs£s
 > 0){

2081 
	`årštf
(
fout
, "\tL1T_tÙ®_ÿche_miss_¿‹ = %.4lf\n", ()
tÙ®_css
.
mis£s
 / (éÙ®_css.
acûs£s
);

2083 
	`årštf
(
fout
, "\tL1T_tÙ®_ÿche_³ndšg_h™ ğ%u\n", 
tÙ®_css
.
³ndšg_h™s
);

2084 
	`årštf
(
fout
, "\tL1T_tÙ®_ÿche_»£rv©iÚ_ç ğ%u\n", 
tÙ®_css
.
»s_çs
);

2086 
	}
}

2088 
	ggpgpu_sim
::
	$shad”_´št_l1_miss_¡©
Ğ
FILE
 *
fout
 ) const

2090 
tÙ®_d1_mis£s
 = 0, 
tÙ®_d1_acûs£s
 = 0;

2091  
i
 = 0; i < 
m_shad”_cÚfig
->
n_simt_şu¡”s
; ++i ) {

2092 
cu¡”_d1_mis£s
 = 0, 
şu¡”_d1_acûs£s
 = 0;

2093 
m_şu¡”
[ 
i
 ]->
	`´št_ÿche_¡©s
Ğ
fout
, 
şu¡”_d1_acûs£s
, 
cu¡”_d1_mis£s
 );

2094 
tÙ®_d1_mis£s
 +ğ
cu¡”_d1_mis£s
;

2095 
tÙ®_d1_acûs£s
 +ğ
şu¡”_d1_acûs£s
;

2097 
	`årštf
Ğ
fout
, "tÙ®_dl1_mis£s=%d\n", 
tÙ®_d1_mis£s
 );

2098 
	`årštf
Ğ
fout
, "tÙ®_dl1_acûs£s=%d\n", 
tÙ®_d1_acûs£s
 );

2099 
	`årštf
Ğ
fout
, "tÙ®_dl1_miss_¿‹ğ%f\n", ()
tÙ®_d1_mis£s
 / ()
tÙ®_d1_acûs£s
 );

2150 
	}
}

2152 
	gw¬p_š¡_t
::
	$´št
Ğ
FILE
 *
fout
 ) const

2154 ià(
	`em±y
() ) {

2155 
	`årštf
(
fout
,"bubble\n" );

2158 
	`årštf
(
fout
,"0x%04x ", 
pc
 );

2159 
	`årštf
(
fout
, "w%02d[", 
m_w¬p_id
);

2160 
j
=0; j<
m_cÚfig
->
w¬p_size
; j++)

2161 
	`årštf
(
fout
, "%c", (
	`aùive
(
j
)?'1':'0') );

2162 
	`årštf
(
fout
, "]: ");

2163 
	`±x_´št_š¢
Ğ
pc
, 
fout
 );

2164 
	`årštf
(
fout
, "\n");

2165 
	}
}

2166 
	gshad”_cÜe_ùx
::
	$šûxec¡©
(
w¬p_š¡_t
 *&
š¡
)

2168 if(
š¡
->
mem_İ
==
TEX
)

2169 
	`šùex_¡©
(
š¡
->
	`aùive_couÁ
(),1);

2175 
š¡
->
¥_İ
){

2176 
INT__OP
:

2177 
	`šcŸlu_¡©
(
š¡
->
	`aùive_couÁ
(),25);

2179 
INT_MUL_OP
:

2180 
	`šcimul_¡©
(
š¡
->
	`aùive_couÁ
(),7.2);

2182 
INT_MUL24_OP
:

2183 
	`šcimul24_¡©
(
š¡
->
	`aùive_couÁ
(),4.2);

2185 
INT_MUL32_OP
:

2186 
	`šcimul32_¡©
(
š¡
->
	`aùive_couÁ
(),4);

2188 
INT_DIV_OP
:

2189 
	`šcidiv_¡©
(
š¡
->
	`aùive_couÁ
(),40);

2191 
FP__OP
:

2192 
	`šcå®u_¡©
(
š¡
->
	`aùive_couÁ
(),1);

2194 
FP_MUL_OP
:

2195 
	`šcåmul_¡©
(
š¡
->
	`aùive_couÁ
(),1.8);

2197 
FP_DIV_OP
:

2198 
	`šcådiv_¡©
(
š¡
->
	`aùive_couÁ
(),48);

2200 
FP_SQRT_OP
:

2201 
	`šù¿ns_¡©
(
š¡
->
	`aùive_couÁ
(),25);

2203 
FP_LG_OP
:

2204 
	`šù¿ns_¡©
(
š¡
->
	`aùive_couÁ
(),35);

2206 
FP_SIN_OP
:

2207 
	`šù¿ns_¡©
(
š¡
->
	`aùive_couÁ
(),12);

2209 
FP_EXP_OP
:

2210 
	`šù¿ns_¡©
(
š¡
->
	`aùive_couÁ
(),35);

2215 
	}
}

2216 
	gshad”_cÜe_ùx
::
	$´št_¡age
(
¡age
, 
FILE
 *
fout
 ) const

2218 
m_p–še_»g
[
¡age
].
	`´št
(
fout
);

2220 
	}
}

2222 
	gshad”_cÜe_ùx
::
	$di¥Ïy_simt_¡©e
(
FILE
 *
fout
, 
mask
 ) const

2224 iàĞ(
mask
 & 4è&& 
m_cÚfig
->
mod–
 =ğ
POST_DOMINATOR
 ) {

2225 
	`årštf
(
fout
,"per warp SIMT control-flow state:\n");

2226 
n
 = 
m_cÚfig
->
n_th»ad_³r_shad”
 / m_cÚfig->
w¬p_size
;

2227 
i
=0; i < 
n
; i++) {

2228 
Çùive
 = 0;

2229 
j
=0; j<
m_cÚfig
->
w¬p_size
; j++ ) {

2230 
tid
 = 
i
*
m_cÚfig
->
w¬p_size
 + 
j
;

2231 
dÚe
 = 
	`±x_th»ad_dÚe
(
tid
);

2232 
Çùive
 +ğ(
	`±x_th»ad_dÚe
(
tid
)?0:1);

2233 iàĞ
dÚe
 && (
mask
 & 8) ) {

2234 
dÚe_cyşe
 = 
m_th»ad
[
tid
]->
	`dÚecyşe
();

2235 iàĞ
dÚe_cyşe
 ) {

2236 
	`´štf
("\Àw%02u:t%03u: dÚ@ cyş%u", 
i
, 
tid
, 
dÚe_cyşe
 );

2240 iàĞ
Çùive
 == 0 ) {

2243 
m_simt_¡ack
[
i
]->
	`´št
(
fout
);

2245 
	`årštf
(
fout
,"\n");

2247 
	}
}

2249 
	gld¡_un™
::
	$´št
(
FILE
 *
fout
) const

2251 
	`årštf
(
fout
,"LD/ST unit = ");

2252 
m_di¥©ch_»g
->
	`´št
(
fout
);

2253 iàĞ
m_mem_rc
 !ğ
NO_RC_FAIL
 ) {

2254 
	`årštf
(
fout
," LD/ST stall condition: ");

2255  
m_mem_rc
 ) {

2256 
BK_CONF
: 
	`årštf
(
fout
,"BK_CONF"); ;

2257 
MSHR_RC_FAIL
: 
	`årštf
(
fout
,"MSHR_RC_FAIL"); ;

2258 
ICNT_RC_FAIL
: 
	`årštf
(
fout
,"ICNT_RC_FAIL"); ;

2259 
COAL_STALL
: 
	`årštf
(
fout
,"COAL_STALL"); ;

2260 
WB_ICNT_RC_FAIL
: 
	`årštf
(
fout
,"WB_ICNT_RC_FAIL"); ;

2261 
WB_CACHE_RSRV_FAIL
: 
	`årštf
(
fout
,"WB_CACHE_RSRV_FAIL"); ;

2262 
N_MEM_STAGE_STALL_TYPE
: 
	`årštf
(
fout
,"N_MEM_STAGE_STALL_TYPE"); ;

2263 : 
	`abÜt
();

2265 
	`årštf
(
fout
,"\n");

2267 
	`årštf
(
fout
,"LD/ST wb = ");

2268 
m_Ãxt_wb
.
	`´št
(
fout
);

2269 
	`årštf
(
fout
, "Last LD/ST writeback @ %llu + %llu (gpu_sim_cycle+gpu_tot_sim_cycle)\n",

2270 
m_Ï¡_š¡_gpu_sim_cyşe
, 
m_Ï¡_š¡_gpu_tÙ_sim_cyşe
 );

2271 
	`årštf
(
fout
,"Pending„egister writes:\n");

2272 
¡d
::
m­
<, std::m­<,> >::
cÚ¡_™”©Ü
 
w
;

2273  
w
=
m_³ndšg_wr™es
.
	`begš
(); w!=m_³ndšg_wr™es.
	`’d
(); w++ ) {

2274 
w¬p_id
 = 
w
->
fœ¡
;

2275 cÚ¡ 
¡d
::
m­
<,> &
w¬p_šfo
 = 
w
->
£cÚd
;

2276 ifĞ
w¬p_šfo
.
	`em±y
() )

2278 
	`årštf
(
fout
," w%2u : ", 
w¬p_id
 );

2279 
¡d
::
m­
<,>::
cÚ¡_™”©Ü
 
r
;

2280  
r
=
w¬p_šfo
.
	`begš
();„!=w¬p_šfo.
	`’d
(); ++r ) {

2281 
	`årštf
(
fout
," %u(%u)", 
r
->
fœ¡
,„->
£cÚd
 );

2283 
	`årštf
(
fout
,"\n");

2285 
m_L1C
->
	`di¥Ïy_¡©e
(
fout
);

2286 
m_L1T
->
	`di¥Ïy_¡©e
(
fout
);

2287 ifĞ!
m_cÚfig
->
m_L1D_cÚfig
.
	`di§bËd
() )

2288 
m_L1D
->
	`di¥Ïy_¡©e
(
fout
);

2289 
	`årštf
(
fout
,"LD/ST„e¥Ú£ FIFO (occu·ncy = %zu):\n", 
m_»¥Ú£_fifo
.
	`size
() );

2290  
¡d
::
li¡
<
mem_ãtch
*>::
cÚ¡_™”©Ü
 
i
=
m_»¥Ú£_fifo
.
	`begš
(); i !ğm_»¥Ú£_fifo.
	`’d
(); i++ ) {

2291 cÚ¡ 
mem_ãtch
 *
mf
 = *
i
;

2292 
mf
->
	`´št
(
fout
);

2294 
	}
}

2296 
	gshad”_cÜe_ùx
::
	$di¥Ïy_p–še
(
FILE
 *
fout
, 
´št_mem
, 
mask
 ) const

2298 
	`årštf
(
fout
, "=================================================\n");

2299 
	`årštf
(
fout
, "shad” %u‡ˆcyş%Lu+%Lu (%uh»ad ruÂšg)\n", 
m_sid
,

2300 
gpu_tÙ_sim_cyşe
, 
gpu_sim_cyşe
, 
m_nÙ_com¶‘ed
);

2301 
	`årštf
(
fout
, "=================================================\n");

2303 
	`dump_w¬p_¡©e
(
fout
);

2304 
	`årštf
(
fout
,"\n");

2306 
m_L1I
->
	`di¥Ïy_¡©e
(
fout
);

2308 
	`årštf
(
fout
, "IF/ID = ");

2309 ifĞ!
m_š¡_ãtch_bufãr
.
m_v®id
 )

2310 
	`årštf
(
fout
,"bubble\n");

2312 
	`årštf
(
fout
,"w%2u :…c = 0x%x,‚bytes = %u\n",

2313 
m_š¡_ãtch_bufãr
.
m_w¬p_id
,

2314 
m_š¡_ãtch_bufãr
.
m_pc
,

2315 
m_š¡_ãtch_bufãr
.
m_nby‹s
 );

2317 
	`årštf
(
fout
,"\nibuffer status:\n");

2318  
i
=0; i<
m_cÚfig
->
max_w¬ps_³r_shad”
; i++) {

2319 ifĞ!
m_w¬p
[
i
].
	`ibufãr_em±y
() )

2320 
m_w¬p
[
i
].
	`´št_ibufãr
(
fout
);

2322 
	`årštf
(
fout
,"\n");

2323 
	`di¥Ïy_simt_¡©e
(
fout
,
mask
);

2324 
	`årštf
(
fout
, "-------------------------- Scoreboard\n");

2325 
m_scÜebßrd
->
	`´štCÚ‹Ás
();

2334 
	`årštf
(
fout
, "-------------------------- OP COL\n");

2335 
m_İ”ªd_cŞËùÜ
.
	`dump
(
fout
);

2343 
	`årštf
(
fout
, "-------------------------- Pipe Regs\n");

2345 
i
 = 0; i < 
N_PIPELINE_STAGES
; i++) {

2346 
	`årštf
(
fout
,"--- % ---\n",
p–še_¡age_Çme_decode
[
i
]);

2347 
	`´št_¡age
(
i
,
fout
);
	`årštf
(fout,"\n");

2350 
	`årštf
(
fout
, "-------------------------- Fu\n");

2351  
n
=0;‚ < 
m_num_funùiÚ_un™s
;‚++ ){

2352 
m_fu
[
n
]->
	`´št
(
fout
);

2353 
	`årštf
(
fout
, "---------------\n");

2355 
	`årštf
(
fout
, "-------------------------- other:\n");

2357 
i
=0; i<
num_»suÉ_bus
; i++){

2358 
¡d
::
¡ršg
 
b™s
 = 
m_»suÉ_bus
[
i
]->
	`to_¡ršg
();

2359 
	`årštf
(
fout
, "EX/WB sched[%d]ğ%s\n", 
i
, 
b™s
.
	`c_¡r
() );

2361 
	`årštf
(
fout
, "EX/WB = ");

2362 
	`´št_¡age
(
EX_WB
, 
fout
);

2363 
	`årštf
(
fout
, "\n");

2364 
	`årštf
(
fout
, "Last EX/WB writeback @ %llu + %llu (gpu_sim_cycle+gpu_tot_sim_cycle)\n",

2365 
m_Ï¡_š¡_gpu_sim_cyşe
, 
m_Ï¡_š¡_gpu_tÙ_sim_cyşe
 );

2367 ifĞ
m_aùive_th»ads
.
	`couÁ
(è<ğ2*
m_cÚfig
->
w¬p_size
 ) {

2368 
	`årštf
(
fout
,"Active Threads : ");

2369 
Ï¡_w¬p_id
 = -1;

2370 
tid
=0;id < 
m_aùive_th»ads
.
	`size
();id++ ) {

2371 
w¬p_id
 = 
tid
/
m_cÚfig
->
w¬p_size
;

2372 ifĞ
m_aùive_th»ads
.
	`‹¡
(
tid
) ) {

2373 ifĞ
w¬p_id
 !ğ
Ï¡_w¬p_id
 ) {

2374 
	`årštf
(
fout
,"\À w¬°%u : ", 
w¬p_id
 );

2375 
Ï¡_w¬p_id
=
w¬p_id
;

2377 
	`årštf
(
fout
,"%u ", 
tid
 );

2382 
	}
}

2384 
	gshad”_cÜe_cÚfig
::
	$max_ùa
ĞcÚ¡ 
k”Ãl_šfo_t
 &
k
 ) const

2386 
th»ads_³r_ùa
 = 
k
.
	`th»ads_³r_ùa
();

2387 cÚ¡ 
şass
 
funùiÚ_šfo
 *
k”Ãl
 = 
k
.
	`’Œy
();

2388 
·dded_ùa_size
 = 
th»ads_³r_ùa
;

2389 ià(
·dded_ùa_size
%
w¬p_size
)

2390 
·dded_ùa_size
 = (Õadded_ùa_size/
w¬p_size
)+1)*(warp_size);

2393 
»suÉ_th»ad
 = 
n_th»ad_³r_shad”
 / 
·dded_ùa_size
;

2395 cÚ¡ 
gpgpu_±x_sim_k”Ãl_šfo
 *
k”Ãl_šfo
 = 
	`±x_sim_k”Ãl_šfo
(
k”Ãl
);

2398 
»suÉ_shmem
 = ()-1;

2399 ià(
k”Ãl_šfo
->
smem
 > 0)

2400 
»suÉ_shmem
 = 
gpgpu_shmem_size
 / 
k”Ãl_šfo
->
smem
;

2403 
»suÉ_»gs
 = ()-1;

2404 ià(
k”Ãl_šfo
->
»gs
 > 0)

2405 
»suÉ_»gs
 = 
gpgpu_shad”_»gi¡”s
 / (
·dded_ùa_size
 * ((
k”Ãl_šfo
->
»gs
+3)&~3));

2408 
»suÉ_ùa
 = 
max_ùa_³r_cÜe
;

2410 
»suÉ
 = 
»suÉ_th»ad
;

2411 
»suÉ
 = 
	`gs_mš2
ÔesuÉ, 
»suÉ_shmem
);

2412 
»suÉ
 = 
	`gs_mš2
ÔesuÉ, 
»suÉ_»gs
);

2413 
»suÉ
 = 
	`gs_mš2
ÔesuÉ, 
»suÉ_ùa
);

2415 cÚ¡ 
gpgpu_±x_sim_k”Ãl_šfo
* 
Ï¡_kšfo
 = 
NULL
;

2416 ià(
Ï¡_kšfo
 !ğ
k”Ãl_šfo
) {

2417 
Ï¡_kšfo
 = 
k”Ãl_šfo
;

2418 
	`´štf
 ("GPGPU-Sim uArch: CTA/cÜğ%u,†im™ed by:", 
»suÉ
);

2419 ià(
»suÉ
 =ğ
»suÉ_th»ad
è
	`´štf
 ("hreads");

2420 ià(
»suÉ
 =ğ
»suÉ_shmem
è
	`´štf
 (" shmem");

2421 ià(
»suÉ
 =ğ
»suÉ_»gs
è
	`´štf
 ("„egs");

2422 ià(
»suÉ
 =ğ
»suÉ_ùa
è
	`´štf
 (" cta_limit");

2423 
	`´štf
 ("\n");

2427 ifĞ
k
.
	`num_blocks
(è< 
»suÉ
*
	`num_shad”
() ) {

2428 
»suÉ
 = 
k
.
	`num_blocks
(è/ 
	`num_shad”
();

2429 ià(
k
.
	`num_blocks
(è% 
	`num_shad”
())

2430 
»suÉ
++;

2433 
	`as£¹
Ğ
»suÉ
 <ğ
MAX_CTA_PER_SHADER
 );

2434 ià(
»suÉ
 < 1) {

2435 
	`´štf
 ("GPGPU-Sim uArch: ERROR ** Kernel„equires more„esourceshan shader has.\n");

2436 
	`abÜt
();

2439  
»suÉ
;

2440 
	}
}

2442 
	gshad”_cÜe_ùx
::
	$cyşe
()

2444 
m_¡©s
->
shad”_cyşes
[
m_sid
]++;

2445 
	`wr™eback
();

2446 
	`execu‹
();

2447 
	`»ad_İ”ªds
();

2448 
	`issue
();

2449 
	`decode
();

2450 
	`ãtch
();

2451 
	}
}

2455 
	gshad”_cÜe_ùx
::
	$ÿche_æush
()

2457 
m_ld¡_un™
->
	`æush
();

2458 
	}
}

2461 
	g¡d
::
li¡
<
İndcŞl_rfu_t
::
İ_t
> o²dcŞl_rfu_t::
¬b™”_t
::
	$®loÿ‹_»ads
()

2463 
¡d
::
li¡
<
İ_t
> 
»suÉ
;

2465 
šput
;

2466 
ouut
;

2467 
_šputs
 = 
m_num_bªks
;

2468 
_ouuts
 = 
m_num_cŞËùÜs
;

2469 
_squ¬e
 = ( 
_šputs
 > 
_ouuts
 ) ? _inputs : _outputs;

2470 
	`as£¹
(
_squ¬e
 > 0);

2471 
_´i
 = ()
m_Ï¡_cu
;

2474  
i
 = 0; i < 
_šputs
; ++i )

2475 
_šm©ch
[
i
] = -1;

2476  
j
 = 0; j < 
_ouuts
; ++j )

2477 
_outm©ch
[
j
] = -1;

2479  
i
=0; i<
m_num_bªks
; i++) {

2480  
j
=0; j<
m_num_cŞËùÜs
; j++) {

2481 
	`as£¹
Ğ
i
 < ()
_šputs
 );

2482 
	`as£¹
Ğ
j
 < ()
_ouuts
 );

2483 
_»que¡
[
i
][
j
] = 0;

2485 ifĞ!
m_queue
[
i
].
	`em±y
() ) {

2486 cÚ¡ 
İ_t
 &
İ
 = 
m_queue
[
i
].
	`äÚt
();

2487 
oc_id
 = 
İ
.
	`g‘_oc_id
();

2488 
	`as£¹
Ğ
i
 < ()
_šputs
 );

2489 
	`as£¹
Ğ
oc_id
 < 
_ouuts
 );

2490 
_»que¡
[
i
][
oc_id
] = 1;

2492 ifĞ
m_®loÿ‹d_bªk
[
i
].
	`is_wr™e
() ) {

2493 
	`as£¹
Ğ
i
 < ()
_šputs
 );

2494 
_šm©ch
[
i
] = 0;

2502  
p
 = 0;… < 
_squ¬e
; ++p ) {

2503 
ouut
 = ( 
_´i
 + 
p
 ) % 
_squ¬e
;

2506  
šput
 = 0; iÅuˆ< 
_šputs
; ++input ) {

2507 
	`as£¹
Ğ
šput
 < 
_šputs
 );

2508 
	`as£¹
Ğ
ouut
 < 
_ouuts
 );

2509 iàĞĞ
ouut
 < 
_ouuts
 ) &&

2510 Ğ
_šm©ch
[
šput
] == -1 ) &&

2511 Ğ
_outm©ch
[
ouut
] == -1 ) &&

2512 Ğ
_»que¡
[
šput
][
ouut
] ) ) {

2514 
_šm©ch
[
šput
] = 
ouut
;

2515 
_outm©ch
[
ouut
] = 
šput
;

2518 
ouut
 = ( ouuˆ+ 1 ) % 
_squ¬e
;

2523 
_´i
 = ( _´˜+ 1 ) % 
_squ¬e
;

2527 
m_Ï¡_cu
 = 
_´i
;

2528  
i
=0; i < 
m_num_bªks
; i++ ) {

2529 ifĞ
_šm©ch
[
i
] != -1 ) {

2530 ifĞ!
m_®loÿ‹d_bªk
[
i
].
	`is_wr™e
() ) {

2531 
bªk
 = ()
i
;

2532 
İ_t
 &
İ
 = 
m_queue
[
bªk
].
	`äÚt
();

2533 
»suÉ
.
	`push_back
(
İ
);

2534 
m_queue
[
bªk
].
	`pİ_äÚt
();

2539  
»suÉ
;

2540 
	}
}

2542 
	gb¬r›r_£t_t
::
	$b¬r›r_£t_t
(
shad”_cÜe_ùx
 *
shad”
,
max_w¬ps_³r_cÜe
, 
max_ùa_³r_cÜe
, 
max_b¬r›rs_³r_ùa
, 
w¬p_size
)

2544 
m_max_w¬ps_³r_cÜe
 = 
max_w¬ps_³r_cÜe
;

2545 
m_max_ùa_³r_cÜe
 = 
max_ùa_³r_cÜe
;

2546 
m_max_b¬r›rs_³r_ùa
 = 
max_b¬r›rs_³r_ùa
;

2547 
m_w¬p_size
 = 
w¬p_size
;

2548 
m_shad”
 = 
shad”
;

2549 ifĞ
max_w¬ps_³r_cÜe
 > 
WARP_PER_CTA_MAX
 ) {

2550 
	`´štf
("ERROR ** increase WARP_PER_CTA_MAX in shader.h from %uo >= %u or warps…er cta in gpgpusim.config\n",

2551 
WARP_PER_CTA_MAX
, 
max_w¬ps_³r_cÜe
 );

2552 
	`ex™
(1);

2554 if(
max_b¬r›rs_³r_ùa
 > 
MAX_BARRIERS_PER_CTA
){

2555 
	`´štf
("ERROR ** increase MAX_BARRIERS_PER_CTA in‡bstract_hardware_model.h from %uo >= %u or barriers…er cta in gpgpusim.config\n",

2556 
MAX_BARRIERS_PER_CTA
, 
max_b¬r›rs_³r_ùa
 );

2557 
	`ex™
(1);

2559 
m_w¬p_aùive
.
	`»£t
();

2560 
m_w¬p_©_b¬r›r
.
	`»£t
();

2561 
i
=0; i<
max_b¬r›rs_³r_ùa
; i++){

2562 
m_b¬_id_to_w¬ps
[
i
].
	`»£t
();

2564 
	}
}

2567 
	gb¬r›r_£t_t
::
	$®loÿ‹_b¬r›r
Ğ
ùa_id
, 
w¬p_£t_t
 
w¬ps
 )

2569 
	`as£¹
Ğ
ùa_id
 < 
m_max_ùa_³r_cÜe
 );

2570 
ùa_to_w¬p_t
::
™”©Ü
 
w
=
m_ùa_to_w¬ps
.
	`fšd
(
ùa_id
);

2571 
	`as£¹
Ğ
w
 =ğ
m_ùa_to_w¬ps
.
	`’d
() );

2572 
m_ùa_to_w¬ps
[
ùa_id
] = 
w¬ps
;

2573 
	`as£¹
Ğ
m_ùa_to_w¬ps
.
	`size
(è<ğ
m_max_ùa_³r_cÜe
 );

2575 
m_w¬p_aùive
 |ğ
w¬ps
;

2576 
m_w¬p_©_b¬r›r
 &ğ~
w¬ps
;

2577 
i
=0; i<
m_max_b¬r›rs_³r_ùa
; i++){

2578 
m_b¬_id_to_w¬ps
[
i
] &=~
w¬ps
;

2581 
	}
}

2584 
	gb¬r›r_£t_t
::
	$d—Îoÿ‹_b¬r›r
Ğ
ùa_id
 )

2586 
ùa_to_w¬p_t
::
™”©Ü
 
w
=
m_ùa_to_w¬ps
.
	`fšd
(
ùa_id
);

2587 ifĞ
w
 =ğ
m_ùa_to_w¬ps
.
	`’d
() )

2589 
w¬p_£t_t
 
w¬ps
 = 
w
->
£cÚd
;

2590 
w¬p_£t_t
 
©_b¬r›r
 = 
w¬ps
 & 
m_w¬p_©_b¬r›r
;

2591 
	`as£¹
Ğ
©_b¬r›r
.
	`ªy
(è=ğ
çl£
 );

2592 
w¬p_£t_t
 
aùive
 = 
w¬ps
 & 
m_w¬p_aùive
;

2593 
	`as£¹
Ğ
aùive
.
	`ªy
(è=ğ
çl£
 );

2594 
m_w¬p_aùive
 &ğ~
w¬ps
;

2595 
m_w¬p_©_b¬r›r
 &ğ~
w¬ps
;

2597 
i
=0; i<
m_max_b¬r›rs_³r_ùa
; i++){

2598 
w¬p_£t_t
 
©_a_¥ecific_b¬r›r
 = 
w¬ps
 & 
m_b¬_id_to_w¬ps
[
i
];

2599 
	`as£¹
Ğ
©_a_¥ecific_b¬r›r
.
	`ªy
(è=ğ
çl£
 );

2600 
m_b¬_id_to_w¬ps
[
i
] &=~
w¬ps
;

2602 
m_ùa_to_w¬ps
.
	`”a£
(
w
);

2603 
	}
}

2606 
	gb¬r›r_£t_t
::
	$w¬p_»aches_b¬r›r
(
ùa_id
,
w¬p_id
,
w¬p_š¡_t
* 
š¡
)

2608 
b¬r›r_ty³
 
b¬_ty³
 = 
š¡
->bar_type;

2609 
b¬_id
 = 
š¡
->bar_id;

2610 
b¬_couÁ
 = 
š¡
->bar_count;

2611 
	`as£¹
(
b¬_id
!=()-1);

2612 
ùa_to_w¬p_t
::
™”©Ü
 
w
=
m_ùa_to_w¬ps
.
	`fšd
(
ùa_id
);

2614 ifĞ
w
 =ğ
m_ùa_to_w¬ps
.
	`’d
() ) {

2615 
	`´štf
("ERROR ** c_id %u‚Ù found iÀb¬r›¸£ˆÚ cyş%Îu+%Îu...\n", 
ùa_id
, 
gpu_tÙ_sim_cyşe
, 
gpu_sim_cyşe
 );

2616 
	`dump
();

2617 
	`abÜt
();

2619 
	`as£¹
Ğ
w
->
£cÚd
.
	`‹¡
(
w¬p_id
è=ğ
Œue
 );

2621 
m_b¬_id_to_w¬ps
[
b¬_id
].
	`£t
(
w¬p_id
);

2622 if(
b¬_ty³
==
SYNC
 || b¬_ty³==
RED
){

2623 
m_w¬p_©_b¬r›r
.
	`£t
(
w¬p_id
);

2625 
w¬p_£t_t
 
w¬ps_š_ùa
 = 
w
->
£cÚd
;

2626 
w¬p_£t_t
 
©_b¬r›r
 = 
w¬ps_š_ùa
 & 
m_b¬_id_to_w¬ps
[
b¬_id
];

2627 
w¬p_£t_t
 
aùive
 = 
w¬ps_š_ùa
 & 
m_w¬p_aùive
;

2628 if(
b¬_couÁ
==()-1){

2629 ifĞ
©_b¬r›r
 =ğ
aùive
 ) {

2631 
m_b¬_id_to_w¬ps
[
b¬_id
] &ğ~
©_b¬r›r
;

2632 
m_w¬p_©_b¬r›r
 &ğ~
©_b¬r›r
;

2633 if(
b¬_ty³
==
RED
){

2634 
m_shad”
->
	`brßdÿ¡_b¬r›r_»duùiÚ
(
ùa_id
, 
b¬_id
,
©_b¬r›r
);

2639 ià((
©_b¬r›r
.
	`couÁ
(è* 
m_w¬p_size
è=ğ
b¬_couÁ
){

2641 
m_b¬_id_to_w¬ps
[
b¬_id
] &ğ~
©_b¬r›r
;

2642 
m_w¬p_©_b¬r›r
 &ğ~
©_b¬r›r
;

2643 if(
b¬_ty³
==
RED
){

2644 
m_shad”
->
	`brßdÿ¡_b¬r›r_»duùiÚ
(
ùa_id
, 
b¬_id
,
©_b¬r›r
);

2650 
	}
}

2654 
	gb¬r›r_£t_t
::
	$w¬p_ex™
Ğ
w¬p_id
 )

2658 
m_w¬p_aùive
.
	`»£t
(
w¬p_id
);

2661 
ùa_to_w¬p_t
::
™”©Ü
 
w
=
m_ùa_to_w¬ps
.
	`begš
();

2662 ; 
w
 !ğ
m_ùa_to_w¬ps
.
	`’d
(); ++w) {

2663 ià(
w
->
£cÚd
.
	`‹¡
(
w¬p_id
è=ğ
Œue
) ;

2665 
w¬p_£t_t
 
w¬ps_š_ùa
 = 
w
->
£cÚd
;

2666 
w¬p_£t_t
 
aùive
 = 
w¬ps_š_ùa
 & 
m_w¬p_aùive
;

2668 
i
=0; i<
m_max_b¬r›rs_³r_ùa
; i++){

2669 
w¬p_£t_t
 
©_a_¥ecific_b¬r›r
 = 
w¬ps_š_ùa
 & 
m_b¬_id_to_w¬ps
[
i
];

2670 ifĞ
©_a_¥ecific_b¬r›r
 =ğ
aùive
 ) {

2672 
m_b¬_id_to_w¬ps
[
i
] &ğ~
©_a_¥ecific_b¬r›r
;

2673 
m_w¬p_©_b¬r›r
 &ğ~
©_a_¥ecific_b¬r›r
;

2676 
	}
}

2679 
boŞ
 
	gb¬r›r_£t_t
::
	$w¬p_wa™šg_©_b¬r›r
Ğ
w¬p_id
 ) const

2681  
m_w¬p_©_b¬r›r
.
	`‹¡
(
w¬p_id
);

2682 
	}
}

2684 
	gb¬r›r_£t_t
::
	$dump
()

2686 
	`´štf
( "barrier set information\n");

2687 
	`´štf
Ğ" m_max_ùa_³r_cÜğ%u\n", 
m_max_ùa_³r_cÜe
 );

2688 
	`´štf
Ğ" m_max_w¬ps_³r_cÜğ%u\n", 
m_max_w¬ps_³r_cÜe
 );

2689 
	`´štf
Ğ" m_max_b¬r›rs_³r_ù¨=%u\n", 
m_max_b¬r›rs_³r_ùa
);

2690 
	`´štf
( " cta_to_warps:\n");

2692 
ùa_to_w¬p_t
::
cÚ¡_™”©Ü
 
i
;

2693  
i
=
m_ùa_to_w¬ps
.
	`begš
(); i!=m_ùa_to_w¬ps.
	`’d
(); i++ ) {

2694 
ùa_id
 = 
i
->
fœ¡
;

2695 
w¬p_£t_t
 
w¬ps
 = 
i
->
£cÚd
;

2696 
	`´štf
(" c_id %u : %s\n", 
ùa_id
, 
w¬ps
.
	`to_¡ršg
().
	`c_¡r
() );

2698 
	`´štf
(" w¬p_aùive: %s\n", 
m_w¬p_aùive
.
	`to_¡ršg
().
	`c_¡r
() );

2699 
	`´štf
(" w¬p_©_b¬r›r: %s\n", 
m_w¬p_©_b¬r›r
.
	`to_¡ršg
().
	`c_¡r
() );

2700  
i
=0; i<
m_max_b¬r›rs_³r_ùa
; i++){

2701 
w¬p_£t_t
 
w¬ps_»ached_b¬r›r
 = 
m_b¬_id_to_w¬ps
[
i
];

2702 
	`´štf
(" w¬p_©_b¬r›¸%u: %s\n", 
i
, 
w¬ps_»ached_b¬r›r
.
	`to_¡ršg
().
	`c_¡r
() );

2704 
	`fæush
(
¡dout
);

2705 
	}
}

2707 
	gshad”_cÜe_ùx
::
	$w¬p_ex™
Ğ
w¬p_id
 )

2709 
boŞ
 
dÚe
 = 
Œue
;

2710  
i
 = 
w¬p_id
*
	`g‘_cÚfig
()->
w¬p_size
;

2711 
i
 < (
w¬p_id
+1)*
	`g‘_cÚfig
()->
w¬p_size
;

2712 
i
++ ) {

2719 ià(
m_th»ad
[
i
] && !m_th»ad[i]->
	`is_dÚe
()è
dÚe
 = 
çl£
;

2723 ià(
dÚe
)

2724 
m_b¬r›rs
.
	`w¬p_ex™
Ğ
w¬p_id
 );

2725 
	}
}

2727 
boŞ
 
	gshad”_cÜe_ùx
::
	$check_if_nÚ_»Ëa£d_»duùiÚ_b¬r›r
(
w¬p_š¡_t
 &
š¡
)

2729 
w¬p_id
 = 
š¡
.
	`w¬p_id
();

2730 
boŞ
 
b¬_»d_İ
 = (
š¡
.
İ
 =ğ
BARRIER_OP
è&& (š¡.
b¬_ty³
 =ğ
RED
);

2731 
boŞ
 
nÚ_»Ëa£d_b¬r›r_»duùiÚ
 = 
çl£
;

2732 
boŞ
 
w¬p_¡ucked_©_b¬r›r
 = 
	`w¬p_wa™šg_©_b¬r›r
(
w¬p_id
);

2733 
boŞ
 
sšgË_š¡_š_p–še
 = (
m_w¬p
[
w¬p_id
].
	`num_issued_š¡_š_p–še
()==1);

2734 
nÚ_»Ëa£d_b¬r›r_»duùiÚ
 = 
sšgË_š¡_š_p–še
 
ªd
 
w¬p_¡ucked_©_b¬r›r
‡nd 
b¬_»d_İ
;

2735 
	`´štf
("nÚ_»Ëa£d_b¬r›r_»duùiÚ=%u\n",
nÚ_»Ëa£d_b¬r›r_»duùiÚ
);

2736  
nÚ_»Ëa£d_b¬r›r_»duùiÚ
;

2737 
	}
}

2739 
boŞ
 
	gshad”_cÜe_ùx
::
	$w¬p_wa™šg_©_b¬r›r
Ğ
w¬p_id
 ) const

2741  
m_b¬r›rs
.
	`w¬p_wa™šg_©_b¬r›r
(
w¬p_id
);

2742 
	}
}

2744 
boŞ
 
	gshad”_cÜe_ùx
::
	$w¬p_wa™šg_©_mem_b¬r›r
Ğ
w¬p_id
 )

2746 ifĞ!
m_w¬p
[
w¬p_id
].
	`g‘_memb¬
() )

2747  
çl£
;

2748 ifĞ!
m_scÜebßrd
->
	`³ndšgWr™es
(
w¬p_id
) ) {

2749 
m_w¬p
[
w¬p_id
].
	`ş—r_memb¬
();

2750  
çl£
;

2752  
Œue
;

2753 
	}
}

2755 
	gshad”_cÜe_ùx
::
	$£t_max_ùa
ĞcÚ¡ 
k”Ãl_šfo_t
 &
k”Ãl
 )

2758 
k”Ãl_max_ùa_³r_shad”
 = 
m_cÚfig
->
	`max_ùa
(
k”Ãl
);

2759 
gpu_ùa_size
 = 
k”Ãl
.
	`th»ads_³r_ùa
();

2760 
k”Ãl_·dded_th»ads_³r_ùa
 = (
gpu_ùa_size
%
m_cÚfig
->
w¬p_size
) ?

2761 
m_cÚfig
->
w¬p_size
*((
gpu_ùa_size
/m_config->warp_size)+1) :

2762 
gpu_ùa_size
;

2763 
	}
}

2765 
	gshad”_cÜe_ùx
::
	$deüem’t_©omic_couÁ
Ğ
wid
, 
n
 )

2767 
	`as£¹
Ğ
m_w¬p
[
wid
].
	`g‘_n_©omic
(è>ğ
n
 );

2768 
m_w¬p
[
wid
].
	`dec_n_©omic
(
n
);

2769 
	}
}

2771 
	gshad”_cÜe_ùx
::
	$brßdÿ¡_b¬r›r_»duùiÚ
(
ùa_id
,
b¬_id
,
w¬p_£t_t
 
w¬ps
)

2773 
i
=0; i<
m_cÚfig
->
max_w¬ps_³r_shad”
;i++){

2774 if(
w¬ps
.
	`‹¡
(
i
)){

2775 cÚ¡ 
w¬p_š¡_t
 * 
š¡
 = 
m_w¬p
[
i
].
	`»¡Üe_šfo_of_Ï¡_š¡_©_b¬r›r
();

2776 
cÚ¡_ÿ¡
<
w¬p_š¡_t
 *> (
š¡
)->
	`brßdÿ¡_b¬r›r_»duùiÚ
(š¡->
	`g‘_aùive_mask
());

2779 
	}
}

2781 
boŞ
 
	gshad”_cÜe_ùx
::
	$ãtch_un™_»¥Ú£_bufãr_fuÎ
() const

2783  
çl£
;

2784 
	}
}

2786 
	gshad”_cÜe_ùx
::
	$acû±_ãtch_»¥Ú£
Ğ
mem_ãtch
 *
mf
 )

2788 
mf
->
	`£t_¡©us
(
IN_SHADER_FETCHED
,
gpu_sim_cyşe
+
gpu_tÙ_sim_cyşe
);

2789 
m_L1I
->
	`fl
(
mf
,
gpu_sim_cyşe
+
gpu_tÙ_sim_cyşe
);

2790 
	}
}

2792 
boŞ
 
	gshad”_cÜe_ùx
::
	$ld¡_un™_»¥Ú£_bufãr_fuÎ
() const

2794  
m_ld¡_un™
->
	`»¥Ú£_bufãr_fuÎ
();

2795 
	}
}

2797 
	gshad”_cÜe_ùx
::
	$acû±_ld¡_un™_»¥Ú£
(
mem_ãtch
 * 
mf
)

2799 
m_ld¡_un™
->
	`fl
(
mf
);

2800 
	}
}

2802 
	gshad”_cÜe_ùx
::
	$¡Üe_ack
Ğ
şass
 
mem_ãtch
 *
mf
 )

2804 
	`as£¹
Ğ
mf
->
	`g‘_ty³
(è=ğ
WRITE_ACK
 || ( 
m_cÚfig
->
gpgpu_³rãù_mem
 && mf->
	`g‘_is_wr™e
() ) );

2805 
w¬p_id
 = 
mf
->
	`g‘_wid
();

2806 
m_w¬p
[
w¬p_id
].
	`dec_¡Üe_»q
();

2807 
	}
}

2809 
	gshad”_cÜe_ùx
::
	$´št_ÿche_¡©s
Ğ
FILE
 *
å
, & 
dl1_acûs£s
, & 
dl1_mis£s
 ) {

2810 
m_ld¡_un™
->
	`´št_ÿche_¡©s
Ğ
å
, 
dl1_acûs£s
, 
dl1_mis£s
 );

2811 
	}
}

2813 
	gshad”_cÜe_ùx
::
	$g‘_ÿche_¡©s
(
ÿche_¡©s
 &
cs
){

2815 
cs
 +ğ
m_L1I
->
	`g‘_¡©s
();

2816 
m_ld¡_un™
->
	`g‘_ÿche_¡©s
(
cs
);

2817 
	}
}

2819 
	gshad”_cÜe_ùx
::
	$g‘_L1I_sub_¡©s
(
ÿche_sub_¡©s
 &
css
) const{

2820 if(
m_L1I
)

2821 
m_L1I
->
	`g‘_sub_¡©s
(
css
);

2822 
	}
}

2823 
	gshad”_cÜe_ùx
::
	$g‘_L1D_sub_¡©s
(
ÿche_sub_¡©s
 &
css
) const{

2824 
m_ld¡_un™
->
	`g‘_L1D_sub_¡©s
(
css
);

2825 
	}
}

2826 
	gshad”_cÜe_ùx
::
	$g‘_L1C_sub_¡©s
(
ÿche_sub_¡©s
 &
css
) const{

2827 
m_ld¡_un™
->
	`g‘_L1C_sub_¡©s
(
css
);

2828 
	}
}

2829 
	gshad”_cÜe_ùx
::
	$g‘_L1T_sub_¡©s
(
ÿche_sub_¡©s
 &
css
) const{

2830 
m_ld¡_un™
->
	`g‘_L1T_sub_¡©s
(
css
);

2831 
	}
}

2833 
	gshad”_cÜe_ùx
::
	$g‘_iút_pow”_¡©s
(&
n_simt_to_mem
, &
n_mem_to_simt
) const{

2834 
n_simt_to_mem
 +ğ
m_¡©s
->n_simt_to_mem[
m_sid
];

2835 
n_mem_to_simt
 +ğ
m_¡©s
->n_mem_to_simt[
m_sid
];

2836 
	}
}

2838 
boŞ
 
	gshd_w¬p_t
::
	$funùiÚ®_dÚe
() const

2840  
	`g‘_n_com¶‘ed
(è=ğ
m_w¬p_size
;

2841 
	}
}

2843 
boŞ
 
	gshd_w¬p_t
::
	$h¬dw¬e_dÚe
() const

2845  
	`funùiÚ®_dÚe
(è&& 
	`¡Ües_dÚe
(è&& !
	`š¡_š_p–še
();

2846 
	}
}

2848 
boŞ
 
	gshd_w¬p_t
::
	$wa™šg
()

2850 iàĞ
	`funùiÚ®_dÚe
() ) {

2852  
Œue
;

2853 } iàĞ
m_shad”
->
	`w¬p_wa™šg_©_b¬r›r
(
m_w¬p_id
) ) {

2855  
Œue
;

2856 } iàĞ
m_shad”
->
	`w¬p_wa™šg_©_mem_b¬r›r
(
m_w¬p_id
) ) {

2858  
Œue
;

2859 } iàĞ
m_n_©omic
 >0 ) {

2865  
Œue
;

2867  
çl£
;

2868 
	}
}

2870 
	gshd_w¬p_t
::
	$´št
Ğ
FILE
 *
fout
 ) const

2872 ifĞ!
	`dÚe_ex™
() ) {

2873 
	`årštf
Ğ
fout
, "w%02u‚pc: 0x%04x, done:%c%c%c%c:%2u i:%u s:%u‡:%u (done: ",

2874 
m_w¬p_id
,

2875 
m_Ãxt_pc
,

2876 (
	`funùiÚ®_dÚe
()?'f':' '),

2877 (
	`¡Ües_dÚe
()?'s':' '),

2878 (
	`š¡_š_p–še
()?' ':'i'),

2879 (
	`dÚe_ex™
()?'e':' '),

2880 
n_com¶‘ed
,

2881 
m_š¡_š_p–še
,

2882 
m_¡Ües_out¡ªdšg
,

2883 
m_n_©omic
 );

2884 
i
 = 
m_w¬p_id
*
m_w¬p_size
; i < (m_warp_id+1)*m_warp_size; i++ ) {

2885 iàĞ
m_shad”
->
	`±x_th»ad_dÚe
(
i
èè
	`årštf
(
fout
,"1");

2886 
	`årštf
(
fout
,"0");

2887 iàĞ(((
i
+1)%4è=ğ0è&& (i+1è< (
m_w¬p_id
+1)*
m_w¬p_size
 )

2888 
	`årštf
(
fout
,",");

2890 
	`årštf
(
fout
,") ");

2891 
	`årštf
(
fout
,"‡ùive=%s", 
m_aùive_th»ads
.
	`to_¡ršg
().
	`c_¡r
() );

2892 
	`årštf
(
fout
,"†a¡ f‘ched @ %5Îu", 
m_Ï¡_ãtch
);

2893 ifĞ
m_imiss_³ndšg
 )

2894 
	`årštf
(
fout
," i-miss…ending");

2895 
	`årštf
(
fout
,"\n");

2897 
	}
}

2899 
	gshd_w¬p_t
::
	$´št_ibufãr
Ğ
FILE
 *
fout
 ) const

2901 
	`årštf
(
fout
," ibufãr[%2u] : ", 
m_w¬p_id
 );

2902  
i
=0; i < 
IBUFFER_SIZE
; i++) {

2903 cÚ¡ 
š¡_t
 *
š¡
 = 
m_ibufãr
[
i
].
m_š¡
;

2904 ifĞ
š¡
 ) in¡->
	`´št_š¢
(
fout
);

2905 ifĞ
m_ibufãr
[
i
].
m_v®id
 )

2906 
	`årštf
(
fout
," <invalid instruction> ");

2907 
	`årštf
(
fout
," <empty> ");

2909 
	`årštf
(
fout
,"\n");

2910 
	}
}

2912 
	gİndcŞl_rfu_t
::
	$add_cu_£t
(
£t_id
, 
num_cu
, 
num_di¥©ch
){

2913 
m_cus
[
£t_id
].
	`»£rve
(
num_cu
);

2914 
i
 = 0; i < 
num_cu
; i++) {

2915 
m_cus
[
£t_id
].
	`push_back
(
	`cŞËùÜ_un™_t
());

2916 
m_cu
.
	`push_back
(&
m_cus
[
£t_id
].
	`back
());

2919 
i
 = 0; i < 
num_di¥©ch
; i++) {

2920 
m_di¥©ch_un™s
.
	`push_back
(
	`di¥©ch_un™_t
(&
m_cus
[
£t_id
]));

2922 
	}
}

2925 
	gİndcŞl_rfu_t
::
	$add_pÜt
(
pÜt_veùÜ_t
 & 
šput
,…Üt_veùÜ_ˆ& 
ouut
, 
ušt_veùÜ_t
 
cu_£ts
)

2935 
m_š_pÜts
.
	`push_back
(
	`šput_pÜt_t
(
šput
,
ouut
,
cu_£ts
));

2936 
	}
}

2938 
	gİndcŞl_rfu_t
::
	$š™
Ğ
num_bªks
, 
shad”_cÜe_ùx
 *
shad”
 )

2940 
m_shad”
=
shad”
;

2941 
m_¬b™”
.
	`š™
(
m_cu
.
	`size
(),
num_bªks
);

2944 
m_num_bªks
 = 
num_bªks
;

2945 
m_bªk_w¬p_shiá
 = 0;

2946 
m_w¬p_size
 = 
shad”
->
	`g‘_cÚfig
()->
w¬p_size
;

2947 
m_bªk_w¬p_shiá
 = ()(è(
	`log
(
m_w¬p_size
+0.5) /†og(2.0));

2948 
	`as£¹
Ğ(
m_bªk_w¬p_shiá
 =ğ5è|| (
m_w¬p_size
 != 32) );

2950  
j
=0; j<
m_cu
.
	`size
(); j++) {

2951 
m_cu
[
j
]->
	`š™
(j,
num_bªks
,
m_bªk_w¬p_shiá
,
shad”
->
	`g‘_cÚfig
(),
this
);

2953 
m_š™Ÿlized
=
Œue
;

2954 
	}
}

2956 
	$»gi¡”_bªk
(
»gnum
, 
wid
, 
num_bªks
, 
bªk_w¬p_shiá
)

2958 
bªk
 = 
»gnum
;

2959 ià(
bªk_w¬p_shiá
)

2960 
bªk
 +ğ
wid
;

2961  
bªk
 % 
num_bªks
;

2962 
	}
}

2964 
boŞ
 
	gİndcŞl_rfu_t
::
	$wr™eback
ĞcÚ¡ 
w¬p_š¡_t
 &
š¡
 )

2966 
	`as£¹
Ğ!
š¡
.
	`em±y
() );

2967 
¡d
::
li¡
<> 
»gs
 = 
m_shad”
->
	`g‘_»gs_wr™‹n
(
š¡
);

2968 
¡d
::
li¡
<>::
™”©Ü
 
r
;

2969 
n
=0;

2970  
r
=
»gs
.
	`begš
();„!ôegs.
	`’d
();r++,
n
++ ) {

2971 
»g
 = *
r
;

2972 
bªk
 = 
	`»gi¡”_bªk
(
»g
,
š¡
.
	`w¬p_id
(),
m_num_bªks
,
m_bªk_w¬p_shiá
);

2973 ifĞ
m_¬b™”
.
	`bªk_idË
(
bªk
) ) {

2974 
m_¬b™”
.
	`®loÿ‹_bªk_fÜ_wr™e
(
bªk
,
	`İ_t
(&
š¡
,
»g
,
m_num_bªks
,
m_bªk_w¬p_shiá
));

2976  
çl£
;

2979 
i
=0;i<()
»gs
.
	`size
();i++){

2980 if(
m_shad”
->
	`g‘_cÚfig
()->
gpgpu_şock_g©ed_»g_fe
){

2981 
aùive_couÁ
=0;

2982 
i
=0;i<
m_shad”
->
	`g‘_cÚfig
()->
w¬p_size
;i=i+m_shad”->g‘_cÚfig()->
n_»gfe_g©šg_group
){

2983 
j
=0;j<
m_shad”
->
	`g‘_cÚfig
()->
n_»gfe_g©šg_group
;j++){

2984 if(
š¡
.
	`g‘_aùive_mask
().
	`‹¡
(
i
+
j
)){

2985 
aùive_couÁ
+=
m_shad”
->
	`g‘_cÚfig
()->
n_»gfe_g©šg_group
;

2990 
m_shad”
->
	`šüegfe_wr™es
(
aùive_couÁ
);

2992 
m_shad”
->
	`šüegfe_wr™es
(m_shad”->
	`g‘_cÚfig
()->
w¬p_size
);

2995  
Œue
;

2996 
	}
}

2998 
	gİndcŞl_rfu_t
::
	$di¥©ch_»ady_cu
()

3000  
p
=0;… < 
m_di¥©ch_un™s
.
	`size
(); ++p ) {

3001 
di¥©ch_un™_t
 &
du
 = 
m_di¥©ch_un™s
[
p
];

3002 
cŞËùÜ_un™_t
 *
cu
 = 
du
.
	`fšd_»ady
();

3003 ifĞ
cu
 ) {

3004 
i
=0;i<(
cu
->
	`g‘_num_İ”ªds
()-cu->
	`g‘_num_»gs
());i++){

3005 if(
m_shad”
->
	`g‘_cÚfig
()->
gpgpu_şock_g©ed_»g_fe
){

3006 
aùive_couÁ
=0;

3007 
i
=0;i<
m_shad”
->
	`g‘_cÚfig
()->
w¬p_size
;i=i+m_shad”->g‘_cÚfig()->
n_»gfe_g©šg_group
){

3008 
j
=0;j<
m_shad”
->
	`g‘_cÚfig
()->
n_»gfe_g©šg_group
;j++){

3009 if(
cu
->
	`g‘_aùive_mask
().
	`‹¡
(
i
+
j
)){

3010 
aùive_couÁ
+=
m_shad”
->
	`g‘_cÚfig
()->
n_»gfe_g©šg_group
;

3015 
m_shad”
->
	`šúÚ_rf_İ”ªds
(
aùive_couÁ
);

3017 
m_shad”
->
	`šúÚ_rf_İ”ªds
(m_shad”->
	`g‘_cÚfig
()->
w¬p_size
);

3020 
cu
->
	`di¥©ch
();

3023 
	}
}

3025 
	gİndcŞl_rfu_t
::
	$®loÿ‹_cu
Ğ
pÜt_num
 )

3027 
šput_pÜt_t
& 
šp
 = 
m_š_pÜts
[
pÜt_num
];

3028 
i
 = 0; i < 
šp
.
m_š
.
	`size
(); i++) {

3029 ifĞ(*
šp
.
m_š
[
i
]).
	`has_»ady
() ) {

3031 
j
 = 0; j < 
šp
.
m_cu_£ts
.
	`size
(); j++) {

3032 
¡d
::
veùÜ
<
cŞËùÜ_un™_t
> & 
cu_£t
 = 
m_cus
[
šp
.
m_cu_£ts
[
j
]];

3033 
boŞ
 
®loÿ‹d
 = 
çl£
;

3034 
k
 = 0; k < 
cu_£t
.
	`size
(); k++) {

3035 if(
cu_£t
[
k
].
	`is_ä“
()) {

3036 
cŞËùÜ_un™_t
 *
cu
 = &
cu_£t
[
k
];

3037 
®loÿ‹d
 = 
cu
->
	`®loÿ‹
(
šp
.
m_š
[
i
],šp.
m_out
[i]);

3038 
m_¬b™”
.
	`add_»ad_»que¡s
(
cu
);

3042 ià(
®loÿ‹d
) ;

3047 
	}
}

3049 
	gİndcŞl_rfu_t
::
	$®loÿ‹_»ads
()

3052 
¡d
::
li¡
<
İ_t
> 
®loÿ‹d
 = 
m_¬b™”
.
	`®loÿ‹_»ads
();

3053 
¡d
::
m­
<,
İ_t
> 
»ad_İs
;

3054  
¡d
::
li¡
<
İ_t
>::
™”©Ü
 
r
=
®loÿ‹d
.
	`begš
();„!÷Îoÿ‹d.
	`’d
();„++ ) {

3055 cÚ¡ 
İ_t
 &
¼
 = *
r
;

3056 
»g
 = 
¼
.
	`g‘_»g
();

3057 
wid
 = 
¼
.
	`g‘_wid
();

3058 
bªk
 = 
	`»gi¡”_bªk
(
»g
,
wid
,
m_num_bªks
,
m_bªk_w¬p_shiá
);

3059 
m_¬b™”
.
	`®loÿ‹_fÜ_»ad
(
bªk
,
¼
);

3060 
»ad_İs
[
bªk
] = 
¼
;

3062 
¡d
::
m­
<,
İ_t
>::
™”©Ü
 
r
;

3063 
r
=
»ad_İs
.
	`begš
();r!ô—d_İs.
	`’d
();++r ) {

3064 
İ_t
 &
İ
 = 
r
->
£cÚd
;

3065 
cu
 = 
İ
.
	`g‘_oc_id
();

3066 
İ”ªd
 = 
İ
.
	`g‘_İ”ªd
();

3067 
m_cu
[
cu
]->
	`cŞËù_İ”ªd
(
İ”ªd
);

3068 if(
m_shad”
->
	`g‘_cÚfig
()->
gpgpu_şock_g©ed_»g_fe
){

3069 
aùive_couÁ
=0;

3070 
i
=0;i<
m_shad”
->
	`g‘_cÚfig
()->
w¬p_size
;i=i+m_shad”->g‘_cÚfig()->
n_»gfe_g©šg_group
){

3071 
j
=0;j<
m_shad”
->
	`g‘_cÚfig
()->
n_»gfe_g©šg_group
;j++){

3072 if(
İ
.
	`g‘_aùive_mask
().
	`‹¡
(
i
+
j
)){

3073 
aùive_couÁ
+=
m_shad”
->
	`g‘_cÚfig
()->
n_»gfe_g©šg_group
;

3078 
m_shad”
->
	`šüegfe_»ads
(
aùive_couÁ
);

3080 
m_shad”
->
	`šüegfe_»ads
(m_shad”->
	`g‘_cÚfig
()->
w¬p_size
);

3083 
	}
}

3085 
boŞ
 
	gİndcŞl_rfu_t
::
cŞËùÜ_un™_t
::
	$»ady
() const

3087  (!
m_ä“
è&& 
m_nÙ_»ady
.
	`nÚe
(è&& (*
m_ouut_»gi¡”
).
	`has_ä“
();

3088 
	}
}

3090 
	gİndcŞl_rfu_t
::
cŞËùÜ_un™_t
::
	$dump
(
FILE
 *
å
, cÚ¡ 
shad”_cÜe_ùx
 *
shad”
 ) const

3092 ifĞ
m_ä“
 ) {

3093 
	`årštf
(
å
," <free>\n");

3095 
m_w¬p
->
	`´št
(
å
);

3096  
i
=0; i < 
MAX_REG_OPERANDS
*2; i++ ) {

3097 ifĞ
m_nÙ_»ady
.
	`‹¡
(
i
) ) {

3098 
¡d
::
¡ršg
 
r
 = 
m_¤c_İ
[
i
].
	`g‘_»g_¡ršg
();

3099 
	`årštf
(
å
," '%s'‚Ù„—dy\n", 
r
.
	`c_¡r
() );

3103 
	}
}

3105 
	gİndcŞl_rfu_t
::
cŞËùÜ_un™_t
::
	$š™
Ğ
n
,

3106 
num_bªks
,

3107 
log2_w¬p_size
,

3108 cÚ¡ 
cÜe_cÚfig
 *
cÚfig
,

3109 
İndcŞl_rfu_t
 *
rfu
 )

3111 
m_rfu
=
rfu
;

3112 
m_cuid
=
n
;

3113 
m_num_bªks
=
num_bªks
;

3114 
	`as£¹
(
m_w¬p
==
NULL
);

3115 
m_w¬p
 = 
Ãw
 
	`w¬p_š¡_t
(
cÚfig
);

3116 
m_bªk_w¬p_shiá
=
log2_w¬p_size
;

3117 
	}
}

3119 
boŞ
 
	gİndcŞl_rfu_t
::
cŞËùÜ_un™_t
::
	$®loÿ‹
Ğ
»gi¡”_£t
* 
p–še_»g_£t
,„egi¡”_£t* 
ouut_»g_£t
 )

3121 
	`as£¹
(
m_ä“
);

3122 
	`as£¹
(
m_nÙ_»ady
.
	`nÚe
());

3123 
m_ä“
 = 
çl£
;

3124 
m_ouut_»gi¡”
 = 
ouut_»g_£t
;

3125 
w¬p_š¡_t
 **
p–še_»g
 = 
p–še_»g_£t
->
	`g‘_»ady
();

3126 ifĞ(
p–še_»g
è
ªd
 !((*p–še_»g)->
	`em±y
()) ) {

3127 
m_w¬p_id
 = (*
p–še_»g
)->
	`w¬p_id
();

3128  
İ
=0; o°< 
MAX_REG_OPERANDS
; op++ ) {

3129 
»g_num
 = (*
p–še_»g
)->
¬ch_»g
.
¤c
[
İ
];

3130 ifĞ
»g_num
 >= 0 ) {

3131 
m_¤c_İ
[
İ
] = 
	`İ_t
Ğ
this
, op, 
»g_num
, 
m_num_bªks
, 
m_bªk_w¬p_shiá
 );

3132 
m_nÙ_»ady
.
	`£t
(
İ
);

3134 
m_¤c_İ
[
İ
] = 
	`İ_t
();

3137 
p–še_»g_£t
->
	`move_out_to
(
m_w¬p
);

3138  
Œue
;

3140  
çl£
;

3141 
	}
}

3143 
	gİndcŞl_rfu_t
::
cŞËùÜ_un™_t
::
	$di¥©ch
()

3145 
	`as£¹
Ğ
m_nÙ_»ady
.
	`nÚe
() );

3147 
m_ouut_»gi¡”
->
	`move_š
(
m_w¬p
);

3148 
m_ä“
=
Œue
;

3149 
m_ouut_»gi¡”
 = 
NULL
;

3150  
i
=0; i<
MAX_REG_OPERANDS
*2;i++)

3151 
m_¤c_İ
[
i
].
	`»£t
();

3152 
	}
}

3154 
	gsimt_cÜe_şu¡”
::
	$simt_cÜe_şu¡”
Ğ
şass
 
gpgpu_sim
 *
gpu
,

3155 
şu¡”_id
,

3156 cÚ¡ 
shad”_cÜe_cÚfig
 *
cÚfig
,

3157 cÚ¡ 
memÜy_cÚfig
 *
mem_cÚfig
,

3158 
shad”_cÜe_¡©s
 *
¡©s
,

3159 
şass
 
memÜy_¡©s_t
 *
m¡©s
 )

3161 
m_cÚfig
 = 
cÚfig
;

3162 
m_ùa_issue_Ãxt_cÜe
=
m_cÚfig
->
n_simt_cÜes_³r_şu¡”
-1;

3163 
m_şu¡”_id
=
şu¡”_id
;

3164 
m_gpu
 = 
gpu
;

3165 
m_¡©s
 = 
¡©s
;

3166 
m_memÜy_¡©s
 = 
m¡©s
;

3167 
m_cÜe
 = 
Ãw
 
shad”_cÜe_ùx
*[ 
cÚfig
->
n_simt_cÜes_³r_şu¡”
 ];

3168  
i
=0; i < 
cÚfig
->
n_simt_cÜes_³r_şu¡”
; i++ ) {

3169 
sid
 = 
m_cÚfig
->
	`cid_to_sid
(
i
,
m_şu¡”_id
);

3170 
m_cÜe
[
i
] = 
Ãw
 
	`shad”_cÜe_ùx
(
gpu
,
this
,
sid
,
m_şu¡”_id
,
cÚfig
,
mem_cÚfig
,
¡©s
);

3171 
m_cÜe_sim_Üd”
.
	`push_back
(
i
);

3173 
	}
}

3175 
	gsimt_cÜe_şu¡”
::
	$cÜe_cyşe
()

3177  
¡d
::
li¡
<>::
™”©Ü
 
™
 = 
m_cÜe_sim_Üd”
.
	`begš
(); iˆ!ğm_cÜe_sim_Üd”.
	`’d
(); ++it ) {

3178 
m_cÜe
[*
™
]->
	`cyşe
();

3181 ià(
m_cÚfig
->
simt_cÜe_sim_Üd”
 == 1) {

3182 
m_cÜe_sim_Üd”
.
	`¥liû
(m_cÜe_sim_Üd”.
	`’d
(), m_cÜe_sim_Üd”, m_cÜe_sim_Üd”.
	`begš
());

3184 
	}
}

3186 
	gsimt_cÜe_şu¡”
::
	$»š™
()

3188  
i
=0; i < 
m_cÚfig
->
n_simt_cÜes_³r_şu¡”
; i++ )

3189 
m_cÜe
[
i
]->
	`»š™
(0,
m_cÚfig
->
n_th»ad_³r_shad”
,
Œue
);

3190 
	}
}

3192 
	gsimt_cÜe_şu¡”
::
	$max_ùa
ĞcÚ¡ 
k”Ãl_šfo_t
 &
k”Ãl
 )

3194  
m_cÚfig
->
n_simt_cÜes_³r_şu¡”
 * m_cÚfig->
	`max_ùa
(
k”Ãl
);

3195 
	}
}

3197 
	gsimt_cÜe_şu¡”
::
	$g‘_nÙ_com¶‘ed
() const

3199 
nÙ_com¶‘ed
=0;

3200  
i
=0; i < 
m_cÚfig
->
n_simt_cÜes_³r_şu¡”
; i++ )

3201 
nÙ_com¶‘ed
 +ğ
m_cÜe
[
i
]->
	`g‘_nÙ_com¶‘ed
();

3202  
nÙ_com¶‘ed
;

3203 
	}
}

3205 
	gsimt_cÜe_şu¡”
::
	$´št_nÙ_com¶‘ed
Ğ
FILE
 *
å
 ) const

3207  
i
=0; i < 
m_cÚfig
->
n_simt_cÜes_³r_şu¡”
; i++ ) {

3208 
nÙ_com¶‘ed
=
m_cÜe
[
i
]->
	`g‘_nÙ_com¶‘ed
();

3209 
sid
=
m_cÚfig
->
	`cid_to_sid
(
i
,
m_şu¡”_id
);

3210 
	`årštf
(
å
,"%u(%uè", 
sid
, 
nÙ_com¶‘ed
 );

3212 
	}
}

3214 
	gsimt_cÜe_şu¡”
::
	$g‘_n_aùive_ùa
() const

3216 
n
=0;

3217  
i
=0; i < 
m_cÚfig
->
n_simt_cÜes_³r_şu¡”
; i++ )

3218 
n
 +ğ
m_cÜe
[
i
]->
	`g‘_n_aùive_ùa
();

3219  
n
;

3220 
	}
}

3222 
	gsimt_cÜe_şu¡”
::
	$g‘_n_aùive_sms
() const

3224 
n
=0;

3225  
i
=0; i < 
m_cÚfig
->
n_simt_cÜes_³r_şu¡”
; i++ )

3226 
n
 +ğ
m_cÜe
[
i
]->
	`i§ùive
();

3227  
n
;

3228 
	}
}

3230 
	gsimt_cÜe_şu¡”
::
	$issue_block2cÜe
()

3232 
num_blocks_issued
=0;

3233  
i
=0; i < 
m_cÚfig
->
n_simt_cÜes_³r_şu¡”
; i++ ) {

3234 
cÜe
 = (
i
+
m_ùa_issue_Ãxt_cÜe
+1)%
m_cÚfig
->
n_simt_cÜes_³r_şu¡”
;

3235 ifĞ
m_cÜe
[
cÜe
]->
	`g‘_nÙ_com¶‘ed
() == 0 ) {

3236 ifĞ
m_cÜe
[
cÜe
]->
	`g‘_k”Ãl
(è=ğ
NULL
 ) {

3237 
k”Ãl_šfo_t
 *
k
 = 
m_gpu
->
	`£Ëù_k”Ãl
();

3238 ifĞ
k
 )

3239 
m_cÜe
[
cÜe
]->
	`£t_k”Ãl
(
k
);

3242 
k”Ãl_šfo_t
 *
k”Ãl
 = 
m_cÜe
[
cÜe
]->
	`g‘_k”Ãl
();

3243 ifĞ
k”Ãl
 && !k”Ãl->
	`no_mÜe_ùas_to_run
(è&& (
m_cÜe
[
cÜe
]->
	`g‘_n_aùive_ùa
(è< 
m_cÚfig
->
	`max_ùa
(*kernel)) ) {

3244 
m_cÜe
[
cÜe
]->
	`issue_block2cÜe
(*
k”Ãl
);

3245 
num_blocks_issued
++;

3246 
m_ùa_issue_Ãxt_cÜe
=
cÜe
;

3250  
num_blocks_issued
;

3251 
	}
}

3253 
	gsimt_cÜe_şu¡”
::
	$ÿche_æush
()

3255  
i
=0; i < 
m_cÚfig
->
n_simt_cÜes_³r_şu¡”
; i++ )

3256 
m_cÜe
[
i
]->
	`ÿche_æush
();

3257 
	}
}

3259 
boŞ
 
	gsimt_cÜe_şu¡”
::
	$iút_šjeùiÚ_bufãr_fuÎ
(
size
, 
boŞ
 
wr™e
)

3261 
»que¡_size
 = 
size
;

3262 ià(!
wr™e
)

3263 
»que¡_size
 = 
READ_PACKET_SIZE
;

3264  ! ::
	`iút_has_bufãr
(
m_şu¡”_id
, 
»que¡_size
);

3265 
	}
}

3267 
	gsimt_cÜe_şu¡”
::
	$iút_šjeù_»que¡_·ck‘
(
şass
 
mem_ãtch
 *
mf
)

3270 ià(
mf
->
	`g‘_is_wr™e
()è
m_¡©s
->
made_wr™e_mfs
++;

3271 
m_¡©s
->
made_»ad_mfs
++;

3272 
mf
->
	`g‘_acûss_ty³
()) {

3273 
CONST_ACC_R
: 
m_¡©s
->
gpgpu_n_mem_cÚ¡
++; ;

3274 
TEXTURE_ACC_R
: 
m_¡©s
->
gpgpu_n_mem_‹xtu»
++; ;

3275 
GLOBAL_ACC_R
: 
m_¡©s
->
gpgpu_n_mem_»ad_glob®
++; ;

3276 
GLOBAL_ACC_W
: 
m_¡©s
->
gpgpu_n_mem_wr™e_glob®
++; ;

3277 
LOCAL_ACC_R
: 
m_¡©s
->
gpgpu_n_mem_»ad_loÿl
++; ;

3278 
LOCAL_ACC_W
: 
m_¡©s
->
gpgpu_n_mem_wr™e_loÿl
++; ;

3279 
INST_ACC_R
: 
m_¡©s
->
gpgpu_n_mem_»ad_š¡
++; ;

3280 
L1_WRBK_ACC
: 
m_¡©s
->
gpgpu_n_mem_wr™e_glob®
++; ;

3281 
L2_WRBK_ACC
: 
m_¡©s
->
gpgpu_n_mem_l2_wr™eback
++; ;

3282 
L1_WR_ALLOC_R
: 
m_¡©s
->
gpgpu_n_mem_l1_wr™e_®loÿ‹
++; ;

3283 
L2_WR_ALLOC_R
: 
m_¡©s
->
gpgpu_n_mem_l2_wr™e_®loÿ‹
++; ;

3284 : 
	`as£¹
(0);

3290 
·ck‘_size
 = 
mf
->
	`size
();

3291 ià(!
mf
->
	`g‘_is_wr™e
(è&& !mf->
	`i§tomic
()) {

3292 
·ck‘_size
 = 
mf
->
	`g‘_ù¾_size
();

3294 
m_¡©s
->
m_outgošg_Œaffic_¡©s
->
	`»cÜd_Œaffic
(
mf
, 
·ck‘_size
);

3295 
de¡š©iÚ
 = 
mf
->
	`g‘_sub_·¹™iÚ_id
();

3296 
mf
->
	`£t_¡©us
(
IN_ICNT_TO_MEM
,
gpu_sim_cyşe
+
gpu_tÙ_sim_cyşe
);

3297 ià(!
mf
->
	`g‘_is_wr™e
(è&& !mf->
	`i§tomic
())

3298 ::
	`iút_push
(
m_şu¡”_id
, 
m_cÚfig
->
	`mem2deviû
(
de¡š©iÚ
), (*)
mf
, mf->
	`g‘_ù¾_size
() );

3300 ::
	`iút_push
(
m_şu¡”_id
, 
m_cÚfig
->
	`mem2deviû
(
de¡š©iÚ
), (*)
mf
, mf->
	`size
());

3301 
	}
}

3303 
	gsimt_cÜe_şu¡”
::
	$iút_cyşe
()

3305 ifĞ!
m_»¥Ú£_fifo
.
	`em±y
() ) {

3306 
mem_ãtch
 *
mf
 = 
m_»¥Ú£_fifo
.
	`äÚt
();

3307 
cid
 = 
m_cÚfig
->
	`sid_to_cid
(
mf
->
	`g‘_sid
());

3308 ifĞ
mf
->
	`g‘_acûss_ty³
(è=ğ
INST_ACC_R
 ) {

3310 ifĞ!
m_cÜe
[
cid
]->
	`ãtch_un™_»¥Ú£_bufãr_fuÎ
() ) {

3311 
m_»¥Ú£_fifo
.
	`pİ_äÚt
();

3312 
m_cÜe
[
cid
]->
	`acû±_ãtch_»¥Ú£
(
mf
);

3316 ifĞ!
m_cÜe
[
cid
]->
	`ld¡_un™_»¥Ú£_bufãr_fuÎ
() ) {

3317 
m_»¥Ú£_fifo
.
	`pİ_äÚt
();

3318 
m_memÜy_¡©s
->
	`memÏt¡©_»ad_dÚe
(
mf
);

3319 
m_cÜe
[
cid
]->
	`acû±_ld¡_un™_»¥Ú£
(
mf
);

3323 ifĞ
m_»¥Ú£_fifo
.
	`size
(è< 
m_cÚfig
->
n_simt_ejeùiÚ_bufãr_size
 ) {

3324 
mem_ãtch
 *
mf
 = (mem_ãtch*è::
	`iút_pİ
(
m_şu¡”_id
);

3325 ià(!
mf
)

3327 
	`as£¹
(
mf
->
	`g‘_c
(è=ğ
m_şu¡”_id
);

3328 
	`as£¹
(
mf
->
	`g‘_ty³
(è=ğ
READ_REPLY
 || mf->g‘_ty³(è=ğ
WRITE_ACK
 );

3333 
·ck‘_size
 = (
mf
->
	`g‘_is_wr™e
())? mf->
	`g‘_ù¾_size
(è: mf->
	`size
();

3334 
m_¡©s
->
m_šcomšg_Œaffic_¡©s
->
	`»cÜd_Œaffic
(
mf
, 
·ck‘_size
);

3335 
mf
->
	`£t_¡©us
(
IN_CLUSTER_TO_SHADER_QUEUE
,
gpu_sim_cyşe
+
gpu_tÙ_sim_cyşe
);

3337 
m_»¥Ú£_fifo
.
	`push_back
(
mf
);

3338 
m_¡©s
->
n_mem_to_simt
[
m_şu¡”_id
] +ğ
mf
->
	`g‘_num_æ™s
(
çl£
);

3340 
	}
}

3342 
	gsimt_cÜe_şu¡”
::
	$g‘_pdom_¡ack_tİ_šfo
Ğ
sid
, 
tid
, *
pc
, *
½c
 ) const

3344 
cid
 = 
m_cÚfig
->
	`sid_to_cid
(
sid
);

3345 
m_cÜe
[
cid
]->
	`g‘_pdom_¡ack_tİ_šfo
(
tid
,
pc
,
½c
);

3346 
	}
}

3348 
	gsimt_cÜe_şu¡”
::
	$di¥Ïy_p–še
Ğ
sid
, 
FILE
 *
fout
, 
´št_mem
, 
mask
 )

3350 
m_cÜe
[
m_cÚfig
->
	`sid_to_cid
(
sid
)]->
	`di¥Ïy_p–še
(
fout
,
´št_mem
,
mask
);

3352 
	`årštf
(
fout
,"\n");

3353 
	`årštf
(
fout
,"Clu¡” %u…–š¡©e\n", 
m_şu¡”_id
 );

3354 
	`årštf
(
fout
,"Re¥Ú£ FIFO (occu·ncy = %zu):\n", 
m_»¥Ú£_fifo
.
	`size
() );

3355  
¡d
::
li¡
<
mem_ãtch
*>::
cÚ¡_™”©Ü
 
i
=
m_»¥Ú£_fifo
.
	`begš
(); i !ğm_»¥Ú£_fifo.
	`’d
(); i++ ) {

3356 cÚ¡ 
mem_ãtch
 *
mf
 = *
i
;

3357 
mf
->
	`´št
(
fout
);

3359 
	}
}

3361 
	gsimt_cÜe_şu¡”
::
	$´št_ÿche_¡©s
Ğ
FILE
 *
å
, & 
dl1_acûs£s
, & 
dl1_mis£s
 ) const {

3362  
i
 = 0; i < 
m_cÚfig
->
n_simt_cÜes_³r_şu¡”
; ++i ) {

3363 
m_cÜe
[ 
i
 ]->
	`´št_ÿche_¡©s
Ğ
å
, 
dl1_acûs£s
, 
dl1_mis£s
 );

3365 
	}
}

3367 
	gsimt_cÜe_şu¡”
::
	$g‘_iút_¡©s
(&
n_simt_to_mem
, &
n_mem_to_simt
) const {

3368 
simt_to_mem
=0;

3369 
mem_to_simt
=0;

3370  
i
 = 0; i < 
m_cÚfig
->
n_simt_cÜes_³r_şu¡”
; ++i ) {

3371 
m_cÜe
[
i
]->
	`g‘_iút_pow”_¡©s
(
simt_to_mem
, 
mem_to_simt
);

3373 
n_simt_to_mem
 = 
simt_to_mem
;

3374 
n_mem_to_simt
 = 
mem_to_simt
;

3375 
	}
}

3377 
	gsimt_cÜe_şu¡”
::
	$g‘_ÿche_¡©s
(
ÿche_¡©s
 &
cs
) const{

3378  
i
 = 0; i < 
m_cÚfig
->
n_simt_cÜes_³r_şu¡”
; ++i ) {

3379 
m_cÜe
[
i
]->
	`g‘_ÿche_¡©s
(
cs
);

3381 
	}
}

3383 
	gsimt_cÜe_şu¡”
::
	$g‘_L1I_sub_¡©s
(
ÿche_sub_¡©s
 &
css
) const{

3384 
ÿche_sub_¡©s
 
‹mp_css
;

3385 
ÿche_sub_¡©s
 
tÙ®_css
;

3386 
‹mp_css
.
	`ş—r
();

3387 
tÙ®_css
.
	`ş—r
();

3388  
i
 = 0; i < 
m_cÚfig
->
n_simt_cÜes_³r_şu¡”
; ++i ) {

3389 
m_cÜe
[
i
]->
	`g‘_L1I_sub_¡©s
(
‹mp_css
);

3390 
tÙ®_css
 +ğ
‹mp_css
;

3392 
css
 = 
tÙ®_css
;

3393 
	}
}

3394 
	gsimt_cÜe_şu¡”
::
	$g‘_L1D_sub_¡©s
(
ÿche_sub_¡©s
 &
css
) const{

3395 
ÿche_sub_¡©s
 
‹mp_css
;

3396 
ÿche_sub_¡©s
 
tÙ®_css
;

3397 
‹mp_css
.
	`ş—r
();

3398 
tÙ®_css
.
	`ş—r
();

3399  
i
 = 0; i < 
m_cÚfig
->
n_simt_cÜes_³r_şu¡”
; ++i ) {

3400 
m_cÜe
[
i
]->
	`g‘_L1D_sub_¡©s
(
‹mp_css
);

3401 
tÙ®_css
 +ğ
‹mp_css
;

3403 
css
 = 
tÙ®_css
;

3404 
	}
}

3405 
	gsimt_cÜe_şu¡”
::
	$g‘_L1C_sub_¡©s
(
ÿche_sub_¡©s
 &
css
) const{

3406 
ÿche_sub_¡©s
 
‹mp_css
;

3407 
ÿche_sub_¡©s
 
tÙ®_css
;

3408 
‹mp_css
.
	`ş—r
();

3409 
tÙ®_css
.
	`ş—r
();

3410  
i
 = 0; i < 
m_cÚfig
->
n_simt_cÜes_³r_şu¡”
; ++i ) {

3411 
m_cÜe
[
i
]->
	`g‘_L1C_sub_¡©s
(
‹mp_css
);

3412 
tÙ®_css
 +ğ
‹mp_css
;

3414 
css
 = 
tÙ®_css
;

3415 
	}
}

3416 
	gsimt_cÜe_şu¡”
::
	$g‘_L1T_sub_¡©s
(
ÿche_sub_¡©s
 &
css
) const{

3417 
ÿche_sub_¡©s
 
‹mp_css
;

3418 
ÿche_sub_¡©s
 
tÙ®_css
;

3419 
‹mp_css
.
	`ş—r
();

3420 
tÙ®_css
.
	`ş—r
();

3421  
i
 = 0; i < 
m_cÚfig
->
n_simt_cÜes_³r_şu¡”
; ++i ) {

3422 
m_cÜe
[
i
]->
	`g‘_L1T_sub_¡©s
(
‹mp_css
);

3423 
tÙ®_css
 +ğ
‹mp_css
;

3425 
css
 = 
tÙ®_css
;

3426 
	}
}

3428 
	gshad”_cÜe_ùx
::
	$checkExecutiÚStusAndUpd©e
(
w¬p_š¡_t
 &
š¡
, 
t
, 
tid
)

3430 if(
š¡
.
	`i§tomic
())

3431 
m_w¬p
[
š¡
.
	`w¬p_id
()].
	`šc_n_©omic
();

3432 ià(
š¡
.
¥aû
.
	`is_loÿl
(è&& (š¡.
	`is_lßd
(è|| in¡.
	`is_¡Üe
())) {

3433 
Ãw_addr_ty³
 
loÿÏddrs
[
MAX_ACCESSES_PER_INSN_PER_THREAD
];

3434 
num_addrs
;

3435 
num_addrs
 = 
	`Œª¦©e_loÿl_memaddr
(
š¡
.
	`g‘_addr
(
t
), 
tid
, 
m_cÚfig
->
n_simt_şu¡”s
*m_cÚfig->
n_simt_cÜes_³r_şu¡”
,

3436 
š¡
.
d©a_size
, (
Ãw_addr_ty³
*è
loÿÏddrs
 );

3437 
š¡
.
	`£t_addr
(
t
, (
Ãw_addr_ty³
*è
loÿÏddrs
, 
num_addrs
);

3439 iàĞ
	`±x_th»ad_dÚe
(
tid
) ) {

3440 
m_w¬p
[
š¡
.
	`w¬p_id
()].
	`£t_com¶‘ed
(
t
);

3441 
m_w¬p
[
š¡
.
	`w¬p_id
()].
	`ibufãr_æush
();

3445 
w¬p_id
 = 
š¡
.
	`w¬p_id
();

3446 
pc
 = 
š¡
.pc;

3447 
t
 = 0; < 
m_cÚfig
->
w¬p_size
;++) {

3448 ià(
š¡
.
	`aùive
(
t
)) {

3449 
tid
 = 
w¬p_id
 * 
m_cÚfig
->
w¬p_size
 + 
t
;

3450 
	`cæog_upd©e_th»ad_pc
(
m_sid
, 
tid
, 
pc
);

3453 
	}
}

	@shader.h

29 #iâdeà
SHADER_H


30 
	#SHADER_H


	)

32 
	~<¡dio.h
>

33 
	~<¡dlib.h
>

34 
	~<m©h.h
>

35 
	~<as£¹.h
>

36 
	~<m­
>

37 
	~<£t
>

38 
	~<veùÜ
>

39 
	~<li¡
>

40 
	~<b™£t
>

41 
	~<ut™y
>

42 
	~<®gÜ™hm
>

43 
	~<deque
>

47 
	~"d–ayqueue.h
"

48 
	~"¡ack.h
"

49 
	~"d¿m.h
"

50 
	~"../ab¡¿ù_h¬dw¬e_mod–.h
"

51 
	~"scÜebßrd.h
"

52 
	~"mem_ãtch.h
"

53 
	~"¡©s.h
"

54 
	~"gpu-ÿche.h
"

55 
	~"Œaffic_b»akdown.h
"

59 
	#NO_OP_FLAG
 0xFF

	)

66 
	#READ_PACKET_SIZE
 8

	)

69 
	#WRITE_PACKET_SIZE
 8

	)

71 
	#WRITE_MASK_SIZE
 8

	)

74 şas 
	cth»ad_ùx_t
 {

75 
	mpublic
:

76 
m_ùa_id
;

79 
	mn_š¢
;

80 
	mn_š¢_ac
;

81 
	mn_l1_mis_ac
;

82 
	mn_l1_mrgh™_ac
;

83 
	mn_l1_acûss_ac
;

85 
boŞ
 
	mm_aùive
;

88 şas 
	cshd_w¬p_t
 {

89 
	mpublic
:

90 
	$shd_w¬p_t
Ğ
şass
 
shad”_cÜe_ùx
 *
shad”
, 
w¬p_size
)

91 : 
	`m_shad”
(
shad”
), 
	$m_w¬p_size
(
w¬p_size
)

93 
m_¡Ües_out¡ªdšg
=0;

94 
m_š¡_š_p–še
=0;

95 
	`»£t
();

97 
	$»£t
()

99 
	`as£¹
Ğ
m_¡Ües_out¡ªdšg
==0);

100 
	`as£¹
Ğ
m_š¡_š_p–še
==0);

101 
m_imiss_³ndšg
=
çl£
;

102 
m_w¬p_id
=()-1;

103 
m_dyÇmic_w¬p_id
 = ()-1;

104 
n_com¶‘ed
 = 
m_w¬p_size
;

105 
m_n_©omic
=0;

106 
m_memb¬
=
çl£
;

107 
m_dÚe_ex™
=
Œue
;

108 
m_Ï¡_ãtch
=0;

109 
m_Ãxt
=0;

110 
m_š¡_©_b¬r›r
=
NULL
;

111 
	}
}

112 
š™
Ğ
add»ss_ty³
 
¡¬t_pc
,

113 
ùa_id
,

114 
wid
,

115 cÚ¡ 
¡d
::
b™£t
<
MAX_WARP_SIZE
> &
aùive
,

116 
dyÇmic_w¬p_id
 )

118 
	gm_ùa_id
=
ùa_id
;

119 
	gm_w¬p_id
=
wid
;

120 
	gm_dyÇmic_w¬p_id
=
dyÇmic_w¬p_id
;

121 
	gm_Ãxt_pc
=
¡¬t_pc
;

122 
as£¹
Ğ
n_com¶‘ed
 >ğ
aùive
.
couÁ
() );

123 
as£¹
Ğ
n_com¶‘ed
 <ğ
m_w¬p_size
);

124 
	gn_com¶‘ed
 -ğ
aùive
.
couÁ
();

125 
	gm_aùive_th»ads
 = 
aùive
;

126 
	gm_dÚe_ex™
=
çl£
;

129 
boŞ
 
	$funùiÚ®_dÚe
() const;

130 
boŞ
 
	`wa™šg
();

131 
boŞ
 
	$h¬dw¬e_dÚe
() const;

133 
boŞ
 
	$dÚe_ex™
(ècÚ¡ {  
m_dÚe_ex™
; 
	}
}

134 
	$£t_dÚe_ex™
(è{ 
m_dÚe_ex™
=
Œue
; 
	}
}

136 
	$´št
Ğ
FILE
 *
fout
 ) const;

137 
	$´št_ibufãr
Ğ
FILE
 *
fout
 ) const;

139 
	$g‘_n_com¶‘ed
(ècÚ¡ {  
n_com¶‘ed
; 
	}
}

140 
	$£t_com¶‘ed
Ğ
ÏÃ
 )

142 
	`as£¹
Ğ
m_aùive_th»ads
.
	`‹¡
(
ÏÃ
) );

143 
m_aùive_th»ads
.
	`»£t
(
ÏÃ
);

144 
n_com¶‘ed
++;

145 
	}
}

147 
	$£t_Ï¡_ãtch
Ğ
sim_cyşe
 ) { 
m_Ï¡_ãtch
=sim_cyşe; 
	}
}

149 
	$g‘_n_©omic
(ècÚ¡ {  
m_n_©omic
; 
	}
}

150 
	$šc_n_©omic
(è{ 
m_n_©omic
++; 
	}
}

151 
	$dec_n_©omic
(
n
è{ 
m_n_©omic
-ò; 
	}
}

153 
	$£t_memb¬
(è{ 
m_memb¬
=
Œue
; 
	}
}

154 
	$ş—r_memb¬
(è{ 
m_memb¬
=
çl£
; 
	}
}

155 
boŞ
 
	$g‘_memb¬
(ècÚ¡ {  
m_memb¬
; 
	}
}

156 
add»ss_ty³
 
	$g‘_pc
(ècÚ¡ {  
m_Ãxt_pc
; 
	}
}

157 
	$£t_Ãxt_pc
Ğ
add»ss_ty³
 
pc
 ) { 
m_Ãxt_pc
 =…c; 
	}
}

159 
	$¡Üe_šfo_of_Ï¡_š¡_©_b¬r›r
(cÚ¡ 
w¬p_š¡_t
 *
pI
){ 
m_š¡_©_b¬r›r
 =…I;
	}
}

160 cÚ¡ 
w¬p_š¡_t
 * 
	$»¡Üe_šfo_of_Ï¡_š¡_©_b¬r›r
(){  
m_š¡_©_b¬r›r
;
	}
}

162 
	$ibufãr_fl
Ğ
¦Ù
, cÚ¡ 
w¬p_š¡_t
 *
pI
 )

164 
	`as£¹
(
¦Ù
 < 
IBUFFER_SIZE
 );

165 
m_ibufãr
[
¦Ù
].
m_š¡
=
pI
;

166 
m_ibufãr
[
¦Ù
].
m_v®id
=
Œue
;

167 
m_Ãxt
=0;

168 
	}
}

169 
boŞ
 
	$ibufãr_em±y
() const

171  
i
=0; i < 
IBUFFER_SIZE
; i++)

172 if(
m_ibufãr
[
i
].
m_v®id
)

173  
çl£
;

174  
Œue
;

175 
	}
}

176 
	$ibufãr_æush
()

178 
i
=0;i<
IBUFFER_SIZE
;i++) {

179 ifĞ
m_ibufãr
[
i
].
m_v®id
 )

180 
	`dec_š¡_š_p–še
();

181 
m_ibufãr
[
i
].
m_š¡
=
NULL
;

182 
m_ibufãr
[
i
].
m_v®id
=
çl£
;

184 
	}
}

185 cÚ¡ 
w¬p_š¡_t
 *
	$ibufãr_Ãxt_š¡
(è{  
m_ibufãr
[
m_Ãxt
].
m_š¡
; 
	}
}

186 
boŞ
 
	$ibufãr_Ãxt_v®id
(è{  
m_ibufãr
[
m_Ãxt
].
m_v®id
; 
	}
}

187 
	$ibufãr_ä“
()

189 
m_ibufãr
[
m_Ãxt
].
m_š¡
 = 
NULL
;

190 
m_ibufãr
[
m_Ãxt
].
m_v®id
 = 
çl£
;

191 
	}
}

192 
	$ibufãr_¡•
(è{ 
m_Ãxt
 = (m_Ãxt+1)%
IBUFFER_SIZE
; 
	}
}

194 
boŞ
 
	$imiss_³ndšg
(ècÚ¡ {  
m_imiss_³ndšg
; 
	}
}

195 
	$£t_imiss_³ndšg
(è{ 
m_imiss_³ndšg
=
Œue
; 
	}
}

196 
	$ş—r_imiss_³ndšg
(è{ 
m_imiss_³ndšg
=
çl£
; 
	}
}

198 
boŞ
 
	$¡Ües_dÚe
(ècÚ¡ {  
m_¡Ües_out¡ªdšg
 =ğ0; 
	}
}

199 
	$šc_¡Üe_»q
(è{ 
m_¡Ües_out¡ªdšg
++; 
	}
}

200 
	$dec_¡Üe_»q
()

202 
	`as£¹
Ğ
m_¡Ües_out¡ªdšg
 > 0 );

203 
m_¡Ües_out¡ªdšg
--;

204 
	}
}

206 
	$num_š¡_š_bufãr
() const

208 
couÁ
=0;

209 
i
=0;i<
IBUFFER_SIZE
;i++) {

210 ifĞ
m_ibufãr
[
i
].
m_v®id
 )

211 
couÁ
++;

213  
couÁ
;

214 
	}
}

215 
	$num_š¡_š_p–še
(ècÚ¡ {  
m_š¡_š_p–še
;
	}
}

216 
	$num_issued_š¡_š_p–še
(ècÚ¡ { (
	`num_š¡_š_p–še
()-
	`num_š¡_š_bufãr
());
	}
}

217 
boŞ
 
	$š¡_š_p–še
(ècÚ¡ {  
m_š¡_š_p–še
 > 0; 
	}
}

218 
	$šc_š¡_š_p–še
(è{ 
m_š¡_š_p–še
++; 
	}
}

219 
	$dec_š¡_š_p–še
()

221 
	`as£¹
Ğ
m_š¡_š_p–še
 > 0 );

222 
m_š¡_š_p–še
--;

223 
	}
}

225 
	$g‘_ùa_id
(ècÚ¡ {  
m_ùa_id
; 
	}
}

227 
	$g‘_dyÇmic_w¬p_id
(ècÚ¡ {  
m_dyÇmic_w¬p_id
; 
	}
}

228 
	$g‘_w¬p_id
(ècÚ¡ {  
m_w¬p_id
; 
	}
}

230 
	g´iv©e
:

231 cÚ¡ 
IBUFFER_SIZE
=2;

232 
şass
 
shad”_cÜe_ùx
 *
	gm_shad”
;

233 
	gm_ùa_id
;

234 
	gm_w¬p_id
;

235 
	gm_w¬p_size
;

236 
	gm_dyÇmic_w¬p_id
;

238 
add»ss_ty³
 
	gm_Ãxt_pc
;

239 
	gn_com¶‘ed
;

240 
	g¡d
::
b™£t
<
MAX_WARP_SIZE
> 
m_aùive_th»ads
;

242 
boŞ
 
	gm_imiss_³ndšg
;

244 
	sibufãr_’Œy
 {

245 
ibufãr_’Œy
(è{ 
	gm_v®id
 = 
çl£
; 
	gm_š¡
 = 
NULL
; }

246 cÚ¡ 
w¬p_š¡_t
 *
	gm_š¡
;

247 
boŞ
 
	gm_v®id
;

250 cÚ¡ 
w¬p_š¡_t
 *
	gm_š¡_©_b¬r›r
;

251 
ibufãr_’Œy
 
	gm_ibufãr
[
IBUFFER_SIZE
];

252 
	gm_Ãxt
;

254 
	gm_n_©omic
;

255 
boŞ
 
	gm_memb¬
;

257 
boŞ
 
	gm_dÚe_ex™
;

259 
	gm_Ï¡_ãtch
;

261 
	gm_¡Ües_out¡ªdšg
;

262 
	gm_š¡_š_p–še
;

267 
šlše
 
	$hw_tid_äom_wid
(
wid
, 
w¬p_size
, 
i
){ wid * w¬p_siz+ i;
	}
};

268 
šlše
 
	$wid_äom_hw_tid
(
tid
, 
w¬p_size
){id/w¬p_size;
	}
};

270 cÚ¡ 
	gWARP_PER_CTA_MAX
 = 48;

271 
	g¡d
::
	tb™£t
<
	tWARP_PER_CTA_MAX
> 
	tw¬p_£t_t
;

273 
»gi¡”_bªk
(
»gnum
, 
wid
, 
num_bªks
, 
bªk_w¬p_shiá
);

275 
şass
 
	gshad”_cÜe_ùx
;

276 
şass
 
	gshad”_cÜe_cÚfig
;

277 
şass
 
	gshad”_cÜe_¡©s
;

279 
	escheduËr_´iÜ™iz©iÚ_ty³


281 
	mSCHEDULER_PRIORITIZATION_LRR
 = 0,

282 
	mSCHEDULER_PRIORITIZATION_SRR
,

283 
	mSCHEDULER_PRIORITIZATION_GTO
,

284 
	mSCHEDULER_PRIORITIZATION_GTLRR
,

285 
	mSCHEDULER_PRIORITIZATION_GTY
,

286 
	mSCHEDULER_PRIORITIZATION_OLDEST
,

287 
	mSCHEDULER_PRIORITIZATION_YOUNGEST
,

292 
	ecÚü‘e_scheduËr


294 
	mCONCRETE_SCHEDULER_LRR
 = 0,

295 
	mCONCRETE_SCHEDULER_GTO
,

296 
	mCONCRETE_SCHEDULER_TWO_LEVEL_ACTIVE
,

297 
	mCONCRETE_SCHEDULER_WARP_LIMITING
,

298 
	mNUM_CONCRETE_SCHEDULERS


301 şas 
	cscheduËr_un™
 {

302 
	mpublic
:

303 
scheduËr_un™
(
shad”_cÜe_¡©s
* 
¡©s
, 
shad”_cÜe_ùx
* 
shad”
,

304 
ScÜebßrd
* 
scÜebßrd
, 
simt_¡ack
** 
simt
,

305 
¡d
::
veùÜ
<
shd_w¬p_t
>* 
w¬p
,

306 
»gi¡”_£t
* 
¥_out
,

307 
»gi¡”_£t
* 
sfu_out
,

308 
»gi¡”_£t
* 
mem_out
,

309 
id
)

310 : 
m_su³rvi£d_w¬ps
(), 
m_¡©s
(
¡©s
), 
m_shad”
(
shad”
),

311 
m_scÜebßrd
(
scÜebßrd
), 
m_simt_¡ack
(
simt
), 
m_w¬p
(
w¬p
),

312 
m_¥_out
(
¥_out
),
m_sfu_out
(
sfu_out
),
m_mem_out
(
mem_out
), 
	$m_id
(
id
){}

313 
vœtu®
 ~
	$scheduËr_un™
(){
	}
}

314 
vœtu®
 
	$add_su³rvi£d_w¬p_id
(
i
) {

315 
m_su³rvi£d_w¬ps
.
	`push_back
(&
	`w¬p
(
i
));

316 
	}
}

317 
vœtu®
 
	$dÚe_addšg_su³rvi£d_w¬ps
() {

318 
m_Ï¡_su³rvi£d_issued
 = 
m_su³rvi£d_w¬ps
.
	`’d
();

319 
	}
}

325 
cyşe
();

329 
	g‹m¶©e
 < 
ty³Çme
 
	gT
 >

330 
Üd”_Ìr
Ğ
ty³Çme
 
¡d
::
veùÜ
< 
T
 >& 
»suÉ_li¡
,

331 cÚ¡ 
ty³Çme
 
¡d
::
veùÜ
< 
T
 >& 
šput_li¡
,

332 cÚ¡ 
ty³Çme
 
¡d
::
veùÜ
< 
T
 >::
cÚ¡_™”©Ü
& 
Ï¡_issued_äom_šput
,

333 
num_w¬ps_to_add
 );

335 
	eOrd”šgTy³


339 
	gORDERING_GREEDY_THEN_PRIORITY_FUNC
 = 0,

342 
	gORDERED_PRIORITY_FUNC_ONLY
,

343 
	gNUM_ORDERING
,

345 
	g‹m¶©e
 < 
ty³Çme
 
	gU
 >

346 
Üd”_by_´iÜ™y
Ğ
¡d
::
veùÜ
< 
U
 >& 
»suÉ_li¡
,

347 cÚ¡ 
ty³Çme
 
¡d
::
veùÜ
< 
U
 >& 
šput_li¡
,

348 cÚ¡ 
ty³Çme
 
¡d
::
veùÜ
< 
U
 >::
cÚ¡_™”©Ü
& 
Ï¡_issued_äom_šput
,

349 
num_w¬ps_to_add
,

350 
Ord”šgTy³
 
age_Üd”šg
,

351 
	$boŞ
 (*
´iÜ™y_func
)(
U
 
lhs
, U 
rhs
) );

352 
boŞ
 
	`sÜt_w¬ps_by_Şde¡_dyÇmic_id
(
shd_w¬p_t
* 
lhs
, shd_w¬p_t* 
rhs
);

356 
vœtu®
 
	`Üd”_w¬ps
() = 0;

358 
´Ùeùed
:

359 
vœtu®
 
	`do_Ú_w¬p_issued
Ğ
w¬p_id
,

360 
num_issued
,

361 cÚ¡ 
¡d
::
veùÜ
< 
shd_w¬p_t
* >::
cÚ¡_™”©Ü
& 
´iÜ™ized_™”
 );

362 
šlše
 
	$g‘_sid
() const;

363 
´Ùeùed
:

364 
shd_w¬p_t
& 
	`w¬p
(
i
);

368 
¡d
::
veùÜ
< 
shd_w¬p_t
* > 
m_Ãxt_cyşe_´iÜ™ized_w¬ps
;

373 
¡d
::
veùÜ
< 
shd_w¬p_t
* > 
m_su³rvi£d_w¬ps
;

375 
¡d
::
veùÜ
< 
shd_w¬p_t
* >::
cÚ¡_™”©Ü
 
m_Ï¡_su³rvi£d_issued
;

376 
shad”_cÜe_¡©s
 *
m_¡©s
;

377 
shad”_cÜe_ùx
* 
m_shad”
;

379 
ScÜebßrd
* 
m_scÜebßrd
;

380 
simt_¡ack
** 
m_simt_¡ack
;

382 
¡d
::
veùÜ
<
shd_w¬p_t
>* 
m_w¬p
;

383 
»gi¡”_£t
* 
m_¥_out
;

384 
»gi¡”_£t
* 
m_sfu_out
;

385 
»gi¡”_£t
* 
m_mem_out
;

387 
m_id
;

388 
	}
};

390 şas 
	cÌr_scheduËr
 : 
public
 
scheduËr_un™
 {

391 
public
:

392 
Ìr_scheduËr
 ( 
shad”_cÜe_¡©s
* 
¡©s
, 
shad”_cÜe_ùx
* 
shad”
,

393 
ScÜebßrd
* 
scÜebßrd
, 
simt_¡ack
** 
simt
,

394 
¡d
::
veùÜ
<
shd_w¬p_t
>* 
w¬p
,

395 
»gi¡”_£t
* 
¥_out
,

396 
»gi¡”_£t
* 
sfu_out
,

397 
»gi¡”_£t
* 
mem_out
,

398 
id
 )

399 : 
	$scheduËr_un™
 ( 
¡©s
, 
shad”
, 
scÜebßrd
, 
simt
, 
w¬p
, 
¥_out
, 
sfu_out
, 
mem_out
, 
id
 ){}

400 
vœtu®
 ~
	$Ìr_scheduËr
 (è{
	}
}

401 
vœtu®
 
Üd”_w¬ps
 ();

402 
vœtu®
 
	$dÚe_addšg_su³rvi£d_w¬ps
() {

403 
m_Ï¡_su³rvi£d_issued
 = 
m_su³rvi£d_w¬ps
.
	`’d
();

404 
	}
}

407 şas 
	cgto_scheduËr
 : 
public
 
scheduËr_un™
 {

408 
public
:

409 
gto_scheduËr
 ( 
shad”_cÜe_¡©s
* 
¡©s
, 
shad”_cÜe_ùx
* 
shad”
,

410 
ScÜebßrd
* 
scÜebßrd
, 
simt_¡ack
** 
simt
,

411 
¡d
::
veùÜ
<
shd_w¬p_t
>* 
w¬p
,

412 
»gi¡”_£t
* 
¥_out
,

413 
»gi¡”_£t
* 
sfu_out
,

414 
»gi¡”_£t
* 
mem_out
,

415 
id
 )

416 : 
	$scheduËr_un™
 ( 
¡©s
, 
shad”
, 
scÜebßrd
, 
simt
, 
w¬p
, 
¥_out
, 
sfu_out
, 
mem_out
, 
id
 ){}

417 
vœtu®
 ~
	$gto_scheduËr
 (è{
	}
}

418 
vœtu®
 
Üd”_w¬ps
 ();

419 
vœtu®
 
	$dÚe_addšg_su³rvi£d_w¬ps
() {

420 
m_Ï¡_su³rvi£d_issued
 = 
m_su³rvi£d_w¬ps
.
	`begš
();

421 
	}
}

426 şas 
	ctwo_Ëv–_aùive_scheduËr
 : 
public
 
scheduËr_un™
 {

427 
public
:

428 
two_Ëv–_aùive_scheduËr
 ( 
shad”_cÜe_¡©s
* 
¡©s
, 
shad”_cÜe_ùx
* 
shad”
,

429 
ScÜebßrd
* 
scÜebßrd
, 
simt_¡ack
** 
simt
,

430 
¡d
::
veùÜ
<
shd_w¬p_t
>* 
w¬p
,

431 
»gi¡”_£t
* 
¥_out
,

432 
»gi¡”_£t
* 
sfu_out
,

433 
»gi¡”_£t
* 
mem_out
,

434 
id
,

435 * 
cÚfig_¡r
 )

436 : 
scheduËr_un™
 ( 
¡©s
, 
shad”
, 
scÜebßrd
, 
simt
, 
w¬p
, 
¥_out
, 
sfu_out
, 
mem_out
, 
id
 ),

437 
	$m_³ndšg_w¬ps
()

439 
šÃr_Ëv–_»adš
;

440 
ou‹r_Ëv–_»adš
;

441 
»t
 = 
	`ssÿnf
Ğ
cÚfig_¡r
,

443 &
m_max_aùive_w¬ps
,

444 &
šÃr_Ëv–_»adš
,

445 &
ou‹r_Ëv–_»adš
);

446 
	`as£¹
Ğ3 =ğ
»t
 );

447 
m_šÃr_Ëv–_´iÜ™iz©iÚ
=(
scheduËr_´iÜ™iz©iÚ_ty³
)
šÃr_Ëv–_»adš
;

448 
m_ou‹r_Ëv–_´iÜ™iz©iÚ
=(
scheduËr_´iÜ™iz©iÚ_ty³
)
ou‹r_Ëv–_»adš
;

450 
vœtu®
 ~
	$two_Ëv–_aùive_scheduËr
 (è{
	}
}

451 
vœtu®
 
Üd”_w¬ps
();

452 
	$add_su³rvi£d_w¬p_id
(
i
) {

453 iàĞ
m_Ãxt_cyşe_´iÜ™ized_w¬ps
.
	`size
(è< 
m_max_aùive_w¬ps
 ) {

454 
m_Ãxt_cyşe_´iÜ™ized_w¬ps
.
	`push_back
Ğ&
	`w¬p
(
i
) );

456 
m_³ndšg_w¬ps
.
	`push_back
(&
	`w¬p
(
i
));

458 
	}
}

459 
vœtu®
 
	$dÚe_addšg_su³rvi£d_w¬ps
() {

460 
m_Ï¡_su³rvi£d_issued
 = 
m_su³rvi£d_w¬ps
.
	`begš
();

461 
	}
}

463 
	g´Ùeùed
:

464 
vœtu®
 
do_Ú_w¬p_issued
Ğ
w¬p_id
,

465 
num_issued
,

466 cÚ¡ 
¡d
::
veùÜ
< 
shd_w¬p_t
* >::
cÚ¡_™”©Ü
& 
´iÜ™ized_™”
 );

468 
	g´iv©e
:

469 
¡d
::
deque
< 
shd_w¬p_t
* > 
m_³ndšg_w¬ps
;

470 
scheduËr_´iÜ™iz©iÚ_ty³
 
	gm_šÃr_Ëv–_´iÜ™iz©iÚ
;

471 
scheduËr_´iÜ™iz©iÚ_ty³
 
	gm_ou‹r_Ëv–_´iÜ™iz©iÚ
;

472 
	gm_max_aùive_w¬ps
;

476 şas 
	cswl_scheduËr
 : 
public
 
scheduËr_un™
 {

477 
public
:

478 
swl_scheduËr
 ( 
shad”_cÜe_¡©s
* 
¡©s
, 
shad”_cÜe_ùx
* 
shad”
,

479 
ScÜebßrd
* 
scÜebßrd
, 
simt_¡ack
** 
simt
,

480 
¡d
::
veùÜ
<
shd_w¬p_t
>* 
w¬p
,

481 
»gi¡”_£t
* 
¥_out
,

482 
»gi¡”_£t
* 
sfu_out
,

483 
»gi¡”_£t
* 
mem_out
,

484 
id
,

485 * 
cÚfig_¡ršg
 );

486 
	mvœtu®
 ~
	$swl_scheduËr
 () {}

487 
vœtu®
 
	`Üd”_w¬ps
 ();

488 
vœtu®
 
	$dÚe_addšg_su³rvi£d_w¬ps
() {

489 
m_Ï¡_su³rvi£d_issued
 = 
m_su³rvi£d_w¬ps
.
	`begš
();

490 
	}
}

492 
	g´Ùeùed
:

493 
scheduËr_´iÜ™iz©iÚ_ty³
 
m_´iÜ™iz©iÚ
;

494 
	gm_num_w¬ps_to_lim™
;

499 şas 
	cİndcŞl_rfu_t
 {

500 
	mpublic
:

502 
	$İndcŞl_rfu_t
()

504 
m_num_bªks
=0;

505 
m_shad”
=
NULL
;

506 
m_š™Ÿlized
=
çl£
;

508 
	`add_cu_£t
(
cu_£t
, 
num_cu
, 
num_di¥©ch
);

509 
¡d
::
	tveùÜ
<
	t»gi¡”_£t
*> 
	tpÜt_veùÜ_t
;

510 
¡d
::
	tveùÜ
<> 
	tušt_veùÜ_t
;

511 
	`add_pÜt
Ğ
pÜt_veùÜ_t
 & 
šput
,…Üt_veùÜ_ˆ& 
ouput
, 
ušt_veùÜ_t
 
cu_£ts
);

512 
	`š™
Ğ
num_bªks
, 
shad”_cÜe_ùx
 *
shad”
 );

515 
boŞ
 
	`wr™eback
ĞcÚ¡ 
w¬p_š¡_t
 &
w¬p
 );

517 
	$¡•
()

519 
	`di¥©ch_»ady_cu
();

520 
	`®loÿ‹_»ads
();

521  
p
 = 0 ;… < 
m_š_pÜts
.
	`size
();…++ )

522 
	`®loÿ‹_cu
Ğ
p
 );

523 
	`´oûss_bªks
();

524 
	}
}

526 
	$dump
Ğ
FILE
 *
å
 ) const

528 
	`årštf
(
å
,"\n");

529 
	`årštf
(
å
,"Operand Collector State:\n");

530  
n
=0;‚ < 
m_cu
.
	`size
();‚++ ) {

531 
	`årštf
(
å
," CU-%2u: ", 
n
);

532 
m_cu
[
n
]->
	`dump
(
å
,
m_shad”
);

534 
m_¬b™”
.
	`dump
(
å
);

535 
	}
}

537 
shad”_cÜe_ùx
 *
	$shad”_cÜe
(è{  
m_shad”
; 
	}
}

539 
	g´iv©e
:

541 
	$´oûss_bªks
()

543 
m_¬b™”
.
	`»£t_®loùiÚ
();

544 
	}
}

546 
di¥©ch_»ady_cu
();

547 
®loÿ‹_cu
Ğ
pÜt
 );

548 
®loÿ‹_»ads
();

552 
şass
 
	gcŞËùÜ_un™_t
;

554 şas 
	cİ_t
 {

555 
	gpublic
:

557 
İ_t
(è{ 
m_v®id
 = 
çl£
; }

558 
İ_t
Ğ
cŞËùÜ_un™_t
 *
cu
, 
İ
, 
»g
, 
num_bªks
, 
bªk_w¬p_shiá
 )

560 
	gm_v®id
 = 
Œue
;

561 
	gm_w¬p
=
NULL
;

562 
	gm_cu
 = 
cu
;

563 
	gm_İ”ªd
 = 
İ
;

564 
	gm_»gi¡”
 = 
»g
;

565 
	gm_bªk
 = 
»gi¡”_bªk
(
»g
,
cu
->
g‘_w¬p_id
(),
num_bªks
,
bªk_w¬p_shiá
);

567 
İ_t
ĞcÚ¡ 
w¬p_š¡_t
 *
w¬p
, 
»g
, 
num_bªks
, 
bªk_w¬p_shiá
 )

569 
	gm_v®id
=
Œue
;

570 
	gm_w¬p
=
w¬p
;

571 
	gm_»gi¡”
=
»g
;

572 
	gm_cu
=
NULL
;

573 
	gm_İ”ªd
 = -1;

574 
	gm_bªk
 = 
»gi¡”_bªk
(
»g
,
w¬p
->
w¬p_id
(),
num_bªks
,
bªk_w¬p_shiá
);

578 
boŞ
 
v®id
(ècÚ¡ {  
	gm_v®id
; }

579 
g‘_»g
() const

581 
as£¹
Ğ
m_v®id
 );

582  
	gm_»gi¡”
;

584 
g‘_wid
() const

586 ifĞ
	gm_w¬p
 )  m_w¬p->
w¬p_id
();

587 ifĞ
	gm_cu
 )  m_cu->
g‘_w¬p_id
();

588 
abÜt
();

590 
g‘_aùive_couÁ
() const

592 ifĞ
	gm_w¬p
 )  m_w¬p->
aùive_couÁ
();

593 ifĞ
	gm_cu
 )  m_cu->
g‘_aùive_couÁ
();

594 
abÜt
();

596 cÚ¡ 
	gaùive_mask_t
 & 
g‘_aùive_mask
()

598 ifĞ
	gm_w¬p
 )  m_w¬p->
g‘_aùive_mask
();

599 ifĞ
	gm_cu
 )  m_cu->
g‘_aùive_mask
();

600 
abÜt
();

602 
g‘_¥_İ
() const

604 ifĞ
	gm_w¬p
 )  m_w¬p->
	g¥_İ
;

605 ifĞ
	gm_cu
 )  m_cu->
g‘_¥_İ
();

606 
abÜt
();

608 
g‘_oc_id
(ècÚ¡ {  
	gm_cu
->
g‘_id
(); }

609 
g‘_bªk
(ècÚ¡ {  
	gm_bªk
; }

610 
g‘_İ”ªd
(ècÚ¡ {  
	gm_İ”ªd
; }

611 
dump
(
FILE
 *
å
) const

613 if(
	gm_cu
)

614 
årštf
(
å
," <R%u, CU:%u, w:%02u> ", 
m_»gi¡”
,
m_cu
->
g‘_id
(),m_cu->
g‘_w¬p_id
());

615 ifĞ!
	gm_w¬p
->
em±y
() )

616 
årštf
(
å
," <R%u, wid:%02u> ", 
m_»gi¡”
,
m_w¬p
->
w¬p_id
() );

618 
	g¡d
::
¡ršg
 
g‘_»g_¡ršg
() const

620 
bufãr
[64];

621 
¢´štf
(
bufãr
,64,"R%u", 
m_»gi¡”
);

622  
	g¡d
::
¡ršg
(
bufãr
);

626 
»£t
(è{ 
	gm_v®id
 = 
çl£
; }

627 
	g´iv©e
:

628 
boŞ
 
m_v®id
;

629 
cŞËùÜ_un™_t
 *
	gm_cu
;

630 cÚ¡ 
w¬p_š¡_t
 *
	gm_w¬p
;

631 
	gm_İ”ªd
;

632 
	gm_»gi¡”
;

633 
	gm_bªk
;

636 
	e®loc_t
 {

637 
	gNO_ALLOC
,

638 
	gREAD_ALLOC
,

639 
	gWRITE_ALLOC
,

642 şas 
	c®loÿtiÚ_t
 {

643 
	gpublic
:

644 
®loÿtiÚ_t
(è{ 
m_®loÿtiÚ
 = 
NO_ALLOC
; }

645 
boŞ
 
is_»ad
(ècÚ¡ {  
	gm_®loÿtiÚ
==
READ_ALLOC
; }

646 
boŞ
 
is_wr™e
(ècÚ¡ { 
	gm_®loÿtiÚ
==
WRITE_ALLOC
; }

647 
boŞ
 
is_ä“
(ècÚ¡ { 
	gm_®loÿtiÚ
==
NO_ALLOC
; }

648 
dump
(
FILE
 *
å
) const {

649 ifĞ
	gm_®loÿtiÚ
 =ğ
NO_ALLOC
 ) { 
årštf
(
å
,"<free>"); }

650 ifĞ
	gm_®loÿtiÚ
 =ğ
READ_ALLOC
 ) { 
årštf
(
å
,"rd: "); 
	gm_İ
.
dump
(fp); }

651 ifĞ
	gm_®loÿtiÚ
 =ğ
WRITE_ALLOC
 ) { 
årštf
(
å
,"wr: "); 
	gm_İ
.
dump
(fp); }

652 
årštf
(
å
,"\n");

654 
®loc_»ad
ĞcÚ¡ 
İ_t
 &
İ
 ) { 
as£¹
(
is_ä“
()); 
	gm_®loÿtiÚ
=
READ_ALLOC
; 
	gm_İ
=op; }

655 
®loc_wr™e
ĞcÚ¡ 
İ_t
 &
İ
 ) { 
as£¹
(
is_ä“
()); 
	gm_®loÿtiÚ
=
WRITE_ALLOC
; 
	gm_İ
=op; }

656 
»£t
(è{ 
	gm_®loÿtiÚ
 = 
NO_ALLOC
; }

657 
	g´iv©e
:

658 
®loc_t
 
m_®loÿtiÚ
;

659 
İ_t
 
	gm_İ
;

662 şas 
	c¬b™”_t
 {

663 
	gpublic
:

665 
¬b™”_t
()

667 
m_queue
=
NULL
;

668 
	gm_®loÿ‹d_bªk
=
NULL
;

669 
	gm_®loÿtÜ_¼_h—d
=
NULL
;

670 
	g_šm©ch
=
NULL
;

671 
	g_outm©ch
=
NULL
;

672 
	g_»que¡
=
NULL
;

673 
	gm_Ï¡_cu
=0;

675 
š™
Ğ
num_cu
, 
num_bªks
 )

677 
as£¹
(
num_cu
 > 0);

678 
as£¹
(
num_bªks
 > 0);

679 
	gm_num_cŞËùÜs
 = 
num_cu
;

680 
	gm_num_bªks
 = 
num_bªks
;

681 
	g_šm©ch
 = 
Ãw
 [ 
m_num_bªks
 ];

682 
	g_outm©ch
 = 
Ãw
 [ 
m_num_cŞËùÜs
 ];

683 
	g_»que¡
 = 
Ãw
 *[ 
m_num_bªks
 ];

684 
	gi
=0; i<
	gm_num_bªks
;i++)

685 
	g_»que¡
[
i
] = 
Ãw
 [
m_num_cŞËùÜs
];

686 
	gm_queue
 = 
Ãw
 
¡d
::
li¡
<
İ_t
>[
num_bªks
];

687 
	gm_®loÿ‹d_bªk
 = 
Ãw
 
®loÿtiÚ_t
[
num_bªks
];

688 
	gm_®loÿtÜ_¼_h—d
 = 
Ãw
 [
num_cu
];

689  
	gn
=0;‚<
	gnum_cu
;n++ )

690 
	gm_®loÿtÜ_¼_h—d
[
n
] =‚%
num_bªks
;

691 
»£t_®loùiÚ
();

695 
dump
(
FILE
 *
å
) const

697 
årštf
(
å
,"\n");

698 
årštf
(
å
," Arbiter State:\n");

699 
årštf
(
å
,"„equests:\n");

700  
	gb
=0; b<
	gm_num_bªks
; b++ ) {

701 
årštf
(
å
," bªk %u : ", 
b
 );

702 
	g¡d
::
li¡
<
İ_t
>::
cÚ¡_™”©Ü
 
o
 = 
m_queue
[
b
].
begš
();

703 ; 
	go
 !ğ
m_queue
[
b
].
’d
(); o++ ) {

704 
	go
->
dump
(
å
);

706 
årštf
(
å
,"\n");

708 
årštf
(
å
," grants:\n");

709 
	gb
=0;b<
	gm_num_bªks
;b++) {

710 
årštf
(
å
," bªk %u : ", 
b
 );

711 
	gm_®loÿ‹d_bªk
[
b
].
dump
(
å
);

713 
årštf
(
å
,"\n");

717 
	g¡d
::
li¡
<
İ_t
> 
®loÿ‹_»ads
();

719 
add_»ad_»que¡s
Ğ
cŞËùÜ_un™_t
 *
cu
 )

721 cÚ¡ 
İ_t
 *
	g¤c
 = 
cu
->
g‘_İ”ªds
();

722  
	gi
=0; i<
	gMAX_REG_OPERANDS
*2; i++) {

723 cÚ¡ 
	gİ_t
 &
	gİ
 = 
¤c
[
i
];

724 ifĞ
	gİ
.
v®id
() ) {

725 
	gbªk
 = 
İ
.
g‘_bªk
();

726 
	gm_queue
[
bªk
].
push_back
(
İ
);

730 
boŞ
 
bªk_idË
Ğ
bªk
 ) const

732  
	gm_®loÿ‹d_bªk
[
bªk
].
is_ä“
();

734 
®loÿ‹_bªk_fÜ_wr™e
Ğ
bªk
, cÚ¡ 
İ_t
 &
İ
 )

736 
as£¹
Ğ
bªk
 < 
m_num_bªks
 );

737 
	gm_®loÿ‹d_bªk
[
bªk
].
®loc_wr™e
(
İ
);

739 
®loÿ‹_fÜ_»ad
Ğ
bªk
, cÚ¡ 
İ_t
 &
İ
 )

741 
as£¹
Ğ
bªk
 < 
m_num_bªks
 );

742 
	gm_®loÿ‹d_bªk
[
bªk
].
®loc_»ad
(
İ
);

744 
»£t_®loùiÚ
()

746  
	gb
=0; b < 
	gm_num_bªks
; b++ )

747 
	gm_®loÿ‹d_bªk
[
b
].
»£t
();

750 
	g´iv©e
:

751 
m_num_bªks
;

752 
	gm_num_cŞËùÜs
;

754 
®loÿtiÚ_t
 *
	gm_®loÿ‹d_bªk
;

755 
	g¡d
::
li¡
<
İ_t
> *
m_queue
;

757 *
	gm_®loÿtÜ_¼_h—d
;

758 
	gm_Ï¡_cu
;

760 *
	g_šm©ch
;

761 *
	g_outm©ch
;

762 **
	g_»que¡
;

765 şas 
	cšput_pÜt_t
 {

766 
	gpublic
:

767 
šput_pÜt_t
(
pÜt_veùÜ_t
 & 
šput
,…Üt_veùÜ_ˆ& 
ouut
, 
ušt_veùÜ_t
 
cu_£ts
)

768 : 
m_š
(
šput
),
m_out
(
ouut
), 
m_cu_£ts
(
cu_£ts
)

770 
as£¹
(
šput
.
size
(è=ğ
ouut
.size());

771 
as£¹
(
nÙ
 
m_cu_£ts
.
em±y
());

774 
pÜt_veùÜ_t
 
	gm_š
,
	gm_out
;

775 
ušt_veùÜ_t
 
	gm_cu_£ts
;

778 şas 
	ccŞËùÜ_un™_t
 {

779 
	gpublic
:

781 
cŞËùÜ_un™_t
()

783 
m_ä“
 = 
Œue
;

784 
	gm_w¬p
 = 
NULL
;

785 
	gm_ouut_»gi¡”
 = 
NULL
;

786 
	gm_¤c_İ
 = 
Ãw
 
İ_t
[
MAX_REG_OPERANDS
*2];

787 
	gm_nÙ_»ady
.
»£t
();

788 
	gm_w¬p_id
 = -1;

789 
	gm_num_bªks
 = 0;

790 
	gm_bªk_w¬p_shiá
 = 0;

793 
boŞ
 
»ady
() const;

794 cÚ¡ 
İ_t
 *
g‘_İ”ªds
(ècÚ¡ {  
	gm_¤c_İ
; }

795 
dump
(
FILE
 *
å
, cÚ¡ 
shad”_cÜe_ùx
 *
shad”
 ) const;

797 
g‘_w¬p_id
(ècÚ¡ {  
	gm_w¬p_id
; }

798 
g‘_aùive_couÁ
(ècÚ¡ {  
	gm_w¬p
->
aùive_couÁ
(); }

799 cÚ¡ 
	gaùive_mask_t
 & 
g‘_aùive_mask
(ècÚ¡ {  
	gm_w¬p
->get_active_mask(); }

800 
g‘_¥_İ
(ècÚ¡ {  
	gm_w¬p
->
	g¥_İ
; }

801 
g‘_id
(ècÚ¡ {  
	gm_cuid
; }

804 
š™
(
n
,

805 
num_bªks
,

806 
log2_w¬p_size
,

807 cÚ¡ 
cÜe_cÚfig
 *
cÚfig
,

808 
İndcŞl_rfu_t
 *
rfu
 );

809 
boŞ
 
®loÿ‹
Ğ
»gi¡”_£t
* 
p–še_»g
,„egi¡”_£t* 
ouut_»g
 );

811 
cŞËù_İ”ªd
Ğ
İ
 )

813 
	gm_nÙ_»ady
.
»£t
(
İ
);

815 
g‘_num_İ”ªds
() const{

816  
	gm_w¬p
->
g‘_num_İ”ªds
();

818 
g‘_num_»gs
() const{

819  
	gm_w¬p
->
g‘_num_»gs
();

821 
di¥©ch
();

822 
boŞ
 
is_ä“
(){ 
	gm_ä“
;}

824 
	g´iv©e
:

825 
boŞ
 
m_ä“
;

826 
	gm_cuid
;

827 
	gm_w¬p_id
;

828 
w¬p_š¡_t
 *
	gm_w¬p
;

829 
»gi¡”_£t
* 
	gm_ouut_»gi¡”
;

830 
İ_t
 *
	gm_¤c_İ
;

831 
	g¡d
::
b™£t
<
MAX_REG_OPERANDS
*2> 
m_nÙ_»ady
;

832 
	gm_num_bªks
;

833 
	gm_bªk_w¬p_shiá
;

834 
İndcŞl_rfu_t
 *
	gm_rfu
;

838 şas 
	cdi¥©ch_un™_t
 {

839 
	gpublic
:

840 
di¥©ch_un™_t
(
¡d
::
veùÜ
<
cŞËùÜ_un™_t
>* 
cus
)

842 
m_Ï¡_cu
=0;

843 
	gm_cŞËùÜ_un™s
=
cus
;

844 
	gm_num_cŞËùÜs
 = (*
cus
).
size
();

845 
	gm_Ãxt_cu
=0;

848 
cŞËùÜ_un™_t
 *
fšd_»ady
()

850  
	gn
=0;‚ < 
	gm_num_cŞËùÜs
;‚++ ) {

851 
	gc
=(
m_Ï¡_cu
+
n
+1)%
m_num_cŞËùÜs
;

852 ifĞ(*
	gm_cŞËùÜ_un™s
)[
c
].
»ady
() ) {

853 
	gm_Ï¡_cu
=
c
;

854  &((*
	gm_cŞËùÜ_un™s
)[
c
]);

857  
	gNULL
;

860 
	g´iv©e
:

861 
m_num_cŞËùÜs
;

862 
	g¡d
::
veùÜ
<
cŞËùÜ_un™_t
>* 
m_cŞËùÜ_un™s
;

863 
	gm_Ï¡_cu
;

864 
	gm_Ãxt_cu
;

868 
boŞ
 
	gm_š™Ÿlized
;

870 
	gm_num_cŞËùÜ_£ts
;

872 
	gm_num_bªks
;

873 
	gm_bªk_w¬p_shiá
;

874 
	gm_w¬p_size
;

875 
	g¡d
::
veùÜ
<
cŞËùÜ_un™_t
 *> 
m_cu
;

876 
¬b™”_t
 
	gm_¬b™”
;

884 
	g¡d
::
veùÜ
<
šput_pÜt_t
> 
m_š_pÜts
;

885 
	g¡d
::
	tm­
<, 
	t¡d
::
	tveùÜ
<
	tcŞËùÜ_un™_t
> > 
	tcu_£ts_t
;

886 
cu_£ts_t
 
	gm_cus
;

887 
	g¡d
::
veùÜ
<
di¥©ch_un™_t
> 
m_di¥©ch_un™s
;

892 
shad”_cÜe_ùx
 *
	gm_shad”
;

895 şas 
	cb¬r›r_£t_t
 {

896 
	mpublic
:

897 
b¬r›r_£t_t
(
shad”_cÜe_ùx
 * 
shad”
, 
max_w¬ps_³r_cÜe
, 
max_ùa_³r_cÜe
, 
max_b¬r›rs_³r_ùa
, 
w¬p_size
);

900 
®loÿ‹_b¬r›r
Ğ
ùa_id
, 
w¬p_£t_t
 
w¬ps
 );

903 
d—Îoÿ‹_b¬r›r
Ğ
ùa_id
 );

905 
	m¡d
::
	tm­
<, 
	tw¬p_£t_t
 > 
	tùa_to_w¬p_t
;

906 
	m¡d
::
	tm­
<, 
	tw¬p_£t_t
 > 
	tb¬_id_to_w¬p_t
;

910 
w¬p_»aches_b¬r›r
Ğ
ùa_id
, 
w¬p_id
, 
w¬p_š¡_t
* 
š¡
);

914 
w¬p_ex™
Ğ
w¬p_id
 );

917 
boŞ
 
	$w¬p_wa™šg_©_b¬r›r
Ğ
w¬p_id
 ) const;

920 
	`dump
();

922 
´iv©e
:

923 
m_max_ùa_³r_cÜe
;

924 
m_max_w¬ps_³r_cÜe
;

925 
m_max_b¬r›rs_³r_ùa
;

926 
m_w¬p_size
;

927 
ùa_to_w¬p_t
 
m_ùa_to_w¬ps
;

928 
b¬_id_to_w¬p_t
 
m_b¬_id_to_w¬ps
;

929 
w¬p_£t_t
 
m_w¬p_aùive
;

930 
w¬p_£t_t
 
m_w¬p_©_b¬r›r
;

931 
shad”_cÜe_ùx
 *
m_shad”
;

935 
	sš¢_Ï‹ncy_šfo
 {

936 
pc
;

937 
Ï‹ncy
;

940 
	siãtch_bufãr_t
 {

941 
	`iãtch_bufãr_t
(è{ 
m_v®id
=
çl£
; }

943 
	`iãtch_bufãr_t
Ğ
add»ss_ty³
 
pc
, 
nby‹s
, 
w¬p_id
 )

945 
m_v®id
=
Œue
;

946 
m_pc
=
pc
;

947 
m_nby‹s
=
nby‹s
;

948 
m_w¬p_id
=
w¬p_id
;

951 
boŞ
 
m_v®id
;

952 
add»ss_ty³
 
m_pc
;

953 
m_nby‹s
;

954 
m_w¬p_id
;

957 
şass
 
shad”_cÜe_cÚfig
;

959 şas 
	csimd_funùiÚ_un™
 {

960 
public
:

961 
	`simd_funùiÚ_un™
ĞcÚ¡ 
shad”_cÜe_cÚfig
 *
cÚfig
 );

962 ~
	$simd_funùiÚ_un™
(è{ 
d–‘e
 
m_di¥©ch_»g
; }

965 
vœtu®
 
	$issue
Ğ
»gi¡”_£t
& 
sourû_»g
 ) { sourû_»g.
	`move_out_to
(
m_di¥©ch_»g
); 
occup›d
.
	`£t
(m_di¥©ch_»g->
Ï‹ncy
);
	}
}

966 
vœtu®
 
cyşe
() = 0;

967 
vœtu®
 
aùive_ÏÃs_š_p–še
() = 0;

970 
vœtu®
 
	$şock_muÉl›r
(ècÚ¡ {  1; 
	}
}

971 
vœtu®
 
boŞ
 
	$ÿn_issue
ĞcÚ¡ 
w¬p_š¡_t
 &
š¡
 ) cÚ¡ {  
m_di¥©ch_»g
->
	`em±y
(è&& !
occup›d
.
	`‹¡
(š¡.
Ï‹ncy
); 
	}
}

972 
vœtu®
 
boŞ
 
	$¡®ÏbË
() const = 0;

973 
vœtu®
 
	$´št
Ğ
FILE
 *
å
 ) const

975 
	`årštf
(
å
,"% di¥©chğ", 
m_Çme
.
	`c_¡r
() );

976 
m_di¥©ch_»g
->
	`´št
(
å
);

977 
	}
}

978 
	g´Ùeùed
:

979 
¡d
::
¡ršg
 
m_Çme
;

980 cÚ¡ 
shad”_cÜe_cÚfig
 *
	gm_cÚfig
;

981 
w¬p_š¡_t
 *
	gm_di¥©ch_»g
;

982 cÚ¡ 
	gMAX_ALU_LATENCY
 = 512;

983 
	g¡d
::
b™£t
<
MAX_ALU_LATENCY
> 
occup›d
;

986 şas 
	cp–šed_simd_un™
 : 
public
 
simd_funùiÚ_un™
 {

987 
public
:

988 
p–šed_simd_un™
Ğ
»gi¡”_£t
* 
»suÉ_pÜt
, cÚ¡ 
shad”_cÜe_cÚfig
 *
cÚfig
, 
max_Ï‹ncy
, 
shad”_cÜe_ùx
 *
cÜe
 );

991 
vœtu®
 
cyşe
();

992 
vœtu®
 
issue
Ğ
»gi¡”_£t
& 
sourû_»g
 );

993 
vœtu®
 
	$g‘_aùive_ÏÃs_š_p–še
()

995 
aùive_mask_t
 
aùive_ÏÃs
;

996 
aùive_ÏÃs
.
	`»£t
();

997  
¡age
=0; (¡age+1)<
m_p–še_d•th
; stage++ ){

998 ifĞ!
m_p–še_»g
[
¡age
]->
	`em±y
() )

999 
aùive_ÏÃs
|=
m_p–še_»g
[
¡age
]->
	`g‘_aùive_mask
();

1001  
aùive_ÏÃs
.
	`couÁ
();

1003 
vœtu®
 
	`aùive_ÏÃs_š_p–še
() = 0;

1013 
vœtu®
 
boŞ
 
	$¡®ÏbË
(ècÚ¡ {  
çl£
; 
	}
}

1014 
vœtu®
 
boŞ
 
	$ÿn_issue
ĞcÚ¡ 
w¬p_š¡_t
 &
š¡
 ) const

1016  
simd_funùiÚ_un™
::
	`ÿn_issue
(
š¡
);

1017 
	}
}

1018 
vœtu®
 
	$´št
(
FILE
 *
å
) const

1020 
simd_funùiÚ_un™
::
	`´št
(
å
);

1021  
s
=
m_p–še_d•th
-1; s>=0; s-- ) {

1022 ifĞ!
m_p–še_»g
[
s
]->
	`em±y
() ) {

1023 
	`årštf
(
å
," %s[%2d] ", 
m_Çme
.
	`c_¡r
(), 
s
 );

1024 
m_p–še_»g
[
s
]->
	`´št
(
å
);

1027 
	}
}

1028 
	g´Ùeùed
:

1029 
m_p–še_d•th
;

1030 
w¬p_š¡_t
 **
	gm_p–še_»g
;

1031 
»gi¡”_£t
 *
	gm_»suÉ_pÜt
;

1032 
şass
 
shad”_cÜe_ùx
 *
	gm_cÜe
;

1035 şas 
	csfu
 : 
public
 
p–šed_simd_un™


1037 
public
:

1038 
sfu
Ğ
»gi¡”_£t
* 
»suÉ_pÜt
, cÚ¡ 
shad”_cÜe_cÚfig
 *
cÚfig
, 
shad”_cÜe_ùx
 *
cÜe
 );

1039 
vœtu®
 
boŞ
 
	$ÿn_issue
ĞcÚ¡ 
w¬p_š¡_t
 &
š¡
 ) const

1041 
š¡
.
İ
) {

1042 
SFU_OP
: ;

1043 
ALU_SFU_OP
: ;

1044 :  
çl£
;

1046  
p–šed_simd_un™
::
	`ÿn_issue
(
š¡
);

1048 
vœtu®
 
	`aùive_ÏÃs_š_p–še
();

1049 
vœtu®
 
	`issue
Ğ
»gi¡”_£t
& 
sourû_»g
 );

1050 
	}
};

1052 şas 
	c¥_un™
 : 
public
 
p–šed_simd_un™


1054 
public
:

1055 
¥_un™
Ğ
»gi¡”_£t
* 
»suÉ_pÜt
, cÚ¡ 
shad”_cÜe_cÚfig
 *
cÚfig
, 
shad”_cÜe_ùx
 *
cÜe
 );

1056 
vœtu®
 
boŞ
 
	$ÿn_issue
ĞcÚ¡ 
w¬p_š¡_t
 &
š¡
 ) const

1058 
š¡
.
İ
) {

1059 
SFU_OP
:  
çl£
;

1060 
LOAD_OP
:  
çl£
;

1061 
STORE_OP
:  
çl£
;

1062 
MEMORY_BARRIER_OP
:  
çl£
;

1065  
p–šed_simd_un™
::
	`ÿn_issue
(
š¡
);

1067 
vœtu®
 
	`aùive_ÏÃs_š_p–še
();

1068 
vœtu®
 
	`issue
Ğ
»gi¡”_£t
& 
sourû_»g
 );

1069 
	}
};

1071 
şass
 
	gsimt_cÜe_şu¡”
;

1072 
şass
 
	gshad”_memÜy_š‹rçû
;

1073 
şass
 
	gshad”_cÜe_mem_ãtch_®loÿtÜ
;

1074 
şass
 
	gÿche_t
;

1076 şas 
	cld¡_un™
: 
public
 
p–šed_simd_un™
 {

1077 
public
:

1078 
ld¡_un™
Ğ
mem_ãtch_š‹rçû
 *
iút
,

1079 
shad”_cÜe_mem_ãtch_®loÿtÜ
 *
mf_®loÿtÜ
,

1080 
shad”_cÜe_ùx
 *
cÜe
,

1081 
İndcŞl_rfu_t
 *
İ”ªd_cŞËùÜ
,

1082 
ScÜebßrd
 *
scÜebßrd
,

1083 cÚ¡ 
shad”_cÜe_cÚfig
 *
cÚfig
,

1084 cÚ¡ 
memÜy_cÚfig
 *
mem_cÚfig
,

1085 
şass
 
shad”_cÜe_¡©s
 *
¡©s
,

1086 
sid
, 
c
 );

1089 
vœtu®
 
issue
Ğ
»gi¡”_£t
 &
š¡
 );

1090 
vœtu®
 
cyşe
();

1092 
fl
Ğ
mem_ãtch
 *
mf
 );

1093 
æush
();

1094 
wr™eback
();

1097 
vœtu®
 
	$şock_muÉl›r
() const;

1099 
vœtu®
 
boŞ
 
	$ÿn_issue
ĞcÚ¡ 
w¬p_š¡_t
 &
š¡
 ) const

1101 
š¡
.
İ
) {

1102 
LOAD_OP
: ;

1103 
STORE_OP
: ;

1104 
MEMORY_BARRIER_OP
: ;

1105 :  
çl£
;

1107  
m_di¥©ch_»g
->
	`em±y
();

1110 
vœtu®
 
	`aùive_ÏÃs_š_p–še
();

1111 
vœtu®
 
boŞ
 
	$¡®ÏbË
(ècÚ¡ {  
Œue
; 
	}
}

1112 
boŞ
 
	$»¥Ú£_bufãr_fuÎ
() const;

1113 
	$´št
(
FILE
 *
fout
) const;

1114 
	`´št_ÿche_¡©s
Ğ
FILE
 *
å
, & 
dl1_acûs£s
, & 
dl1_mis£s
 );

1115 
	`g‘_ÿche_¡©s
(&
»ad_acûs£s
, &
wr™e_acûs£s
, &
»ad_mis£s
, &
wr™e_mis£s
, 
ÿche_ty³
);

1116 
	`g‘_ÿche_¡©s
(
ÿche_¡©s
 &
cs
);

1118 
	$g‘_L1D_sub_¡©s
(
ÿche_sub_¡©s
 &
css
) const;

1119 
	$g‘_L1C_sub_¡©s
(
ÿche_sub_¡©s
 &
css
) const;

1120 
	$g‘_L1T_sub_¡©s
(
ÿche_sub_¡©s
 &
css
) const;

1122 
´Ùeùed
:

1123 
	`ld¡_un™
Ğ
mem_ãtch_š‹rçû
 *
iút
,

1124 
shad”_cÜe_mem_ãtch_®loÿtÜ
 *
mf_®loÿtÜ
,

1125 
shad”_cÜe_ùx
 *
cÜe
,

1126 
İndcŞl_rfu_t
 *
İ”ªd_cŞËùÜ
,

1127 
ScÜebßrd
 *
scÜebßrd
,

1128 cÚ¡ 
shad”_cÜe_cÚfig
 *
cÚfig
,

1129 cÚ¡ 
memÜy_cÚfig
 *
mem_cÚfig
,

1130 
shad”_cÜe_¡©s
 *
¡©s
,

1131 
sid
,

1132 
c
,

1133 
l1_ÿche
* 
Ãw_l1d_ÿche
 );

1134 
	`š™
Ğ
mem_ãtch_š‹rçû
 *
iút
,

1135 
shad”_cÜe_mem_ãtch_®loÿtÜ
 *
mf_®loÿtÜ
,

1136 
shad”_cÜe_ùx
 *
cÜe
,

1137 
İndcŞl_rfu_t
 *
İ”ªd_cŞËùÜ
,

1138 
ScÜebßrd
 *
scÜebßrd
,

1139 cÚ¡ 
shad”_cÜe_cÚfig
 *
cÚfig
,

1140 cÚ¡ 
memÜy_cÚfig
 *
mem_cÚfig
,

1141 
shad”_cÜe_¡©s
 *
¡©s
,

1142 
sid
,

1143 
c
 );

1145 
´Ùeùed
:

1146 
boŞ
 
	`sh¬ed_cyşe
Ğ
w¬p_š¡_t
 &
š¡
, 
mem_¡age_¡®l_ty³
 &
rc_ç
, 
mem_¡age_acûss_ty³
 &
ç_ty³
);

1147 
boŞ
 
	`cÚ¡ªt_cyşe
Ğ
w¬p_š¡_t
 &
š¡
, 
mem_¡age_¡®l_ty³
 &
rc_ç
, 
mem_¡age_acûss_ty³
 &
ç_ty³
);

1148 
boŞ
 
	`‹xtu»_cyşe
Ğ
w¬p_š¡_t
 &
š¡
, 
mem_¡age_¡®l_ty³
 &
rc_ç
, 
mem_¡age_acûss_ty³
 &
ç_ty³
);

1149 
boŞ
 
	`memÜy_cyşe
Ğ
w¬p_š¡_t
 &
š¡
, 
mem_¡age_¡®l_ty³
 &
rc_ç
, 
mem_¡age_acûss_ty³
 &
ç_ty³
);

1151 
vœtu®
 
mem_¡age_¡®l_ty³
 
	`´oûss_ÿche_acûss
Ğ
ÿche_t
* 
ÿche
,

1152 
Ãw_addr_ty³
 
add»ss
,

1153 
w¬p_š¡_t
 &
š¡
,

1154 
¡d
::
li¡
<
ÿche_ev’t
>& 
ev’ts
,

1155 
mem_ãtch
 *
mf
,

1156 
ÿche_»que¡_¡©us
 
¡©us
 );

1157 
mem_¡age_¡®l_ty³
 
	`´oûss_memÜy_acûss_queue
Ğ
ÿche_t
 *
ÿche
, 
w¬p_š¡_t
 &
š¡
 );

1159 cÚ¡ 
memÜy_cÚfig
 *
m_memÜy_cÚfig
;

1160 
şass
 
mem_ãtch_š‹rçû
 *
m_iút
;

1161 
shad”_cÜe_mem_ãtch_®loÿtÜ
 *
m_mf_®loÿtÜ
;

1162 
şass
 
shad”_cÜe_ùx
 *
m_cÜe
;

1163 
m_sid
;

1164 
m_c
;

1166 
‹x_ÿche
 *
m_L1T
;

1167 
»ad_Úly_ÿche
 *
m_L1C
;

1168 
l1_ÿche
 *
m_L1D
;

1169 
¡d
::
m­
<, std::m­<,> > 
m_³ndšg_wr™es
;

1170 
¡d
::
li¡
<
mem_ãtch
*> 
m_»¥Ú£_fifo
;

1171 
İndcŞl_rfu_t
 *
m_İ”ªd_cŞËùÜ
;

1172 
ScÜebßrd
 *
m_scÜebßrd
;

1174 
mem_ãtch
 *
m_Ãxt_glob®
;

1175 
w¬p_š¡_t
 
m_Ãxt_wb
;

1176 
m_wr™eback_¬b
;

1177 
m_num_wr™eback_ş›Ás
;

1179 
mem_¡age_¡®l_ty³
 
m_mem_rc
;

1181 
shad”_cÜe_¡©s
 *
m_¡©s
;

1184 
m_Ï¡_š¡_gpu_sim_cyşe
;

1185 
m_Ï¡_š¡_gpu_tÙ_sim_cyşe
;

1186 
	}
};

1188 
	ep–še_¡age_Çme_t
 {

1189 
	mID_OC_SP
=0,

1190 
	mID_OC_SFU
,

1191 
	mID_OC_MEM
,

1192 
	mOC_EX_SP
,

1193 
	mOC_EX_SFU
,

1194 
	mOC_EX_MEM
,

1195 
	mEX_WB
,

1196 
	mN_PIPELINE_STAGES


1199 cÚ¡ * cÚ¡ 
	gp–še_¡age_Çme_decode
[] = {

1210 
	gshad”_cÜe_cÚfig
 : 
public
 
cÜe_cÚfig


1212 
shad”_cÜe_cÚfig
(){

1213 
p–še_widths_¡ršg
 = 
NULL
;

1216 
š™
()

1218 
	gÁok
 = 
ssÿnf
(
gpgpu_shad”_cÜe_p–še_İt
,"%d:%d",

1219 &
n_th»ad_³r_shad”
,

1220 &
w¬p_size
);

1221 if(
	gÁok
 != 2) {

1222 
´štf
("GPGPU-Sim uArch:ƒrror while…arsing configuration string gpgpu_shader_core_pipeline_opt\n");

1223 
abÜt
();

1226 * 
	gtoks
 = 
Ãw
 [100];

1227 * 
	gtokd
 = 
toks
;

1228 
¡rıy
(
toks
,
p–še_widths_¡ršg
);

1230 
	gtoks
 = 
¡¹ok
(
toks
,",");

1231 
	gi
 = 0; i < 
	gN_PIPELINE_STAGES
; i++) {

1232 
as£¹
(
toks
);

1233 
	gÁok
 = 
ssÿnf
(
toks
,"%d", &
pe_widths
[
i
]);

1234 
as£¹
(
Áok
 == 1);

1235 
	gtoks
 = 
¡¹ok
(
NULL
,",");

1237 
	gd–‘e
[] 
	gtokd
;

1239 ià(
	gn_th»ad_³r_shad”
 > 
	gMAX_THREAD_PER_SM
) {

1240 
´štf
("GPGPU-Sim uArch: Error ** increase MAX_THREAD_PER_SM in‡bstract_hardware_model.h from %uo %u\n",

1241 
MAX_THREAD_PER_SM
, 
n_th»ad_³r_shad”
);

1242 
abÜt
();

1244 
	gmax_w¬ps_³r_shad”
 = 
n_th»ad_³r_shad”
/
w¬p_size
;

1245 
as£¹
Ğ!(
n_th»ad_³r_shad”
 % 
w¬p_size
) );

1246 
	gmax_sfu_Ï‹ncy
 = 512;

1247 
	gmax_¥_Ï‹ncy
 = 32;

1248 
	gm_L1I_cÚfig
.
š™
(
m_L1I_cÚfig
.
m_cÚfig_¡ršg
,
FuncCacheP»ãrNÚe
);

1249 
	gm_L1T_cÚfig
.
š™
(
m_L1T_cÚfig
.
m_cÚfig_¡ršg
,
FuncCacheP»ãrNÚe
);

1250 
	gm_L1C_cÚfig
.
š™
(
m_L1C_cÚfig
.
m_cÚfig_¡ršg
,
FuncCacheP»ãrNÚe
);

1251 
	gm_L1D_cÚfig
.
š™
(
m_L1D_cÚfig
.
m_cÚfig_¡ršg
,
FuncCacheP»ãrNÚe
);

1252 
	ggpgpu_ÿche_‹xl1_lšesize
 = 
m_L1T_cÚfig
.
g‘_lše_sz
();

1253 
	ggpgpu_ÿche_cÚ¡l1_lšesize
 = 
m_L1C_cÚfig
.
g‘_lše_sz
();

1254 
	gm_v®id
 = 
Œue
;

1256 
»g_İtiÚs
(
şass
 
O±iÚP¬£r
 * 
İp
 );

1257 
max_ùa
ĞcÚ¡ 
k”Ãl_šfo_t
 &
k
 ) const;

1258 
num_shad”
(ècÚ¡ {  
n_simt_şu¡”s
*
	gn_simt_cÜes_³r_şu¡”
; }

1259 
sid_to_şu¡”
Ğ
sid
 ) cÚ¡ {  
	gsid
 / 
	gn_simt_cÜes_³r_şu¡”
; }

1260 
sid_to_cid
Ğ
sid
 ) cÚ¡ {  
	gsid
 % 
	gn_simt_cÜes_³r_şu¡”
; }

1261 
cid_to_sid
Ğ
cid
, 
şu¡”_id
 ) cÚ¡ {  clu¡”_id*
	gn_simt_cÜes_³r_şu¡”
 + 
	gcid
; }

1264 *
	ggpgpu_shad”_cÜe_p–še_İt
;

1265 
boŞ
 
	ggpgpu_³rãù_mem
;

1266 
boŞ
 
	ggpgpu_şock_g©ed_»g_fe
;

1267 
boŞ
 
	ggpgpu_şock_g©ed_ÏÃs
;

1268 
div”g’û_suµÜt_t
 
	gmod–
;

1269 
	gn_th»ad_³r_shad”
;

1270 
	gn_»gfe_g©šg_group
;

1271 
	gmax_w¬ps_³r_shad”
;

1272 
	gmax_ùa_³r_cÜe
;

1273 
	gmax_b¬r›rs_³r_ùa
;

1274 * 
	ggpgpu_scheduËr_¡ršg
;

1276 * 
	gp–še_widths_¡ršg
;

1277 
	gpe_widths
[
N_PIPELINE_STAGES
];

1279 
mubË
 
ÿche_cÚfig
 
	gm_L1I_cÚfig
;

1280 
mubË
 
ÿche_cÚfig
 
	gm_L1T_cÚfig
;

1281 
mubË
 
ÿche_cÚfig
 
	gm_L1C_cÚfig
;

1282 
mubË
 
l1d_ÿche_cÚfig
 
	gm_L1D_cÚfig
;

1284 
boŞ
 
	ggmem_sk_L1D
;

1286 
boŞ
 
	ggpgpu_dwf_»g_bªkcÚæiù
;

1288 
	ggpgpu_num_sched_³r_cÜe
;

1289 
	ggpgpu_max_š¢_issue_³r_w¬p
;

1292 
	ggpgpu_İ”ªd_cŞËùÜ_num_un™s_¥
;

1293 
	ggpgpu_İ”ªd_cŞËùÜ_num_un™s_sfu
;

1294 
	ggpgpu_İ”ªd_cŞËùÜ_num_un™s_mem
;

1295 
	ggpgpu_İ”ªd_cŞËùÜ_num_un™s_g’
;

1297 
	ggpgpu_İ”ªd_cŞËùÜ_num_š_pÜts_¥
;

1298 
	ggpgpu_İ”ªd_cŞËùÜ_num_š_pÜts_sfu
;

1299 
	ggpgpu_İ”ªd_cŞËùÜ_num_š_pÜts_mem
;

1300 
	ggpgpu_İ”ªd_cŞËùÜ_num_š_pÜts_g’
;

1302 
	ggpgpu_İ”ªd_cŞËùÜ_num_out_pÜts_¥
;

1303 
	ggpgpu_İ”ªd_cŞËùÜ_num_out_pÜts_sfu
;

1304 
	ggpgpu_İ”ªd_cŞËùÜ_num_out_pÜts_mem
;

1305 
	ggpgpu_İ”ªd_cŞËùÜ_num_out_pÜts_g’
;

1307 
	ggpgpu_num_¥_un™s
;

1308 
	ggpgpu_num_sfu_un™s
;

1309 
	ggpgpu_num_mem_un™s
;

1312 
	ggpgpu_shad”_»gi¡”s
;

1313 
	ggpgpu_w¬pdi¡ro_shad”
;

1314 
	ggpgpu_w¬p_issue_shad”
;

1315 
	ggpgpu_num_»g_bªks
;

1316 
boŞ
 
	ggpgpu_»g_bªk_u£_w¬p_id
;

1317 
boŞ
 
	ggpgpu_loÿl_mem_m­
;

1319 
	gmax_¥_Ï‹ncy
;

1320 
	gmax_sfu_Ï‹ncy
;

1322 
	gn_simt_cÜes_³r_şu¡”
;

1323 
	gn_simt_şu¡”s
;

1324 
	gn_simt_ejeùiÚ_bufãr_size
;

1325 
	gld¡_un™_»¥Ú£_queue_size
;

1327 
	gsimt_cÜe_sim_Üd”
;

1329 
mem2deviû
(
memid
ècÚ¡ {  
	gmemid
 + 
	gn_simt_şu¡”s
; }

1332 
	sshad”_cÜe_¡©s_pod
 {

1334 * 
	mshad”_cÜe_¡©s_pod_¡¬t
[0];

1335 *
	mshad”_cyşes
;

1336 *
	mm_num_sim_š¢
;

1337 *
	mm_num_sim_wš¢
;

1338 *
	mm_Ï¡_num_sim_š¢
;

1339 *
	mm_Ï¡_num_sim_wš¢
;

1340 *
	mm_num_decoded_š¢
;

1341 *
	mm_p–še_duty_cyşe
;

1342 *
	mm_num_FPdecoded_š¢
;

1343 *
	mm_num_INTdecoded_š¢
;

1344 *
	mm_num_¡Üequeued_š¢
;

1345 *
	mm_num_lßdqueued_š¢
;

1346 *
	mm_num_Ÿlu_aûs£s
;

1347 *
	mm_num_å_aûs£s
;

1348 *
	mm_num_imul_aûs£s
;

1349 *
	mm_num_‹x_š¡
;

1350 *
	mm_num_åmul_aûs£s
;

1351 *
	mm_num_idiv_aûs£s
;

1352 *
	mm_num_ådiv_aûs£s
;

1353 *
	mm_num_¥_aûs£s
;

1354 *
	mm_num_sfu_aûs£s
;

1355 *
	mm_num_Œªs_aûs£s
;

1356 *
	mm_num_mem_aûs£s
;

1357 *
	mm_num_¥_comm™‹d
;

1358 *
	mm_num_b_h™s
;

1359 *
	mm_num_b_acûs£s
;

1360 *
	mm_num_sfu_comm™‹d
;

1361 *
	mm_num_mem_comm™‹d
;

1362 *
	mm_»ad_»gfe_aûs£s
;

1363 *
	mm_wr™e_»gfe_aûs£s
;

1364 *
	mm_nÚ_rf_İ”ªds
;

1365 *
	mm_num_imul24_aûs£s
;

1366 *
	mm_num_imul32_aûs£s
;

1367 *
	mm_aùive_¥_ÏÃs
;

1368 *
	mm_aùive_sfu_ÏÃs
;

1369 *
	mm_aùive_fu_ÏÃs
;

1370 *
	mm_aùive_fu_mem_ÏÃs
;

1371 *
	mm_n_div”ge
;

1372 
	mgpgpu_n_lßd_š¢
;

1373 
	mgpgpu_n_¡Üe_š¢
;

1374 
	mgpgpu_n_shmem_š¢
;

1375 
	mgpgpu_n_‹x_š¢
;

1376 
	mgpgpu_n_cÚ¡_š¢
;

1377 
	mgpgpu_n_·¿m_š¢
;

1378 
	mgpgpu_n_shmem_bkcÚæiù
;

1379 
	mgpgpu_n_ÿche_bkcÚæiù
;

1380 
	mgpgpu_n_šŒaw¬p_mshr_m”ge
;

1381 
	mgpgpu_n_cmem_pÜtcÚæiù
;

1382 
	mgpu_¡®l_shd_mem_b»akdown
[
N_MEM_STAGE_ACCESS_TYPE
][
N_MEM_STAGE_STALL_TYPE
];

1383 
	mgpu_»g_bªk_cÚæiù_¡®ls
;

1384 *
	mshad”_cyşe_di¡ro
;

1385 *
	mÏ¡_shad”_cyşe_di¡ro
;

1386 *
	mnum_w¬ps_issuabË
;

1387 
	mgpgpu_n_¡®l_shd_mem
;

1390 
	mgpgpu_n_mem_»ad_loÿl
;

1391 
	mgpgpu_n_mem_wr™e_loÿl
;

1392 
	mgpgpu_n_mem_‹xtu»
;

1393 
	mgpgpu_n_mem_cÚ¡
;

1394 
	mgpgpu_n_mem_»ad_glob®
;

1395 
	mgpgpu_n_mem_wr™e_glob®
;

1396 
	mgpgpu_n_mem_»ad_š¡
;

1398 
	mgpgpu_n_mem_l2_wr™eback
;

1399 
	mgpgpu_n_mem_l1_wr™e_®loÿ‹
;

1400 
	mgpgpu_n_mem_l2_wr™e_®loÿ‹
;

1402 
	mmade_wr™e_mfs
;

1403 
	mmade_»ad_mfs
;

1405 *
	mgpgpu_n_shmem_bªk_acûss
;

1406 *
	mn_simt_to_mem
;

1407 *
	mn_mem_to_simt
;

1410 şas 
	cshad”_cÜe_¡©s
 : 
public
 
shad”_cÜe_¡©s_pod
 {

1411 
public
:

1412 
	$shad”_cÜe_¡©s
ĞcÚ¡ 
shad”_cÜe_cÚfig
 *
cÚfig
 )

1414 
m_cÚfig
 = 
cÚfig
;

1415 
shad”_cÜe_¡©s_pod
 *
pod
 = 
»š‹½»t_ÿ¡
< shad”_cÜe_¡©s_pod * > ( 
this
->
shad”_cÜe_¡©s_pod_¡¬t
 );

1416 
	`mem£t
(
pod
,0,(
shad”_cÜe_¡©s_pod
));

1417 
shad”_cyşes
=(*è
	`ÿÎoc
(
cÚfig
->
	`num_shad”
(),());

1418 
m_num_sim_š¢
 = (*è
	`ÿÎoc
(
cÚfig
->
	`num_shad”
(),());

1419 
m_num_sim_wš¢
 = (*è
	`ÿÎoc
(
cÚfig
->
	`num_shad”
(),());

1420 
m_Ï¡_num_sim_wš¢
 = (*è
	`ÿÎoc
(
cÚfig
->
	`num_shad”
(),());

1421 
m_Ï¡_num_sim_š¢
 = (*è
	`ÿÎoc
(
cÚfig
->
	`num_shad”
(),());

1422 
m_p–še_duty_cyşe
=(*è
	`ÿÎoc
(
cÚfig
->
	`num_shad”
(),());

1423 
m_num_decoded_š¢
 = (*è
	`ÿÎoc
(
cÚfig
->
	`num_shad”
(),());

1424 
m_num_FPdecoded_š¢
 = (*è
	`ÿÎoc
(
cÚfig
->
	`num_shad”
(),());

1425 
m_num_¡Üequeued_š¢
=(*è
	`ÿÎoc
(
cÚfig
->
	`num_shad”
(),());

1426 
m_num_lßdqueued_š¢
=(*è
	`ÿÎoc
(
cÚfig
->
	`num_shad”
(),());

1427 
m_num_INTdecoded_š¢
 = (*è
	`ÿÎoc
(
cÚfig
->
	`num_shad”
(),());

1428 
m_num_Ÿlu_aûs£s
 = (*è
	`ÿÎoc
(
cÚfig
->
	`num_shad”
(),());

1429 
m_num_å_aûs£s
ğ(*è
	`ÿÎoc
(
cÚfig
->
	`num_shad”
(),());

1430 
m_num_‹x_š¡
ğ(*è
	`ÿÎoc
(
cÚfig
->
	`num_shad”
(),());

1431 
m_num_imul_aûs£s
ğ(*è
	`ÿÎoc
(
cÚfig
->
	`num_shad”
(),());

1432 
m_num_imul24_aûs£s
ğ(*è
	`ÿÎoc
(
cÚfig
->
	`num_shad”
(),());

1433 
m_num_imul32_aûs£s
ğ(*è
	`ÿÎoc
(
cÚfig
->
	`num_shad”
(),());

1434 
m_num_åmul_aûs£s
ğ(*è
	`ÿÎoc
(
cÚfig
->
	`num_shad”
(),());

1435 
m_num_idiv_aûs£s
ğ(*è
	`ÿÎoc
(
cÚfig
->
	`num_shad”
(),());

1436 
m_num_ådiv_aûs£s
ğ(*è
	`ÿÎoc
(
cÚfig
->
	`num_shad”
(),());

1437 
m_num_¥_aûs£s
ğ(*è
	`ÿÎoc
(
cÚfig
->
	`num_shad”
(),());

1438 
m_num_sfu_aûs£s
ğ(*è
	`ÿÎoc
(
cÚfig
->
	`num_shad”
(),());

1439 
m_num_Œªs_aûs£s
ğ(*è
	`ÿÎoc
(
cÚfig
->
	`num_shad”
(),());

1440 
m_num_mem_aûs£s
ğ(*è
	`ÿÎoc
(
cÚfig
->
	`num_shad”
(),());

1441 
m_num_¥_comm™‹d
ğ(*è
	`ÿÎoc
(
cÚfig
->
	`num_shad”
(),());

1442 
m_num_b_h™s
=(*è
	`ÿÎoc
(
cÚfig
->
	`num_shad”
(),());

1443 
m_num_b_acûs£s
=(*è
	`ÿÎoc
(
cÚfig
->
	`num_shad”
(),());

1444 
m_aùive_¥_ÏÃs
ğ(*è
	`ÿÎoc
(
cÚfig
->
	`num_shad”
(),());

1445 
m_aùive_sfu_ÏÃs
ğ(*è
	`ÿÎoc
(
cÚfig
->
	`num_shad”
(),());

1446 
m_aùive_fu_ÏÃs
ğ(*è
	`ÿÎoc
(
cÚfig
->
	`num_shad”
(),());

1447 
m_aùive_fu_mem_ÏÃs
ğ(*è
	`ÿÎoc
(
cÚfig
->
	`num_shad”
(),());

1448 
m_num_sfu_comm™‹d
ğ(*è
	`ÿÎoc
(
cÚfig
->
	`num_shad”
(),());

1449 
m_num_mem_comm™‹d
ğ(*è
	`ÿÎoc
(
cÚfig
->
	`num_shad”
(),());

1450 
m_»ad_»gfe_aûs£s
ğ(*è
	`ÿÎoc
(
cÚfig
->
	`num_shad”
(),());

1451 
m_wr™e_»gfe_aûs£s
ğ(*è
	`ÿÎoc
(
cÚfig
->
	`num_shad”
(),());

1452 
m_nÚ_rf_İ”ªds
=(*è
	`ÿÎoc
(
cÚfig
->
	`num_shad”
(),());

1453 
m_n_div”ge
 = (*è
	`ÿÎoc
(
cÚfig
->
	`num_shad”
(),());

1454 
shad”_cyşe_di¡ro
 = (*è
	`ÿÎoc
(
cÚfig
->
w¬p_size
+3, ());

1455 
Ï¡_shad”_cyşe_di¡ro
 = (*è
	`ÿÎoc
(
m_cÚfig
->
w¬p_size
+3, ());

1457 
n_simt_to_mem
 = (*)
	`ÿÎoc
(
cÚfig
->
	`num_shad”
(), ());

1458 
n_mem_to_simt
 = (*)
	`ÿÎoc
(
cÚfig
->
	`num_shad”
(), ());

1460 
m_outgošg_Œaffic_¡©s
 = 
Ãw
 
	`Œaffic_b»akdown
("coretomem");

1461 
m_šcomšg_Œaffic_¡©s
 = 
Ãw
 
	`Œaffic_b»akdown
("memtocore");

1463 
gpgpu_n_shmem_bªk_acûss
 = (*)
	`ÿÎoc
(
cÚfig
->
	`num_shad”
(), ());

1465 
m_shad”_dyÇmic_w¬p_issue_di¡ro
.
	`»size
Ğ
cÚfig
->
	`num_shad”
() );

1466 
m_shad”_w¬p_¦Ù_issue_di¡ro
.
	`»size
Ğ
cÚfig
->
	`num_shad”
() );

1469 ~
	$shad”_cÜe_¡©s
()

1471 
d–‘e
 
m_outgošg_Œaffic_¡©s
;

1472 
d–‘e
 
m_šcomšg_Œaffic_¡©s
;

1473 
	`ä“
(
m_num_sim_š¢
);

1474 
	`ä“
(
m_num_sim_wš¢
);

1475 
	`ä“
(
m_n_div”ge
);

1476 
	`ä“
(
shad”_cyşe_di¡ro
);

1477 
	`ä“
(
Ï¡_shad”_cyşe_di¡ro
);

1478 
	}
}

1480 
	$Ãw_grid
()

1482 
	}
}

1484 
ev’t_w¬p_issued
Ğ
s_id
, 
w¬p_id
, 
num_issued
, 
dyÇmic_w¬p_id
 );

1486 
visu®iz”_´št
Ğ
gzFe
 
visu®iz”_fe
 );

1488 
	$´št
Ğ
FILE
 *
fout
 ) const;

1490 cÚ¡ 
¡d
::
veùÜ
< std::veùÜ<> >& 
	$g‘_dyÇmic_w¬p_issue
() const

1492  
m_shad”_dyÇmic_w¬p_issue_di¡ro
;

1493 
	}
}

1495 cÚ¡ 
	g¡d
::
veùÜ
< 
¡d
::veùÜ<> >& 
	$g‘_w¬p_¦Ù_issue
() const

1497  
m_shad”_w¬p_¦Ù_issue_di¡ro
;

1498 
	}
}

1500 
	g´iv©e
:

1501 cÚ¡ 
shad”_cÜe_cÚfig
 *
m_cÚfig
;

1503 
Œaffic_b»akdown
 *
	gm_outgošg_Œaffic_¡©s
;

1504 
Œaffic_b»akdown
 *
	gm_šcomšg_Œaffic_¡©s
;

1507 
	g¡d
::
veùÜ
< 
¡d
::veùÜ<> > 
m_shad”_dyÇmic_w¬p_issue_di¡ro
;

1508 
	g¡d
::
veùÜ
<> 
m_Ï¡_shad”_dyÇmic_w¬p_issue_di¡ro
;

1509 
	g¡d
::
veùÜ
< 
¡d
::veùÜ<> > 
m_shad”_w¬p_¦Ù_issue_di¡ro
;

1510 
	g¡d
::
veùÜ
<> 
m_Ï¡_shad”_w¬p_¦Ù_issue_di¡ro
;

1512 
ä›nd
 
şass
 
	gpow”_¡©_t
;

1513 
ä›nd
 
şass
 
	gshad”_cÜe_ùx
;

1514 
ä›nd
 
şass
 
	gld¡_un™
;

1515 
ä›nd
 
şass
 
	gsimt_cÜe_şu¡”
;

1516 
ä›nd
 
şass
 
	gscheduËr_un™
;

1517 
ä›nd
 
şass
 
	gTwoLev–ScheduËr
;

1518 
ä›nd
 
şass
 
	gLoo£RoundRobbšScheduËr
;

1521 şas 
	cshad”_cÜe_mem_ãtch_®loÿtÜ
 : 
public
 
mem_ãtch_®loÿtÜ
 {

1522 
public
:

1523 
	$shad”_cÜe_mem_ãtch_®loÿtÜ
Ğ
cÜe_id
, 
şu¡”_id
, cÚ¡ 
memÜy_cÚfig
 *
cÚfig
 )

1525 
m_cÜe_id
 = 
cÜe_id
;

1526 
m_şu¡”_id
 = 
şu¡”_id
;

1527 
m_memÜy_cÚfig
 = 
cÚfig
;

1529 
mem_ãtch
 *
	$®loc
Ğ
Ãw_addr_ty³
 
addr
, 
mem_acûss_ty³
 
ty³
, 
size
, 
boŞ
 
wr
 ) const

1531 
mem_acûss_t
 
	`acûss
Ğ
ty³
, 
addr
, 
size
, 
wr
 );

1532 
mem_ãtch
 *
mf
 = 
Ãw
 
	`mem_ãtch
Ğ
acûss
,

1533 
NULL
,

1534 
wr
?
WRITE_PACKET_SIZE
:
READ_PACKET_SIZE
,

1536 
m_cÜe_id
,

1537 
m_şu¡”_id
,

1538 
m_memÜy_cÚfig
 );

1539  
mf
;

1540 
	}
}

1542 
mem_ãtch
 *
	$®loc
ĞcÚ¡ 
w¬p_š¡_t
 &
š¡
, cÚ¡ 
mem_acûss_t
 &
acûss
 ) const

1544 
w¬p_š¡_t
 
š¡_cİy
 = 
š¡
;

1545 
mem_ãtch
 *
mf
 = 
Ãw
 
	`mem_ãtch
(
acûss
,

1546 &
š¡_cİy
,

1547 
acûss
.
	`is_wr™e
()?
WRITE_PACKET_SIZE
:
READ_PACKET_SIZE
,

1548 
š¡
.
	`w¬p_id
(),

1549 
m_cÜe_id
,

1550 
m_şu¡”_id
,

1551 
m_memÜy_cÚfig
);

1552  
mf
;

1553 
	}
}

1555 
	g´iv©e
:

1556 
m_cÜe_id
;

1557 
	gm_şu¡”_id
;

1558 cÚ¡ 
memÜy_cÚfig
 *
	gm_memÜy_cÚfig
;

1561 şas 
	cshad”_cÜe_ùx
 : 
public
 
cÜe_t
 {

1562 
public
:

1564 
shad”_cÜe_ùx
Ğ
şass
 
gpgpu_sim
 *
gpu
,

1565 
şass
 
simt_cÜe_şu¡”
 *
şu¡”
,

1566 
shad”_id
,

1567 
c_id
,

1568 cÚ¡ 
shad”_cÜe_cÚfig
 *
cÚfig
,

1569 cÚ¡ 
memÜy_cÚfig
 *
mem_cÚfig
,

1570 
shad”_cÜe_¡©s
 *
¡©s
 );

1574 
cyşe
();

1575 
»š™
(
¡¬t_th»ad
, 
’d_th»ad
, 
boŞ
 
»£t_nÙ_com¶‘ed
 );

1576 
issue_block2cÜe
Ğ
şass
 
k”Ãl_šfo_t
 &
k”Ãl
 );

1577 
ÿche_æush
();

1578 
acû±_ãtch_»¥Ú£
Ğ
mem_ãtch
 *
mf
 );

1579 
acû±_ld¡_un™_»¥Ú£
Ğ
şass
 
mem_ãtch
 * 
mf
 );

1580 
brßdÿ¡_b¬r›r_»duùiÚ
(
ùa_id
, 
b¬_id
,
w¬p_£t_t
 
w¬ps
);

1581 
	$£t_k”Ãl
Ğ
k”Ãl_šfo_t
 *
k
 )

1583 
	`as£¹
(
k
);

1584 
m_k”Ãl
=
k
;

1585 
k
->
	`šc_ruÂšg
();

1586 
	`´štf
("GPGPU-Sim uArch: Shad” %d bšdØk”ÃÈ%u \'%s\'\n", 
m_sid
, 
m_k”Ãl
->
	`g‘_uid
(),

1587 
m_k”Ãl
->
	`Çme
().
	`c_¡r
() );

1591 
boŞ
 
	$ãtch_un™_»¥Ú£_bufãr_fuÎ
() const;

1592 
boŞ
 
	$ld¡_un™_»¥Ú£_bufãr_fuÎ
() const;

1593 
	$g‘_nÙ_com¶‘ed
(ècÚ¡ {  
m_nÙ_com¶‘ed
; 
	}
}

1594 
	$g‘_n_aùive_ùa
(ècÚ¡ {  
m_n_aùive_ùa
; 
	}
}

1595 
	$i§ùive
(ècÚ¡ {if(
m_n_aùive_ùa
>0è 1;  0;
	}
}

1596 
k”Ãl_šfo_t
 *
	$g‘_k”Ãl
(è{  
m_k”Ãl
; 
	}
}

1597 
	$g‘_sid
(ècÚ¡ { 
m_sid
;
	}
}

1601 
vœtu®
 
w¬p_ex™
Ğ
w¬p_id
 );

1604 
vœtu®
 
boŞ
 
	$w¬p_wa™šg_©_b¬r›r
Ğ
w¬p_id
 ) const;

1605 
	$g‘_pdom_¡ack_tİ_šfo
Ğ
tid
, *
pc
, *
½c
 ) const;

1609 
	`mem_š¡ruùiÚ_¡©s
(cÚ¡ 
w¬p_š¡_t
 &
š¡
);

1610 
	`deüem’t_©omic_couÁ
Ğ
wid
, 
n
 );

1611 
	$šc_¡Üe_»q
Ğ
w¬p_id
è{ 
m_w¬p
[w¬p_id].
	`šc_¡Üe_»q
(); 
	}
}

1612 
	$dec_š¡_š_p–še
Ğ
w¬p_id
 ) { 
m_w¬p
[w¬p_id].
	`dec_š¡_š_p–še
(); 
	}
}

1613 
¡Üe_ack
Ğ
şass
 
mem_ãtch
 *
mf
 );

1614 
boŞ
 
w¬p_wa™šg_©_mem_b¬r›r
Ğ
w¬p_id
 );

1615 
£t_max_ùa
ĞcÚ¡ 
k”Ãl_šfo_t
 &
k”Ãl
 );

1616 
w¬p_š¡_com¶‘e
(cÚ¡ 
w¬p_š¡_t
 &
š¡
);

1619 
	g¡d
::
li¡
<> 
	$g‘_»gs_wr™‹n
ĞcÚ¡ 
š¡_t
 &
fvt
 ) const;

1620 cÚ¡ 
shad”_cÜe_cÚfig
 *
	$g‘_cÚfig
(ècÚ¡ {  
m_cÚfig
; 
	}
}

1621 
´št_ÿche_¡©s
Ğ
FILE
 *
å
, & 
dl1_acûs£s
, & 
dl1_mis£s
 );

1623 
g‘_ÿche_¡©s
(
ÿche_¡©s
 &
cs
);

1624 
	$g‘_L1I_sub_¡©s
(
ÿche_sub_¡©s
 &
css
) const;

1625 
	$g‘_L1D_sub_¡©s
(
ÿche_sub_¡©s
 &
css
) const;

1626 
	$g‘_L1C_sub_¡©s
(
ÿche_sub_¡©s
 &
css
) const;

1627 
	$g‘_L1T_sub_¡©s
(
ÿche_sub_¡©s
 &
css
) const;

1629 
	$g‘_iút_pow”_¡©s
(&
n_simt_to_mem
, &
n_mem_to_simt
) const;

1632 
	$di¥Ïy_simt_¡©e
(
FILE
 *
fout
, 
mask
 ) const;

1633 
	$di¥Ïy_p–še
Ğ
FILE
 *
fout
, 
´št_mem
, 
mask3b™
 ) const;

1635 
	$šşßd_¡©
(è{
m_¡©s
->
m_num_lßdqueued_š¢
[
m_sid
]++;
	}
}

1636 
	$šc¡Üe_¡©
(è{
m_¡©s
->
m_num_¡Üequeued_š¢
[
m_sid
]++;
	}
}

1637 
	$šcŸlu_¡©
(
aùive_couÁ
,
Ï‹ncy
) {

1638 if(
m_cÚfig
->
gpgpu_şock_g©ed_ÏÃs
==
çl£
){

1639 
m_¡©s
->
m_num_Ÿlu_aûs£s
[
m_sid
]=m_¡©s->m_num_Ÿlu_aûs£s[m_sid]+
aùive_couÁ
*
Ï‹ncy


1640 + 
	`šaùive_ÏÃs_acûs£s_nÚsfu
(
aùive_couÁ
, 
Ï‹ncy
);

1642 
m_¡©s
->
m_num_Ÿlu_aûs£s
[
m_sid
]=m_¡©s->m_num_Ÿlu_aûs£s[m_sid]+
aùive_couÁ
*
Ï‹ncy
;

1644 
	}
}

1645 
	$šùex_¡©
(
aùive_couÁ
,
Ï‹ncy
){

1646 
m_¡©s
->
m_num_‹x_š¡
[
m_sid
]=m_¡©s->m_num_‹x_š¡[m_sid]+
aùive_couÁ
*
Ï‹ncy
;

1647 
	}
}

1648 
	$šcimul_¡©
(
aùive_couÁ
,
Ï‹ncy
) {

1649 if(
m_cÚfig
->
gpgpu_şock_g©ed_ÏÃs
==
çl£
){

1650 
m_¡©s
->
m_num_imul_aûs£s
[
m_sid
]=m_¡©s->m_num_imul_aûs£s[m_sid]+
aùive_couÁ
*
Ï‹ncy


1651 + 
	`šaùive_ÏÃs_acûs£s_nÚsfu
(
aùive_couÁ
, 
Ï‹ncy
);

1653 
m_¡©s
->
m_num_imul_aûs£s
[
m_sid
]=m_¡©s->m_num_imul_aûs£s[m_sid]+
aùive_couÁ
*
Ï‹ncy
;

1655 
	}
}

1656 
	$šcimul24_¡©
(
aùive_couÁ
,
Ï‹ncy
) {

1657 if(
m_cÚfig
->
gpgpu_şock_g©ed_ÏÃs
==
çl£
){

1658 
m_¡©s
->
m_num_imul24_aûs£s
[
m_sid
]=m_¡©s->m_num_imul24_aûs£s[m_sid]+
aùive_couÁ
*
Ï‹ncy


1659 + 
	`šaùive_ÏÃs_acûs£s_nÚsfu
(
aùive_couÁ
, 
Ï‹ncy
);

1661 
m_¡©s
->
m_num_imul24_aûs£s
[
m_sid
]=m_¡©s->m_num_imul24_aûs£s[m_sid]+
aùive_couÁ
*
Ï‹ncy
;

1663 
	}
}

1664 
	$šcimul32_¡©
(
aùive_couÁ
,
Ï‹ncy
) {

1665 if(
m_cÚfig
->
gpgpu_şock_g©ed_ÏÃs
==
çl£
){

1666 
m_¡©s
->
m_num_imul32_aûs£s
[
m_sid
]=m_¡©s->m_num_imul32_aûs£s[m_sid]+
aùive_couÁ
*
Ï‹ncy


1667 + 
	`šaùive_ÏÃs_acûs£s_sfu
(
aùive_couÁ
, 
Ï‹ncy
);

1669 
m_¡©s
->
m_num_imul32_aûs£s
[
m_sid
]=m_¡©s->m_num_imul32_aûs£s[m_sid]+
aùive_couÁ
*
Ï‹ncy
;

1672 
	}
}

1673 
	$šcidiv_¡©
(
aùive_couÁ
,
Ï‹ncy
) {

1674 if(
m_cÚfig
->
gpgpu_şock_g©ed_ÏÃs
==
çl£
){

1675 
m_¡©s
->
m_num_idiv_aûs£s
[
m_sid
]=m_¡©s->m_num_idiv_aûs£s[m_sid]+
aùive_couÁ
*
Ï‹ncy


1676 + 
	`šaùive_ÏÃs_acûs£s_sfu
(
aùive_couÁ
, 
Ï‹ncy
);

1678 
m_¡©s
->
m_num_idiv_aûs£s
[
m_sid
]=m_¡©s->m_num_idiv_aûs£s[m_sid]+
aùive_couÁ
*
Ï‹ncy
;

1680 
	}
}

1681 
	$šcå®u_¡©
(
aùive_couÁ
,
Ï‹ncy
) {

1682 if(
m_cÚfig
->
gpgpu_şock_g©ed_ÏÃs
==
çl£
){

1683 
m_¡©s
->
m_num_å_aûs£s
[
m_sid
]=m_¡©s->m_num_å_aûs£s[m_sid]+
aùive_couÁ
*
Ï‹ncy


1684 + 
	`šaùive_ÏÃs_acûs£s_nÚsfu
(
aùive_couÁ
, 
Ï‹ncy
);

1686 
m_¡©s
->
m_num_å_aûs£s
[
m_sid
]=m_¡©s->m_num_å_aûs£s[m_sid]+
aùive_couÁ
*
Ï‹ncy
;

1688 
	}
}

1689 
	$šcåmul_¡©
(
aùive_couÁ
,
Ï‹ncy
) {

1691 if(
m_cÚfig
->
gpgpu_şock_g©ed_ÏÃs
==
çl£
){

1692 
m_¡©s
->
m_num_åmul_aûs£s
[
m_sid
]=m_¡©s->m_num_åmul_aûs£s[m_sid]+
aùive_couÁ
*
Ï‹ncy


1693 + 
	`šaùive_ÏÃs_acûs£s_nÚsfu
(
aùive_couÁ
, 
Ï‹ncy
);

1695 
m_¡©s
->
m_num_åmul_aûs£s
[
m_sid
]=m_¡©s->m_num_åmul_aûs£s[m_sid]+
aùive_couÁ
*
Ï‹ncy
;

1697 
	}
}

1698 
	$šcådiv_¡©
(
aùive_couÁ
,
Ï‹ncy
) {

1699 if(
m_cÚfig
->
gpgpu_şock_g©ed_ÏÃs
==
çl£
){

1700 
m_¡©s
->
m_num_ådiv_aûs£s
[
m_sid
]=m_¡©s->m_num_ådiv_aûs£s[m_sid]+
aùive_couÁ
*
Ï‹ncy


1701 + 
	`šaùive_ÏÃs_acûs£s_sfu
(
aùive_couÁ
, 
Ï‹ncy
);

1703 
m_¡©s
->
m_num_ådiv_aûs£s
[
m_sid
]=m_¡©s->m_num_ådiv_aûs£s[m_sid]+
aùive_couÁ
*
Ï‹ncy
;

1705 
	}
}

1706 
	$šù¿ns_¡©
(
aùive_couÁ
,
Ï‹ncy
) {

1707 if(
m_cÚfig
->
gpgpu_şock_g©ed_ÏÃs
==
çl£
){

1708 
m_¡©s
->
m_num_Œªs_aûs£s
[
m_sid
]=m_¡©s->m_num_Œªs_aûs£s[m_sid]+
aùive_couÁ
*
Ï‹ncy


1709 + 
	`šaùive_ÏÃs_acûs£s_sfu
(
aùive_couÁ
, 
Ï‹ncy
);

1711 
m_¡©s
->
m_num_Œªs_aûs£s
[
m_sid
]=m_¡©s->m_num_Œªs_aûs£s[m_sid]+
aùive_couÁ
*
Ï‹ncy
;

1713 
	}
}

1715 
	$šcsfu_¡©
(
aùive_couÁ
,
Ï‹ncy
è{
m_¡©s
->
m_num_sfu_aûs£s
[
m_sid
]=m_¡©s->m_num_sfu_aûs£s[m_sid]+aùive_couÁ*Ï‹ncy;
	}
}

1716 
	$šc¥_¡©
(
aùive_couÁ
,
Ï‹ncy
è{
m_¡©s
->
m_num_¥_aûs£s
[
m_sid
]=m_¡©s->m_num_¥_aûs£s[m_sid]+aùive_couÁ*Ï‹ncy;
	}
}

1717 
	$šcmem_¡©
(
aùive_couÁ
,
Ï‹ncy
) {

1718 if(
m_cÚfig
->
gpgpu_şock_g©ed_ÏÃs
==
çl£
){

1719 
m_¡©s
->
m_num_mem_aûs£s
[
m_sid
]=m_¡©s->m_num_mem_aûs£s[m_sid]+
aùive_couÁ
*
Ï‹ncy


1720 + 
	`šaùive_ÏÃs_acûs£s_nÚsfu
(
aùive_couÁ
, 
Ï‹ncy
);

1722 
m_¡©s
->
m_num_mem_aûs£s
[
m_sid
]=m_¡©s->m_num_mem_aûs£s[m_sid]+
aùive_couÁ
*
Ï‹ncy
;

1724 
	}
}

1725 
šûxec¡©
(
w¬p_š¡_t
 *&
š¡
);

1727 
	$šüegfe_»ads
(
aùive_couÁ
è{
m_¡©s
->
m_»ad_»gfe_aûs£s
[
m_sid
]=m_¡©s->m_»ad_»gfe_aûs£s[m_sid]+aùive_couÁ;
	}
}

1728 
	$šüegfe_wr™es
(
aùive_couÁ
){
m_¡©s
->
m_wr™e_»gfe_aûs£s
[
m_sid
]=m_¡©s->m_wr™e_»gfe_aûs£s[m_sid]+aùive_couÁ;
	}
}

1729 
	$šúÚ_rf_İ”ªds
(
aùive_couÁ
){
m_¡©s
->
m_nÚ_rf_İ”ªds
[
m_sid
]=m_¡©s->m_nÚ_rf_İ”ªds[m_sid]+aùive_couÁ;
	}
}

1731 
	$šc¥aùiv–ªes_¡©
(
aùive_couÁ
è{
m_¡©s
->
m_aùive_¥_ÏÃs
[
m_sid
]=m_¡©s->m_aùive_¥_ÏÃs[m_sid]+aùive_couÁ;
	}
}

1732 
	$šcsfuaùiv–ªes_¡©
(
aùive_couÁ
è{
m_¡©s
->
m_aùive_sfu_ÏÃs
[
m_sid
]=m_¡©s->m_aùive_sfu_ÏÃs[m_sid]+aùive_couÁ;
	}
}

1733 
	$šcfuaùiv–ªes_¡©
(
aùive_couÁ
è{
m_¡©s
->
m_aùive_fu_ÏÃs
[
m_sid
]=m_¡©s->m_aùive_fu_ÏÃs[m_sid]+aùive_couÁ;
	}
}

1734 
	$šcfumemaùiv–ªes_¡©
(
aùive_couÁ
è{
m_¡©s
->
m_aùive_fu_mem_ÏÃs
[
m_sid
]=m_¡©s->m_aùive_fu_mem_ÏÃs[m_sid]+aùive_couÁ;
	}
}

1736 
	$šc_simt_to_mem
(
n_æ™s
){ 
m_¡©s
->
n_simt_to_mem
[
m_sid
] +ğn_æ™s; 
	}
}

1737 
boŞ
 
check_if_nÚ_»Ëa£d_»duùiÚ_b¬r›r
(
w¬p_š¡_t
 &
š¡
);

1739 
	g´iv©e
:

1740 
	$šaùive_ÏÃs_acûs£s_sfu
(
aùive_couÁ
,
Ï‹ncy
){

1741  ( ((32-
aùive_couÁ
)>>1)*
Ï‹ncy
) + ( ((32-active_count)>>3)*latency) + ( ((32-active_count)>>3)*latency);

1742 
	}
}

1743 
	$šaùive_ÏÃs_acûs£s_nÚsfu
(
aùive_couÁ
,
Ï‹ncy
){

1744  ( ((32-
aùive_couÁ
)>>1)*
Ï‹ncy
);

1745 
	}
}

1747 
‹¡_»s_bus
(
Ï‹ncy
);

1748 
š™_w¬ps
(
ùa_id
, 
¡¬t_th»ad
, 
’d_th»ad
);

1749 
vœtu®
 
checkExecutiÚStusAndUpd©e
(
w¬p_š¡_t
 &
š¡
, 
t
, 
tid
);

1750 
add»ss_ty³
 
	$Ãxt_pc
Ğ
tid
 ) const;

1751 
	`ãtch
();

1752 
	`»gi¡”_ùa_th»ad_ex™
Ğ
ùa_num
 );

1754 
	`decode
();

1756 
	`issue
();

1757 
ä›nd
 
şass
 
scheduËr_un™
;

1758 
ä›nd
 
şass
 
TwoLev–ScheduËr
;

1759 
ä›nd
 
şass
 
Loo£RoundRobbšScheduËr
;

1760 
	`issue_w¬p
Ğ
»gi¡”_£t
& 
w¬p
, cÚ¡ 
w¬p_š¡_t
 *
pI
, cÚ¡ 
aùive_mask_t
 &
aùive_mask
, 
w¬p_id
 );

1761 
	`func_exec_š¡
Ğ
w¬p_š¡_t
 &
š¡
 );

1764 
	`Œª¦©e_loÿl_memaddr
Ğ
add»ss_ty³
 
loÿÏddr
, 
tid
, 
num_shad”
, 
d©asize
, 
Ãw_addr_ty³
* 
Œª¦©ed_addrs
 );

1766 
	`»ad_İ”ªds
();

1768 
	`execu‹
();

1770 
	`wr™eback
();

1773 
	$dump_w¬p_¡©e
Ğ
FILE
 *
fout
 ) const;

1774 
	$´št_¡age
(
¡age
, 
FILE
 *
fout
) const;

1775 
m_Ï¡_š¡_gpu_sim_cyşe
;

1776 
m_Ï¡_š¡_gpu_tÙ_sim_cyşe
;

1779 
m_sid
;

1780 
m_c
;

1781 cÚ¡ 
shad”_cÜe_cÚfig
 *
m_cÚfig
;

1782 cÚ¡ 
memÜy_cÚfig
 *
m_memÜy_cÚfig
;

1783 
şass
 
simt_cÜe_şu¡”
 *
m_şu¡”
;

1786 
shad”_cÜe_¡©s
 *
m_¡©s
;

1789 
m_n_aùive_ùa
;

1790 
m_ùa_¡©us
[
MAX_CTA_PER_SHADER
];

1791 
m_nÙ_com¶‘ed
;

1792 
¡d
::
b™£t
<
MAX_THREAD_PER_SM
> 
m_aùive_th»ads
;

1795 
th»ad_ùx_t
 *
m_th»adS‹
;

1798 
mem_ãtch_š‹rçû
 *
m_iút
;

1799 
shad”_cÜe_mem_ãtch_®loÿtÜ
 *
m_mem_ãtch_®loÿtÜ
;

1802 
»ad_Úly_ÿche
 *
m_L1I
;

1803 
m_Ï¡_w¬p_ãtched
;

1806 
¡d
::
veùÜ
<
shd_w¬p_t
> 
m_w¬p
;

1807 
b¬r›r_£t_t
 
m_b¬r›rs
;

1808 
iãtch_bufãr_t
 
m_š¡_ãtch_bufãr
;

1809 
¡d
::
veùÜ
<
»gi¡”_£t
> 
m_p–še_»g
;

1810 
ScÜebßrd
 *
m_scÜebßrd
;

1811 
İndcŞl_rfu_t
 
m_İ”ªd_cŞËùÜ
;

1814 
¡d
::
veùÜ
<
scheduËr_un™
*> 
scheduËrs
;

1817 
m_num_funùiÚ_un™s
;

1818 
¡d
::
veùÜ
<
p–še_¡age_Çme_t
> 
m_di¥©ch_pÜt
;

1819 
¡d
::
veùÜ
<
p–še_¡age_Çme_t
> 
m_issue_pÜt
;

1820 
¡d
::
veùÜ
<
simd_funùiÚ_un™
*> 
m_fu
;

1821 
ld¡_un™
 *
m_ld¡_un™
;

1822 cÚ¡ 
MAX_ALU_LATENCY
 = 512;

1823 
num_»suÉ_bus
;

1824 
¡d
::
veùÜ
< std::
b™£t
<
MAX_ALU_LATENCY
>* > 
m_»suÉ_bus
;

1827 
k”Ãl_max_ùa_³r_shad”
;

1828 
k”Ãl_·dded_th»ads_³r_ùa
;

1833 
m_dyÇmic_w¬p_id
;

1834 
	}
};

1836 şas 
	csimt_cÜe_şu¡”
 {

1837 
	mpublic
:

1838 
simt_cÜe_şu¡”
Ğ
şass
 
gpgpu_sim
 *
gpu
,

1839 
şu¡”_id
,

1840 cÚ¡ 
shad”_cÜe_cÚfig
 *
cÚfig
,

1841 cÚ¡ 
memÜy_cÚfig
 *
mem_cÚfig
,

1842 
shad”_cÜe_¡©s
 *
¡©s
,

1843 
memÜy_¡©s_t
 *
m¡©s
 );

1845 
cÜe_cyşe
();

1846 
iút_cyşe
();

1848 
»š™
();

1849 
issue_block2cÜe
();

1850 
ÿche_æush
();

1851 
boŞ
 
iút_šjeùiÚ_bufãr_fuÎ
(
size
, boŞ 
wr™e
);

1852 
iút_šjeù_»que¡_·ck‘
(
şass
 
mem_ãtch
 *
mf
);

1855 
boŞ
 
	$»¥Ú£_queue_fuÎ
() {

1856  ( 
m_»¥Ú£_fifo
.
	`size
(è>ğ
m_cÚfig
->
n_simt_ejeùiÚ_bufãr_size
 );

1858 
	$push_»¥Ú£_fifo
(
şass
 
mem_ãtch
 *
mf
) {

1859 
m_»¥Ú£_fifo
.
	`push_back
(
mf
);

1860 
	}
}

1862 
	$g‘_pdom_¡ack_tİ_šfo
Ğ
sid
, 
tid
, *
pc
, *
½c
 ) const;

1863 
	`max_ùa
ĞcÚ¡ 
k”Ãl_šfo_t
 &
k”Ãl
 );

1864 
	$g‘_nÙ_com¶‘ed
() const;

1865 
	$´št_nÙ_com¶‘ed
Ğ
FILE
 *
å
 ) const;

1866 
	$g‘_n_aùive_ùa
() const;

1867 
	$g‘_n_aùive_sms
() const;

1868 
gpgpu_sim
 *
	$g‘_gpu
(è{  
m_gpu
; 
	}
}

1870 
di¥Ïy_p–še
Ğ
sid
, 
FILE
 *
fout
, 
´št_mem
, 
mask
 );

1871 
	$´št_ÿche_¡©s
Ğ
FILE
 *
å
, & 
dl1_acûs£s
, & 
dl1_mis£s
 ) const;

1873 
	$g‘_ÿche_¡©s
(
ÿche_¡©s
 &
cs
) const;

1874 
	$g‘_L1I_sub_¡©s
(
ÿche_sub_¡©s
 &
css
) const;

1875 
	$g‘_L1D_sub_¡©s
(
ÿche_sub_¡©s
 &
css
) const;

1876 
	$g‘_L1C_sub_¡©s
(
ÿche_sub_¡©s
 &
css
) const;

1877 
	$g‘_L1T_sub_¡©s
(
ÿche_sub_¡©s
 &
css
) const;

1879 
	$g‘_iút_¡©s
(&
n_simt_to_mem
, &
n_mem_to_simt
) const;

1881 
´iv©e
:

1882 
m_şu¡”_id
;

1883 
gpgpu_sim
 *
m_gpu
;

1884 cÚ¡ 
shad”_cÜe_cÚfig
 *
m_cÚfig
;

1885 
shad”_cÜe_¡©s
 *
m_¡©s
;

1886 
memÜy_¡©s_t
 *
m_memÜy_¡©s
;

1887 
shad”_cÜe_ùx
 **
m_cÜe
;

1889 
m_ùa_issue_Ãxt_cÜe
;

1890 
¡d
::
li¡
<> 
m_cÜe_sim_Üd”
;

1891 
¡d
::
li¡
<
mem_ãtch
*> 
m_»¥Ú£_fifo
;

1892 
	}
};

1894 şas 
	cshad”_memÜy_š‹rçû
 : 
public
 
mem_ãtch_š‹rçû
 {

1895 
public
:

1896 
	$shad”_memÜy_š‹rçû
Ğ
shad”_cÜe_ùx
 *
cÜe
, 
simt_cÜe_şu¡”
 *
şu¡”
 ) { 
m_cÜe
=cÜe; 
m_şu¡”
=cluster; }

1897 
vœtu®
 
boŞ
 
	$fuÎ
Ğ
size
, 
boŞ
 
wr™e
 ) const

1899  
m_şu¡”
->
	`iút_šjeùiÚ_bufãr_fuÎ
(
size
,
wr™e
);

1900 
	}
}

1901 
vœtu®
 
	$push
(
mem_ãtch
 *
mf
)

1903 
m_cÜe
->
	`šc_simt_to_mem
(
mf
->
	`g‘_num_æ™s
(
Œue
));

1904 
m_şu¡”
->
	`iút_šjeù_»que¡_·ck‘
(
mf
);

1905 
	}
}

1906 
	g´iv©e
:

1907 
shad”_cÜe_ùx
 *
m_cÜe
;

1908 
simt_cÜe_şu¡”
 *
	gm_şu¡”
;

1911 şas 
	c³rãù_memÜy_š‹rçû
 : 
public
 
mem_ãtch_š‹rçû
 {

1912 
public
:

1913 
	$³rãù_memÜy_š‹rçû
Ğ
shad”_cÜe_ùx
 *
cÜe
, 
simt_cÜe_şu¡”
 *
şu¡”
 ) { 
m_cÜe
=cÜe; 
m_şu¡”
=cluster; }

1914 
vœtu®
 
boŞ
 
	$fuÎ
Ğ
size
, 
boŞ
 
wr™e
) const

1916  
m_şu¡”
->
	`»¥Ú£_queue_fuÎ
();

1917 
	}
}

1918 
vœtu®
 
	$push
(
mem_ãtch
 *
mf
)

1920 iàĞ
mf
 && mf->
	`i§tomic
() )

1921 
mf
->
	`do_©omic
();

1922 
m_cÜe
->
	`šc_simt_to_mem
(
mf
->
	`g‘_num_æ™s
(
Œue
));

1923 
m_şu¡”
->
	`push_»¥Ú£_fifo
(
mf
);

1924 
	}
}

1925 
	g´iv©e
:

1926 
shad”_cÜe_ùx
 *
m_cÜe
;

1927 
simt_cÜe_şu¡”
 *
	gm_şu¡”
;

1931 
šlše
 
	gscheduËr_un™
::
	$g‘_sid
(ècÚ¡ {  
m_shad”
->
	`g‘_sid
(); 
	}
}

	@shader_trace.h

29 #iâdeà
__SHADER_TRACE_H__


30 
	#__SHADER_TRACE_H__


	)

32 
	~"../Œaû.h
"

35 #ià
TRACING_ON


37 
	#SHADER_PRINT_STR
 
SIM_PRINT_STR
 "CÜ%d - "

	)

38 
	#SCHED_PRINT_STR
 
SHADER_PRINT_STR
 "ScheduË¸%d - "

	)

39 
	#SHADER_DTRACE
(
x
è(
	`DTRACE
(xè&& (
T¿û
::
§m¶šg_cÜe
 =ğ
	`g‘_sid
()\

40 || 
T¿û
::
§m¶šg_cÜe
 =ğ-1))

	)

44 
	#SHADER_DPRINTF
(
x
, ...) do {\

45 ià(
	`SHADER_DTRACE
(
x
)) {\

46 
	`´štf
Ğ
SHADER_PRINT_STR
,\

47 
gpu_sim_cyşe
 + 
gpu_tÙ_sim_cyşe
,\

48 
T¿û
::
Œaû_¡»ams_¡r
[T¿û::
x
],\

49 
	`g‘_sid
() );\

50 
	`´štf
(
__VA_ARGS__
);\

52 } 0)

	)

56 
	#SCHED_DPRINTF
(...) do {\

57 ià(
	`SHADER_DTRACE
(
WARP_SCHEDULER
)) {\

58 
	`´štf
Ğ
SCHED_PRINT_STR
,\

59 
gpu_sim_cyşe
 + 
gpu_tÙ_sim_cyşe
,\

60 
T¿û
::
Œaû_¡»ams_¡r
[T¿û::
WARP_SCHEDULER
],\

61 
	`g‘_sid
(),\

62 
m_id
 );\

63 
	`´štf
(
__VA_ARGS__
);\

65 } 0)

	)

69 
	#SHADER_DTRACE
(
x
è(
çl£
)

	)

70 
	#SHADER_DPRINTF
(
x
, ...èdØ{} 0)

	)

71 
	#SCHED_DPRINTF
(
x
, ...èdØ{} 0)

	)

	@stack.cc

28 
	~"¡ack.h
"

30 
	~<¡dlib.h
>

31 
	~<as£¹.h
>

33 
	$push_¡ack
(
Sck
 *
S
, 
add»ss_ty³
 
v®
) {

34 
	`as£¹
(
S
->
tİ
 < S->
max_size
);

35 
S
->
v
[S->
tİ
] = 
v®
;

36 (
S
->
tİ
)++;

38 
	}
}

40 
add»ss_ty³
 
	$pİ_¡ack
(
Sck
 *
S
) {

41 (
S
->
tİ
)--;

42 (
S
->
v
[S->
tİ
]);

43 
	}
}

45 
add»ss_ty³
 
	$tİ_¡ack
(
Sck
 *
S
) {

46 
	`as£¹
(
S
->
tİ
 >= 1);

47 (
S
->
v
[S->
tİ
 - 1]);

48 
	}
}

50 
Sck
* 
	$Ãw_¡ack
(
size
) {

51 
Sck
* 
S
;

52 
S
 = (
Sck
*)
	`m®loc
((Stack));

53 
S
->
max_size
 = 
size
;

54 
S
->
tİ
 = 0;

55 
S
->
v
 = (
add»ss_ty³
*)
	`ÿÎoc
(
size
, (address_type));

56  
S
;

57 
	}
}

59 
	$ä“_¡ack
(
Sck
 *
S
) {

60 
	`ä“
(
S
->
v
);

61 
	`ä“
(
S
);

62 
	}
}

64 
	$size_¡ack
(
Sck
 *
S
) {

65  
S
->
tİ
;

66 
	}
}

68 
	$fuÎ_¡ack
(
Sck
 *
S
) {

69  
S
->
tİ
 >ğS->
max_size
;

70 
	}
}

72 
	$em±y_¡ack
(
Sck
 *
S
) {

73  
S
->
tİ
 == 0;

74 
	}
}

76 
	$–em’t_exi¡_¡ack
(
Sck
 *
S
, 
add»ss_ty³
 
v®ue
) {

77 
i
;

78 
i
 = 0; i < 
S
->
tİ
; ++i) {

79 ià(
v®ue
 =ğ
S
->
v
[
i
]) {

84 
	}
}

86 
	$»£t_¡ack
(
Sck
 *
S
) {

87 
S
->
tİ
 = 0;

88 
	}
}

	@stack.h

28 #iâdeà
_MY_STACK_


29 
	#_MY_STACK_


	)

31 
	~"../ab¡¿ù_h¬dw¬e_mod–.h
"

34 
add»ss_ty³
 *
	mv
;

35 
	mmax_size
;

36 
	mtİ
;

37 } 
	tSck
;

39 
push_¡ack
(
Sck
 *
S
, 
add»ss_ty³
 
v®
);

40 
add»ss_ty³
 
pİ_¡ack
(
Sck
 *
S
);

41 
add»ss_ty³
 
tİ_¡ack
(
Sck
 *
S
);

42 
Sck
* 
Ãw_¡ack
(
size
);

43 
ä“_¡ack
(
Sck
 *
S
);

44 
size_¡ack
(
Sck
 *
S
);

45 
fuÎ_¡ack
(
Sck
 *
S
);

46 
em±y_¡ack
(
Sck
 *
S
);

47 
–em’t_exi¡_¡ack
(
Sck
 *
S
, 
add»ss_ty³
 
v®ue
);

48 
»£t_¡ack
(
Sck
 *
S
);

	@stat-tool.cc

28 
	~"¡©-toŞ.h
"

30 
	~<¡dio.h
>

31 
	~<¡dlib.h
>

32 
	~<as£¹.h
>

33 
	~<zlib.h
>

34 
	~<¡ršg
>

35 
	~<li¡
>

36 
	~<veùÜ
>

37 
	~<m­
>

38 
	~<®gÜ™hm
>

39 
	~<¡ršg
>

43 
	gmš_¢­_shÙ_š‹rv®
 = 0;

44 
	gÃxt_¢­_shÙ_cyşe
 = 0;

45 
	g¡d
::
li¡
<
¢­_shÙ_Œigg”
*> 
li¡_ss_Œigg”
;

47 
	$add_¢­_shÙ_Œigg”
 (
¢­_shÙ_Œigg”
* 
ss_Œigg”
)

50 ià(
mš_¢­_shÙ_š‹rv®
 =ğ0 || mš_¢­_shÙ_š‹rv® > 
ss_Œigg”
->
	`g‘_š‹rv®
()) {

51 
mš_¢­_shÙ_š‹rv®
 = 
ss_Œigg”
->
	`g‘_š‹rv®
();

52 
Ãxt_¢­_shÙ_cyşe
 = 
mš_¢­_shÙ_š‹rv®
;

54 
li¡_ss_Œigg”
.
	`push_back
(
ss_Œigg”
);

55 
	}
}

57 
	$»move_¢­_shÙ_Œigg”
 (
¢­_shÙ_Œigg”
* 
ss_Œigg”
)

59 
li¡_ss_Œigg”
.
	`»move
(
ss_Œigg”
);

60 
	}
}

62 
	$Œy_¢­_shÙ
 (
cu¼’t_cyşe
)

64 ià(
mš_¢­_shÙ_š‹rv®
 == 0) ;

65 ià(
cu¼’t_cyşe
 !ğ
Ãxt_¢­_shÙ_cyşe
) ;

67 
¡d
::
li¡
<
¢­_shÙ_Œigg”
*>::
™”©Ü
 
ss_Œigg”_™”
 = 
li¡_ss_Œigg”
.
	`begš
();

68 ; 
ss_Œigg”_™”
 !ğ
li¡_ss_Œigg”
.
	`’d
(); ++ss_trigger_iter) {

69 (*
ss_Œigg”_™”
)->
	`¢­_shÙ
(
cu¼’t_cyşe
);

71 
Ãxt_¢­_shÙ_cyşe
 = 
cu¼’t_cyşe
 + 
mš_¢­_shÙ_š‹rv®
;

72 
	}
}

76 
	g¥l_š‹rv®
 = 0;

77 
	gÃxt_¥l_cyşe
 = 0;

78 
	g¡d
::
li¡
<
¥l_log_š‹rçû
*> 
li¡_¥l_log
;

80 
	$add_¥l_log
 (
¥l_log_š‹rçû
* 
¥l_log
)

82 
li¡_¥l_log
.
	`push_back
(
¥l_log
);

83 
	}
}

85 
	$»move_¥l_log
 (
¥l_log_š‹rçû
* 
¥l_log
)

87 
li¡_¥l_log
.
	`»move
(
¥l_log
);

88 
	}
}

90 
	$£t_¥l_š‹rv®
 (
š‹rv®
)

92 
¥l_š‹rv®
 = 
š‹rv®
;

93 
Ãxt_¥l_cyşe
 = 
¥l_š‹rv®
;

94 
	}
}

96 
	$¥l_log_to_fe
 (
FILE
 *
fout
, 
fš®
, 
cu¼’t_cyşe
)

98 ià(!
fš®
 && 
¥l_š‹rv®
 == 0) ;

99 ià(!
fš®
 && 
cu¼’t_cyşe
 <ğ
Ãxt_¥l_cyşe
) ;

101 
	`årštf
(
fout
, "\n");

102 
¡d
::
li¡
<
¥l_log_š‹rçû
*>::
™”©Ü
 
i_¥l_log
 = 
li¡_¥l_log
.
	`begš
();

103 ; 
i_¥l_log
 !ğ
li¡_¥l_log
.
	`’d
(); ++i_spill_log) {

104 (*
i_¥l_log
)->
	`¥l
(
fout
, 
fš®
);

106 
	`fæush
(
fout
);

108 
Ãxt_¥l_cyşe
 = 
cu¼’t_cyşe
 + 
¥l_š‹rv®
;

109 
	}
}

113 
Œª¦©e_pc_to_±xlš’o
(
pc
);

115 
	gn_th»ad_CFlogg”s
 = 0;

116 
th»ad_CFloÿl™y
** 
	gth»ad_CFlogg”
 = 
NULL
;

118 
	$ü—‹_th»ad_CFlogg”
Ğ
n_logg”s
, 
n_th»ads
, 
add»ss_ty³
 
¡¬t_pc
, 
loggšg_š‹rv®
)

120 
	`de¡roy_th»ad_CFlogg”
();

122 
n_th»ad_CFlogg”s
 = 
n_logg”s
;

123 
th»ad_CFlogg”
 = 
Ãw
 
th»ad_CFloÿl™y
*[
n_logg”s
];

125 
¡d
::
¡ršg
 
	`Çme_l
("CFLog");

126 
bufãr
[32];

127 
i
 = 0; i < 
n_th»ad_CFlogg”s
; i++) {

128 
	`¢´štf
(
bufãr
, 32, "%02d", 
i
);

129 
th»ad_CFlogg”
[
i
] = 
Ãw
 
	`th»ad_CFloÿl™y
Ğ
Çme_l
 + 
bufãr
, 
loggšg_š‹rv®
, 
n_th»ads
, 
¡¬t_pc
);

130 ià(
loggšg_š‹rv®
 != 0) {

131 
	`add_¢­_shÙ_Œigg”
(
th»ad_CFlogg”
[
i
]);

132 
	`add_¥l_log
(
th»ad_CFlogg”
[
i
]);

135 
	}
}

137 
	$de¡roy_th»ad_CFlogg”
( )

139 ià(
th»ad_CFlogg”
 !ğ
NULL
) {

140 
i
 = 0; i < 
n_th»ad_CFlogg”s
; i++) {

141 
	`»move_¢­_shÙ_Œigg”
(
th»ad_CFlogg”
[
i
]);

142 
	`»move_¥l_log
(
th»ad_CFlogg”
[
i
]);

143 
d–‘e
 
th»ad_CFlogg”
[
i
];

145 
d–‘e
 [] 
th»ad_CFlogg”
;

146 
th»ad_CFlogg”
 = 
NULL
;

148 
	}
}

150 
	$cæog_upd©e_th»ad_pc
Ğ
logg”_id
, 
th»ad_id
, 
add»ss_ty³
 
pc
 )

152 ià(
th»ad_CFlogg”
 =ğ
NULL
) ;

153 ià(
th»ad_id
 < 0) ;

154 
th»ad_CFlogg”
[
logg”_id
]->
	`upd©e_th»ad_pc
(
th»ad_id
, 
pc
);

155 
	}
}

158 
	$cæog_¢­shÙ
Ğ
logg”_id
, 
cyşe
 )

160 
th»ad_CFlogg”
[
logg”_id
]->
	`¢­_shÙ
(
cyşe
);

161 
	}
}

163 
	$cæog_´št
(
FILE
 *
fout
)

165 ià(
th»ad_CFlogg”
 =ğ
NULL
) ;

166 
i
 = 0; i < 
n_th»ad_CFlogg”s
; i++) {

167 
th»ad_CFlogg”
[
i
]->
	`´št_hi¡o
(
fout
);

169 
	}
}

171 
	$cæog_visu®iz”_´št
(
FILE
 *
fout
)

173 ià(
th»ad_CFlogg”
 =ğ
NULL
) ;

174 
i
 = 0; i < 
n_th»ad_CFlogg”s
; i++) {

175 
th»ad_CFlogg”
[
i
]->
	`´št_visu®iz”
(
fout
);

177 
	}
}

179 
	$cæog_visu®iz”_gz´št
(
gzFe
 
fout
)

181 ià(
th»ad_CFlogg”
 =ğ
NULL
) ;

182 
i
 = 0; i < 
n_th»ad_CFlogg”s
; i++) {

183 
th»ad_CFlogg”
[
i
]->
	`´št_visu®iz”
(
fout
);

185 
	}
}

189 
	gš¢_w¬p_occ_logg”
::
s_ids
 = 0;

191 
	g¡d
::
veùÜ
<
š¢_w¬p_occ_logg”
> 
iwo_logg”
;

193 
	$š¢_w¬p_occ_ü—‹
Ğ
n_logg”s
, 
simd_width
 )

195 
iwo_logg”
.
	`ş—r
();

196 
iwo_logg”
.
	`assign
(
n_logg”s
, 
	`š¢_w¬p_occ_logg”
(
simd_width
));

197 
i
 = 0; i < 
iwo_logg”
.
	`size
(); i++) {

198 
iwo_logg”
[
i
].
	`£t_id
(i);

200 
	}
}

202 
	$š¢_w¬p_occ_log
Ğ
logg”_id
, 
add»ss_ty³
 
pc
, 
w¬p_occ
)

204 ià(
w¬p_occ
 <= 0) ;

205 
iwo_logg”
[
logg”_id
].
	`log
(
pc
, 
w¬p_occ
);

206 
	}
}

208 
	$š¢_w¬p_occ_´št
Ğ
FILE
 *
fout
 )

210 
i
 = 0; i < 
iwo_logg”
.
	`size
(); i++) {

211 
iwo_logg”
[
i
].
	`´št
(
fout
);

213 
	}
}

217 
	glš—r_hi¡og¿m_logg”
::
s_ids
 = 0;

223 
	g¡d
::
veùÜ
<
lš—r_hi¡og¿m_logg”
> 
s_w¬p_occ_logg”
;

225 
	$shad”_w¬p_occ_ü—‹
Ğ
n_logg”s
, 
simd_width
, 
loggšg_š‹rv®
)

228 
s_w¬p_occ_logg”
.
	`assign
(
n_logg”s
,

229 
	`lš—r_hi¡og¿m_logg”
(
simd_width
 + 1, 
loggšg_š‹rv®
, "ShdrWarpOcc"));

230 
i
 = 0; i < 
s_w¬p_occ_logg”
.
	`size
(); i++) {

231 
s_w¬p_occ_logg”
[
i
].
	`£t_id
(i);

232 
	`add_¢­_shÙ_Œigg”
(&(
s_w¬p_occ_logg”
[
i
]));

233 
	`add_¥l_log
(&(
s_w¬p_occ_logg”
[
i
]));

235 
	}
}

237 
	$shad”_w¬p_occ_log
Ğ
logg”_id
, 
w¬p_occ
)

239 
s_w¬p_occ_logg”
[
logg”_id
].
	`log
(
w¬p_occ
);

240 
	}
}

242 
	$shad”_w¬p_occ_¢­shÙ
Ğ
logg”_id
, 
cu¼’t_cyşe
)

244 
s_w¬p_occ_logg”
[
logg”_id
].
	`¢­_shÙ
(
cu¼’t_cyşe
);

245 
	}
}

247 
	$shad”_w¬p_occ_´št
Ğ
FILE
 *
fout
 )

249 
i
 = 0; i < 
s_w¬p_occ_logg”
.
	`size
(); i++) {

250 
s_w¬p_occ_logg”
[
i
].
	`´št
(
fout
);

252 
	}
}

259 
	gs_mem_acc_logg”_n_d¿m
 = 0;

260 
	gs_mem_acc_logg”_n_bªk
 = 0;

261 
	g¡d
::
veùÜ
<
lš—r_hi¡og¿m_logg”
> 
s_mem_acc_logg”
;

263 
	$shad”_mem_acc_ü—‹
Ğ
n_logg”s
, 
n_d¿m
, 
n_bªk
, 
loggšg_š‹rv®
)

266 
s_mem_acc_logg”
.
	`assign
(
n_logg”s
,

267 
	`lš—r_hi¡og¿m_logg”
(2 * 
n_d¿m
 * (
n_bªk
 + 1), 
loggšg_š‹rv®
, "ShdrMemAcc"));

269 
s_mem_acc_logg”_n_d¿m
 = 
n_d¿m
;

270 
s_mem_acc_logg”_n_bªk
 = 
n_bªk
;

271 
i
 = 0; i < 
s_mem_acc_logg”
.
	`size
(); i++) {

272 
s_mem_acc_logg”
[
i
].
	`£t_id
(i);

273 
	`add_¢­_shÙ_Œigg”
(&(
s_mem_acc_logg”
[
i
]));

274 
	`add_¥l_log
(&(
s_mem_acc_logg”
[
i
]));

276 
	}
}

278 
	$shad”_mem_acc_log
Ğ
logg”_id
, 
d¿m_id
, 
bªk
, 
rw
)

280 ià(
s_mem_acc_logg”_n_d¿m
 == 0) ;

281 
wr™e_off£t
 = 0;

282 
rw
) {

283 'r': 
wr™e_off£t
 = 0; ;

284 'w': 
wr™e_off£t
 = (
s_mem_acc_logg”_n_bªk
 + 1è* 
s_mem_acc_logg”_n_d¿m
; ;

285 : 
	`as£¹
(0); ;

287 
s_mem_acc_logg”
[
logg”_id
].
	`log
(
d¿m_id
 * 
s_mem_acc_logg”_n_bªk
 + 
bªk
 + 
wr™e_off£t
);

288 
	}
}

290 
	$shad”_mem_acc_¢­shÙ
Ğ
logg”_id
, 
cu¼’t_cyşe
)

292 
s_mem_acc_logg”
[
logg”_id
].
	`¢­_shÙ
(
cu¼’t_cyşe
);

293 
	}
}

295 
	$shad”_mem_acc_´št
Ğ
FILE
 *
fout
 )

297 
i
 = 0; i < 
s_mem_acc_logg”
.
	`size
(); i++) {

298 
s_mem_acc_logg”
[
i
].
	`´št
(
fout
);

300 
	}
}

307 
boŞ
 
	gs_mem_Ït_logg”_u£d
 = 
çl£
;

308 
	gs_mem_Ït_logg”_nbšs
 = 48;

309 
	g¡d
::
veùÜ
<
lš—r_hi¡og¿m_logg”
> 
s_mem_Ït_logg”
;

311 
	$shad”_mem_Ït_ü—‹
Ğ
n_logg”s
, 
loggšg_š‹rv®
)

313 
s_mem_Ït_logg”
.
	`assign
(
n_logg”s
,

314 
	`lš—r_hi¡og¿m_logg”
(
s_mem_Ït_logg”_nbšs
, 
loggšg_š‹rv®
, "ShdrMemLat"));

316 
i
 = 0; i < 
s_mem_Ït_logg”
.
	`size
(); i++) {

317 
s_mem_Ït_logg”
[
i
].
	`£t_id
(i);

318 
	`add_¢­_shÙ_Œigg”
(&(
s_mem_Ït_logg”
[
i
]));

319 
	`add_¥l_log
(&(
s_mem_Ït_logg”
[
i
]));

322 
s_mem_Ït_logg”_u£d
 = 
Œue
;

323 
	}
}

325 
	$shad”_mem_Ït_log
Ğ
logg”_id
, 
Ï‹ncy
)

327 ià(
s_mem_Ït_logg”_u£d
 =ğ
çl£
) ;

328 ià(
Ï‹ncy
 > (1<<(
s_mem_Ït_logg”_nbšs
/2))è
	`as£¹
(0);

329 
	`as£¹
(
Ï‹ncy
 > 0);

331 
Ï‹ncy_bš
;

333 
bš
;

334 
v
 = 
Ï‹ncy
;

335 
shiá
;

337 
bš
 = (
v
 > 0xFFFF) << 4; v >>= bin;

338 
shiá
 = (
v
 > 0xFF ) << 3; v >>ğshiá; 
bš
 |= shift;

339 
shiá
 = (
v
 > 0xF ) << 2; v >>ğshiá; 
bš
 |= shift;

340 
shiá
 = (
v
 > 0x3 ) << 1; v >>ğshiá; 
bš
 |= shift;

341 
bš
 |ğ(
v
 >> 1);

342 
Ï‹ncy_bš
 = 2 * 
bš
;

343 ià(
bš
 > 0) {

344 
Ï‹ncy_bš
 +ğ((
Ï‹ncy
 & (1 << (
bš
 - 1))) != 0)? 1 : 0;

347 
s_mem_Ït_logg”
[
logg”_id
].
	`log
(
Ï‹ncy_bš
);

348 
	}
}

350 
	$shad”_mem_Ït_¢­shÙ
Ğ
logg”_id
, 
cu¼’t_cyşe
)

352 
s_mem_Ït_logg”
[
logg”_id
].
	`¢­_shÙ
(
cu¼’t_cyşe
);

353 
	}
}

355 
	$shad”_mem_Ït_´št
Ğ
FILE
 *
fout
 )

357 
i
 = 0; i < 
s_mem_Ït_logg”
.
	`size
(); i++) {

358 
s_mem_Ït_logg”
[
i
].
	`´št
(
fout
);

360 
	}
}

367 
	gs_ÿche_acûss_logg”_n_ty³s
 = 0;

368 
	g¡d
::
veùÜ
<
lš—r_hi¡og¿m_logg”
> 
s_ÿche_acûss_logg”
;

370 
	eÿche_acûss_logg”_ty³s
 {

371 
	mNORMAL
, 
	mTEXTURE
, 
	mCONSTANT
, 
	mINSTRUCTION


374 
	$g‘_shad”_nÜm®_ÿche_id
(è{  
NORMAL
; 
	}
}

375 
	$g‘_shad”_‹xtu»_ÿche_id
(è{  
TEXTURE
; 
	}
}

376 
	$g‘_shad”_cÚ¡ªt_ÿche_id
(è{  
CONSTANT
; 
	}
}

377 
	$g‘_shad”_š¡ruùiÚ_ÿche_id
(è{  
INSTRUCTION
; 
	}
}

379 
	$shad”_ÿche_acûss_ü—‹
Ğ
n_logg”s
, 
n_ty³s
, 
loggšg_š‹rv®
)

382 
s_ÿche_acûss_logg”
.
	`assign
(
n_logg”s
,

383 
	`lš—r_hi¡og¿m_logg”
(
n_ty³s
 * 2, 
loggšg_š‹rv®
, "ShdrCacheMiss"));

385 
s_ÿche_acûss_logg”_n_ty³s
 = 
n_ty³s
;

386 
i
 = 0; i < 
s_ÿche_acûss_logg”
.
	`size
(); i++) {

387 
s_ÿche_acûss_logg”
[
i
].
	`£t_id
(i);

388 
	`add_¢­_shÙ_Œigg”
(&(
s_ÿche_acûss_logg”
[
i
]));

389 
	`add_¥l_log
(&(
s_ÿche_acûss_logg”
[
i
]));

391 
	}
}

393 
	$shad”_ÿche_acûss_log
Ğ
logg”_id
, 
ty³
, 
miss
)

395 ià(
s_ÿche_acûss_logg”_n_ty³s
 == 0) ;

396 ià(
logg”_id
 < 0) ;

397 
	`as£¹
(
ty³
 =ğ
NORMAL
 ||y³ =ğ
TEXTURE
 ||y³ =ğ
CONSTANT
 ||y³ =ğ
INSTRUCTION
);

398 
	`as£¹
(
miss
 == 0 || miss == 1);

400 
s_ÿche_acûss_logg”
[
logg”_id
].
	`log
(2 * 
ty³
 + 
miss
);

401 
	}
}

403 
	$shad”_ÿche_acûss_uÆog
Ğ
logg”_id
, 
ty³
, 
miss
)

405 ià(
s_ÿche_acûss_logg”_n_ty³s
 == 0) ;

406 ià(
logg”_id
 < 0) ;

407 
	`as£¹
(
ty³
 =ğ
NORMAL
 ||y³ =ğ
TEXTURE
 ||y³ =ğ
CONSTANT
 ||y³ =ğ
INSTRUCTION
);

408 
	`as£¹
(
miss
 == 0 || miss == 1);

410 
s_ÿche_acûss_logg”
[
logg”_id
].
	`uÆog
(2 * 
ty³
 + 
miss
);

411 
	}
}

413 
	$shad”_ÿche_acûss_´št
Ğ
FILE
 *
fout
 )

415 
i
 = 0; i < 
s_ÿche_acûss_logg”
.
	`size
(); i++) {

416 
s_ÿche_acûss_logg”
[
i
].
	`´št
(
fout
);

418 
	}
}

425 
lš—r_hi¡og¿m_logg”
 *
	gs_CTA_couÁ_logg”
 = 
NULL
;

427 
	$shad”_CTA_couÁ_ü—‹
Ğ
n_shad”s
, 
loggšg_š‹rv®
)

430 ià(
s_CTA_couÁ_logg”
 !ğ
NULL
è
d–‘e
 s_CTA_count_logger;

431 
s_CTA_couÁ_logg”
 = 
Ãw
 
	`lš—r_hi¡og¿m_logg”
(
n_shad”s
, 
loggšg_š‹rv®
, "ShdrCTACouÁ", 
çl£
);

433 
s_CTA_couÁ_logg”
->
	`£t_id
(-1);

434 ià(
loggšg_š‹rv®
 != 0) {

435 
	`add_¢­_shÙ_Œigg”
(
s_CTA_couÁ_logg”
);

436 
	`add_¥l_log
(
s_CTA_couÁ_logg”
);

438 
	}
}

440 
	$shad”_CTA_couÁ_log
Ğ
shad”_id
, 
nCTAadded
 )

442 ià(
s_CTA_couÁ_logg”
 =ğ
NULL
) ;

444 
i
 = 0; i < 
nCTAadded
; i++) {

445 
s_CTA_couÁ_logg”
->
	`log
(
shad”_id
);

447 
	}
}

449 
	$shad”_CTA_couÁ_uÆog
Ğ
shad”_id
, 
nCTAdÚe
 )

451 ià(
s_CTA_couÁ_logg”
 =ğ
NULL
) ;

453 
i
 = 0; i < 
nCTAdÚe
; i++) {

454 
s_CTA_couÁ_logg”
->
	`uÆog
(
shad”_id
);

456 
	}
}

458 
	$shad”_CTA_couÁ_´št
Ğ
FILE
 *
fout
 )

460 ià(
s_CTA_couÁ_logg”
 =ğ
NULL
) ;

461 
s_CTA_couÁ_logg”
->
	`´št
(
fout
);

462 
	}
}

464 
	$shad”_CTA_couÁ_visu®iz”_´št
Ğ
FILE
 *
fout
 )

466 ià(
s_CTA_couÁ_logg”
 =ğ
NULL
) ;

467 
s_CTA_couÁ_logg”
->
	`´št_visu®iz”
(
fout
);

468 
	}
}

470 
	$shad”_CTA_couÁ_visu®iz”_gz´št
Ğ
gzFe
 
fout
 )

472 ià(
s_CTA_couÁ_logg”
 =ğ
NULL
) ;

473 
s_CTA_couÁ_logg”
->
	`´št_visu®iz”
(
fout
);

474 
	}
}

480 
	gth»ad_š¢_¥ª
::
	$th»ad_š¢_¥ª
(
cyşe
)

481 : 
	`m_cyşe
(
cyşe
),

482 #ià(
Œ1_hash_m­_ism­
 == 1)

483 
	$m_š¢_¥ª_couÁ
()

485 
	$m_š¢_¥ª_couÁ
(32*1024)

488 
	}
}

490 
	gth»ad_š¢_¥ª
::~
	$th»ad_š¢_¥ª
(è{ 
	}
}

492 
th»ad_š¢_¥ª
::
	$th»ad_š¢_¥ª
(cÚ¡ 
th»ad_š¢_¥ª
& 
Ùh”
)

493 : 
	`m_cyşe
(
Ùh”
.
m_cyşe
),

494 
	$m_š¢_¥ª_couÁ
(
Ùh”
.
m_š¢_¥ª_couÁ
)

496 
	}
}

498 
	gth»ad_š¢_¥ª
&h»ad_š¢_¥ª::
İ”©Ü
=(cÚ¡ 
th»ad_š¢_¥ª
& 
Ùh”
)

500 
´štf
("thread_insn_span& operator=\n");

501 ià(
	gthis
 !ğ&
Ùh”
) {

502 
m_š¢_¥ª_couÁ
 = 
Ùh”
.m_insn_span_count;

503 
	gm_cyşe
 = 
Ùh”
.
m_cyşe
;

505  *
	gthis
;

508 
	gth»ad_š¢_¥ª
&h»ad_š¢_¥ª::
İ”©Ü
+=(cÚ¡ 
th»ad_š¢_¥ª
& 
Ùh”
)

510 
¥ª_couÁ_m­
::
cÚ¡_™”©Ü
 
i_sc
 = 
Ùh”
.
m_š¢_¥ª_couÁ
.
begš
();

511 ; 
	gi_sc
 !ğ
Ùh”
.
m_š¢_¥ª_couÁ
.
’d
(); ++i_sc) {

512 
	gm_š¢_¥ª_couÁ
[
i_sc
->
fœ¡
] +ği_sc->
£cÚd
;

514  *
	gthis
;

517 
	gth»ad_š¢_¥ª
::
	$£t_¥ª
Ğ
add»ss_ty³
 
pc
 )

519 ifĞ(()
pc
) >= 0 )

520 
m_š¢_¥ª_couÁ
[
pc
] += 1;

521 
	}
}

523 
	gth»ad_š¢_¥ª
::
	$»£t
(
cyşe
)

525 
m_cyşe
 = 
cyşe
;

526 
m_š¢_¥ª_couÁ
.
	`ş—r
();

527 
	}
}

529 
	gth»ad_š¢_¥ª
::
	$´št_¥ª
(
FILE
 *
fout
) const

531 
	`årštf
(
fout
, "%d: ", ()
m_cyşe
);

532 
¥ª_couÁ_m­
::
cÚ¡_™”©Ü
 
i_sc
 = 
m_š¢_¥ª_couÁ
.
	`begš
();

533 ; 
i_sc
 !ğ
m_š¢_¥ª_couÁ
.
	`’d
(); ++i_sc) {

534 
	`årštf
(
fout
, "%d ", 
i_sc
->
fœ¡
);

536 
	`årštf
(
fout
, "\n");

537 
	}
}

539 
	gth»ad_š¢_¥ª
::
	$´št_hi¡o
(
FILE
 *
fout
) const

541 
	`årštf
(
fout
, "%d:", ()
m_cyşe
);

542 
¥ª_couÁ_m­
::
cÚ¡_™”©Ü
 
i_sc
 = 
m_š¢_¥ª_couÁ
.
	`begš
();

543 ; 
i_sc
 !ğ
m_š¢_¥ª_couÁ
.
	`’d
(); ++i_sc) {

544 
	`årštf
(
fout
, "%d ", 
i_sc
->
£cÚd
);

546 
	`årštf
(
fout
, "\n");

547 
	}
}

549 
	gth»ad_š¢_¥ª
::
	$´št_¥¬£_hi¡o
(
FILE
 *
fout
) const

551 
n_´š‹d_’Œ›s
 = 0;

552 
¥ª_couÁ_m­
::
cÚ¡_™”©Ü
 
i_sc
 = 
m_š¢_¥ª_couÁ
.
	`begš
();

553 ; 
i_sc
 !ğ
m_š¢_¥ª_couÁ
.
	`’d
(); ++i_sc) {

554 
±x_lš’o
 = 
	`Œª¦©e_pc_to_±xlš’o
(
i_sc
->
fœ¡
);

555 
	`årštf
(
fout
, "%u %d ", 
±x_lš’o
, 
i_sc
->
£cÚd
);

556 
n_´š‹d_’Œ›s
++;

558 ià(
n_´š‹d_’Œ›s
 == 0) {

559 
	`årštf
(
fout
, "0 0 ");

561 
	`årštf
(
fout
, "\n");

562 
	}
}

564 
	gth»ad_š¢_¥ª
::
	$´št_¥¬£_hi¡o
(
gzFe
 
fout
) const

566 
n_´š‹d_’Œ›s
 = 0;

567 
¥ª_couÁ_m­
::
cÚ¡_™”©Ü
 
i_sc
 = 
m_š¢_¥ª_couÁ
.
	`begš
();

568 ; 
i_sc
 !ğ
m_š¢_¥ª_couÁ
.
	`’d
(); ++i_sc) {

569 
±x_lš’o
 = 
	`Œª¦©e_pc_to_±xlš’o
(
i_sc
->
fœ¡
);

570 
	`gz´štf
(
fout
, "%u %d ", 
±x_lš’o
, 
i_sc
->
£cÚd
);

571 
n_´š‹d_’Œ›s
++;

573 ià(
n_´š‹d_’Œ›s
 == 0) {

574 
	`gz´štf
(
fout
, "0 0 ");

576 
	`gz´štf
(
fout
, "\n");

577 
	}
}

581 
	gth»ad_CFloÿl™y
::
	$th»ad_CFloÿl™y
(
¡d
::
¡ršg
 
Çme
,

582 
¢­_shÙ_š‹rv®
,

583 
Áh»ads
,

584 
add»ss_ty³
 
¡¬t_pc
,

585 
¡¬t_cyşe
)

586 : 
	`¢­_shÙ_Œigg”
(
¢­_shÙ_š‹rv®
), 
	`m_Çme
(
Çme
),

587 
	`m_Áh»ads
(
Áh»ads
), 
	`m_th»ad_pc
Òth»ads, 
¡¬t_pc
), 
	`m_cyşe
(
¡¬t_cyşe
),

588 
	$m_thd_¥ª
(
¡¬t_cyşe
)

590 
¡d
::
	`fl
(
m_th»ad_pc
.
	`begš
(), m_th»ad_pc.
	`’d
(), -1);

591 
	}
}

593 
	gth»ad_CFloÿl™y
::~
	$th»ad_CFloÿl™y
()

595 
	}
}

597 
th»ad_CFloÿl™y
::
	$upd©e_th»ad_pc
Ğ
th»ad_id
, 
add»ss_ty³
 
pc
 )

599 
m_th»ad_pc
[
th»ad_id
] = 
pc
;

600 
m_thd_¥ª
.
	`£t_¥ª
(
pc
);

601 
	}
}

603 
	gth»ad_CFloÿl™y
::
	$¢­_shÙ
(
cu¼’t_cyşe
)

605 
m_thd_¥ª_¬chive
.
	`push_back
(
m_thd_¥ª
);

606 
m_thd_¥ª
.
	`»£t
(
cu¼’t_cyşe
);

607 
i
 = 0; i < ()
m_th»ad_pc
.
	`size
(); i++) {

608 
m_thd_¥ª
.
	`£t_¥ª
(
m_th»ad_pc
[
i
]);

610 
	}
}

612 
	gth»ad_CFloÿl™y
::
	$¥l
(
FILE
 *
fout
, 
boŞ
 
fš®
)

614 
¡d
::
li¡
<
th»ad_š¢_¥ª
>::
™”©Ü
 
l™
 = 
m_thd_¥ª_¬chive
.
	`begš
();

615 ; 
l™
 !ğ
m_thd_¥ª_¬chive
.
	`’d
();†™ = m_thd_¥ª_¬chive.
	`”a£
(lit) ) {

616 
	`årštf
(
fout
, "%s-", 
m_Çme
.
	`c_¡r
());

617 
l™
->
	`´št_hi¡o
(
fout
);

619 
	`as£¹
Ğ
m_thd_¥ª_¬chive
.
	`em±y
() );

620 ià(
fš®
) {

621 
	`årštf
(
fout
, "%s-", 
m_Çme
.
	`c_¡r
());

622 
m_thd_¥ª
.
	`´št_hi¡o
(
fout
);

624 
	}
}

627 
	gth»ad_CFloÿl™y
::
	$´št_visu®iz”
(
FILE
 *
fout
)

629 
	`årštf
(
fout
, "%s: ", 
m_Çme
.
	`c_¡r
());

630 ià(
m_thd_¥ª_¬chive
.
	`em±y
()) {

633 
m_thd_¥ª
.
	`´št_¥¬£_hi¡o
(
fout
);

636 
m_thd_¥ª
.
	`»£t
(0);

637 
i
 = 0; i < ()
m_th»ad_pc
.
	`size
(); i++)

638 
m_thd_¥ª
.
	`£t_¥ª
(
m_th»ad_pc
[
i
]);

640 
	`as£¹
(0);

642 
	}
}

644 
	gth»ad_CFloÿl™y
::
	$´št_visu®iz”
(
gzFe
 
fout
)

646 
	`gz´štf
(
fout
, "%s: ", 
m_Çme
.
	`c_¡r
());

647 ià(
m_thd_¥ª_¬chive
.
	`em±y
()) {

650 
m_thd_¥ª
.
	`´št_¥¬£_hi¡o
(
fout
);

653 
m_thd_¥ª
.
	`»£t
(0);

654 
i
 = 0; i < ()
m_th»ad_pc
.
	`size
(); i++) {

655 
m_thd_¥ª
.
	`£t_¥ª
(
m_th»ad_pc
[
i
]);

658 
	`as£¹
(0);

660 
	}
}

662 
	gth»ad_CFloÿl™y
::
	$´št_¥ª
(
FILE
 *
fout
) const

664 
¡d
::
li¡
<
th»ad_š¢_¥ª
>::
cÚ¡_™”©Ü
 
l™
 = 
m_thd_¥ª_¬chive
.
	`begš
();

665 ; 
l™
 !ğ
m_thd_¥ª_¬chive
.
	`’d
(); ++lit) {

666 
	`årštf
(
fout
, "%s-", 
m_Çme
.
	`c_¡r
());

667 
l™
->
	`´št_¥ª
(
fout
);

669 
	`årštf
(
fout
, "%s-", 
m_Çme
.
	`c_¡r
());

670 
m_thd_¥ª
.
	`´št_¥ª
(
fout
);

671 
	}
}

673 
	gth»ad_CFloÿl™y
::
	$´št_hi¡o
(
FILE
 *
fout
) const

675 
¡d
::
li¡
<
th»ad_š¢_¥ª
>::
cÚ¡_™”©Ü
 
l™
 = 
m_thd_¥ª_¬chive
.
	`begš
();

676 ; 
l™
 !ğ
m_thd_¥ª_¬chive
.
	`’d
(); ++lit) {

677 
	`årštf
(
fout
, "%s-", 
m_Çme
.
	`c_¡r
());

678 
l™
->
	`´št_hi¡o
(
fout
);

680 
	`årštf
(
fout
, "%s-", 
m_Çme
.
	`c_¡r
());

681 
m_thd_¥ª
.
	`´št_hi¡o
(
fout
);

682 
	}
}

686 
	glš—r_hi¡og¿m_logg”
::
	$lš—r_hi¡og¿m_logg”
(
n_bšs
,

687 
¢­_shÙ_š‹rv®
,

688 cÚ¡ *
Çme
,

689 
boŞ
 
»£t_©_¢­_shÙ
,

690 
¡¬t_cyşe
 )

691 : 
	`¢­_shÙ_Œigg”
(
¢­_shÙ_š‹rv®
),

692 
	`m_n_bšs
(
n_bšs
),

693 
	`m_cu¼_lš_hi¡
(
m_n_bšs
, 
¡¬t_cyşe
),

694 
	`m_lš_hi¡_¬chive
(),

695 
	`m_cyşe
(
¡¬t_cyşe
),

696 
	`m_»£t_©_¢­_shÙ
(
»£t_©_¢­_shÙ
),

697 
	`m_Çme
(
Çme
),

698 
	`m_id
(
s_ids
++)

700 
	}
}

702 
	glš—r_hi¡og¿m_logg”
::
	$lš—r_hi¡og¿m_logg”
(cÚ¡ 
lš—r_hi¡og¿m_logg”
& 
Ùh”
)

703 : 
	`¢­_shÙ_Œigg”
(
Ùh”
.
	`g‘_š‹rv®
()),

704 
	`m_n_bšs
(
Ùh”
.
m_n_bšs
),

705 
	`m_cu¼_lš_hi¡
(
m_n_bšs
, 
Ùh”
.
m_cyşe
),

706 
	`m_lš_hi¡_¬chive
(),

707 
	`m_cyşe
(
Ùh”
.
m_cyşe
),

708 
	`m_»£t_©_¢­_shÙ
(
Ùh”
.
m_»£t_©_¢­_shÙ
),

709 
	`m_Çme
(
Ùh”
.
m_Çme
),

710 
	`m_id
(
s_ids
++)

712 
	}
}

714 
	glš—r_hi¡og¿m_logg”
::~
	$lš—r_hi¡og¿m_logg”
()

716 
	`»move_¢­_shÙ_Œigg”
(
this
);

717 
	`»move_¥l_log
(
this
);

718 
	}
}

720 
	glš—r_hi¡og¿m_logg”
::
	$¢­_shÙ
(
cu¼’t_cyşe
) {

721 
m_lš_hi¡_¬chive
.
	`push_back
(
m_cu¼_lš_hi¡
);

722 ià(
m_»£t_©_¢­_shÙ
) {

723 
m_cu¼_lš_hi¡
.
	`»£t
(
cu¼’t_cyşe
);

725 
m_cu¼_lš_hi¡
.
	`£t_cyşe
(
cu¼’t_cyşe
);

727 
	}
}

729 
	glš—r_hi¡og¿m_logg”
::
	$¥l
(
FILE
 *
fout
, 
boŞ
 
fš®
)

731 
¡d
::
li¡
<
lš—r_hi¡og¿m_¢­shÙ
>::
™”©Ü
 
™”
 = 
m_lš_hi¡_¬chive
.
	`begš
();

732 ; 
™”
 !ğ
m_lš_hi¡_¬chive
.
	`’d
(); i‹¸ğm_lš_hi¡_¬chive.
	`”a£
(iter) ) {

733 
	`årštf
(
fout
, "%s%02d-", 
m_Çme
.
	`c_¡r
(), (
m_id
 >= 0)? m_id : 0);

734 
™”
->
	`´št
(
fout
);

735 
	`årštf
(
fout
, "\n");

737 
	`as£¹
Ğ
m_lš_hi¡_¬chive
.
	`em±y
() );

738 ià(
fš®
) {

739 
	`årštf
(
fout
, "%s%02d-", 
m_Çme
.
	`c_¡r
(), (
m_id
 >= 0)? m_id : 0);

740 
m_cu¼_lš_hi¡
.
	`´št
(
fout
);

741 
	`årštf
(
fout
, "\n");

743 
	}
}

745 
	glš—r_hi¡og¿m_logg”
::
	$´št
(
FILE
 *
fout
) const

747 
¡d
::
li¡
<
lš—r_hi¡og¿m_¢­shÙ
>::
cÚ¡_™”©Ü
 
™”
 = 
m_lš_hi¡_¬chive
.
	`begš
();

748 ; 
™”
 !ğ
m_lš_hi¡_¬chive
.
	`’d
(); ++iter) {

749 
	`årštf
(
fout
, "%s%02d-", 
m_Çme
.
	`c_¡r
(), 
m_id
);

750 
™”
->
	`´št
(
fout
);

751 
	`årštf
(
fout
, "\n");

753 
	`årštf
(
fout
, "%s%02d-", 
m_Çme
.
	`c_¡r
(), 
m_id
);

754 
m_cu¼_lš_hi¡
.
	`´št
(
fout
);

755 
	`årštf
(
fout
, "\n");

756 
	}
}

758 
	glš—r_hi¡og¿m_logg”
::
	$´št_visu®iz”
(
FILE
 *
fout
)

760 
	`as£¹
(
m_lš_hi¡_¬chive
.
	`em±y
());

761 
	`årštf
(
fout
, "%s", 
m_Çme
.
	`c_¡r
());

762 ià(
m_id
 >= 0) {

763 
	`årštf
(
fout
, "%02d: ", 
m_id
);

765 
	`årštf
(
fout
, ": ");

767 
m_cu¼_lš_hi¡
.
	`´št_visu®iz”
(
fout
);

768 
	`årštf
(
fout
, "\n");

769 ià(
m_»£t_©_¢­_shÙ
) {

770 
m_cu¼_lš_hi¡
.
	`»£t
(0);

772 
	}
}

774 
	glš—r_hi¡og¿m_logg”
::
	$´št_visu®iz”
(
gzFe
 
fout
)

776 
	`as£¹
(
m_lš_hi¡_¬chive
.
	`em±y
());

777 
	`gz´štf
(
fout
, "%s", 
m_Çme
.
	`c_¡r
());

778 ià(
m_id
 >= 0) {

779 
	`gz´štf
(
fout
, "%02d: ", 
m_id
);

781 
	`gz´štf
(
fout
, ": ");

783 
m_cu¼_lš_hi¡
.
	`´št_visu®iz”
(
fout
);

784 
	`gz´štf
(
fout
, "\n");

785 ià(
m_»£t_©_¢­_shÙ
) {

786 
m_cu¼_lš_hi¡
.
	`»£t
(0);

788 
	}
}

	@stat-tool.h

28 #iâdeà
STAT_TOOL_H


29 
	#STAT_TOOL_H


	)

31 
	~"../ab¡¿ù_h¬dw¬e_mod–.h
"

32 
	~"hi¡og¿m.h
"

33 
	~"../Œ1_hash_m­.h
"

35 
	~<¡dio.h
>

36 
	~<zlib.h
>

44 şas 
	c¢­_shÙ_Œigg”
 {

45 
	mpublic
:

46 
	$¢­_shÙ_Œigg”
(
š‹rv®
è: 
	$m_¢­_shÙ_š‹rv®
(
š‹rv®
) {}

47 
vœtu®
 ~
	$¢­_shÙ_Œigg”
(è{
	}
}

49 
	$Œy_¢­_shÙ
(
cu¼’t_cyşe
) {

50 ià((
cu¼’t_cyşe
 % 
m_¢­_shÙ_š‹rv®
 == 0) && current_cycle != 0) {

51 
	`¢­_shÙ
(
cu¼’t_cyşe
);

53 
	}
}

55 
vœtu®
 
¢­_shÙ
(
cu¼’t_cyşe
) = 0;

57 cÚ¡ & 
	$g‘_š‹rv®
(ècÚ¡ {  
m_¢­_shÙ_š‹rv®
;
	}
}

59 
	g´Ùeùed
:

60 
m_¢­_shÙ_š‹rv®
;

69 şas 
	c¥l_log_š‹rçû
 {

70 
	mpublic
:

71 
	$¥l_log_š‹rçû
() {}

72 
vœtu®
 ~
	$¥l_log_š‹rçû
(è{
	}
}

74 
vœtu®
 
¥l
(
FILE
 *
fout
, 
boŞ
 
fš®
) = 0;

81 şas 
	cth»ad_š¢_¥ª
 {

82 
	mpublic
:

83 
th»ad_š¢_¥ª
(
cyşe
);

84 
th»ad_š¢_¥ª
(cÚ¡h»ad_š¢_¥ª& 
Ùh”
);

85 ~
th»ad_š¢_¥ª
();

87 
	mth»ad_š¢_¥ª
& 
	mİ”©Ü
=(cÚ¡ 
th»ad_š¢_¥ª
& 
Ùh”
);

88 
	mth»ad_š¢_¥ª
& 
	mİ”©Ü
+=(cÚ¡ 
th»ad_š¢_¥ª
& 
Ùh”
);

89 
£t_¥ª
Ğ
add»ss_ty³
 
pc
 );

90 
»£t
(
cyşe
);

92 
	$´št_¥ª
(
FILE
 *
fout
) const;

93 
	$´št_hi¡o
(
FILE
 *
fout
) const;

94 
	$´št_¥¬£_hi¡o
(
FILE
 *
fout
) const;

95 
	$´št_¥¬£_hi¡o
(
gzFe
 
fout
) const;

97 
´iv©e
:

98 
Œ1_hash_m­
<
	tadd»ss_ty³
, > 
	t¥ª_couÁ_m­
;

99 
m_cyşe
;

100 
¥ª_couÁ_m­
 
m_š¢_¥ª_couÁ
;

103 
şass
 
th»ad_CFloÿl™y
 : 
public
 
¢­_shÙ_Œigg”
,…ubliø
¥l_log_š‹rçû
 {

104 
public
:

105 
	`th»ad_CFloÿl™y
(
¡d
::
¡ršg
 
Çme
, 
¢­_shÙ_š‹rv®
,

106 
Áh»ads
, 
add»ss_ty³
 
¡¬t_pc
, 
¡¬t_cyşe
 = 0);

107 ~
	`th»ad_CFloÿl™y
();

109 
	`upd©e_th»ad_pc
Ğ
th»ad_id
, 
add»ss_ty³
 
pc
 );

110 
	`¢­_shÙ
(
cu¼’t_cyşe
);

111 
	`¥l
(
FILE
 *
fout
, 
boŞ
 
fš®
);

113 
	`´št_visu®iz”
(
FILE
 *
fout
);

114 
	`´št_visu®iz”
(
gzFe
 
fout
);

115 
	`´št_¥ª
(
FILE
 *
fout
) const;

116 
	`´št_hi¡o
(
FILE
 *
fout
) const;

117 
´iv©e
:

118 
¡d
::
¡ršg
 
m_Çme
;

120 
m_Áh»ads
;

121 
¡d
::
veùÜ
<
add»ss_ty³
> 
m_th»ad_pc
;

123 
m_cyşe
;

124 
th»ad_š¢_¥ª
 
m_thd_¥ª
;

125 
¡d
::
li¡
<
th»ad_š¢_¥ª
> 
m_thd_¥ª_¬chive
;

126 
	}
};

132 şas 
	cš¢_w¬p_occ_logg”
 {

133 
	mpublic
:

134 
	$š¢_w¬p_occ_logg”
(
simd_width
)

135 : 
	`m_simd_width
(
simd_width
),

136 
	`m_š¢_w¬p_occ
(1,
	`lš—r_hi¡og¿m
(1, "", 
m_simd_width
)),

137 
	`m_id
(
s_ids
++) {}

139 
	$š¢_w¬p_occ_logg”
(cÚ¡ 
š¢_w¬p_occ_logg”
& 
Ùh”
)

140 : 
	`m_simd_width
(
Ùh”
.
m_simd_width
),

141 
	`m_š¢_w¬p_occ
(
Ùh”
.
m_š¢_w¬p_occ
.
	`size
(), 
	`lš—r_hi¡og¿m
(1, "", 
m_simd_width
)),

142 
	`m_id
(
s_ids
++è{
	}
}

144 ~
	$š¢_w¬p_occ_logg”
(è{
	}
}

146 
	gš¢_w¬p_occ_logg”
& 
	gİ”©Ü
=(cÚ¡ 
š¢_w¬p_occ_logg”
& 
p
) {

147 
´štf
("š¢_w¬p_occ_logg” O³¿tÜğÿÎed: %02d \n", 
m_id
);

148 
as£¹
(0);

149  *
	gthis
;

152 
	$£t_id
(
id
è{ 
m_id
 = id; 
	}
}

154 
	$log
(
add»ss_ty³
 
pc
, 
w¬p_occ
) {

155 ifĞ
pc
 >ğ
m_š¢_w¬p_occ
.
	`size
() )

156 
m_š¢_w¬p_occ
.
	`»size
(2*
pc
, 
	`lš—r_hi¡og¿m
(1, "", 
m_simd_width
));

157 
m_š¢_w¬p_occ
[
pc
].
	`add2bš
(
w¬p_occ
 - 1);

158 
	}
}

160 
	$´št
(
FILE
 *
fout
) const

162 
i
 = 0; i < 
m_š¢_w¬p_occ
.
	`size
(); i++) {

163 
	`årštf
(
fout
, "In¢W¬pOcc%02d-%d", 
m_id
, 
i
);

164 
m_š¢_w¬p_occ
[
i
].
	`åršt
(
fout
);

165 
	`årštf
(
fout
, "\n");

167 
	}
}

169 
	g´iv©e
:

171 
m_simd_width
;

172 
	g¡d
::
veùÜ
<
lš—r_hi¡og¿m
> 
m_š¢_w¬p_occ
;

173 
	gm_id
;

174 
	gs_ids
;

182 şas 
	clš—r_hi¡og¿m_¢­shÙ
 {

183 
	mpublic
:

184 
	$lš—r_hi¡og¿m_¢­shÙ
(
n_bšs
, 
cyşe
)

185 : 
	`m_cyşe
(
cyşe
),

186 
	$m_lš—r_hi¡og¿m
(
n_bšs
,0)

189 
	$lš—r_hi¡og¿m_¢­shÙ
(cÚ¡ 
lš—r_hi¡og¿m_¢­shÙ
& 
Ùh”
)

190 : 
	`m_cyşe
(
Ùh”
.
m_cyşe
),

191 
	$m_lš—r_hi¡og¿m
(
Ùh”
.
m_lš—r_hi¡og¿m
)

192 { 
	}
}

194 ~
	$lš—r_hi¡og¿m_¢­shÙ
(è{ 
	}
}

196 
	$add§m¶e
(
pos
) {

197 
	`as£¹
((
size_t
)
pos
 < 
m_lš—r_hi¡og¿m
.
	`size
());

198 
m_lš—r_hi¡og¿m
[
pos
] += 1;

199 
	}
}

201 
	$sub§m¶e
(
pos
) {

202 
	`as£¹
((
size_t
)
pos
 < 
m_lš—r_hi¡og¿m
.
	`size
());

203 
m_lš—r_hi¡og¿m
[
pos
] -= 1;

204 
	}
}

206 
	$»£t
(
cyşe
) {

207 
m_cyşe
 = 
cyşe
;

208 
m_lš—r_hi¡og¿m
.
	`assign
(m_lš—r_hi¡og¿m.
	`size
(), 0);

209 
	}
}

211 
	$£t_cyşe
(
cyşe
è{ 
m_cyşe
 = cyşe; 
	}
}

213 
	$´št
(
FILE
 *
fout
) const {

214 
	`årštf
(
fout
, "%d = ", ()
m_cyşe
);

215 
i
 = 0; i < 
m_lš—r_hi¡og¿m
.
	`size
(); i++) {

216 
	`årštf
(
fout
, "%d ", 
m_lš—r_hi¡og¿m
[
i
]);

218 
	}
}

220 
	$´št_visu®iz”
(
FILE
 *
fout
) const {

221 
i
 = 0; i < 
m_lš—r_hi¡og¿m
.
	`size
(); i++) {

222 
	`årštf
(
fout
, "%d ", 
m_lš—r_hi¡og¿m
[
i
]);

224 
	}
}

226 
	$´št_visu®iz”
(
gzFe
 
fout
) const {

227 
i
 = 0; i < 
m_lš—r_hi¡og¿m
.
	`size
(); i++) {

228 
	`gz´štf
(
fout
, "%d ", 
m_lš—r_hi¡og¿m
[
i
]);

230 
	}
}

232 
	g´iv©e
:

233 
m_cyşe
;

234 
	g¡d
::
veùÜ
<> 
m_lš—r_hi¡og¿m
;

237 
şass
 
	glš—r_hi¡og¿m_logg”
 : 
public
 
¢­_shÙ_Œigg”
,…ubliø
	g¥l_log_š‹rçû
 {

238 
	gpublic
:

239 
lš—r_hi¡og¿m_logg”
(
n_bšs
,

240 
¢­_shÙ_š‹rv®
,

241 cÚ¡ *
Çme
,

242 
boŞ
 
»£t_©_¢­_shÙ
 = 
Œue
,

243 
¡¬t_cyşe
 = 0);

244 
lš—r_hi¡og¿m_logg”
(cÚ¡†š—r_hi¡og¿m_logg”& 
Ùh”
);

246 ~
lš—r_hi¡og¿m_logg”
();

248 
£t_id
(
id
è{ 
	gm_id
 = id; }

249 
log
(
pos
è{ 
	gm_cu¼_lš_hi¡
.
add§m¶e
(pos); }

250 
uÆog
(
pos
è{ 
	gm_cu¼_lš_hi¡
.
sub§m¶e
(pos); }

251 
¢­_shÙ
(
cu¼’t_cyşe
);

252 
¥l
(
FILE
 *
fout
, 
boŞ
 
fš®
);

254 
´št
(
FILE
 *
fout
) const;

255 
´št_visu®iz”
(
FILE
 *
fout
);

256 
´št_visu®iz”
(
gzFe
 
fout
);

258 
	g´iv©e
:

259 
m_n_bšs
;

260 
lš—r_hi¡og¿m_¢­shÙ
 
	gm_cu¼_lš_hi¡
;

261 
	g¡d
::
li¡
<
lš—r_hi¡og¿m_¢­shÙ
> 
m_lš_hi¡_¬chive
;

262 
	gm_cyşe
;

263 
boŞ
 
	gm_»£t_©_¢­_shÙ
;

264 
	g¡d
::
¡ršg
 
m_Çme
;

265 
	gm_id
;

266 
	gs_ids
;

269 
Œy_¢­_shÙ
 (
cu¼’t_cyşe
);

270 
£t_¥l_š‹rv®
 (
š‹rv®
);

271 
¥l_log_to_fe
 (
FILE
 *
fout
, 
fš®
, 
cu¼’t_cyşe
);

273 
ü—‹_th»ad_CFlogg”
Ğ
n_logg”s
, 
n_th»ads
, 
add»ss_ty³
 
¡¬t_pc
, 
loggšg_š‹rv®
);

274 
de¡roy_th»ad_CFlogg”
( );

275 
cæog_upd©e_th»ad_pc
Ğ
logg”_id
, 
th»ad_id
, 
add»ss_ty³
 
pc
 );

276 
cæog_¢­shÙ
Ğ
logg”_id
, 
cyşe
 );

277 
cæog_´št
(
FILE
 *
fout
);

278 
cæog_´št_·th_ex´essiÚ
(
FILE
 *
fout
);

279 
cæog_visu®iz”_´št
(
FILE
 *
fout
);

280 
cæog_visu®iz”_gz´št
(
gzFe
 
fout
);

282 
š¢_w¬p_occ_ü—‹
Ğ
n_logg”s
, 
simd_width
 );

283 
š¢_w¬p_occ_log
Ğ
logg”_id
, 
add»ss_ty³
 
pc
, 
w¬p_occ
 );

284 
š¢_w¬p_occ_´št
Ğ
FILE
 *
fout
 );

287 
shad”_w¬p_occ_ü—‹
Ğ
n_logg”s
, 
simd_width
, 
loggšg_š‹rv®
 );

288 
shad”_w¬p_occ_log
Ğ
logg”_id
, 
w¬p_occ
 );

289 
shad”_w¬p_occ_¢­shÙ
Ğ
logg”_id
, 
cu¼’t_cyşe
 );

290 
shad”_w¬p_occ_´št
Ğ
FILE
 *
fout
 );

293 
shad”_mem_acc_ü—‹
Ğ
n_logg”s
, 
n_d¿m
, 
n_bªk
, 
loggšg_š‹rv®
 );

294 
shad”_mem_acc_log
Ğ
logg”_id
, 
d¿m_id
, 
bªk
, 
rw
 );

295 
shad”_mem_acc_¢­shÙ
Ğ
logg”_id
, 
cu¼’t_cyşe
 );

296 
shad”_mem_acc_´št
Ğ
FILE
 *
fout
 );

299 
shad”_mem_Ït_ü—‹
Ğ
n_logg”s
, 
loggšg_š‹rv®
 );

300 
shad”_mem_Ït_log
Ğ
logg”_id
, 
Ï‹ncy
 );

301 
shad”_mem_Ït_¢­shÙ
Ğ
logg”_id
, 
cu¼’t_cyşe
 );

302 
shad”_mem_Ït_´št
Ğ
FILE
 *
fout
 );

305 
g‘_shad”_nÜm®_ÿche_id
();

306 
g‘_shad”_‹xtu»_ÿche_id
();

307 
g‘_shad”_cÚ¡ªt_ÿche_id
();

308 
g‘_shad”_š¡ruùiÚ_ÿche_id
();

309 
shad”_ÿche_acûss_ü—‹
Ğ
n_logg”s
, 
n_ty³s
, 
loggšg_š‹rv®
 );

310 
shad”_ÿche_acûss_log
Ğ
logg”_id
, 
ty³
, 
miss
);

311 
shad”_ÿche_acûss_uÆog
Ğ
logg”_id
, 
ty³
, 
miss
);

312 
shad”_ÿche_acûss_´št
Ğ
FILE
 *
fout
 );

315 
shad”_CTA_couÁ_ü—‹
Ğ
n_shad”s
, 
loggšg_š‹rv®
);

316 
shad”_CTA_couÁ_log
Ğ
shad”_id
, 
nCTAadded
 );

317 
shad”_CTA_couÁ_uÆog
Ğ
shad”_id
, 
nCTAdÚe
 );

318 
shad”_CTA_couÁ_»£Šow
( );

319 
shad”_CTA_couÁ_´št
Ğ
FILE
 *
fout
 );

320 
shad”_CTA_couÁ_visu®iz”_´št
Ğ
FILE
 *
fout
 );

321 
shad”_CTA_couÁ_visu®iz”_gz´št
(
gzFe
 
fout
);

	@stats.h

28 #iâdeà
STATS_INCLUDED


29 
	#STATS_INCLUDED


	)

31 
	emem_¡age_acûss_ty³
 {

32 
	mC_MEM
,

33 
	mT_MEM
,

34 
	mS_MEM
,

35 
	mG_MEM_LD
,

36 
	mL_MEM_LD
,

37 
	mG_MEM_ST
,

38 
	mL_MEM_ST
,

39 
	mN_MEM_STAGE_ACCESS_TYPE


41 
	eb_»que¡_¡©us
 {

42 
	mTLB_HIT
 = 0,

43 
	mTLB_READY
,

44 
	mTLB_PENDING


46 
	emem_¡age_¡®l_ty³
 {

47 
	mNO_RC_FAIL
 = 0,

48 
	mBK_CONF
,

49 
	mMSHR_RC_FAIL
,

50 
	mICNT_RC_FAIL
,

51 
	mCOAL_STALL
,

52 
	mTLB_STALL
,

53 
	mDATA_PORT_STALL
,

54 
	mWB_ICNT_RC_FAIL
,

55 
	mWB_CACHE_RSRV_FAIL
,

56 
	mN_MEM_STAGE_STALL_TYPE


	@traffic_breakdown.cc

1 
	~"Œaffic_b»akdown.h
"

2 
	~"mem_ãtch.h
"

4 
	gŒaffic_b»akdown
::
	$´št
(
FILE
* 
fout
)

6 
Œaffic_¡©_t
::
cÚ¡_™”©Ü
 
i_¡©
 = 
m_¡©s
.
	`begš
(); i_¡© !ğm_¡©s.
	`’d
(); i_stat++) {

7 
by‹_Œªsã¼ed
 = 0;

8 
Œaffic_şass_t
::
cÚ¡_™”©Ü
 
i_şass
 = 
i_¡©
->
£cÚd
.
	`begš
(); i_şas !ği_¡©->£cÚd.
	`’d
(); i_class++) {

9 
by‹_Œªsã¼ed
 +ğ
i_şass
->
fœ¡
 * i_şass->
£cÚd
;

11 
	`årštf
(
fout
, "Œaffic_b»akdown_%s[%s] = %u {", 
m_ÃtwÜk_Çme
.
	`c_¡r
(), 
i_¡©
->
fœ¡
.c_¡r(), 
by‹_Œªsã¼ed
);

12 
Œaffic_şass_t
::
cÚ¡_™”©Ü
 
i_şass
 = 
i_¡©
->
£cÚd
.
	`begš
(); i_şas !ği_¡©->£cÚd.
	`’d
(); i_class++) {

13 
	`årštf
(
fout
, "%u:%u,", 
i_şass
->
fœ¡
, i_şass->
£cÚd
);

15 
	`årštf
(
fout
, "}\n");

17 
	}
}

19 
	gŒaffic_b»akdown
::
	$»cÜd_Œaffic
(
şass
 
mem_ãtch
 * 
mf
, 
size
)

21 
m_¡©s
[
	`şassify_memãtch
(
mf
)][
size
] += 1;

22 
	}
}

24 
	g¡d
::
¡ršg
 
Œaffic_b»akdown
::
	$şassify_memãtch
(
şass
 
mem_ãtch
 * 
mf
)

26 
¡d
::
¡ršg
 
Œaffic_Çme
;

28 
mem_acûss_ty³
 
acûss_ty³
 = 
mf
->
	`g‘_acûss_ty³
();

30 
acûss_ty³
) {

31 
CONST_ACC_R
:

32 
TEXTURE_ACC_R
:

33 
GLOBAL_ACC_W
:

34 
LOCAL_ACC_R
:

35 
LOCAL_ACC_W
:

36 
INST_ACC_R
:

37 
L1_WRBK_ACC
:

38 
L2_WRBK_ACC
:

39 
L1_WR_ALLOC_R
:

40 
L2_WR_ALLOC_R
:

41 
Œaffic_Çme
 = 
	`mem_acûss_ty³_¡r
(
acûss_ty³
);

43 
GLOBAL_ACC_R
:

45 
Œaffic_Çme
 = (
mf
->
	`i§tomic
())? "GLOBAL_ATOMIC" : 
	`mem_acûss_ty³_¡r
(
GLOBAL_ACC_R
);

47 : 
	`as£¹
(0 && "Unknownrafficype");

49  
Œaffic_Çme
;

50 
	}
}

	@traffic_breakdown.h

1 #´agm¨
Úû


3 
	~<¡dio.h
>

4 
	~<m­
>

5 
	~<¡ršg
>

8 şas 
	cŒaffic_b»akdown


10 
	mpublic
:

11 
	$Œaffic_b»akdown
(cÚ¡ 
¡d
::
¡ršg
 &
ÃtwÜk_Çme
)

12 : 
	$m_ÃtwÜk_Çme
(
ÃtwÜk_Çme
)

16 
	`´št
(
FILE
* 
fout
);

19 
	`»cÜd_Œaffic
(
şass
 
mem_ãtch
 * 
mf
, 
size
);

21 
´Ùeùed
:

23 
¡d
::
¡ršg
 
m_ÃtwÜk_Çme
;

26 
¡d
::
¡ršg
 
	`şassify_memãtch
(
şass
 
mem_ãtch
 * 
mf
);

29 
	`·ck‘_size
(
şass
 
mem_ãtch
 * 
mf
);

31 
¡d
::
	t¡ršg
 
	tmf_·ck‘_ty³
;

32 
	tmf_·ck‘_size
;

33 
¡d
::
	tm­
 < 
	tmf_·ck‘_size
, > 
	tŒaffic_şass_t
;

34 
¡d
::
	tm­
 < 
	tmf_·ck‘_ty³
, 
	tŒaffic_şass_t
 > 
	tŒaffic_¡©_t
;

36 
Œaffic_¡©_t
 
m_¡©s
;

37 
	}
};

	@visualizer.cc

28 
	~"visu®iz”.h
"

30 
	~"gpu-sim.h
"

31 
	~"l2ÿche.h
"

32 
	~"shad”.h
"

33 
	~"../İtiÚ_·r£r.h
"

34 
	~"mem_Ï‹ncy_¡©.h
"

35 
	~"pow”_¡©.h
"

37 
	~"¡©-toŞ.h
"

38 
	~"gpu-ÿche.h
"

40 
	~<time.h
>

41 
	~<¡ršg.h
>

42 
	~<zlib.h
>

44 
time_veùÜ_´št_š‹rv®2gzfe
(
gzFe
 
outfe
);

46 
	ggpgpu_sim
::
	$visu®iz”_´št¡©
()

48 
gzFe
 
visu®iz”_fe
 = 
NULL
;

49 iàĞ!
m_cÚfig
.
g_visu®iz”_’abËd
 )

53 
boŞ
 
visu®iz”_fœ¡_´št¡©
 = 
Œue
;

55 
visu®iz”_fe
 = 
	`gzİ’
(
m_cÚfig
.
g_visu®iz”_f’ame
, (
visu®iz”_fœ¡_´št¡©
)? "w" : "a");

56 ià(
visu®iz”_fe
 =ğ
NULL
) {

57 
	`´štf
("error - could‚ot open visualizerrace file.\n");

58 
	`ex™
(1);

60 
	`gz£¬ams
(
visu®iz”_fe
, 
m_cÚfig
.
g_visu®iz”_zËv–
, 
Z_DEFAULT_STRATEGY
);

61 
visu®iz”_fœ¡_´št¡©
 = 
çl£
;

63 
	`cæog_visu®iz”_gz´št
(
visu®iz”_fe
);

64 
	`shad”_CTA_couÁ_visu®iz”_gz´št
(
visu®iz”_fe
);

66 
i
=0;i<
m_memÜy_cÚfig
->
m_n_mem
;i++)

67 
m_memÜy_·¹™iÚ_un™
[
i
]->
	`visu®iz”_´št
(
visu®iz”_fe
);

68 
m_shad”_¡©s
->
	`visu®iz”_´št
(
visu®iz”_fe
);

69 
m_memÜy_¡©s
->
	`visu®iz”_´št
(
visu®iz”_fe
);

70 
m_pow”_¡©s
->
	`visu®iz”_´št
(
visu®iz”_fe
);

73 
	`gz´štf
(
visu®iz”_fe
, "glob®cyşecouÁ: %Îd\n", 
gpu_sim_cyşe
);

74 
	`gz´štf
(
visu®iz”_fe
, "glob®š¢couÁ: %Îd\n", 
gpu_sim_š¢
);

75 
	`gz´štf
(
visu®iz”_fe
, "glob®tÙš¢couÁ: %Îd\n", 
gpu_tÙ_sim_š¢
);

77 
	`time_veùÜ_´št_š‹rv®2gzfe
(
visu®iz”_fe
);

79 
	`gzşo£
(
visu®iz”_fe
);

109 
	}
}

111 
	~<li¡
>

112 
	~<veùÜ
>

113 
	~<io¡»am
>

114 
	~<m­
>

115 
	~"../gpgpu-sim/shad”.h
"

116 şas 
	cmy_time_veùÜ
 {

117 
	m´iv©e
:

118 
¡d
::
m­
< , 
	m¡d
::
veùÜ
<> > 
ld_time_m­
;

119 
	m¡d
::
m­
< , std::
veùÜ
<> > 
¡_time_m­
;

120 
	mld_veùÜ_size
;

121 
	m¡_veùÜ_size
;

122 
	m¡d
::
veùÜ
<> 
ld_time_di¡
;

123 
	m¡d
::
veùÜ
<> 
¡_time_di¡
;

125 
	m¡d
::
veùÜ
<> 
ov”®_ld_time_di¡
;

126 
	m¡d
::
veùÜ
<> 
ov”®_¡_time_di¡
;

127 
	mov”®_ld_couÁ
;

128 
	mov”®_¡_couÁ
;

130 
	mpublic
:

131 
	$my_time_veùÜ
(
ld_size
,
¡_size
){

132 
ld_veùÜ_size
 = 
ld_size
;

133 
¡_veùÜ_size
 = 
¡_size
;

134 
ld_time_di¡
.
	`»size
(
ld_size
);

135 
¡_time_di¡
.
	`»size
(
¡_size
);

136 
ov”®_ld_time_di¡
.
	`»size
(
ld_size
);

137 
ov”®_¡_time_di¡
.
	`»size
(
¡_size
);

138 
ov”®_ld_couÁ
 = 0;

139 
ov”®_¡_couÁ
= 0;

141 
	$upd©e_ld
(
uid
,
¦Ù
, 
time
) {

142 iàĞ
ld_time_m­
.
	`fšd
Ğ
uid
 )!öd_time_m­.
	`’d
() ) {

143 
ld_time_m­
[
uid
][
¦Ù
]=
time
;

144 } ià(
¦Ù
 < 
NUM_MEM_REQ_STAT
 ) {

145 
¡d
::
veùÜ
<> 
time_vec
;

146 
time_vec
.
	`»size
(
ld_veùÜ_size
);

147 
time_vec
[
¦Ù
] = 
time
;

148 
ld_time_m­
[
uid
] = 
time_vec
;

152 
	}
}

153 
	$upd©e_¡
(
uid
,
¦Ù
, 
time
) {

154 iàĞ
¡_time_m­
.
	`fšd
Ğ
uid
 )!=¡_time_m­.
	`’d
() ) {

155 
¡_time_m­
[
uid
][
¦Ù
]=
time
;

157 
¡d
::
veùÜ
<> 
time_vec
;

158 
time_vec
.
	`»size
(
¡_veùÜ_size
);

159 
time_vec
[
¦Ù
] = 
time
;

160 
¡_time_m­
[
uid
] = 
time_vec
;

162 
	}
}

163 
	$check_ld_upd©e
(
uid
,
¦Ù
, 
Ï‹ncy
) {

164 iàĞ
ld_time_m­
.
	`fšd
Ğ
uid
 )!öd_time_m­.
	`’d
() ) {

165 
our_Ï‹ncy
 = 
ld_time_m­
[
uid
][
¦Ù
] -†d_time_m­[uid][
IN_ICNT_TO_MEM
];

166 
	`as£¹
Ğ
our_Ï‹ncy
 =ğ
Ï‹ncy
);

167 } ià(
¦Ù
 < 
NUM_MEM_REQ_STAT
 ) {

168 
	`abÜt
();

170 
	}
}

171 
	$check_¡_upd©e
(
uid
,
¦Ù
, 
Ï‹ncy
) {

172 iàĞ
¡_time_m­
.
	`fšd
Ğ
uid
 )!=¡_time_m­.
	`’d
() ) {

173 
our_Ï‹ncy
 = 
¡_time_m­
[
uid
][
¦Ù
] - st_time_m­[uid][
IN_ICNT_TO_MEM
];

174 
	`as£¹
Ğ
our_Ï‹ncy
 =ğ
Ï‹ncy
);

176 
	`abÜt
();

178 
	}
}

179 
	g´iv©e
:

180 
	$ÿlcuÏ‹_ld_di¡
() {

181 
i
,
fœ¡
;

182 
Ï¡_upd©e
,
diff
;

183 
fšished_couÁ
=0;

184 
ld_time_di¡
.
	`ş—r
();

185 
ld_time_di¡
.
	`»size
(
ld_veùÜ_size
);

186 
¡d
::
m­
< , std::
veùÜ
<> >::
™”©Ü
 
™”
, 
™”_‹mp
;

187 
™”
 =
ld_time_m­
.
	`begš
() ;

188 
™”
 !ğ
ld_time_m­
.
	`’d
()) {

189 
Ï¡_upd©e
=0;

190 
fœ¡
=-1;

191 ià(!
™”
->
£cÚd
[
IN_SHADER_FETCHED
]) {

193 ++
™”
;

196  !
Ï¡_upd©e
 ) {

197 
fœ¡
++;

198 
	`as£¹
Ğ
fœ¡
 < 
™”
->
£cÚd
.
	`size
() );

199 
Ï¡_upd©e
 = 
™”
->
£cÚd
[
fœ¡
];

202  
i
=
fœ¡
;i<
ld_veùÜ_size
;i++ ) {

203 
diff
 = 
™”
->
£cÚd
[
i
] - 
Ï¡_upd©e
;

204 iàĞ
diff
>0 ) {

205 
ld_time_di¡
[
i
]+=
diff
;

206 
Ï¡_upd©e
 = 
™”
->
£cÚd
[
i
];

209 
™”_‹mp
 = 
™”
;

210 
™”
++;

211 
ld_time_m­
.
	`”a£
(
™”_‹mp
);

212 
fšished_couÁ
++;

214 iàĞ
fšished_couÁ
 ) {

215  
i
=0;i<
ld_veùÜ_size
;i++ ) {

216 
ov”®_ld_time_di¡
[
i
] = (ov”®_ld_time_di¡[i]*
ov”®_ld_couÁ
 + 
ld_time_di¡
[i]è/ (ov”®_ld_couÁ + 
fšished_couÁ
);

218 
ov”®_ld_couÁ
 +ğ
fšished_couÁ
;

219  
i
=0;i<
ld_veùÜ_size
;i++ ) {

220 
ld_time_di¡
[
i
]/=
fšished_couÁ
;

223 
	}
}

225 
	$ÿlcuÏ‹_¡_di¡
() {

226 
i
,
fœ¡
;

227 
Ï¡_upd©e
,
diff
;

228 
fšished_couÁ
=0;

229 
¡_time_di¡
.
	`ş—r
();

230 
¡_time_di¡
.
	`»size
(
¡_veùÜ_size
);

231 
¡d
::
m­
< , std::
veùÜ
<> >::
™”©Ü
 
™”
,
™”_‹mp
;

232 
™”
 =
¡_time_m­
.
	`begš
() ;

233  
™”
 !ğ
¡_time_m­
.
	`’d
() ) {

234 
Ï¡_upd©e
=0;

235 
fœ¡
=-1;

236 ià(!
™”
->
£cÚd
[
IN_SHADER_FETCHED
]) {

238 ++
™”
;

241  !
Ï¡_upd©e
 ) {

242 
fœ¡
++;

243 
	`as£¹
Ğ
fœ¡
 < 
™”
->
£cÚd
.
	`size
() );

244 
Ï¡_upd©e
 = 
™”
->
£cÚd
[
fœ¡
];

247  
i
=
fœ¡
;i<
¡_veùÜ_size
;i++ ) {

248 
diff
 = 
™”
->
£cÚd
[
i
] - 
Ï¡_upd©e
;

249 iàĞ
diff
>0 ) {

250 
¡_time_di¡
[
i
]+=
diff
;

251 
Ï¡_upd©e
 = 
™”
->
£cÚd
[
i
];

254 
™”_‹mp
 = 
™”
;

255 
™”
++;

256 
¡_time_m­
.
	`”a£
(
™”_‹mp
);

257 
fšished_couÁ
++;

259 iàĞ
fšished_couÁ
 ) {

260  
i
=0;i<
¡_veùÜ_size
;i++ ) {

261 
ov”®_¡_time_di¡
[
i
] = (ov”®_¡_time_di¡[i]*
ov”®_¡_couÁ
 + 
¡_time_di¡
[i]è/ (ov”®_¡_couÁ + 
fšished_couÁ
);

263 
ov”®_¡_couÁ
 +ğ
fšished_couÁ
;

264  
i
=0;i<
¡_veùÜ_size
;i++ ) {

265 
¡_time_di¡
[
i
]/=
fšished_couÁ
;

268 
	}
}

270 
	gpublic
:

271 
	$ş—r_time_m­_veùÜs
() {

272 
ld_time_m­
.
	`ş—r
();

273 
¡_time_m­
.
	`ş—r
();

274 
	}
}

275 
	$´št_®l_ld
() {

276 
i
;

277 
¡d
::
m­
< , std::
veùÜ
<> >::
™”©Ü
 
™”
;

278  
™”
 =
ld_time_m­
.
	`begš
(è; i‹¸!ğld_time_m­.
	`’d
(); ++iter ) {

279 
¡d
::
cout
<<"ld_uid"<<
™”
->
fœ¡
;

280  
i
=0;i<
ld_veùÜ_size
;i++ ) {

281 
¡d
::
cout
<<" "<<
™”
->
£cÚd
[
i
];

283 
¡d
::
cout
<< std::
’dl
;

285 
	}
}

287 
	$´št_®l_¡
() {

288 
i
;

289 
¡d
::
m­
< , std::
veùÜ
<> >::
™”©Ü
 
™”
;

291  
™”
 =
¡_time_m­
.
	`begš
(è; i‹¸!ğ¡_time_m­.
	`’d
(); ++iter ) {

292 
¡d
::
cout
<<"¡_uid"<<
™”
->
fœ¡
;

293  
i
=0;i<
¡_veùÜ_size
;i++ ) {

294 
¡d
::
cout
<<" "<<
™”
->
£cÚd
[
i
];

296 
¡d
::
cout
<<¡d::
’dl
;

298 
	}
}

300 
	$ÿlcuÏ‹_di¡
() {

301 
	`ÿlcuÏ‹_ld_di¡
();

302 
	`ÿlcuÏ‹_¡_di¡
();

303 
	}
}

304 
	$´št_di¡
() {

305 
i
;

306 
	`ÿlcuÏ‹_di¡
();

307 
¡d
::
cout
 << "LD_mem_lat_dist " ;

308  
i
=0;i<
ld_veùÜ_size
;i++ ) {

309 
¡d
::
cout
 <<" "<<()
ov”®_ld_time_di¡
[
i
];

311 
¡d
::
cout
 << std::
’dl
;

312 
¡d
::
cout
 << "ST_mem_lat_dist " ;

313  
i
=0;i<
¡_veùÜ_size
;i++ ) {

314 
¡d
::
cout
 <<" "<<()
ov”®_¡_time_di¡
[
i
];

316 
¡d
::
cout
 << std::
’dl
;

317 
	}
}

318 
	$´št_to_fe
(
FILE
 *
outfe
) {

319 
i
;

320 
	`ÿlcuÏ‹_di¡
();

321 
	`årštf
 (
outfe
,"LDmemlatdist:") ;

322  
i
=0;i<
ld_veùÜ_size
;i++ ) {

323 
	`årštf
 (
outfe
," %d", ()
ld_time_di¡
[
i
]);

325 
	`årštf
 (
outfe
,"\n") ;

326 
	`årštf
 (
outfe
,"STmemlatdist:") ;

327  
i
=0;i<
¡_veùÜ_size
;i++ ) {

328 
	`årštf
 (
outfe
," %d", ()
¡_time_di¡
[
i
]);

330 
	`årštf
 (
outfe
,"\n") ;

331 
	}
}

332 
	$´št_to_gzfe
(
gzFe
 
outfe
) {

333 
i
;

334 
	`ÿlcuÏ‹_di¡
();

335 
	`gz´štf
 (
outfe
,"LDmemlatdist:") ;

336  
i
=0;i<
ld_veùÜ_size
;i++ ) {

337 
	`gz´štf
 (
outfe
," %d", ()
ld_time_di¡
[
i
]);

339 
	`gz´štf
 (
outfe
,"\n") ;

340 
	`gz´štf
 (
outfe
,"STmemlatdist:") ;

341  
i
=0;i<
¡_veùÜ_size
;i++ ) {

342 
	`gz´štf
 (
outfe
," %d", ()
¡_time_di¡
[
i
]);

344 
	`gz´štf
 (
outfe
,"\n") ;

345 
	}
}

348 
my_time_veùÜ
* 
	gg_my_time_veùÜ
;

350 
	$time_veùÜ_ü—‹
(
size
) {

351 
g_my_time_veùÜ
 = 
Ãw
 
	`my_time_veùÜ
(
size
,size);

352 
	}
}

355 
	$time_veùÜ_´št
() {

356 
g_my_time_veùÜ
->
	`´št_di¡
();

357 
	}
}

359 
	$time_veùÜ_´št_š‹rv®2gzfe
(
gzFe
 
outfe
) {

360 
g_my_time_veùÜ
->
	`´št_to_gzfe
(
outfe
);

361 
	}
}

363 
	~"../gpgpu-sim/mem_ãtch.h
"

365 
	$time_veùÜ_upd©e
(
uid
,
¦Ù
 ,
cyşe
,
ty³
) {

366 iàĞ(
ty³
 =ğ
READ_REQUEST
è|| (ty³ =ğ
READ_REPLY
) ) {

367 
g_my_time_veùÜ
->
	`upd©e_ld
Ğ
uid
, 
¦Ù
,
cyşe
);

368 } iàĞ(
ty³
 =ğ
WRITE_REQUEST
è|| (ty³ =ğ
WRITE_ACK
) ) {

369 
g_my_time_veùÜ
->
	`upd©e_¡
Ğ
uid
, 
¦Ù
,
cyşe
);

371 
	`abÜt
();

373 
	}
}

375 
	$check_time_veùÜ_upd©e
(
uid
,
¦Ù
 ,
Ï‹ncy
,
ty³
)

377 iàĞ(
ty³
 =ğ
READ_REQUEST
è|| (ty³ =ğ
READ_REPLY
) ) {

378 
g_my_time_veùÜ
->
	`check_ld_upd©e
Ğ
uid
, 
¦Ù
, 
Ï‹ncy
 );

379 } iàĞ(
ty³
 =ğ
WRITE_REQUEST
è|| (ty³ =ğ
WRITE_ACK
) ) {

380 
g_my_time_veùÜ
->
	`check_¡_upd©e
Ğ
uid
, 
¦Ù
, 
Ï‹ncy
 );

382 
	`abÜt
();

384 
	}
}

	@visualizer.h

28 #iâdeà
VISUALIZER_H_INCLUDED


29 
	#VISUALIZER_H_INCLUDED


	)

31 
	~<¡dio.h
>

32 
	~<zlib.h
>

34 
time_veùÜ_ü—‹
(
size
);

35 
time_veùÜ_´št
();

36 
time_veùÜ_upd©e
(
uid
,
¦Ù
 ,
cyşe
,
ty³
);

37 
check_time_veùÜ_upd©e
(
uid
,
¦Ù
 ,
Ï‹ncy
,
ty³
);

	@../abstract_hardware_model.h

28 #iâdeà
ABSTRACT_HARDWARE_MODEL_INCLUDED


29 
	#ABSTRACT_HARDWARE_MODEL_INCLUDED


	)

32 
şass
 
	ggpgpu_sim
;

33 
şass
 
	gk”Ãl_šfo_t
;

36 
	#MAX_CTA_PER_SHADER
 32

	)

37 
	#MAX_BARRIERS_PER_CTA
 16

	)

39 
	e_memÜy_¥aû_t
 {

40 
	mundefšed_¥aû
=0,

41 
	m»g_¥aû
,

42 
	mloÿl_¥aû
,

43 
	msh¬ed_¥aû
,

44 
	m·¿m_¥aû_unşassif›d
,

45 
	m·¿m_¥aû_k”Ãl
,

46 
	m·¿m_¥aû_loÿl
,

47 
	mcÚ¡_¥aû
,

48 
	m‹x_¥aû
,

49 
	msurf_¥aû
,

50 
	mglob®_¥aû
,

51 
	mg’”ic_¥aû
,

52 
	mš¡ruùiÚ_¥aû


56 
	eFuncCache


58 
	mFuncCacheP»ãrNÚe
 = 0,

59 
	mFuncCacheP»ãrSh¬ed
 = 1,

60 
	mFuncCacheP»ãrL1
 = 2

64 #ifdeà
__ılu¥lus


66 
	~<¡ršg.h
>

67 
	~<¡dio.h
>

69 
	tÃw_addr_ty³
;

70 
	tadd»ss_ty³
;

71 
	taddr_t
;

75 
	eu¬ch_İ_t
 {

76 
	mNO_OP
=-1,

77 
	mALU_OP
=1,

78 
	mSFU_OP
,

79 
	mALU_SFU_OP
,

80 
	mLOAD_OP
,

81 
	mSTORE_OP
,

82 
	mBRANCH_OP
,

83 
	mBARRIER_OP
,

84 
	mMEMORY_BARRIER_OP
,

85 
	mCALL_OPS
,

86 
	mRET_OPS


88 
u¬ch_İ_t
 
	tİ_ty³
;

91 
	eu¬ch_b¬_t
 {

92 
	mNOT_BAR
=-1,

93 
	mSYNC
=1,

94 
	mARRIVE
,

95 
	mRED


97 
u¬ch_b¬_t
 
	tb¬r›r_ty³
;

99 
	eu¬ch_»d_t
 {

100 
	mNOT_RED
=-1,

101 
	mPOPC_RED
=1,

102 
	mAND_RED
,

103 
	mOR_RED


105 
u¬ch_»d_t
 
	t»duùiÚ_ty³
;

108 
	eu¬ch_İ”ªd_ty³_t
 {

109 
	mUN_OP
=-1,

110 
	mINT_OP
,

111 
	mFP_OP


113 
u¬ch_İ”ªd_ty³_t
 
	tty³s_of_İ”ªds
;

115 
	e¥ecŸl_İ”©iÚs_t
 {

116 
	mOTHER_OP
,

117 
	mINT__OP
,

118 
	mINT_MUL24_OP
,

119 
	mINT_MUL32_OP
,

120 
	mINT_MUL_OP
,

121 
	mINT_DIV_OP
,

122 
	mFP_MUL_OP
,

123 
	mFP_DIV_OP
,

124 
	mFP__OP
,

125 
	mFP_SQRT_OP
,

126 
	mFP_LG_OP
,

127 
	mFP_SIN_OP
,

128 
	mFP_EXP_OP


130 
¥ecŸl_İ”©iÚs_t
 
	t¥ecŸl_İs
;

131 
	eİ”©iÚ_p–še_t
 {

132 
	mUNKOWN_OP
,

133 
	mSP__OP
,

134 
	mSFU__OP
,

135 
	mMEM__OP


137 
İ”©iÚ_p–še_t
 
	tİ”©iÚ_p–še
;

138 
	emem_İ”©iÚ_t
 {

139 
	mNOT_TEX
,

140 
	mTEX


142 
mem_İ”©iÚ_t
 
	tmem_İ”©iÚ
;

144 
	e_memÜy_İ_t
 {

145 
	mno_memÜy_İ
 = 0,

146 
	mmemÜy_lßd
,

147 
	mmemÜy_¡Üe


150 
	~<b™£t
>

151 
	~<li¡
>

152 
	~<veùÜ
>

153 
	~<as£¹.h
>

154 
	~<¡dlib.h
>

155 
	~<m­
>

156 
	~<deque
>

158 #ià!
defšed
(
__VECTOR_TYPES_H__
)

159 
	sdim3
 {

160 
	mx
, 
	my
, 
	mz
;

164 
šüem’t_x_th’_y_th’_z
Ğ
dim3
 &
i
, cÚ¡ dim3 &
bound
);

166 şas 
	ck”Ãl_šfo_t
 {

167 
	mpublic
:

176 
k”Ãl_šfo_t
Ğ
dim3
 
gridDim
, dim3 
blockDim
, 
şass
 
funùiÚ_šfo
 *
’Œy
 );

177 ~
k”Ãl_šfo_t
();

179 
	$šc_ruÂšg
(è{ 
m_num_cÜes_ruÂšg
++; }

180 
	$dec_ruÂšg
()

182 
	`as£¹
Ğ
m_num_cÜes_ruÂšg
 > 0 );

183 
m_num_cÜes_ruÂšg
--;

184 
	}
}

185 
boŞ
 
	$ruÂšg
(ècÚ¡ {  
m_num_cÜes_ruÂšg
>0; 
	}
}

186 
boŞ
 
	$dÚe
() const

188  
	`no_mÜe_ùas_to_run
(è&& !
	`ruÂšg
();

189 
	}
}

190 
şass
 
funùiÚ_šfo
 *
	$’Œy
(è{  
m_k”Ãl_’Œy
; 
	}
}

191 cÚ¡ 
şass
 
funùiÚ_šfo
 *
	$’Œy
(ècÚ¡ {  
m_k”Ãl_’Œy
; 
	}
}

193 
size_t
 
	$num_blocks
() const

195  
m_grid_dim
.
x
 * m_grid_dim.
y
 * m_grid_dim.
z
;

196 
	}
}

198 
size_t
 
	$th»ads_³r_ùa
() const

200  
m_block_dim
.
x
 * m_block_dim.
y
 * m_block_dim.
z
;

201 
	}
}

203 
dim3
 
	$g‘_grid_dim
(ècÚ¡ {  
m_grid_dim
; 
	}
}

204 
dim3
 
	$g‘_ùa_dim
(ècÚ¡ {  
m_block_dim
; 
	}
}

206 
	$šüem’t_ùa_id
()

208 
	`šüem’t_x_th’_y_th’_z
(
m_Ãxt_ùa
,
m_grid_dim
);

209 
m_Ãxt_tid
.
x
=0;

210 
m_Ãxt_tid
.
y
=0;

211 
m_Ãxt_tid
.
z
=0;

212 
	}
}

213 
dim3
 
	$g‘_Ãxt_ùa_id
(ècÚ¡ {  
m_Ãxt_ùa
; 
	}
}

214 
boŞ
 
	$no_mÜe_ùas_to_run
() const

216  (
m_Ãxt_ùa
.
x
 >ğ
m_grid_dim
.x || m_Ãxt_ùa.
y
 >ğm_grid_dim.y || m_Ãxt_ùa.
z
 >= m_grid_dim.z );

217 
	}
}

219 
	$šüem’t_th»ad_id
(è{ 
	`šüem’t_x_th’_y_th’_z
(
m_Ãxt_tid
,
m_block_dim
); 
	}
}

220 
dim3
 
	$g‘_Ãxt_th»ad_id_3d
(ècÚ¡ {  
m_Ãxt_tid
; 
	}
}

221 
	$g‘_Ãxt_th»ad_id
() const

223  
m_Ãxt_tid
.
x
 + 
m_block_dim
.x*m_Ãxt_tid.
y
 + m_block_dim.x*m_block_dim.y*m_Ãxt_tid.
z
;

224 
	}
}

225 
boŞ
 
	$mÜe_th»ads_š_ùa
() const

227  
m_Ãxt_tid
.
z
 < 
m_block_dim
.z && m_Ãxt_tid.
y
 < m_block_dim.y && m_Ãxt_tid.
x
 < m_block_dim.x;

228 
	}
}

229 
	$g‘_uid
(ècÚ¡ {  
m_uid
; 
	}
}

230 
	g¡d
::
¡ršg
 
	$Çme
() const;

232 
¡d
::
li¡
<
şass
 
±x_th»ad_šfo
 *> &
	$aùive_th»ads
(è{  
m_aùive_th»ads
; 
	}
}

233 
şass
 
memÜy_¥aû
 *
	$g‘_·¿m_memÜy
(è{  
m_·¿m_mem
; 
	}
}

235 
	g´iv©e
:

236 
k”Ãl_šfo_t
( const kernel_info_t & );

237 
	gİ”©Ü
=ĞcÚ¡ 
k”Ãl_šfo_t
 & );

239 
şass
 
funùiÚ_šfo
 *
	gm_k”Ãl_’Œy
;

241 
	gm_uid
;

242 
	gm_Ãxt_uid
;

244 
dim3
 
	gm_grid_dim
;

245 
dim3
 
	gm_block_dim
;

246 
dim3
 
	gm_Ãxt_ùa
;

247 
dim3
 
	gm_Ãxt_tid
;

249 
	gm_num_cÜes_ruÂšg
;

251 
	g¡d
::
li¡
<
şass
 
±x_th»ad_šfo
 *> 
m_aùive_th»ads
;

252 
şass
 
memÜy_¥aû
 *
	gm_·¿m_mem
;

255 
	scÜe_cÚfig
 {

256 
cÜe_cÚfig
()

258 
	mm_v®id
 = 
çl£
;

259 
	mnum_shmem_bªk
=16;

260 
	mshmem_lim™ed_brßdÿ¡
 = 
çl£
;

261 
	mgpgpu_shmem_sizeDeçuÉ
=()-1;

262 
	mgpgpu_shmem_sizeP»fL1
=()-1;

263 
	mgpgpu_shmem_sizeP»fSh¬ed
=()-1;

265 
vœtu®
 
š™
() = 0;

267 
boŞ
 
	mm_v®id
;

268 
	mw¬p_size
;

271 
	mgpgpu_cßËsû_¬ch
;

274 
boŞ
 
	mshmem_lim™ed_brßdÿ¡
;

275 cÚ¡ 
add»ss_ty³
 
	mWORD_SIZE
=4;

276 
	mnum_shmem_bªk
;

277 
shmem_bªk_func
(
add»ss_ty³
 
addr
) const

279  ((
	maddr
/
	mWORD_SIZE
è% 
	mnum_shmem_bªk
);

281 
	mmem_w¬p_·¹s
;

282 
mubË
 
	mgpgpu_shmem_size
;

283 
	mgpgpu_shmem_sizeDeçuÉ
;

284 
	mgpgpu_shmem_sizeP»fL1
;

285 
	mgpgpu_shmem_sizeP»fSh¬ed
;

288 
	mgpgpu_ÿche_‹xl1_lšesize
;

289 
	mgpgpu_ÿche_cÚ¡l1_lšesize
;

291 
	mgpgpu_max_š¢_issue_³r_w¬p
;

295 cÚ¡ 
	gMAX_WARP_SIZE
 = 32;

296 
	g¡d
::
	tb™£t
<
	tMAX_WARP_SIZE
> 
	taùive_mask_t
;

297 
	#MAX_WARP_SIZE_SIMT_STACK
 
MAX_WARP_SIZE


	)

298 
	g¡d
::
	tb™£t
<
	tMAX_WARP_SIZE_SIMT_STACK
> 
	tsimt_mask_t
;

299 
	g¡d
::
	tveùÜ
<
	tadd»ss_ty³
> 
	taddr_veùÜ_t
;

301 şas 
	csimt_¡ack
 {

302 
	mpublic
:

303 
simt_¡ack
Ğ
wid
, 
w¬pSize
);

305 
»£t
();

306 
Ïunch
Ğ
add»ss_ty³
 
¡¬t_pc
, cÚ¡ 
simt_mask_t
 &
aùive_mask
 );

307 
upd©e
Ğ
simt_mask_t
 &
th»ad_dÚe
, 
addr_veùÜ_t
 &
Ãxt_pc
, 
add»ss_ty³
 
»cvg_pc
, 
İ_ty³
 
Ãxt_š¡_İ
,
Ãxt_š¡_size
,‡dd»ss_ty³ 
Ãxt_š¡_pc
 );

309 cÚ¡ 
	msimt_mask_t
 &
	$g‘_aùive_mask
() const;

310 
	$g‘_pdom_¡ack_tİ_šfo
Ğ*
pc
, *
½c
 ) const;

311 
	$g‘_½
() const;

312 
	$´št
(
FILE
*
å
) const;

314 
´Ùeùed
:

315 
m_w¬p_id
;

316 
m_w¬p_size
;

318 
	e¡ack_’Œy_ty³
 {

319 
STACK_ENTRY_TYPE_NORMAL
 = 0,

320 
STACK_ENTRY_TYPE_CALL


323 
	ssimt_¡ack_’Œy
 {

324 
add»ss_ty³
 
m_pc
;

325 
m_ÿÎd•th
;

326 
simt_mask_t
 
m_aùive_mask
;

327 
add»ss_ty³
 
m_»cvg_pc
;

328 
m_b¿nch_div_cyşe
;

329 
¡ack_’Œy_ty³
 
m_ty³
;

330 
	`simt_¡ack_’Œy
() :

331 
	`m_pc
(-1), 
	`m_ÿÎd•th
(0), 
	`m_aùive_mask
(), 
	`m_»cvg_pc
(-1), 
	`m_b¿nch_div_cyşe
(0), 
	`m_ty³
(
STACK_ENTRY_TYPE_NORMAL
) { };

332 
	}
};

334 
	g¡d
::
deque
<
simt_¡ack_’Œy
> 
m_¡ack
;

337 
	#GLOBAL_HEAP_START
 0x80000000

	)

339 
	#SHARED_MEM_SIZE_MAX
 (64*1024)

	)

340 
	#LOCAL_MEM_SIZE_MAX
 (8*1024)

	)

341 
	#MAX_STREAMING_MULTIPROCESSORS
 64

	)

342 
	#MAX_THREAD_PER_SM
 2048

	)

343 
	#TOTAL_LOCAL_MEM_PER_SM
 (
MAX_THREAD_PER_SM
*
LOCAL_MEM_SIZE_MAX
)

	)

344 
	#TOTAL_SHARED_MEM
 (
MAX_STREAMING_MULTIPROCESSORS
*
SHARED_MEM_SIZE_MAX
)

	)

345 
	#TOTAL_LOCAL_MEM
 (
MAX_STREAMING_MULTIPROCESSORS
*
MAX_THREAD_PER_SM
*
LOCAL_MEM_SIZE_MAX
)

	)

346 
	#SHARED_GENERIC_START
 (
GLOBAL_HEAP_START
-
TOTAL_SHARED_MEM
)

	)

347 
	#LOCAL_GENERIC_START
 (
SHARED_GENERIC_START
-
TOTAL_LOCAL_MEM
)

	)

348 
	#STATIC_ALLOC_LIMIT
 (
GLOBAL_HEAP_START
 - (
TOTAL_LOCAL_MEM
+
TOTAL_SHARED_MEM
))

	)

350 #ià!
defšed
(
__CUDA_RUNTIME_API_H__
)

352 
	ecudaChªÃlFÜm©Kšd
 {

353 
	mcudaChªÃlFÜm©KšdSigÃd
,

354 
	mcudaChªÃlFÜm©KšdUnsigÃd
,

355 
	mcudaChªÃlFÜm©KšdFlßt


358 
	scudaChªÃlFÜm©Desc
 {

359 
	mx
;

360 
	my
;

361 
	mz
;

362 
	mw
;

363 
cudaChªÃlFÜm©Kšd
 
	mf
;

366 
	scudaA¼ay
 {

367 *
	mdevPŒ
;

368 
	mdevPŒ32
;

369 
cudaChªÃlFÜm©Desc
 
	mdesc
;

370 
	mwidth
;

371 
	mheight
;

372 
	msize
;

373 
	mdim’siÚs
;

376 
	ecudaTextu»Add»ssMode
 {

377 
	mcudaAdd»ssModeW¿p
,

378 
	mcudaAdd»ssModeCÏmp


381 
	ecudaTextu»F‹rMode
 {

382 
	mcudaF‹rModePošt
,

383 
	mcudaF‹rModeLš—r


386 
	ecudaTextu»R—dMode
 {

387 
	mcudaR—dModeEËm’tTy³
,

388 
	mcudaR—dModeNÜm®izedFlßt


391 
	s‹xtu»Reã»nû
 {

392 
	mnÜm®ized
;

393 
cudaTextu»F‹rMode
 
	mf‹rMode
;

394 
cudaTextu»Add»ssMode
 
	madd»ssMode
[3];

395 
cudaChªÃlFÜm©Desc
 
	mchªÃlDesc
;

402 
	s‹xtu»Reã»nûA‰r
 {

403 cÚ¡ 
‹xtu»Reã»nû
 *
	mm_‹x»f
;

404 
	mm_dim
;

405 
cudaTextu»R—dMode
 
	mm_»admode
;

406 
	mm_ext
;

407 
‹xtu»Reã»nûA‰r
(cÚ¡ 
‹xtu»Reã»nû
 *
‹x»f
,

408 
dim
,

409 
cudaTextu»R—dMode
 
»admode
,

410 
ext
)

411 : 
m_‹x»f
(
‹x»f
), 
m_dim
(
dim
), 
m_»admode
(
»admode
), 
m_ext
(
ext
)

415 şas 
	cgpgpu_funùiÚ®_sim_cÚfig


417 
	mpublic
:

418 
»g_İtiÚs
(
şass
 
O±iÚP¬£r
 * 
İp
);

420 
±x_£t_‹x_ÿche_lšesize
(
lšesize
);

422 
	$g‘_fÜûd_max_ÿ·b™y
(ècÚ¡ {  
m_±x_fÜû_max_ÿ·b™y
; }

423 
boŞ
 
	$cÚv”t_to_±x¶us
(ècÚ¡ {  
m_±x_cÚv”t_to_±x¶us
; 
	}
}

424 
boŞ
 
	$u£_cuobjdump
(ècÚ¡ {  
m_±x_u£_cuobjdump
; 
	}
}

425 
boŞ
 
	$ex³rim’l_lib_suµÜt
(ècÚ¡ {  
m_ex³rim’l_lib_suµÜt
; 
	}
}

427 
	$g‘_±x_š¡_debug_to_fe
(ècÚ¡ {  
g_±x_š¡_debug_to_fe
; 
	}
}

428 cÚ¡ * 
	$g‘_±x_š¡_debug_fe
(ècÚ¡ {  
g_±x_š¡_debug_fe
; 
	}
}

429 
	$g‘_±x_š¡_debug_th»ad_uid
(ècÚ¡ {  
g_±x_š¡_debug_th»ad_uid
; 
	}
}

430 
	$g‘_‹xÿche_lšesize
(ècÚ¡ {  
m_‹xÿche_lšesize
; 
	}
}

432 
	g´iv©e
:

434 
m_±x_cÚv”t_to_±x¶us
;

435 
	gm_±x_u£_cuobjdump
;

436 
	gm_ex³rim’l_lib_suµÜt
;

437 
	gm_±x_fÜû_max_ÿ·b™y
;

439 
	gg_±x_š¡_debug_to_fe
;

440 * 
	gg_±x_š¡_debug_fe
;

441 
	gg_±x_š¡_debug_th»ad_uid
;

443 
	gm_‹xÿche_lšesize
;

446 şas 
	cgpgpu_t
 {

447 
	mpublic
:

448 
gpgpu_t
ĞcÚ¡ 
gpgpu_funùiÚ®_sim_cÚfig
 &
cÚfig
 );

449 * 
gpu_m®loc
Ğ
size_t
 
size
 );

450 * 
gpu_m®loÿ¼ay
Ğ
size_t
 
couÁ
 );

451 
gpu_mem£t
Ğ
size_t
 
d¡_¡¬t_addr
, 
c
, size_ˆ
couÁ
 );

452 
memıy_to_gpu
Ğ
size_t
 
d¡_¡¬t_addr
, cÚ¡ *
¤c
, size_ˆ
couÁ
 );

453 
memıy_äom_gpu
Ğ*
d¡
, 
size_t
 
¤c_¡¬t_addr
, size_ˆ
couÁ
 );

454 
memıy_gpu_to_gpu
Ğ
size_t
 
d¡
, size_ˆ
¤c
, size_ˆ
couÁ
 );

456 
şass
 
memÜy_¥aû
 *
	$g‘_glob®_memÜy
(è{  
m_glob®_mem
; }

457 
şass
 
memÜy_¥aû
 *
	$g‘_‹x_memÜy
(è{  
m_‹x_mem
; 
	}
}

458 
şass
 
memÜy_¥aû
 *
	$g‘_surf_memÜy
(è{  
m_surf_mem
; 
	}
}

460 
gpgpu_±x_sim_bšdTextu»ToA¼ay
(cÚ¡ 
‹xtu»Reã»nû
* 
‹x»f
, cÚ¡ 
cudaA¼ay
* 
¬¿y
);

461 
gpgpu_±x_sim_bšdNameToTextu»
(cÚ¡ * 
Çme
, cÚ¡ 
‹xtu»Reã»nû
* 
‹x»f
, 
dim
, 
»admode
, 
ext
);

462 cÚ¡ * 
gpgpu_±x_sim_fšdNameäomTextu»
(cÚ¡ 
‹xtu»Reã»nû
* 
‹x»f
);

464 cÚ¡ 
‹xtu»Reã»nû
* 
	$g‘_‹x»f
(cÚ¡ 
¡d
::
¡ršg
 &
‹xÇme
) const

466 
¡d
::
m­
<¡d::
¡ršg
, cÚ¡ 
‹xtu»Reã»nû
*>::
cÚ¡_™”©Ü
 
t
=
m_NameToTextu»Ref
.
	`fšd
(
‹xÇme
);

467 
	`as£¹
Ğ
t
 !ğ
m_NameToTextu»Ref
.
	`’d
() );

468  
t
->
£cÚd
;

469 
	}
}

470 cÚ¡ 
cudaA¼ay
* 
	$g‘_‹x¬¿y
ĞcÚ¡ 
‹xtu»Reã»nû
 *
‹x»f
 ) const

472 
¡d
::
m­
<cÚ¡ 
‹xtu»Reã»nû
*,cÚ¡ 
cudaA¼ay
*>::
cÚ¡_™”©Ü
 
t
=
m_Textu»RefToCudaA¼ay
.
	`fšd
(
‹x»f
);

473 
	`as£¹
(
t
 !ğ
m_Textu»RefToCudaA¼ay
.
	`’d
());

474  
t
->
£cÚd
;

475 
	}
}

476 cÚ¡ 
‹xtu»Info
* 
	$g‘_‹xšfo
ĞcÚ¡ 
‹xtu»Reã»nû
 *
‹x»f
 ) const

478 
¡d
::
m­
<cÚ¡ 
‹xtu»Reã»nû
*, cÚ¡ 
‹xtu»Info
*>::
cÚ¡_™”©Ü
 
t
=
m_Textu»RefToTexu»Info
.
	`fšd
(
‹x»f
);

479 
	`as£¹
(
t
 !ğ
m_Textu»RefToTexu»Info
.
	`’d
());

480  
t
->
£cÚd
;

481 
	}
}

483 cÚ¡ 
‹xtu»Reã»nûA‰r
* 
	$g‘_‹x©Œ
ĞcÚ¡ 
‹xtu»Reã»nû
 *
‹x»f
 ) const

485 
¡d
::
m­
<cÚ¡ 
‹xtu»Reã»nû
*, cÚ¡ 
‹xtu»Reã»nûA‰r
*>::
cÚ¡_™”©Ü
 
t
=
m_Textu»RefToA‰ribu‹
.
	`fšd
(
‹x»f
);

486 
	`as£¹
(
t
 !ğ
m_Textu»RefToA‰ribu‹
.
	`’d
());

487  
t
->
£cÚd
;

488 
	}
}

490 cÚ¡ 
	ggpgpu_funùiÚ®_sim_cÚfig
 &
	$g‘_cÚfig
(ècÚ¡ {  
m_funùiÚ_mod–_cÚfig
; 
	}
}

491 
FILE
* 
	$g‘_±x_š¡_debug_fe
(è{  
±x_š¡_debug_fe
; 
	}
}

493 
	g´Ùeùed
:

494 cÚ¡ 
gpgpu_funùiÚ®_sim_cÚfig
 &
m_funùiÚ_mod–_cÚfig
;

495 
FILE
* 
	g±x_š¡_debug_fe
;

497 
şass
 
memÜy_¥aû
 *
	gm_glob®_mem
;

498 
şass
 
memÜy_¥aû
 *
	gm_‹x_mem
;

499 
şass
 
memÜy_¥aû
 *
	gm_surf_mem
;

501 
	gm_dev_m®loc
;

503 
	g¡d
::
m­
<
¡d
::
¡ršg
, cÚ¡ 
	g‹xtu»Reã»nû
*> 
	gm_NameToTextu»Ref
;

504 
	g¡d
::
m­
<cÚ¡ 
‹xtu»Reã»nû
*,cÚ¡ 
	gcudaA¼ay
*> 
	gm_Textu»RefToCudaA¼ay
;

505 
	g¡d
::
m­
<cÚ¡ 
‹xtu»Reã»nû
*, cÚ¡ 
	g‹xtu»Info
*> 
	gm_Textu»RefToTexu»Info
;

506 
	g¡d
::
m­
<cÚ¡ 
‹xtu»Reã»nû
*, cÚ¡ 
	g‹xtu»Reã»nûA‰r
*> 
	gm_Textu»RefToA‰ribu‹
;

509 
	sgpgpu_±x_sim_k”Ãl_šfo


513 
	mlmem
;

514 
	msmem
;

515 
	mcmem
;

516 
	m»gs
;

517 
	m±x_v”siÚ
;

518 
	msm_rg‘
;

521 
	sgpgpu_±x_sim_¬g
 {

522 
gpgpu_±x_sim_¬g
(è{ 
	mm_¡¬t
=
NULL
; }

523 
gpgpu_±x_sim_¬g
(cÚ¡ *
¬g
, 
size_t
 
size
, size_ˆ
off£t
)

525 
	mm_¡¬t
=
¬g
;

526 
	mm_nby‹s
=
size
;

527 
	mm_off£t
=
off£t
;

529 cÚ¡ *
	mm_¡¬t
;

530 
size_t
 
	mm_nby‹s
;

531 
size_t
 
	mm_off£t
;

534 
	g¡d
::
	tli¡
<
	tgpgpu_±x_sim_¬g
> 
	tgpgpu_±x_sim_¬g_li¡_t
;

536 şas 
	cmemÜy_¥aû_t
 {

537 
	mpublic
:

538 
	$memÜy_¥aû_t
(è{ 
m_ty³
 = 
undefšed_¥aû
; 
m_bªk
=0; }

539 
	$memÜy_¥aû_t
ĞcÚ¡ 
_memÜy_¥aû_t
 &
äom
 ) { 
m_ty³
 = from; 
m_bªk
 = 0; 
	}
}

540 
boŞ
 
	gİ”©Ü
==ĞcÚ¡ 
memÜy_¥aû_t
 &
x
 ) cÚ¡ {  (
m_bªk
 =ğx.m_bªkè&& (
m_ty³
 == x.m_type); }

541 
boŞ
 
	gİ”©Ü
!=ĞcÚ¡ 
memÜy_¥aû_t
 &
x
 ) cÚ¡ {  !(*
this
 == x); }

542 
boŞ
 
	gİ”©Ü
<ĞcÚ¡ 
	gmemÜy_¥aû_t
 &
	gx
 ) const

544 if(
	gm_ty³
 < 
	gx
.m_type)

545  
	gŒue
;

546 if(
	gm_ty³
 > 
	gx
.m_type)

547  
	gçl£
;

548 ifĞ
	gm_bªk
 < 
	gx
.m_bank )

549  
	gŒue
;

550  
	gçl£
;

552 
_memÜy_¥aû_t
 
	$g‘_ty³
(ècÚ¡ {  
m_ty³
; 
	}
}

553 
	$g‘_bªk
(ècÚ¡ {  
m_bªk
; 
	}
}

554 
	$£t_bªk
Ğ
b
 ) { 
m_bªk
 = b; 
	}
}

555 
boŞ
 
	$is_cÚ¡
(ècÚ¡ {  (
m_ty³
 =ğ
cÚ¡_¥aû
è|| (m_ty³ =ğ
·¿m_¥aû_k”Ãl
); 
	}
}

556 
boŞ
 
	$is_loÿl
(ècÚ¡ {  (
m_ty³
 =ğ
loÿl_¥aû
è|| (m_ty³ =ğ
·¿m_¥aû_loÿl
); 
	}
}

557 
boŞ
 
	$is_glob®
(ècÚ¡ {  (
m_ty³
 =ğ
glob®_¥aû
); 
	}
}

559 
	g´iv©e
:

560 
_memÜy_¥aû_t
 
m_ty³
;

561 
	gm_bªk
;

564 cÚ¡ 
	gMAX_MEMORY_ACCESS_SIZE
 = 128;

565 
	g¡d
::
	tb™£t
<
	tMAX_MEMORY_ACCESS_SIZE
> 
	tmem_acûss_by‹_mask_t
;

566 
	#NO_PARTIAL_WRITE
 (
	`mem_acûss_by‹_mask_t
())

	)

568 
	#MEM_ACCESS_TYPE_TUP_DEF
 \

569 
	`MA_TUP_BEGIN
Ğ
mem_acûss_ty³
 ) \

570 
	`MA_TUP
Ğ
GLOBAL_ACC_R
 ), \

571 
	`MA_TUP
Ğ
LOCAL_ACC_R
 ), \

572 
	`MA_TUP
Ğ
CONST_ACC_R
 ), \

573 
	`MA_TUP
Ğ
TEXTURE_ACC_R
 ), \

574 
	`MA_TUP
Ğ
GLOBAL_ACC_W
 ), \

575 
	`MA_TUP
Ğ
LOCAL_ACC_W
 ), \

576 
	`MA_TUP
Ğ
L1_WRBK_ACC
 ), \

577 
	`MA_TUP
Ğ
L2_WRBK_ACC
 ), \

578 
	`MA_TUP
Ğ
INST_ACC_R
 ), \

579 
	`MA_TUP
Ğ
L1_WR_ALLOC_R
 ), \

580 
	`MA_TUP
Ğ
L2_WR_ALLOC_R
 ), \

581 
	`MA_TUP
Ğ
NUM_MEM_ACCESS_TYPE
 ) \

582 
	`MA_TUP_END
Ğ
mem_acûss_ty³
 )

	)

584 
	#MA_TUP_BEGIN
(
X
è
	eX
 {

	)

585 
	#MA_TUP
(
X
è
	)
X

586 
	#MA_TUP_END
(
X
è};

	)

587 
	gMEM_ACCESS_TYPE_TUP_DEF


588 #undeà
MA_TUP_BEGIN


589 #undeà
MA_TUP


590 #undeà
MA_TUP_END


592 cÚ¡ * 
mem_acûss_ty³_¡r
(
mem_acûss_ty³
 
acûss_ty³
);

594 
	eÿche_İ”©Ü_ty³
 {

595 
	mCACHE_UNDEFINED
,

598 
	mCACHE_ALL
,

599 
	mCACHE_LAST_USE
,

600 
	mCACHE_VOLATILE
,

603 
	mCACHE_STREAMING
,

604 
	mCACHE_GLOBAL
,

607 
	mCACHE_WRITE_BACK
,

608 
	mCACHE_WRITE_THROUGH


611 şas 
	cmem_acûss_t
 {

612 
	mpublic
:

613 
	$mem_acûss_t
(è{ 
	`š™
(); }

614 
	$mem_acûss_t
Ğ
mem_acûss_ty³
 
ty³
,

615 
Ãw_addr_ty³
 
add»ss
,

616 
size
,

617 
boŞ
 
wr
 )

619 
	`š™
();

620 
m_ty³
 = 
ty³
;

621 
m_addr
 = 
add»ss
;

622 
m_»q_size
 = 
size
;

623 
m_wr™e
 = 
wr
;

624 
	}
}

625 
	$mem_acûss_t
Ğ
mem_acûss_ty³
 
ty³
,

626 
Ãw_addr_ty³
 
add»ss
,

627 
size
,

628 
boŞ
 
wr
,

629 cÚ¡ 
aùive_mask_t
 &
aùive_mask
,

630 cÚ¡ 
mem_acûss_by‹_mask_t
 &
by‹_mask
 )

631 : 
	`m_w¬p_mask
(
aùive_mask
), 
	$m_by‹_mask
(
by‹_mask
)

633 
	`š™
();

634 
m_ty³
 = 
ty³
;

635 
m_addr
 = 
add»ss
;

636 
m_»q_size
 = 
size
;

637 
m_wr™e
 = 
wr
;

638 
	}
}

640 
Ãw_addr_ty³
 
	$g‘_addr
(ècÚ¡ {  
m_addr
; 
	}
}

641 
	$£t_addr
(
Ãw_addr_ty³
 
addr
è{
m_addr
÷ddr;
	}
}

642 
	$g‘_size
(ècÚ¡ {  
m_»q_size
; 
	}
}

643 cÚ¡ 
	gaùive_mask_t
 &
	$g‘_w¬p_mask
(ècÚ¡ {  
m_w¬p_mask
; 
	}
}

644 
boŞ
 
	$is_wr™e
(ècÚ¡ {  
m_wr™e
; 
	}
}

645 
mem_acûss_ty³
 
	$g‘_ty³
(ècÚ¡ {  
m_ty³
; 
	}
}

646 
mem_acûss_by‹_mask_t
 
	$g‘_by‹_mask
(ècÚ¡ {  
m_by‹_mask
; 
	}
}

648 
	$´št
(
FILE
 *
å
) const

650 
	`årštf
(
å
,"addr=0x%Îx, %s, size=%u, ", 
m_addr
, 
m_wr™e
?"¡Üe":"lßd ", 
m_»q_size
 );

651 
m_ty³
) {

652 
GLOBAL_ACC_R
: 
	`årštf
(
å
,"GLOBAL_R"); ;

653 
LOCAL_ACC_R
: 
	`årštf
(
å
,"LOCAL_R "); ;

654 
CONST_ACC_R
: 
	`årštf
(
å
,"CONST "); ;

655 
TEXTURE_ACC_R
: 
	`årštf
(
å
,"TEXTURE "); ;

656 
GLOBAL_ACC_W
: 
	`årštf
(
å
,"GLOBAL_W"); ;

657 
LOCAL_ACC_W
: 
	`årštf
(
å
,"LOCAL_W "); ;

658 
L2_WRBK_ACC
: 
	`årštf
(
å
,"L2_WRBK "); ;

659 
INST_ACC_R
: 
	`årštf
(
å
,"INST "); ;

660 
L1_WRBK_ACC
: 
	`årštf
(
å
,"L1_WRBK "); ;

661 : 
	`årštf
(
å
,"unknown "); ;

663 
	}
}

665 
	g´iv©e
:

666 
	$š™
()

668 
m_uid
=++
sm_Ãxt_acûss_uid
;

669 
m_addr
=0;

670 
m_»q_size
=0;

671 
	}
}

673 
	gm_uid
;

674 
Ãw_addr_ty³
 
	gm_addr
;

675 
boŞ
 
	gm_wr™e
;

676 
	gm_»q_size
;

677 
mem_acûss_ty³
 
	gm_ty³
;

678 
aùive_mask_t
 
	gm_w¬p_mask
;

679 
mem_acûss_by‹_mask_t
 
	gm_by‹_mask
;

681 
	gsm_Ãxt_acûss_uid
;

684 
şass
 
	gmem_ãtch
;

686 şas 
	cmem_ãtch_š‹rçû
 {

687 
	mpublic
:

688 
vœtu®
 
boŞ
 
	$fuÎ
Ğ
size
, 
boŞ
 
wr™e
 ) const = 0;

689 
vœtu®
 
	`push
Ğ
mem_ãtch
 *
mf
 ) = 0;

692 şas 
	cmem_ãtch_®loÿtÜ
 {

693 
public
:

694 
vœtu®
 
mem_ãtch
 *
	$®loc
Ğ
Ãw_addr_ty³
 
addr
, 
mem_acûss_ty³
 
ty³
, 
size
, 
boŞ
 
wr
 ) const = 0;

695 
vœtu®
 
mem_ãtch
 *
	$®loc
ĞcÚ¡ 
şass
 
w¬p_š¡_t
 &
š¡
, cÚ¡ 
mem_acûss_t
 &
acûss
 ) const = 0;

699 
	#MAX_REG_OPERANDS
 8

	)

701 
	sd¿m_ÿÎback_t
 {

702 
	`d¿m_ÿÎback_t
(è{ 
funùiÚ
=
NULL
; 
š¡ruùiÚ
=NULL; 
th»ad
=NULL; }

703 (*
funùiÚ
)(cÚ¡ 
şass
 
š¡_t
*, cÏs 
±x_th»ad_šfo
*);

705 cÚ¡ 
şass
 
š¡_t
* 
š¡ruùiÚ
;

706 
şass
 
±x_th»ad_šfo
 *
th»ad
;

709 şas 
	cš¡_t
 {

710 
public
:

711 
	$š¡_t
()

713 
m_decoded
=
çl£
;

714 
pc
=(
add»ss_ty³
)-1;

715 
»cÚv”g’û_pc
=(
add»ss_ty³
)-1;

716 
İ
=
NO_OP
;

717 
b¬_ty³
=
NOT_BAR
;

718 
»d_ty³
=
NOT_RED
;

719 
b¬_id
=()-1;

720 
b¬_couÁ
=()-1;

721 
İºd_ty³
=
UN_OP
;

722 
¥_İ
=
OTHER_OP
;

723 
İ_pe
=
UNKOWN_OP
;

724 
mem_İ
=
NOT_TEX
;

725 
num_İ”ªds
=0;

726 
num_»gs
=0;

727 
	`mem£t
(
out
, 0, ());

728 
	`mem£t
(
š
, 0, ());

729 
is_veùÜš
=0;

730 
is_veùÜout
=0;

731 
¥aû
 = 
	`memÜy_¥aû_t
();

732 
ÿche_İ
 = 
CACHE_UNDEFINED
;

733 
Ï‹ncy
 = 1;

734 
š™ŸtiÚ_š‹rv®
 = 1;

735  
i
=0; i < 
MAX_REG_OPERANDS
; i++ ) {

736 
¬ch_»g
.
¤c
[
i
] = -1;

737 
¬ch_»g
.
d¡
[
i
] = -1;

739 
isize
=0;

741 
boŞ
 
	$v®id
(ècÚ¡ {  
m_decoded
; 
	}
}

742 
vœtu®
 
	$´št_š¢
Ğ
FILE
 *
å
 ) const

744 
	`årštf
(
å
," [š¡ @…c=0x%04x] ", 
pc
 );

745 
	}
}

746 
boŞ
 
	$is_lßd
(ècÚ¡ {  (
İ
 =ğ
LOAD_OP
 || 
memÜy_İ
 =ğ
memÜy_lßd
); 
	}
}

747 
boŞ
 
	$is_¡Üe
(ècÚ¡ {  (
İ
 =ğ
STORE_OP
 || 
memÜy_İ
 =ğ
memÜy_¡Üe
); 
	}
}

748 
	$g‘_num_İ”ªds
(ècÚ¡ { 
num_İ”ªds
;
	}
}

749 
	$g‘_num_»gs
(ècÚ¡ { 
num_»gs
;
	}
}

750 
	$£t_num_»gs
(
num
è{
num_»gs
òum;
	}
}

751 
	$£t_num_İ”ªds
(
num
è{
num_İ”ªds
òum;
	}
}

752 
	$£t_b¬_id
(
id
è{
b¬_id
=id;
	}
}

753 
	$£t_b¬_couÁ
(
couÁ
è{
b¬_couÁ
=couÁ;
	}
}

755 
add»ss_ty³
 
	gpc
;

756 
	gisize
;

757 
İ_ty³
 
	gİ
;

759 
b¬r›r_ty³
 
	gb¬_ty³
;

760 
»duùiÚ_ty³
 
	g»d_ty³
;

761 
	gb¬_id
;

762 
	gb¬_couÁ
;

764 
ty³s_of_İ”ªds
 
	gİºd_ty³
;

765 
¥ecŸl_İs
 
	g¥_İ
;

766 
İ”©iÚ_p–še
 
	gİ_pe
;

767 
mem_İ”©iÚ
 
	gmem_İ
;

768 
_memÜy_İ_t
 
	gmemÜy_İ
;

769 
	gnum_İ”ªds
;

770 
	gnum_»gs
;

772 
add»ss_ty³
 
	g»cÚv”g’û_pc
;

774 
	gout
[4];

775 
	gš
[4];

776 
	gis_veùÜš
;

777 
	gis_veùÜout
;

778 
	g´ed
;

779 
	g¬1
, 
	g¬2
;

782 
	gd¡
[
MAX_REG_OPERANDS
];

783 
	g¤c
[
MAX_REG_OPERANDS
];

784 } 
	g¬ch_»g
;

786 
	gÏ‹ncy
;

787 
	gš™ŸtiÚ_š‹rv®
;

789 
	gd©a_size
;

790 
memÜy_¥aû_t
 
	g¥aû
;

791 
ÿche_İ”©Ü_ty³
 
	gÿche_İ
;

793 
	g´Ùeùed
:

794 
boŞ
 
m_decoded
;

795 
vœtu®
 
	$´e_decode
(è{
	}
}

798 
	ediv”g’û_suµÜt_t
 {

799 
	mPOST_DOMINATOR
 = 1,

800 
	mNUM_SIMD_MODEL


803 cÚ¡ 
	gMAX_ACCESSES_PER_INSN_PER_THREAD
 = 8;

805 şas 
	cw¬p_š¡_t
: 
public
 
š¡_t
 {

806 
public
:

808 
	$w¬p_š¡_t
()

810 
m_uid
=0;

811 
m_em±y
=
Œue
;

812 
m_cÚfig
=
NULL
;

814 
	$w¬p_š¡_t
ĞcÚ¡ 
cÜe_cÚfig
 *
cÚfig
 )

816 
m_uid
=0;

817 
	`as£¹
(
cÚfig
->
w¬p_size
<=
MAX_WARP_SIZE
);

818 
m_cÚfig
=
cÚfig
;

819 
m_em±y
=
Œue
;

820 
m_i§tomic
=
çl£
;

821 
m_³r_sÿÏr_th»ad_v®id
=
çl£
;

822 
m_mem_acûs£s_ü—‹d
=
çl£
;

823 
m_ÿche_h™
=
çl£
;

824 
m_is_´štf
=
çl£
;

825 
	}
}

826 
	gvœtu®
 ~
	$w¬p_š¡_t
(){

827 
	}
}

830 
brßdÿ¡_b¬r›r_»duùiÚ
ĞcÚ¡ 
aùive_mask_t
& 
acûss_mask
);

831 
do_©omic
(
boŞ
 
fÜûDo
=
çl£
);

832 
do_©omic
ĞcÚ¡ 
aùive_mask_t
& 
acûss_mask
, 
boŞ
 
fÜûDo
=
çl£
 );

833 
	$ş—r
()

835 
m_em±y
=
Œue
;

836 
	}
}

837 
	$issue
ĞcÚ¡ 
aùive_mask_t
 &
mask
, 
w¬p_id
, 
cyşe
, 
dyÇmic_w¬p_id
 )

839 
m_w¬p_aùive_mask
 = 
mask
;

840 
m_w¬p_issued_mask
 = 
mask
;

841 
m_uid
 = ++
sm_Ãxt_uid
;

842 
m_w¬p_id
 = 
w¬p_id
;

843 
m_dyÇmic_w¬p_id
 = 
dyÇmic_w¬p_id
;

844 
issue_cyşe
 = 
cyşe
;

845 
cyşes
 = 
š™ŸtiÚ_š‹rv®
;

846 
m_ÿche_h™
=
çl£
;

847 
m_em±y
=
çl£
;

848 
	}
}

849 cÚ¡ 
	gaùive_mask_t
 & 
	$g‘_aùive_mask
() const

851  
m_w¬p_aùive_mask
;

852 
	}
}

853 
	$com¶‘ed
Ğ
cyşe
 ) const;

855 
	$£t_addr
Ğ
n
, 
Ãw_addr_ty³
 
addr
 )

857 ifĞ!
m_³r_sÿÏr_th»ad_v®id
 ) {

858 
m_³r_sÿÏr_th»ad
.
	`»size
(
m_cÚfig
->
w¬p_size
);

859 
m_³r_sÿÏr_th»ad_v®id
=
Œue
;

861 
m_³r_sÿÏr_th»ad
[
n
].
mem»qaddr
[0] = 
addr
;

862 
	}
}

863 
	$£t_addr
Ğ
n
, 
Ãw_addr_ty³
* 
addr
, 
num_addrs
 )

865 ifĞ!
m_³r_sÿÏr_th»ad_v®id
 ) {

866 
m_³r_sÿÏr_th»ad
.
	`»size
(
m_cÚfig
->
w¬p_size
);

867 
m_³r_sÿÏr_th»ad_v®id
=
Œue
;

869 
	`as£¹
(
num_addrs
 <ğ
MAX_ACCESSES_PER_INSN_PER_THREAD
);

870 
i
=0; i<
num_addrs
; i++)

871 
m_³r_sÿÏr_th»ad
[
n
].
mem»qaddr
[
i
] = 
addr
[i];

872 
	}
}

874 
	sŒª§ùiÚ_šfo
 {

875 
	g¡d
::
b™£t
<4> 
chunks
;

876 
mem_acûss_by‹_mask_t
 
	gby‹s
;

877 
aùive_mask_t
 
	gaùive
;

879 
boŞ
 
‹¡_by‹s
(
¡¬t_b™
, 
’d_b™
) {

880  
	gi
=
¡¬t_b™
; i<=
’d_b™
; i++ )

881 if(
	gby‹s
.
‹¡
(
i
))

882  
	gŒue
;

883  
	gçl£
;

887 
g’”©e_mem_acûs£s
();

888 
memÜy_cßËscšg_¬ch_13
Ğ
boŞ
 
is_wr™e
, 
mem_acûss_ty³
 
acûss_ty³
 );

889 
memÜy_cßËscšg_¬ch_13_©omic
Ğ
boŞ
 
is_wr™e
, 
mem_acûss_ty³
 
acûss_ty³
 );

890 
memÜy_cßËscšg_¬ch_13_»duû_ªd_£nd
Ğ
boŞ
 
is_wr™e
, 
mem_acûss_ty³
 
acûss_ty³
, cÚ¡ 
Œª§ùiÚ_šfo
 &
šfo
, 
Ãw_addr_ty³
 
addr
, 
£gm’t_size
 );

892 
add_ÿÎback
Ğ
ÏÃ_id
,

893 (*
funùiÚ
)(cÚ¡ 
şass
 
š¡_t
*, cÏs 
±x_th»ad_šfo
*),

894 cÚ¡ 
š¡_t
 *
š¡
,

895 
şass
 
±x_th»ad_šfo
 *
th»ad
,

896 
boŞ
 
©omic
)

898 ifĞ!
m_³r_sÿÏr_th»ad_v®id
 ) {

899 
m_³r_sÿÏr_th»ad
.
	`»size
(
m_cÚfig
->
w¬p_size
);

900 
m_³r_sÿÏr_th»ad_v®id
=
Œue
;

901 if(
©omic
è
m_i§tomic
=
Œue
;

903 
m_³r_sÿÏr_th»ad
[
ÏÃ_id
].
ÿÎback
.
funùiÚ
 = function;

904 
m_³r_sÿÏr_th»ad
[
ÏÃ_id
].
ÿÎback
.
š¡ruùiÚ
 = 
š¡
;

905 
m_³r_sÿÏr_th»ad
[
ÏÃ_id
].
ÿÎback
.
th»ad
 =hread;

906 
	}
}

907 
£t_aùive
ĞcÚ¡ 
aùive_mask_t
 &
aùive
 );

909 
ş—r_aùive
ĞcÚ¡ 
aùive_mask_t
 &
šaùive
 );

910 
£t_nÙ_aùive
Ğ
ÏÃ_id
 );

913 
vœtu®
 
	$´št_š¢
(
FILE
 *
å
) const

915 
	`årštf
(
å
," [š¡ @…c=0x%04x] ", 
pc
 );

916 
i
=()
m_cÚfig
->
w¬p_size
-1; i>=0; i--)

917 
	`årštf
(
å
, "%c", ((
m_w¬p_aùive_mask
[
i
])?'1':'0') );

918 
	}
}

919 
boŞ
 
	$aùive
Ğ
th»ad
 ) cÚ¡ {  
m_w¬p_aùive_mask
.
	`‹¡
Ñh»ad); 
	}
}

920 
	$aùive_couÁ
(ècÚ¡ {  
m_w¬p_aùive_mask
.
	`couÁ
(); 
	}
}

921 
	$issued_couÁ
(ècÚ¡ { 
	`as£¹
(
m_em±y
 =ğ
çl£
);  
m_w¬p_issued_mask
.
	`couÁ
(); 
	}
}

922 
boŞ
 
	$em±y
(ècÚ¡ {  
m_em±y
; 
	}
}

923 
	$w¬p_id
() const

925 
	`as£¹
Ğ!
m_em±y
 );

926  
m_w¬p_id
;

927 
	}
}

928 
	$dyÇmic_w¬p_id
() const

930 
	`as£¹
Ğ!
m_em±y
 );

931  
m_dyÇmic_w¬p_id
;

932 
	}
}

933 
boŞ
 
	$has_ÿÎback
Ğ
n
 ) const

935  
m_w¬p_aùive_mask
[
n
] && 
m_³r_sÿÏr_th»ad_v®id
 &&

936 (
m_³r_sÿÏr_th»ad
[
n
].
ÿÎback
.
funùiÚ
!=
NULL
);

937 
	}
}

938 
Ãw_addr_ty³
 
	$g‘_addr
Ğ
n
 ) const

940 
	`as£¹
Ğ
m_³r_sÿÏr_th»ad_v®id
 );

941  
m_³r_sÿÏr_th»ad
[
n
].
mem»qaddr
[0];

942 
	}
}

944 
boŞ
 
	$i§tomic
(ècÚ¡ {  
m_i§tomic
; 
	}
}

946 
	$w¬p_size
(ècÚ¡ {  
m_cÚfig
->
w¬p_size
; 
	}
}

948 
boŞ
 
	$acûssq_em±y
(ècÚ¡ {  
m_acûssq
.
	`em±y
(); 
	}
}

949 
	$acûssq_couÁ
(ècÚ¡ {  
m_acûssq
.
	`size
(); 
	}
}

950 cÚ¡ 
	gmem_acûss_t
 &
	$acûssq_back
(è{  
m_acûssq
.
	`back
(); 
	}
}

951 
	$acûssq_pİ_back
(è{ 
m_acûssq
.
	`pİ_back
(); 
	}
}

953 
boŞ
 
	$di¥©ch_d–ay
()

955 ifĞ
cyşes
 > 0 )

956 
cyşes
--;

957  
cyşes
 > 0;

958 
	}
}

960 
boŞ
 
	$has_di¥©ch_d–ay
(){

961  
cyşes
 > 0;

962 
	}
}

964 
	$´št
Ğ
FILE
 *
fout
 ) const;

965 
	$g‘_uid
(ècÚ¡ {  
m_uid
; 
	}
}

968 
	g´Ùeùed
:

970 
m_uid
;

971 
boŞ
 
	gm_em±y
;

972 
boŞ
 
	gm_ÿche_h™
;

973 
	gissue_cyşe
;

974 
	gcyşes
;

975 
boŞ
 
	gm_i§tomic
;

976 
boŞ
 
	gm_is_´štf
;

977 
	gm_w¬p_id
;

978 
	gm_dyÇmic_w¬p_id
;

979 cÚ¡ 
cÜe_cÚfig
 *
	gm_cÚfig
;

980 
aùive_mask_t
 
	gm_w¬p_aùive_mask
;

981 
aùive_mask_t
 
	gm_w¬p_issued_mask
;

983 
	s³r_th»ad_šfo
 {

984 
³r_th»ad_šfo
() {

985 
	gi
=0; i<
	gMAX_ACCESSES_PER_INSN_PER_THREAD
; i++)

986 
	gmem»qaddr
[
i
] = 0;

988 
d¿m_ÿÎback_t
 
	gÿÎback
;

989 
Ãw_addr_ty³
 
	gmem»qaddr
[
MAX_ACCESSES_PER_INSN_PER_THREAD
];

991 
boŞ
 
	gm_³r_sÿÏr_th»ad_v®id
;

992 
	g¡d
::
veùÜ
<
³r_th»ad_šfo
> 
m_³r_sÿÏr_th»ad
;

993 
boŞ
 
	gm_mem_acûs£s_ü—‹d
;

994 
	g¡d
::
li¡
<
mem_acûss_t
> 
m_acûssq
;

996 
	gsm_Ãxt_uid
;

999 
move_w¬p
Ğ
w¬p_š¡_t
 *&
d¡
, w¬p_š¡_ˆ*&
¤c
 );

1001 
size_t
 
g‘_k”Ãl_code_size
Ğ
şass
 
funùiÚ_šfo
 *
’Œy
 );

1007 şas 
	ccÜe_t
 {

1008 
	mpublic
:

1009 
	$cÜe_t
Ğ
gpgpu_sim
 *
gpu
,

1010 
k”Ãl_šfo_t
 *
k”Ãl
,

1011 
w¬p_size
,

1012 
th»ads_³r_shad”
 )

1013 : 
	`m_gpu
Ğ
gpu
 ),

1014 
	`m_k”Ãl
Ğ
k”Ãl
 ),

1015 
	`m_simt_¡ack
Ğ
NULL
 ),

1016 
	`m_th»ad
Ğ
NULL
 ),

1017 
	$m_w¬p_size
Ğ
w¬p_size
 )

1019 
m_w¬p_couÁ
 = 
th»ads_³r_shad”
/
m_w¬p_size
;

1022 iàĞ
th»ads_³r_shad”
 % 
m_w¬p_size
 != 0 ) {

1023 
m_w¬p_couÁ
 += 1;

1025 
	`as£¹
Ğ
m_w¬p_couÁ
 * 
m_w¬p_size
 > 0 );

1026 
m_th»ad
 = ( 
±x_th»ad_šfo
** )

1027 
	`ÿÎoc
Ğ
m_w¬p_couÁ
 * 
m_w¬p_size
,

1028 Ğ
±x_th»ad_šfo
* ) );

1029 
	`š™izeSIMTSck
(
m_w¬p_couÁ
,
m_w¬p_size
);

1031 
i
=0; i<
MAX_CTA_PER_SHADER
; i++){

1032 
j
=0; j<
MAX_BARRIERS_PER_CTA
; j++){

1033 
»duùiÚ_¡Üage
[
i
][
j
]=0;

1038 
vœtu®
 ~
	$cÜe_t
(è{ 
	`ä“
(
m_th»ad
); 
	}
}

1039 
vœtu®
 
w¬p_ex™
Ğ
w¬p_id
 ) = 0;

1040 
vœtu®
 
boŞ
 
	$w¬p_wa™šg_©_b¬r›r
Ğ
w¬p_id
 ) const = 0;

1041 
vœtu®
 
	`checkExecutiÚStusAndUpd©e
(
w¬p_š¡_t
 &
š¡
, 
t
, 
tid
)=0;

1042 
şass
 
gpgpu_sim
 * 
	$g‘_gpu
(è{ 
m_gpu
;
	}
}

1043 
execu‹_w¬p_š¡_t
(
w¬p_š¡_t
 &
š¡
, 
w¬pId
 =()-1);

1044 
boŞ
 
	$±x_th»ad_dÚe
Ğ
hw_th»ad_id
 ) const ;

1045 
	`upd©eSIMTSck
(
w¬pId
, 
w¬p_š¡_t
 * 
š¡
);

1046 
	`š™izeSIMTSck
(
w¬p_couÁ
, 
w¬ps_size
);

1047 
	`d–‘eSIMTSck
();

1048 
w¬p_š¡_t
 
	`g‘Execu‹W¬p
(
w¬pId
);

1049 
	$g‘_pdom_¡ack_tİ_šfo
Ğ
w¬pId
, *
pc
, *
½c
 ) const;

1050 
k”Ãl_šfo_t
 * 
	$g‘_k”Ãl_šfo
(){  
m_k”Ãl
;
	}
}

1051 
	$g‘_w¬p_size
(ècÚ¡ {  
m_w¬p_size
; 
	}
}

1052 
	$ªd_»duùiÚ
(
ùaid
, 
b¬id
, 
boŞ
 
v®ue
è{ 
»duùiÚ_¡Üage
[ùaid][b¬id] &ğv®ue; 
	}
}

1053 
	$Ü_»duùiÚ
(
ùaid
, 
b¬id
, 
boŞ
 
v®ue
è{ 
»duùiÚ_¡Üage
[ùaid][b¬id] |ğv®ue; 
	}
}

1054 
	$pİc_»duùiÚ
(
ùaid
, 
b¬id
, 
boŞ
 
v®ue
è{ 
»duùiÚ_¡Üage
[ùaid][b¬id] +ğv®ue;
	}
}

1055 
	$g‘_»duùiÚ_v®ue
(
ùaid
, 
b¬id
è{ 
»duùiÚ_¡Üage
[ùaid][b¬id];
	}
}

1056 
	g´Ùeùed
:

1057 
şass
 
gpgpu_sim
 *
m_gpu
;

1058 
k”Ãl_šfo_t
 *
	gm_k”Ãl
;

1059 
simt_¡ack
 **
	gm_simt_¡ack
;

1060 
şass
 
±x_th»ad_šfo
 ** 
	gm_th»ad
;

1061 
	gm_w¬p_size
;

1062 
	gm_w¬p_couÁ
;

1063 
	g»duùiÚ_¡Üage
[
MAX_CTA_PER_SHADER
][
MAX_BARRIERS_PER_CTA
];

1068 şas 
	c»gi¡”_£t
 {

1069 
	mpublic
:

1070 
	$»gi¡”_£t
(
num
, cÚ¡ * 
Çme
){

1071  
i
 = 0; i < 
num
; i++ ) {

1072 
»gs
.
	`push_back
(
Ãw
 
	`w¬p_š¡_t
());

1074 
m_Çme
 = 
Çme
;

1076 
boŞ
 
	$has_ä“
(){

1077  
i
 = 0; i < 
»gs
.
	`size
(); i++ ) {

1078 ifĞ
»gs
[
i
]->
	`em±y
() ) {

1079  
Œue
;

1082  
çl£
;

1083 
	}
}

1084 
boŞ
 
	$has_»ady
(){

1085  
i
 = 0; i < 
»gs
.
	`size
(); i++ ) {

1086 ifĞ
nÙ
 
»gs
[
i
]->
	`em±y
() ) {

1087  
Œue
;

1090  
çl£
;

1091 
	}
}

1093 
	$move_š
Ğ
w¬p_š¡_t
 *&
¤c
 ){

1094 
w¬p_š¡_t
** 
ä“
 = 
	`g‘_ä“
();

1095 
	`move_w¬p
(*
ä“
, 
¤c
);

1096 
	}
}

1100 
	$move_out_to
Ğ
w¬p_š¡_t
 *&
de¡
 ){

1101 
w¬p_š¡_t
 **
»ady
=
	`g‘_»ady
();

1102 
	`move_w¬p
(
de¡
, *
»ady
);

1103 
	}
}

1105 
w¬p_š¡_t
** 
	$g‘_»ady
(){

1106 
w¬p_š¡_t
** 
»ady
;

1107 
»ady
 = 
NULL
;

1108  
i
 = 0; i < 
»gs
.
	`size
(); i++ ) {

1109 ifĞ
nÙ
 
»gs
[
i
]->
	`em±y
() ) {

1110 ifĞ
»ady
 
	`ªd
 (*»ady)->
	`g‘_uid
(è< 
»gs
[
i
]->get_uid() ) {

1113 
»ady
 = &
»gs
[
i
];

1117  
»ady
;

1118 
	}
}

1120 
	$´št
(
FILE
* 
å
) const{

1121 
	`årštf
(
å
, "% : @%p\n", 
m_Çme
, 
this
);

1122  
i
 = 0; i < 
»gs
.
	`size
(); i++ ) {

1123 
	`årštf
(
å
, " ");

1124 
»gs
[
i
]->
	`´št
(
å
);

1125 
	`årštf
(
å
, "\n");

1127 
	}
}

1129 
w¬p_š¡_t
 ** 
	$g‘_ä“
(){

1130  
i
 = 0; i < 
»gs
.
	`size
(); i++ ) {

1131 ifĞ
»gs
[
i
]->
	`em±y
() ) {

1132  &
»gs
[
i
];

1135 
	`as£¹
(0 && "No free„egisters found");

1136  
NULL
;

1137 
	}
}

1139 
	g´iv©e
:

1140 
¡d
::
veùÜ
<
w¬p_š¡_t
*> 
»gs
;

1141 cÚ¡ * 
	gm_Çme
;

	@../cuda-sim/cuda-sim.h

28 #iâdeà
CUDASIM_H_INCLUDED


29 
	#CUDASIM_H_INCLUDED


	)

31 
	~"../ab¡¿ù_h¬dw¬e_mod–.h
"

32 
	~"../gpgpu-sim/shad”.h
"

33 
	~<¡dlib.h
>

34 
	~<m­
>

35 
	~<¡ršg
>

36 
	~"±x_sim.h
"

38 
şass
 
	gmemÜy_¥aû
;

39 
şass
 
	gfunùiÚ_šfo
;

40 
şass
 
	gsymbŞ_bË
;

42 cÚ¡ *
g_gpgpusim_v”siÚ_¡ršg
;

43 
g_±x_sim_mode
;

44 
g_debug_executiÚ
;

45 
g_debug_th»ad_uid
;

46 ** 
g_š¡_şassifiÿtiÚ_¡©
;

47 ** 
g_š¡_İ_şassifiÿtiÚ_¡©
;

48 
g_±x_k”Ãl_couÁ
;

50 
±x_İcocde_Ï‹ncy_İtiÚs
 (
İtiÚ_·r£r_t
 
İp
);

51 
şass
 
k”Ãl_šfo_t
 *
gpgpu_İ’ş_±x_sim_š™_grid
(şas 
funùiÚ_šfo
 *
’Œy
,

52 
gpgpu_±x_sim_¬g_li¡_t
 
¬gs
,

53 
dim3
 
gridDim
,

54 
dim3
 
blockDim
,

55 
şass
 
gpgpu_t
 *
gpu
 );

56 
gpgpu_cuda_±x_sim_maš_func
Ğ
k”Ãl_šfo_t
 &
k”Ãl
, 
boŞ
 
İ’CL
 = 
çl£
 );

57 
´št_¥Ïsh
();

58 
gpgpu_±x_sim_»gi¡”_cÚ¡_v¬ŸbË
(*, cÚ¡ *
deviûName
, 
size_t
 
size
 );

59 
gpgpu_±x_sim_»gi¡”_glob®_v¬ŸbË
(*
ho¡V¬
, cÚ¡ *
deviûName
, 
size_t
 
size
 );

60 
gpgpu_±x_sim_memıy_symbŞ
(cÚ¡ *
ho¡V¬
, cÚ¡ *
¤c
, 
size_t
 
couÁ
, size_ˆ
off£t
, 
to
, 
gpgpu_t
 *
gpu
 );

62 
»ad_sim_’vœÚm’t_v¬ŸbËs
();

63 
±xšfo_İ’ş_addšfo
Ğ
¡d
::
m­
<¡d::
¡ršg
,
funùiÚ_šfo
*> &
k”Ãls
 );

64 
±x_sim_š™_th»ad
Ğ
k”Ãl_šfo_t
 &
k”Ãl
,

65 
şass
 
±x_th»ad_šfo
** 
th»ad_šfo
,

66 
sid
,

67 
tid
,

68 
th»ads_Ëá
,

69 
num_th»ads
,

70 
şass
 
cÜe_t
 *
cÜe
,

71 
hw_ùa_id
,

72 
hw_w¬p_id
,

73 
gpgpu_t
 *
gpu
,

74 
boŞ
 
funùiÚ®SimuÏtiÚMode
 = 
çl£
);

75 cÚ¡ 
w¬p_š¡_t
 *
±x_ãtch_š¡
Ğ
add»ss_ty³
 
pc
 );

76 cÚ¡ 
gpgpu_±x_sim_k”Ãl_šfo
* 
±x_sim_k”Ãl_šfo
(cÚ¡ 
şass
 
funùiÚ_šfo
 *
k”Ãl
);

77 
±x_´št_š¢
Ğ
add»ss_ty³
 
pc
, 
FILE
 *
å
 );

78 
	g¡d
::
¡ršg
 
±x_g‘_š¢_¡r
Ğ
add»ss_ty³
 
pc
 );

79 
£t_·¿m_gpgpu_num_shad”s
(
num_shad”s
);

85 şas 
	cfunùiÚ®CÜeSim
: 
public
 
cÜe_t


87 
public
:

88 
	$funùiÚ®CÜeSim
(
k”Ãl_šfo_t
 * 
k”Ãl
, 
gpgpu_sim
 *
g
, 
w¬p_size
)

89 : 
	`cÜe_t
Ğ
g
, 
k”Ãl
, 
w¬p_size
, k”Ãl->
	$th»ads_³r_ùa
() )

91 
m_w¬pAtB¬r›r
 = 
Ãw
 
boŞ
 [
m_w¬p_couÁ
];

92 
m_liveTh»adCouÁ
 = 
Ãw
 [
m_w¬p_couÁ
];

94 
vœtu®
 ~
	$funùiÚ®CÜeSim
(){

95 
	`w¬p_ex™
(0);

96 
d–‘e
[] 
m_liveTh»adCouÁ
;

97 
d–‘e
[] 
m_w¬pAtB¬r›r
;

98 
	}
}

100 
execu‹
();

101 
vœtu®
 
w¬p_ex™
Ğ
w¬p_id
 );

102 
vœtu®
 
boŞ
 
	$w¬p_wa™šg_©_b¬r›r
Ğ
w¬p_id
 ) const

104  (
m_w¬pAtB¬r›r
[
w¬p_id
] || !(
m_liveTh»adCouÁ
[warp_id]>0));

105 
	}
}

107 
	g´iv©e
:

108 
execu‹W¬p
(, 
boŞ
 &, bool &);

110 
š™ŸlizeCTA
();

111 
vœtu®
 
	$checkExecutiÚStusAndUpd©e
(
w¬p_š¡_t
 &
š¡
, 
t
, 
tid
)

113 if(
m_th»ad
[
tid
]==
NULL
 || m_th»ad[tid]->
	`is_dÚe
()){

114 
m_liveTh»adCouÁ
[
tid
/
m_w¬p_size
]--;

116 
	}
}

119 
ü—‹W¬p
(
w¬pId
);

122 * 
	gm_liveTh»adCouÁ
;

123 
boŞ
* 
	gm_w¬pAtB¬r›r
;

126 
	#RECONVERGE_RETURN_PC
 ((
add»ss_ty³
)-2)

	)

127 
	#NO_BRANCH_DIVERGENCE
 ((
add»ss_ty³
)-1)

	)

128 
add»ss_ty³
 
g‘_»tuº_pc
Ğ*
thd
 );

129 cÚ¡ *
g‘_±xšfo_kÇme
();

130 
´št_±xšfo
();

131 
ş—r_±xšfo
();

132 
gpgpu_±x_sim_k”Ãl_šfo
 
g‘_±xšfo_kšfo
();

	@../cuda-sim/ptx-stats.h

28 #´agm¨
Úû


30 
	~"../İtiÚ_·r£r.h
"

32 
boŞ
 
’abË_±x_fe_lše_¡©s
;

35 
±x_fe_lše_¡©s_İtiÚs
(
İtiÚ_·r£r_t
 
İp
);

38 
±x_fe_lše_¡©s_wr™e_fe
();

40 #ifdeà
__ılu¥lus


42 
şass
 
	g±x_š¡ruùiÚ
;

43 
±x_fe_lše_¡©s_add_exec_couÁ
(cÚ¡ 
±x_š¡ruùiÚ
 *
pIn¢
);

47 
±x_fe_lše_¡©s_add_Ï‹ncy
(
pc
, 
Ï‹ncy
);

48 
±x_fe_lše_¡©s_add_d¿m_Œaffic
(
pc
, 
d¿m_Œaffic
);

49 
±x_fe_lše_¡©s_add_smem_bªk_cÚæiù
(
pc
, 
n_way_bkcÚæiù
);

50 
±x_fe_lše_¡©s_add_uncßËsûd_gmem
(
pc
, 
n_acûss
);

52 
±x_fe_lše_¡©s_ü—‹_expo£d_Ï‹ncy_Œack”
(
n_shad”_cÜes
);

53 
±x_fe_lše_¡©s_add_šæight_memÜy_š¢
(
sc_id
, 
pc
);

54 
±x_fe_lše_¡©s_sub_šæight_memÜy_š¢
(
sc_id
, 
pc
);

55 
±x_fe_lše_¡©s_comm™_expo£d_Ï‹ncy
(
sc_id
, 
expo£d_Ï‹ncy
);

57 
±x_fe_lše_¡©s_add_w¬p_div”g’û
(
pc
, 
n_way_div”g’û
);

	@../cuda-sim/ptx_sim.h

27 #iâdeà
±x_sim_h_INCLUDED


28 
	#±x_sim_h_INCLUDED


	)

30 
	~<¡dlib.h
>

32 
	~"../ab¡¿ù_h¬dw¬e_mod–.h
"

33 
	~"../Œ1_hash_m­.h
"

35 
	~<as£¹.h
>

36 
	~"İcodes.h
"

38 
	~<¡ršg
>

39 
	~<m­
>

40 
	~<£t
>

41 
	~<li¡
>

43 
	~"memÜy.h
"

45 
	s·¿m_t
 {

46 cÚ¡ *
	mpd©a
;

47 
	mty³
;

48 
size_t
 
	msize
;

49 
size_t
 
	moff£t
;

52 
	~<¡ack
>

54 
	~"memÜy.h
"

56 
	u±x_»g_t
 {

57 
±x_»g_t
() {

58 
	mb™s
.
	mms
 = 0;

59 
	mb™s
.
	mls
 = 0;

60 
	mu128
.
	mlow
=0;

61 
	mu128
.
	mlowe¡
=0;

62 
	mu128
.
	mhighe¡
=0;

63 
	mu128
.
	mhigh
=0;

64 
	ms8
=0;

65 
	ms16
=0;

66 
	ms32
=0;

67 
	ms64
=0;

68 
	mu8
=0;

69 
	mu16
=0;

70 
	mu64
=0;

71 
	mf16
=0;

72 
	mf32
=0;

73 
	mf64
=0;

74 
	m´ed
=0;

76 
±x_»g_t
(
x
)

78 
	mb™s
.
	mms
 = 0;

79 
	mb™s
.
	mls
 = 0;

80 
	mu128
.
	mlow
=0;

81 
	mu128
.
	mlowe¡
=0;

82 
	mu128
.
	mhighe¡
=0;

83 
	mu128
.
	mhigh
=0;

84 
	ms8
=0;

85 
	ms16
=0;

86 
	ms32
=0;

87 
	ms64
=0;

88 
	mu8
=0;

89 
	mu16
=0;

90 
	mu64
=0;

91 
	mf16
=0;

92 
	mf32
=0;

93 
	mf64
=0;

94 
	m´ed
=0;

95 
	mu32
 = 
x
;

97 
İ”©Ü
 (è{  
	mu32
;}

98 
İ”©Ü
 (è{  
	mu16
;}

99 
İ”©Ü
 (è{  
	mu8
;}

100 
İ”©Ü
 (è{  
	mu64
;}

102 
mask_ªd
Ğ
ms
, 
ls
 )

104 
	mb™s
.
	mms
 &ğ
ms
;

105 
	mb™s
.
	mls
 &ğ
ls
;

108 
mask_Ü
Ğ
ms
, 
ls
 )

110 
	mb™s
.
	mms
 |ğ
ms
;

111 
	mb™s
.
	mls
 |ğ
ls
;

113 
g‘_b™
Ğ
b™
 )

115 iàĞ
	mb™
 < 32 )

116 (
	mb™s
.
	mls
 >> 
	mb™
) & 1;

118 (
	mb™s
.
	mms
 >> (
	mb™
-32)) & 1;

121 sigÃd 
	ms8
;

122 sigÃd 
	ms16
;

123 sigÃd 
	ms32
;

124 sigÃd 
	ms64
;

125 
	mu8
;

126 
	mu16
;

127 
	mu32
;

128 
	mu64
;

129 
	mf16
;

130 
	mf32
;

131 
	mf64
;

133 
	mls
;

134 
	mms
;

135 } 
	mb™s
;

137 
	mlowe¡
;

138 
	mlow
;

139 
	mhigh
;

140 
	mhighe¡
;

141 } 
	mu128
;

142 
	m´ed
 : 4;

146 
şass
 
	g±x_š¡ruùiÚ
;

147 
şass
 
	gİ”ªd_šfo
;

148 
şass
 
	gsymbŞ_bË
;

149 
şass
 
	gfunùiÚ_šfo
;

150 
şass
 
	g±x_th»ad_šfo
;

152 şas 
	c±x_ùa_šfo
 {

153 
	mpublic
:

154 
±x_ùa_šfo
Ğ
sm_idx
 );

155 
add_th»ad
Ğ
±x_th»ad_šfo
 *
thd
 );

156 
	$num_th»ads
() const;

157 
	`check_ùa_th»ad_¡©us_ªd_»£t
();

158 
	`»gi¡”_th»ad_ex™
Ğ
±x_th»ad_šfo
 *
thd
 );

159 
	`»gi¡”_d–‘ed_th»ad
Ğ
±x_th»ad_šfo
 *
thd
 );

160 
	$g‘_sm_idx
() const;

162 
´iv©e
:

163 
m_uid
;

164 
m_sm_idx
;

165 
¡d
::
£t
<
±x_th»ad_šfo
*> 
m_th»ads_š_ùa
;

166 
¡d
::
£t
<
±x_th»ad_šfo
*> 
m_th»ads_th©_have_ex™ed
;

167 
¡d
::
£t
<
±x_th»ad_šfo
*> 
m_dªglšg_poš‹rs
;

170 
şass
 
symbŞ
;

172 
	s¡ack_’Œy
 {

173 
	`¡ack_’Œy
() {

174 
m_symbŞ_bË
=
NULL
;

175 
m_func_šfo
=
NULL
;

176 
m_PC
=0;

177 
m_RPC
=-1;

178 
m_»tuº_v¬_¤c
 = 
NULL
;

179 
m_»tuº_v¬_d¡
 = 
NULL
;

180 
m_ÿÎ_uid
 = 0;

181 
m_v®id
 = 
çl£
;

183 
	`¡ack_’Œy
Ğ
symbŞ_bË
 *
s
, 
funùiÚ_šfo
 *
f
, 
pc
, 
½c
, cÚ¡ 
symbŞ
 *
»tuº_v¬_¤c
, cÚ¡ symbŞ *
»tuº_v¬_d¡
, 
ÿÎ_uid
 )

185 
m_symbŞ_bË
=
s
;

186 
m_func_šfo
=
f
;

187 
m_PC
=
pc
;

188 
m_RPC
=
½c
;

189 
m_»tuº_v¬_¤c
 = 
»tuº_v¬_¤c
;

190 
m_»tuº_v¬_d¡
 = 
»tuº_v¬_d¡
;

191 
m_ÿÎ_uid
 = 
ÿÎ_uid
;

192 
m_v®id
 = 
Œue
;

195 
boŞ
 
m_v®id
;

196 
symbŞ_bË
 *
m_symbŞ_bË
;

197 
funùiÚ_šfo
 *
m_func_šfo
;

198 
m_PC
;

199 
m_RPC
;

200 cÚ¡ 
symbŞ
 *
m_»tuº_v¬_¤c
;

201 cÚ¡ 
symbŞ
 *
m_»tuº_v¬_d¡
;

202 
m_ÿÎ_uid
;

205 şas 
	c±x_v”siÚ
 {

206 
public
:

207 
	$±x_v”siÚ
()

209 
m_v®id
 = 
çl£
;

210 
m_±x_v”siÚ
 = 0;

211 
m_±x_ex‹nsiÚs
 = 0;

212 
m_sm_v”siÚ_v®id
=
çl£
;

213 
m_‹xmode_unif›d
=
Œue
;

214 
m_m­_f64_to_f32
 = 
Œue
;

216 
	$±x_v”siÚ
(
v”
, 
ex‹nsiÚs
)

218 
m_v®id
 = 
Œue
;

219 
m_±x_v”siÚ
 = 
v”
;

220 
m_±x_ex‹nsiÚs
 = 
ex‹nsiÚs
;

221 
m_sm_v”siÚ_v®id
=
çl£
;

222 
m_‹xmode_unif›d
=
Œue
;

223 
	}
}

224 
	$£t_rg‘
ĞcÚ¡ *
sm_v”
, cÚ¡ *
ext
, cÚ¡ *
ext2
 )

226 
	`as£¹
Ğ
m_v®id
 );

227 
m_sm_v”siÚ_¡r
 = 
sm_v”
;

228 
	`check_rg‘_ex‹nsiÚ
(
ext
);

229 
	`check_rg‘_ex‹nsiÚ
(
ext2
);

230 
	`ssÿnf
(
sm_v”
,"%u",&
m_sm_v”siÚ
);

231 
m_sm_v”siÚ_v®id
=
Œue
;

232 
	}
}

233 
	$v”
(ècÚ¡ { 
	`as£¹
(
m_v®id
);  
m_±x_v”siÚ
; 
	}
}

234 
	$rg‘
(ècÚ¡ { 
	`as£¹
(
m_v®id
&&
m_sm_v”siÚ_v®id
);  
m_sm_v”siÚ
; 
	}
}

235 
	$ex‹nsiÚs
(ècÚ¡ { 
	`as£¹
(
m_v®id
);  
m_±x_ex‹nsiÚs
; 
	}
}

236 
	g´iv©e
:

237 
	$check_rg‘_ex‹nsiÚ
ĞcÚ¡ *
ext
 )

239 ifĞ
ext
 ) {

240 ifĞ!
	`¡rcmp
(
ext
,"texmode_independent") )

241 
m_‹xmode_unif›d
=
çl£
;

242 ifĞ!
	`¡rcmp
(
ext
,"texmode_unified") )

243 
m_‹xmode_unif›d
=
Œue
;

244 ifĞ!
	`¡rcmp
(
ext
,"map_f64_to_f32") )

245 
m_m­_f64_to_f32
 = 
Œue
;

246 
	`abÜt
();

248 
	}
}

250 
boŞ
 
	gm_v®id
;

251 
	gm_±x_v”siÚ
;

252 
	gm_sm_v”siÚ_v®id
;

253 
	g¡d
::
¡ršg
 
m_sm_v”siÚ_¡r
;

254 
boŞ
 
	gm_‹xmode_unif›d
;

255 
boŞ
 
	gm_m­_f64_to_f32
;

256 
	gm_sm_v”siÚ
;

257 
	gm_±x_ex‹nsiÚs
;

260 şas 
	c±x_th»ad_šfo
 {

261 
	mpublic
:

262 ~
±x_th»ad_šfo
();

263 
±x_th»ad_šfo
Ğ
k”Ãl_šfo_t
 &
k”Ãl
 );

265 
	$š™
(
gpgpu_t
 *
gpu
, 
cÜe_t
 *
cÜe
, 
sid
, 
ùa_id
, 
wid
, 
tid
, 
boŞ
 
fsim
)

267 
m_gpu
 = 
gpu
;

268 
m_cÜe
 = 
cÜe
;

269 
m_hw_sid
=
sid
;

270 
m_hw_ùaid
=
ùa_id
;

271 
m_hw_wid
=
wid
;

272 
m_hw_tid
=
tid
;

273 
m_funùiÚ®SimuÏtiÚMode
 = 
fsim
;

276 
	$±x_ãtch_š¡
Ğ
š¡_t
 &
š¡
 ) const;

277 
	`±x_exec_š¡
Ğ
w¬p_š¡_t
 &
š¡
, 
ÏÃ_id
 );

279 cÚ¡ 
±x_v”siÚ
 &
	$g‘_±x_v”siÚ
() const;

280 
	`£t_»g
ĞcÚ¡ 
symbŞ
 *
»g
, cÚ¡ 
±x_»g_t
 &
v®ue
 );

281 
±x_»g_t
 
	`g‘_»g
ĞcÚ¡ 
symbŞ
 *
»g
 );

282 
±x_»g_t
 
	`g‘_İ”ªd_v®ue
ĞcÚ¡ 
İ”ªd_šfo
 &
İ
, o³¿nd_šfØ
d¡Info
, 
İTy³
, 
±x_th»ad_šfo
 *
th»ad
, 
d”efFÏg
 );

283 
	`£t_İ”ªd_v®ue
ĞcÚ¡ 
İ”ªd_šfo
 &
d¡
, cÚ¡ 
±x_»g_t
 &
d©a
, 
ty³
, 
±x_th»ad_šfo
 *
th»ad
, cÚ¡ 
±x_š¡ruùiÚ
 *
pI
 );

284 
	`£t_İ”ªd_v®ue
ĞcÚ¡ 
İ”ªd_šfo
 &
d¡
, cÚ¡ 
±x_»g_t
 &
d©a
, 
ty³
, 
±x_th»ad_šfo
 *
th»ad
, cÚ¡ 
±x_š¡ruùiÚ
 *
pI
, 
ov”æow
, 
ÿ¼y
 );

285 
	`g‘_veùÜ_İ”ªd_v®ues
ĞcÚ¡ 
İ”ªd_šfo
 &
İ
, 
±x_»g_t
* 
±x_»gs
, 
num_–em’ts
 );

286 
	`£t_veùÜ_İ”ªd_v®ues
ĞcÚ¡ 
İ”ªd_šfo
 &
d¡
,

287 cÚ¡ 
±x_»g_t
 &
d©a1
,

288 cÚ¡ 
±x_»g_t
 &
d©a2
,

289 cÚ¡ 
±x_»g_t
 &
d©a3
,

290 cÚ¡ 
±x_»g_t
 &
d©a4
 );

292 
funùiÚ_šfo
 *
	$func_šfo
()

294  
m_func_šfo
;

295 
	}
}

296 
	$´št_š¢
Ğ
pc
, 
FILE
 * 
å
 ) const;

297 
	`£t_šfo
Ğ
funùiÚ_šfo
 *
func
 );

298 
	$g‘_uid
() const

300  
m_uid
;

301 
	}
}

303 
dim3
 
	$g‘_ùaid
(ècÚ¡ {  
m_ùaid
; 
	}
}

304 
dim3
 
	$g‘_tid
(ècÚ¡ {  
m_tid
; 
	}
}

305 
şass
 
gpgpu_sim
 *
	$g‘_gpu
(è{  (
gpgpu_sim
*)
m_gpu
;
	}
}

306 
	$g‘_hw_tid
(ècÚ¡ {  
m_hw_tid
;
	}
}

307 
	$g‘_hw_ùaid
(ècÚ¡ {  
m_hw_ùaid
;
	}
}

308 
	$g‘_hw_wid
(ècÚ¡ {  
m_hw_wid
;
	}
}

309 
	$g‘_hw_sid
(ècÚ¡ {  
m_hw_sid
;
	}
}

310 
cÜe_t
 *
	$g‘_cÜe
(è{  
m_cÜe
; 
	}
}

312 
	$g‘_icouÁ
(ècÚ¡ {  
m_icouÁ
;
	}
}

313 
	$£t_v®id
(è{ 
m_v®id
 = 
Œue
;
	}
}

314 
addr_t
 
	$Ï¡_—ddr
(ècÚ¡ {  
m_Ï¡_efãùive_add»ss
;
	}
}

315 
memÜy_¥aû_t
 
	$Ï¡_¥aû
(ècÚ¡ {  
m_Ï¡_memÜy_¥aû
;
	}
}

316 
d¿m_ÿÎback_t
 
	$Ï¡_ÿÎback
(ècÚ¡ {  
m_Ï¡_d¿m_ÿÎback
;
	}
}

317 
	$g‘_ùa_uid
(è{  
m_ùa_šfo
->
	`g‘_sm_idx
();
	}
}

319 
	$£t_sšgË_th»ad_sšgË_block
()

321 
m_Áid
.
x
 = 1;

322 
m_Áid
.
y
 = 1;

323 
m_Áid
.
z
 = 1;

324 
m_ùaid
.
x
 = 0;

325 
m_ùaid
.
y
 = 0;

326 
m_ùaid
.
z
 = 0;

327 
m_tid
.
x
 = 0;

328 
m_tid
.
y
 = 0;

329 
m_tid
.
z
 = 0;

330 
m_nùaid
.
x
 = 1;

331 
m_nùaid
.
y
 = 1;

332 
m_nùaid
.
z
 = 1;

333 
m_gridid
 = 0;

334 
m_v®id
 = 
Œue
;

335 
	}
}

336 
	$£t_tid
Ğ
dim3
 
tid
 ) { 
m_tid
 =id; 
	}
}

337 
ıy_tid_to_»g
Ğ
dim3
 
tid
 );

338 
	$£t_ùaid
Ğ
dim3
 
ùaid
 ) { 
m_ùaid
 = cid; 
	}
}

339 
	$£t_Áid
Ğ
dim3
 
tid
 ) { 
m_Áid
 =id; 
	}
}

340 
	$£t_nùaid
Ğ
dim3
 
ùa_size
 ) { 
m_nùaid
 = c_size; 
	}
}

342 
g‘_butš
Ğ
butš_id
, 
dim_mod
 );

344 
£t_dÚe
();

345 
boŞ
 
	$is_dÚe
(è{  
m_th»ad_dÚe
;
	}
}

346 
	$dÚecyşe
(ècÚ¡ {  
m_cyşe_dÚe
; 
	}
}

348 
	$Ãxt_š¡r
()

350 
m_icouÁ
++;

351 
m_b¿nch_k’
 = 
çl£
;

352  
m_PC
;

353 
	}
}

354 
boŞ
 
	$b¿nch_k’
() const

356  
m_b¿nch_k’
;

357 
	}
}

358 
	$g‘_pc
() const

360  
m_PC
;

361 
	}
}

362 
	$£t_Åc
Ğ
Åc
 )

364 
m_NPC
 = 
Åc
;

365 
	}
}

366 
£t_Åc
ĞcÚ¡ 
funùiÚ_šfo
 *
f
 );

367 
ÿÎ¡ack_push
Ğ
Åc
, 
½c
, cÚ¡ 
symbŞ
 *
»tuº_v¬_¤c
, cÚ¡ symbŞ *
»tuº_v¬_d¡
, 
ÿÎ_uid
 );

368 
boŞ
 
ÿÎ¡ack_pİ
();

369 
ÿÎ¡ack_push_¶us
Ğ
Åc
, 
½c
, cÚ¡ 
symbŞ
 *
»tuº_v¬_¤c
, cÚ¡ symbŞ *
»tuº_v¬_d¡
, 
ÿÎ_uid
 );

370 
boŞ
 
ÿÎ¡ack_pİ_¶us
();

371 
	$dump_ÿÎ¡ack
() const;

372 
¡d
::
¡ršg
 
	$g‘_loÿtiÚ
() const;

373 cÚ¡ 
±x_š¡ruùiÚ
 *
	$g‘_š¡
() const;

374 cÚ¡ 
±x_š¡ruùiÚ
 *
	$g‘_š¡
Ğ
addr_t
 
pc
 ) const;

375 
boŞ
 
	$½c_upd©ed
(ècÚ¡ {  
m_RPC_upd©ed
; 
	}
}

376 
boŞ
 
	$Ï¡_was_ÿÎ
(ècÚ¡ {  
m_Ï¡_was_ÿÎ
; 
	}
}

377 
	$g‘_½c
(ècÚ¡ {  
m_RPC
; 
	}
}

378 
	$ş—rRPC
()

380 
m_RPC
 = -1;

381 
m_RPC_upd©ed
 = 
çl£
;

382 
m_Ï¡_was_ÿÎ
 = 
çl£
;

383 
	}
}

384 
	$g‘_»tuº_PC
()

386  
m_ÿÎ¡ack
.
	`back
().
m_PC
;

387 
	}
}

388 
	$upd©e_pc
( )

390 
m_PC
 = 
m_NPC
;

391 
	}
}

392 
dump_»gs
(
FILE
 * 
å
);

393 
dump_modif›d»gs
(
FILE
 *
å
);

394 
	$ş—r_modif›d»gs
(è{ 
m_debug_Œaû_»gs_modif›d
.
	`back
().
	`ş—r
(); 
m_debug_Œaû_»gs_»ad
.back().ş—r(); 
	}
}

395 
funùiÚ_šfo
 *
	$g‘_fšfo
(è{  
m_func_šfo
; 
	}
}

396 cÚ¡ 
funùiÚ_šfo
 *
	$g‘_fšfo
(ècÚ¡ {  
m_func_šfo
; 
	}
}

397 
push_b»akaddr
(cÚ¡ 
İ”ªd_šfo
 &
b»akaddr
);

398 cÚ¡ 
	gİ”ªd_šfo
& 
pİ_b»akaddr
();

399 
	$’abË_debug_Œaû
(è{ 
m_’abË_debug_Œaû
 = 
Œue
; 
	}
}

400 
	$g‘_loÿl_mem_¡ack_poš‹r
(ècÚ¡ {  
m_loÿl_mem_¡ack_poš‹r
; 
	}
}

402 
memÜy_¥aû
 *
	$g‘_glob®_memÜy
(è{  
m_gpu
->
	`g‘_glob®_memÜy
(); 
	}
}

403 
memÜy_¥aû
 *
	$g‘_‹x_memÜy
(è{  
m_gpu
->
	`g‘_‹x_memÜy
(); 
	}
}

404 
memÜy_¥aû
 *
	$g‘_surf_memÜy
(è{  
m_gpu
->
	`g‘_surf_memÜy
(); 
	}
}

405 
memÜy_¥aû
 *
	$g‘_·¿m_memÜy
(è{  
m_k”Ãl
.
	`g‘_·¿m_memÜy
(); 
	}
}

406 cÚ¡ 
	ggpgpu_funùiÚ®_sim_cÚfig
 &
	$g‘_cÚfig
(ècÚ¡ {  
m_gpu
->
	`g‘_cÚfig
(); 
	}
}

407 
boŞ
 
	$isInFunùiÚ®SimuÏtiÚMode
(){  
m_funùiÚ®SimuÏtiÚMode
;
	}
}

408 
	$ex™CÜe
()

411 if(!
m_funùiÚ®SimuÏtiÚMode
)

412 
m_cÜe
->
	`w¬p_ex™
(
m_hw_wid
);

413 
	}
}

415 
	$»gi¡”Ex™
(){
m_ùa_šfo
->
	`»gi¡”_th»ad_ex™
(
this
);
	}
}

416 
	$g‘_»duùiÚ_v®ue
(
ùaid
, 
b¬id
è{ 
m_cÜe
->
	`g‘_»duùiÚ_v®ue
(ùaid,b¬id);
	}
}

417 
	$ªd_»duùiÚ
(
ùaid
, 
b¬id
, 
boŞ
 
v®ue
è{
m_cÜe
->
	`ªd_»duùiÚ
(ùaid,b¬id,v®ue);
	}
}

418 
	$Ü_»duùiÚ
(
ùaid
, 
b¬id
, 
boŞ
 
v®ue
è{
m_cÜe
->
	`Ü_»duùiÚ
(ùaid,b¬id,v®ue);
	}
}

419 
	$pİc_»duùiÚ
(
ùaid
, 
b¬id
, 
boŞ
 
v®ue
è{
m_cÜe
->
	`pİc_»duùiÚ
(ùaid,b¬id,v®ue);
	}
}

421 
	gpublic
:

422 
addr_t
 
m_Ï¡_efãùive_add»ss
;

423 
boŞ
 
	gm_b¿nch_k’
;

424 
memÜy_¥aû_t
 
	gm_Ï¡_memÜy_¥aû
;

425 
d¿m_ÿÎback_t
 
	gm_Ï¡_d¿m_ÿÎback
;

426 
memÜy_¥aû
 *
	gm_sh¬ed_mem
;

427 
memÜy_¥aû
 *
	gm_loÿl_mem
;

428 
±x_ùa_šfo
 *
	gm_ùa_šfo
;

429 
±x_»g_t
 
	gm_Ï¡_£t_İ”ªd_v®ue
;

431 
	g´iv©e
:

433 
boŞ
 
m_funùiÚ®SimuÏtiÚMode
;

434 
	gm_uid
;

435 
	gk”Ãl_šfo_t
 &
	gm_k”Ãl
;

436 
cÜe_t
 *
	gm_cÜe
;

437 
gpgpu_t
 *
	gm_gpu
;

438 
boŞ
 
	gm_v®id
;

439 
dim3
 
	gm_Áid
;

440 
dim3
 
	gm_tid
;

441 
dim3
 
	gm_nùaid
;

442 
dim3
 
	gm_ùaid
;

443 
	gm_gridid
;

444 
boŞ
 
	gm_th»ad_dÚe
;

445 
	gm_hw_sid
;

446 
	gm_hw_tid
;

447 
	gm_hw_wid
;

448 
	gm_hw_ùaid
;

450 
	gm_icouÁ
;

451 
	gm_PC
;

452 
	gm_NPC
;

453 
	gm_RPC
;

454 
boŞ
 
	gm_RPC_upd©ed
;

455 
boŞ
 
	gm_Ï¡_was_ÿÎ
;

456 
	gm_cyşe_dÚe
;

458 
	gm_b¬r›r_num
;

459 
boŞ
 
	gm_©_b¬r›r
;

461 
symbŞ_bË
 *
	gm_symbŞ_bË
;

462 
funùiÚ_šfo
 *
	gm_func_šfo
;

464 
	g¡d
::
li¡
<
¡ack_’Œy
> 
m_ÿÎ¡ack
;

465 
	gm_loÿl_mem_¡ack_poš‹r
;

467 
	gŒ1_hash_m­
<cÚ¡ 
	tsymbŞ
*,
	t±x_»g_t
> 
	t»g_m­_t
;

468 
	g¡d
::
li¡
<
»g_m­_t
> 
m_»gs
;

469 
	g¡d
::
li¡
<
»g_m­_t
> 
m_debug_Œaû_»gs_modif›d
;

470 
	g¡d
::
li¡
<
»g_m­_t
> 
m_debug_Œaû_»gs_»ad
;

471 
boŞ
 
	gm_’abË_debug_Œaû
;

473 
	g¡d
::
¡ack
<
şass
 
İ”ªd_šfo
, std::
veùÜ
<İ”ªd_šfo> > 
m_b»akaddrs
;

476 
addr_t
 
g’”ic_to_loÿl
Ğ
smid
, 
hwtid
,‡ddr_ˆ
addr
 );

477 
addr_t
 
g’”ic_to_sh¬ed
Ğ
smid
,‡ddr_ˆ
addr
 );

478 
addr_t
 
g’”ic_to_glob®
Ğaddr_ˆ
addr
 );

479 
addr_t
 
loÿl_to_g’”ic
Ğ
smid
, 
hwtid
,‡ddr_ˆ
addr
 );

480 
addr_t
 
sh¬ed_to_g’”ic
Ğ
smid
,‡ddr_ˆ
addr
 );

481 
addr_t
 
glob®_to_g’”ic
Ğaddr_ˆ
addr
 );

482 
boŞ
 
is¥aû_loÿl
Ğ
smid
, 
hwtid
, 
addr_t
 
addr
 );

483 
boŞ
 
is¥aû_sh¬ed
Ğ
smid
, 
addr_t
 
addr
 );

484 
boŞ
 
is¥aû_glob®
Ğ
addr_t
 
addr
 );

485 
memÜy_¥aû_t
 
which¥aû
Ğ
addr_t
 
addr
 );

487 
g_±x_th»ad_šfo_uid_Ãxt
;

	@../debug.h

28 #iâdeà
PTX_DEBUG_INCLUDED


29 
	#PTX_DEBUG_INCLUDED


	)

31 
	~"ab¡¿ù_h¬dw¬e_mod–.h
"

33 
	~<¡ršg
>

35 şas 
	cbrk_±
 {

36 
	mpublic
:

37 
	$brk_±
(è{ 
m_v®id
=
çl£
; }

38 
	$brk_±
ĞcÚ¡ *
f–še
, 
uid
 )

40 
m_v®id
 = 
Œue
;

41 
m_w©ch
 = 
çl£
;

42 
m_f–še
 = 
¡d
::
	`¡ršg
(
f–še
);

43 
m_th»ad_uid
=
uid
;

44 
	}
}

45 
	$brk_±
Ğ
addr
, 
v®ue
 )

47 
m_v®id
 = 
Œue
;

48 
m_w©ch
 = 
Œue
;

49 
m_addr
 = 
addr
;

50 
m_v®ue
 = 
v®ue
;

51 
	}
}

53 
	$g‘_v®ue
(ècÚ¡ {  
m_v®ue
; 
	}
}

54 
addr_t
 
	$g‘_addr
(ècÚ¡ {  
m_addr
; 
	}
}

55 
boŞ
 
	$is_v®id
(ècÚ¡ {  
m_v®id
; 
	}
}

56 
boŞ
 
	$is_w©chpošt
(ècÚ¡ {  
m_w©ch
; 
	}
}

57 
boŞ
 
	$is_equ®
ĞcÚ¡ 
¡d
::
¡ršg
 &
f–še
, 
uid
 ) const

59 ifĞ
m_w©ch
 )

60  
çl£
;

61 ifĞ(
m_th»ad_uid
 !ğ()-1è&& (
uid
 != m_thread_uid) )

62  
çl£
;

63  
m_f–še
 =ğ
f–še
;

64 
	}
}

65 
	g¡d
::
¡ršg
 
	$loÿtiÚ
() const

67 
bufãr
[1024];

68 
	`¥rštf
(
bufãr
,"% th»ad uid = %u", 
m_f–še
.
	`c_¡r
(), 
m_th»ad_uid
);

69  
bufãr
;

70 
	}
}

72 
	$£t_v®ue
Ğ
v®
 ) {  
m_v®ue
=v®; 
	}
}

73 
	g´iv©e
:

74 
boŞ
 
m_v®id
;

75 
boŞ
 
	gm_w©ch
;

78 
	g¡d
::
¡ršg
 
m_f–še
;

79 
	gm_th»ad_uid
;

82 
	gm_addr
;

83 
	gm_v®ue
;

86 
gpgpu_±x_š¡ruùiÚ_şassifiÿtiÚ
 ;

88 
şass
 
	g±x_th»ad_šfo
;

89 
şass
 
	g±x_š¡ruùiÚ
;

90 
boŞ
 
th»ad_©_brk±
Ğ
±x_th»ad_šfo
 *
thd_šfo
, cÚ¡ 
brk_±
 &
b
 );

91 
h™_w©chpošt
Ğ
w©chpošt_num
, 
±x_th»ad_šfo
 *
thd
, cÚ¡ 
±x_š¡ruùiÚ
 *
pI
 );

	@../gpgpu-sim/mem_fetch.h

28 #iâdeà
MEM_FETCH_H


29 
	#MEM_FETCH_H


	)

31 
	~"addrdec.h
"

32 
	~"../ab¡¿ù_h¬dw¬e_mod–.h
"

33 
	~<b™£t
>

35 
	emf_ty³
 {

36 
	mREAD_REQUEST
 = 0,

37 
	mWRITE_REQUEST
,

38 
	mREAD_REPLY
,

39 
	mWRITE_ACK


42 
	#MF_TUP_BEGIN
(
X
è
	eX
 {

	)

43 
	#MF_TUP
(
X
è
	)
X

44 
	#MF_TUP_END
(
X
è};

	)

45 
	~"mem_ãtch_¡©us.tup
"

46 #undeà
MF_TUP_BEGIN


47 #undeà
MF_TUP


48 #undeà
MF_TUP_END


50 şas 
	cmem_ãtch
 {

51 
	mpublic
:

52 
mem_ãtch
ĞcÚ¡ 
mem_acûss_t
 &
acûss
,

53 cÚ¡ 
w¬p_š¡_t
 *
š¡
,

54 
ù¾_size
,

55 
wid
,

56 
sid
,

57 
c
,

58 cÚ¡ 
şass
 
memÜy_cÚfig
 *
cÚfig
 );

59 ~
mem_ãtch
();

61 
£t_¡©us
Ğ
mem_ãtch_¡©us
 
¡©us
, 
cyşe
 );

62 
	$£t_»¶y
()

64 
	`as£¹
Ğ
m_acûss
.
	`g‘_ty³
(è!ğ
L1_WRBK_ACC
 && m_acûss.g‘_ty³(è!ğ
L2_WRBK_ACC
 );

65 ifĞ
m_ty³
==
READ_REQUEST
 ) {

66 
	`as£¹
Ğ!
	`g‘_is_wr™e
() );

67 
m_ty³
 = 
READ_REPLY
;

68 } ifĞ
m_ty³
 =ğ
WRITE_REQUEST
 ) {

69 
	`as£¹
Ğ
	`g‘_is_wr™e
() );

70 
m_ty³
 = 
WRITE_ACK
;

73 
	`do_©omic
();

75 
	$´št
Ğ
FILE
 *
å
, 
boŞ
 
´št_š¡
 = 
Œue
 ) const;

77 cÚ¡ 
addrdec_t
 &
	$g‘_x_addr
(ècÚ¡ {  
m_¿w_addr
; 
	}
}

78 
	$g‘_d©a_size
(ècÚ¡ {  
m_d©a_size
; 
	}
}

79 
	$£t_d©a_size
Ğ
size
 ) { 
m_d©a_size
=size; 
	}
}

80 
	$g‘_ù¾_size
(ècÚ¡ {  
m_ù¾_size
; 
	}
}

81 
	$size
(ècÚ¡ {  
m_d©a_size
+
m_ù¾_size
; 
	}
}

82 
boŞ
 
	$is_wr™e
(è{ 
m_acûss
.
	`is_wr™e
();
	}
}

83 
	$£t_addr
(
Ãw_addr_ty³
 
addr
è{ 
m_acûss
.
	`£t_addr
×ddr); 
	}
}

84 
Ãw_addr_ty³
 
	$g‘_addr
(ècÚ¡ {  
m_acûss
.
	`g‘_addr
(); 
	}
}

85 
Ãw_addr_ty³
 
	$g‘_·¹™iÚ_addr
(ècÚ¡ {  
m_·¹™iÚ_addr
; 
	}
}

86 
	$g‘_sub_·¹™iÚ_id
(ècÚ¡ {  
m_¿w_addr
.
sub_·¹™iÚ
; 
	}
}

87 
boŞ
 
	$g‘_is_wr™e
(ècÚ¡ {  
m_acûss
.
	`is_wr™e
(); 
	}
}

88 
	$g‘_»que¡_uid
(ècÚ¡ {  
m_»que¡_uid
; 
	}
}

89 
	$g‘_sid
(ècÚ¡ {  
m_sid
; 
	}
}

90 
	$g‘_c
(ècÚ¡ {  
m_c
; 
	}
}

91 
	$g‘_wid
(ècÚ¡ {  
m_wid
; 
	}
}

92 
boŞ
 
	$i¡extu»
() const;

93 
boŞ
 
	$iscÚ¡
() const;

94 
mf_ty³
 
	$g‘_ty³
(ècÚ¡ {  
m_ty³
; 
	}
}

95 
boŞ
 
	$i§tomic
() const;

97 
	$£t_»tuº_time¡amp
Ğ
t
 ) { 
m_time¡amp2
ñ; 
	}
}

98 
	$£t_iút_»ûive_time
Ğ
t
 ) { 
m_iút_»ûive_time
ñ; 
	}
}

99 
	$g‘_time¡amp
(ècÚ¡ {  
m_time¡amp
; 
	}
}

100 
	$g‘_»tuº_time¡amp
(ècÚ¡ {  
m_time¡amp2
; 
	}
}

101 
	$g‘_iút_»ûive_time
(ècÚ¡ {  
m_iút_»ûive_time
; 
	}
}

103 
mem_acûss_ty³
 
	$g‘_acûss_ty³
(ècÚ¡ {  
m_acûss
.
	`g‘_ty³
(); 
	}
}

104 cÚ¡ 
	gaùive_mask_t
& 
	$g‘_acûss_w¬p_mask
(ècÚ¡ {  
m_acûss
.
	`g‘_w¬p_mask
(); 
	}
}

105 
mem_acûss_by‹_mask_t
 
	$g‘_acûss_by‹_mask
(ècÚ¡ {  
m_acûss
.
	`g‘_by‹_mask
(); 
	}
}

107 
add»ss_ty³
 
	$g‘_pc
(ècÚ¡ {  
m_š¡
.
	`em±y
()?-1:m_š¡.
pc
; 
	}
}

108 cÚ¡ 
	gw¬p_š¡_t
 &
	$g‘_š¡
(è{  
m_š¡
; 
	}
}

109 
mem_ãtch_¡©us
 
	$g‘_¡©us
(ècÚ¡ {  
m_¡©us
; 
	}
}

111 cÚ¡ 
memÜy_cÚfig
 *
	$g‘_mem_cÚfig
(){ 
m_mem_cÚfig
;
	}
}

113 
g‘_num_æ™s
(
boŞ
 
simt_to_mem
);

114 
	g´iv©e
:

116 
m_»que¡_uid
;

117 
	gm_sid
;

118 
	gm_c
;

119 
	gm_wid
;

122 
mem_ãtch_¡©us
 
	gm_¡©us
;

123 
	gm_¡©us_chªge
;

126 
mem_acûss_t
 
	gm_acûss
;

127 
	gm_d©a_size
;

128 
	gm_ù¾_size
;

129 
Ãw_addr_ty³
 
	gm_·¹™iÚ_addr
;

130 
addrdec_t
 
	gm_¿w_addr
;

131 
mf_ty³
 
	gm_ty³
;

134 
	gm_time¡amp
;

135 
	gm_time¡amp2
;

136 
	gm_iút_»ûive_time
;

139 
w¬p_š¡_t
 
	gm_š¡
;

141 
	gsm_Ãxt_mf_»que¡_uid
;

143 cÚ¡ 
şass
 
memÜy_cÚfig
 *
	gm_mem_cÚfig
;

144 
	giút_æ™_size
;

	@../gpgpu-sim/shader.h

29 #iâdeà
SHADER_H


30 
	#SHADER_H


	)

32 
	~<¡dio.h
>

33 
	~<¡dlib.h
>

34 
	~<m©h.h
>

35 
	~<as£¹.h
>

36 
	~<m­
>

37 
	~<£t
>

38 
	~<veùÜ
>

39 
	~<li¡
>

40 
	~<b™£t
>

41 
	~<ut™y
>

42 
	~<®gÜ™hm
>

43 
	~<deque
>

47 
	~"d–ayqueue.h
"

48 
	~"¡ack.h
"

49 
	~"d¿m.h
"

50 
	~"../ab¡¿ù_h¬dw¬e_mod–.h
"

51 
	~"scÜebßrd.h
"

52 
	~"mem_ãtch.h
"

53 
	~"¡©s.h
"

54 
	~"gpu-ÿche.h
"

55 
	~"Œaffic_b»akdown.h
"

59 
	#NO_OP_FLAG
 0xFF

	)

66 
	#READ_PACKET_SIZE
 8

	)

69 
	#WRITE_PACKET_SIZE
 8

	)

71 
	#WRITE_MASK_SIZE
 8

	)

74 şas 
	cth»ad_ùx_t
 {

75 
	mpublic
:

76 
m_ùa_id
;

79 
	mn_š¢
;

80 
	mn_š¢_ac
;

81 
	mn_l1_mis_ac
;

82 
	mn_l1_mrgh™_ac
;

83 
	mn_l1_acûss_ac
;

85 
boŞ
 
	mm_aùive
;

88 şas 
	cshd_w¬p_t
 {

89 
	mpublic
:

90 
	$shd_w¬p_t
Ğ
şass
 
shad”_cÜe_ùx
 *
shad”
, 
w¬p_size
)

91 : 
	`m_shad”
(
shad”
), 
	$m_w¬p_size
(
w¬p_size
)

93 
m_¡Ües_out¡ªdšg
=0;

94 
m_š¡_š_p–še
=0;

95 
	`»£t
();

97 
	$»£t
()

99 
	`as£¹
Ğ
m_¡Ües_out¡ªdšg
==0);

100 
	`as£¹
Ğ
m_š¡_š_p–še
==0);

101 
m_imiss_³ndšg
=
çl£
;

102 
m_w¬p_id
=()-1;

103 
m_dyÇmic_w¬p_id
 = ()-1;

104 
n_com¶‘ed
 = 
m_w¬p_size
;

105 
m_n_©omic
=0;

106 
m_memb¬
=
çl£
;

107 
m_dÚe_ex™
=
Œue
;

108 
m_Ï¡_ãtch
=0;

109 
m_Ãxt
=0;

110 
m_š¡_©_b¬r›r
=
NULL
;

111 
	}
}

112 
š™
Ğ
add»ss_ty³
 
¡¬t_pc
,

113 
ùa_id
,

114 
wid
,

115 cÚ¡ 
¡d
::
b™£t
<
MAX_WARP_SIZE
> &
aùive
,

116 
dyÇmic_w¬p_id
 )

118 
	gm_ùa_id
=
ùa_id
;

119 
	gm_w¬p_id
=
wid
;

120 
	gm_dyÇmic_w¬p_id
=
dyÇmic_w¬p_id
;

121 
	gm_Ãxt_pc
=
¡¬t_pc
;

122 
as£¹
Ğ
n_com¶‘ed
 >ğ
aùive
.
couÁ
() );

123 
as£¹
Ğ
n_com¶‘ed
 <ğ
m_w¬p_size
);

124 
	gn_com¶‘ed
 -ğ
aùive
.
couÁ
();

125 
	gm_aùive_th»ads
 = 
aùive
;

126 
	gm_dÚe_ex™
=
çl£
;

129 
boŞ
 
	$funùiÚ®_dÚe
() const;

130 
boŞ
 
	`wa™šg
();

131 
boŞ
 
	$h¬dw¬e_dÚe
() const;

133 
boŞ
 
	$dÚe_ex™
(ècÚ¡ {  
m_dÚe_ex™
; 
	}
}

134 
	$£t_dÚe_ex™
(è{ 
m_dÚe_ex™
=
Œue
; 
	}
}

136 
	$´št
Ğ
FILE
 *
fout
 ) const;

137 
	$´št_ibufãr
Ğ
FILE
 *
fout
 ) const;

139 
	$g‘_n_com¶‘ed
(ècÚ¡ {  
n_com¶‘ed
; 
	}
}

140 
	$£t_com¶‘ed
Ğ
ÏÃ
 )

142 
	`as£¹
Ğ
m_aùive_th»ads
.
	`‹¡
(
ÏÃ
) );

143 
m_aùive_th»ads
.
	`»£t
(
ÏÃ
);

144 
n_com¶‘ed
++;

145 
	}
}

147 
	$£t_Ï¡_ãtch
Ğ
sim_cyşe
 ) { 
m_Ï¡_ãtch
=sim_cyşe; 
	}
}

149 
	$g‘_n_©omic
(ècÚ¡ {  
m_n_©omic
; 
	}
}

150 
	$šc_n_©omic
(è{ 
m_n_©omic
++; 
	}
}

151 
	$dec_n_©omic
(
n
è{ 
m_n_©omic
-ò; 
	}
}

153 
	$£t_memb¬
(è{ 
m_memb¬
=
Œue
; 
	}
}

154 
	$ş—r_memb¬
(è{ 
m_memb¬
=
çl£
; 
	}
}

155 
boŞ
 
	$g‘_memb¬
(ècÚ¡ {  
m_memb¬
; 
	}
}

156 
add»ss_ty³
 
	$g‘_pc
(ècÚ¡ {  
m_Ãxt_pc
; 
	}
}

157 
	$£t_Ãxt_pc
Ğ
add»ss_ty³
 
pc
 ) { 
m_Ãxt_pc
 =…c; 
	}
}

159 
	$¡Üe_šfo_of_Ï¡_š¡_©_b¬r›r
(cÚ¡ 
w¬p_š¡_t
 *
pI
){ 
m_š¡_©_b¬r›r
 =…I;
	}
}

160 cÚ¡ 
w¬p_š¡_t
 * 
	$»¡Üe_šfo_of_Ï¡_š¡_©_b¬r›r
(){  
m_š¡_©_b¬r›r
;
	}
}

162 
	$ibufãr_fl
Ğ
¦Ù
, cÚ¡ 
w¬p_š¡_t
 *
pI
 )

164 
	`as£¹
(
¦Ù
 < 
IBUFFER_SIZE
 );

165 
m_ibufãr
[
¦Ù
].
m_š¡
=
pI
;

166 
m_ibufãr
[
¦Ù
].
m_v®id
=
Œue
;

167 
m_Ãxt
=0;

168 
	}
}

169 
boŞ
 
	$ibufãr_em±y
() const

171  
i
=0; i < 
IBUFFER_SIZE
; i++)

172 if(
m_ibufãr
[
i
].
m_v®id
)

173  
çl£
;

174  
Œue
;

175 
	}
}

176 
	$ibufãr_æush
()

178 
i
=0;i<
IBUFFER_SIZE
;i++) {

179 ifĞ
m_ibufãr
[
i
].
m_v®id
 )

180 
	`dec_š¡_š_p–še
();

181 
m_ibufãr
[
i
].
m_š¡
=
NULL
;

182 
m_ibufãr
[
i
].
m_v®id
=
çl£
;

184 
	}
}

185 cÚ¡ 
w¬p_š¡_t
 *
	$ibufãr_Ãxt_š¡
(è{  
m_ibufãr
[
m_Ãxt
].
m_š¡
; 
	}
}

186 
boŞ
 
	$ibufãr_Ãxt_v®id
(è{  
m_ibufãr
[
m_Ãxt
].
m_v®id
; 
	}
}

187 
	$ibufãr_ä“
()

189 
m_ibufãr
[
m_Ãxt
].
m_š¡
 = 
NULL
;

190 
m_ibufãr
[
m_Ãxt
].
m_v®id
 = 
çl£
;

191 
	}
}

192 
	$ibufãr_¡•
(è{ 
m_Ãxt
 = (m_Ãxt+1)%
IBUFFER_SIZE
; 
	}
}

194 
boŞ
 
	$imiss_³ndšg
(ècÚ¡ {  
m_imiss_³ndšg
; 
	}
}

195 
	$£t_imiss_³ndšg
(è{ 
m_imiss_³ndšg
=
Œue
; 
	}
}

196 
	$ş—r_imiss_³ndšg
(è{ 
m_imiss_³ndšg
=
çl£
; 
	}
}

198 
boŞ
 
	$¡Ües_dÚe
(ècÚ¡ {  
m_¡Ües_out¡ªdšg
 =ğ0; 
	}
}

199 
	$šc_¡Üe_»q
(è{ 
m_¡Ües_out¡ªdšg
++; 
	}
}

200 
	$dec_¡Üe_»q
()

202 
	`as£¹
Ğ
m_¡Ües_out¡ªdšg
 > 0 );

203 
m_¡Ües_out¡ªdšg
--;

204 
	}
}

206 
	$num_š¡_š_bufãr
() const

208 
couÁ
=0;

209 
i
=0;i<
IBUFFER_SIZE
;i++) {

210 ifĞ
m_ibufãr
[
i
].
m_v®id
 )

211 
couÁ
++;

213  
couÁ
;

214 
	}
}

215 
	$num_š¡_š_p–še
(ècÚ¡ {  
m_š¡_š_p–še
;
	}
}

216 
	$num_issued_š¡_š_p–še
(ècÚ¡ { (
	`num_š¡_š_p–še
()-
	`num_š¡_š_bufãr
());
	}
}

217 
boŞ
 
	$š¡_š_p–še
(ècÚ¡ {  
m_š¡_š_p–še
 > 0; 
	}
}

218 
	$šc_š¡_š_p–še
(è{ 
m_š¡_š_p–še
++; 
	}
}

219 
	$dec_š¡_š_p–še
()

221 
	`as£¹
Ğ
m_š¡_š_p–še
 > 0 );

222 
m_š¡_š_p–še
--;

223 
	}
}

225 
	$g‘_ùa_id
(ècÚ¡ {  
m_ùa_id
; 
	}
}

227 
	$g‘_dyÇmic_w¬p_id
(ècÚ¡ {  
m_dyÇmic_w¬p_id
; 
	}
}

228 
	$g‘_w¬p_id
(ècÚ¡ {  
m_w¬p_id
; 
	}
}

230 
	g´iv©e
:

231 cÚ¡ 
IBUFFER_SIZE
=2;

232 
şass
 
shad”_cÜe_ùx
 *
	gm_shad”
;

233 
	gm_ùa_id
;

234 
	gm_w¬p_id
;

235 
	gm_w¬p_size
;

236 
	gm_dyÇmic_w¬p_id
;

238 
add»ss_ty³
 
	gm_Ãxt_pc
;

239 
	gn_com¶‘ed
;

240 
	g¡d
::
b™£t
<
MAX_WARP_SIZE
> 
m_aùive_th»ads
;

242 
boŞ
 
	gm_imiss_³ndšg
;

244 
	sibufãr_’Œy
 {

245 
ibufãr_’Œy
(è{ 
	gm_v®id
 = 
çl£
; 
	gm_š¡
 = 
NULL
; }

246 cÚ¡ 
w¬p_š¡_t
 *
	gm_š¡
;

247 
boŞ
 
	gm_v®id
;

250 cÚ¡ 
w¬p_š¡_t
 *
	gm_š¡_©_b¬r›r
;

251 
ibufãr_’Œy
 
	gm_ibufãr
[
IBUFFER_SIZE
];

252 
	gm_Ãxt
;

254 
	gm_n_©omic
;

255 
boŞ
 
	gm_memb¬
;

257 
boŞ
 
	gm_dÚe_ex™
;

259 
	gm_Ï¡_ãtch
;

261 
	gm_¡Ües_out¡ªdšg
;

262 
	gm_š¡_š_p–še
;

267 
šlše
 
	$hw_tid_äom_wid
(
wid
, 
w¬p_size
, 
i
){ wid * w¬p_siz+ i;
	}
};

268 
šlše
 
	$wid_äom_hw_tid
(
tid
, 
w¬p_size
){id/w¬p_size;
	}
};

270 cÚ¡ 
	gWARP_PER_CTA_MAX
 = 48;

271 
	g¡d
::
	tb™£t
<
	tWARP_PER_CTA_MAX
> 
	tw¬p_£t_t
;

273 
»gi¡”_bªk
(
»gnum
, 
wid
, 
num_bªks
, 
bªk_w¬p_shiá
);

275 
şass
 
	gshad”_cÜe_ùx
;

276 
şass
 
	gshad”_cÜe_cÚfig
;

277 
şass
 
	gshad”_cÜe_¡©s
;

279 
	escheduËr_´iÜ™iz©iÚ_ty³


281 
	mSCHEDULER_PRIORITIZATION_LRR
 = 0,

282 
	mSCHEDULER_PRIORITIZATION_SRR
,

283 
	mSCHEDULER_PRIORITIZATION_GTO
,

284 
	mSCHEDULER_PRIORITIZATION_GTLRR
,

285 
	mSCHEDULER_PRIORITIZATION_GTY
,

286 
	mSCHEDULER_PRIORITIZATION_OLDEST
,

287 
	mSCHEDULER_PRIORITIZATION_YOUNGEST
,

292 
	ecÚü‘e_scheduËr


294 
	mCONCRETE_SCHEDULER_LRR
 = 0,

295 
	mCONCRETE_SCHEDULER_GTO
,

296 
	mCONCRETE_SCHEDULER_TWO_LEVEL_ACTIVE
,

297 
	mCONCRETE_SCHEDULER_WARP_LIMITING
,

298 
	mNUM_CONCRETE_SCHEDULERS


301 şas 
	cscheduËr_un™
 {

302 
	mpublic
:

303 
scheduËr_un™
(
shad”_cÜe_¡©s
* 
¡©s
, 
shad”_cÜe_ùx
* 
shad”
,

304 
ScÜebßrd
* 
scÜebßrd
, 
simt_¡ack
** 
simt
,

305 
¡d
::
veùÜ
<
shd_w¬p_t
>* 
w¬p
,

306 
»gi¡”_£t
* 
¥_out
,

307 
»gi¡”_£t
* 
sfu_out
,

308 
»gi¡”_£t
* 
mem_out
,

309 
id
)

310 : 
m_su³rvi£d_w¬ps
(), 
m_¡©s
(
¡©s
), 
m_shad”
(
shad”
),

311 
m_scÜebßrd
(
scÜebßrd
), 
m_simt_¡ack
(
simt
), 
m_w¬p
(
w¬p
),

312 
m_¥_out
(
¥_out
),
m_sfu_out
(
sfu_out
),
m_mem_out
(
mem_out
), 
	$m_id
(
id
){}

313 
vœtu®
 ~
	$scheduËr_un™
(){
	}
}

314 
vœtu®
 
	$add_su³rvi£d_w¬p_id
(
i
) {

315 
m_su³rvi£d_w¬ps
.
	`push_back
(&
	`w¬p
(
i
));

316 
	}
}

317 
vœtu®
 
	$dÚe_addšg_su³rvi£d_w¬ps
() {

318 
m_Ï¡_su³rvi£d_issued
 = 
m_su³rvi£d_w¬ps
.
	`’d
();

319 
	}
}

325 
cyşe
();

329 
	g‹m¶©e
 < 
ty³Çme
 
	gT
 >

330 
Üd”_Ìr
Ğ
ty³Çme
 
¡d
::
veùÜ
< 
T
 >& 
»suÉ_li¡
,

331 cÚ¡ 
ty³Çme
 
¡d
::
veùÜ
< 
T
 >& 
šput_li¡
,

332 cÚ¡ 
ty³Çme
 
¡d
::
veùÜ
< 
T
 >::
cÚ¡_™”©Ü
& 
Ï¡_issued_äom_šput
,

333 
num_w¬ps_to_add
 );

335 
	eOrd”šgTy³


339 
	gORDERING_GREEDY_THEN_PRIORITY_FUNC
 = 0,

342 
	gORDERED_PRIORITY_FUNC_ONLY
,

343 
	gNUM_ORDERING
,

345 
	g‹m¶©e
 < 
ty³Çme
 
	gU
 >

346 
Üd”_by_´iÜ™y
Ğ
¡d
::
veùÜ
< 
U
 >& 
»suÉ_li¡
,

347 cÚ¡ 
ty³Çme
 
¡d
::
veùÜ
< 
U
 >& 
šput_li¡
,

348 cÚ¡ 
ty³Çme
 
¡d
::
veùÜ
< 
U
 >::
cÚ¡_™”©Ü
& 
Ï¡_issued_äom_šput
,

349 
num_w¬ps_to_add
,

350 
Ord”šgTy³
 
age_Üd”šg
,

351 
	$boŞ
 (*
´iÜ™y_func
)(
U
 
lhs
, U 
rhs
) );

352 
boŞ
 
	`sÜt_w¬ps_by_Şde¡_dyÇmic_id
(
shd_w¬p_t
* 
lhs
, shd_w¬p_t* 
rhs
);

356 
vœtu®
 
	`Üd”_w¬ps
() = 0;

358 
´Ùeùed
:

359 
vœtu®
 
	`do_Ú_w¬p_issued
Ğ
w¬p_id
,

360 
num_issued
,

361 cÚ¡ 
¡d
::
veùÜ
< 
shd_w¬p_t
* >::
cÚ¡_™”©Ü
& 
´iÜ™ized_™”
 );

362 
šlše
 
	$g‘_sid
() const;

363 
´Ùeùed
:

364 
shd_w¬p_t
& 
	`w¬p
(
i
);

368 
¡d
::
veùÜ
< 
shd_w¬p_t
* > 
m_Ãxt_cyşe_´iÜ™ized_w¬ps
;

373 
¡d
::
veùÜ
< 
shd_w¬p_t
* > 
m_su³rvi£d_w¬ps
;

375 
¡d
::
veùÜ
< 
shd_w¬p_t
* >::
cÚ¡_™”©Ü
 
m_Ï¡_su³rvi£d_issued
;

376 
shad”_cÜe_¡©s
 *
m_¡©s
;

377 
shad”_cÜe_ùx
* 
m_shad”
;

379 
ScÜebßrd
* 
m_scÜebßrd
;

380 
simt_¡ack
** 
m_simt_¡ack
;

382 
¡d
::
veùÜ
<
shd_w¬p_t
>* 
m_w¬p
;

383 
»gi¡”_£t
* 
m_¥_out
;

384 
»gi¡”_£t
* 
m_sfu_out
;

385 
»gi¡”_£t
* 
m_mem_out
;

387 
m_id
;

388 
	}
};

390 şas 
	cÌr_scheduËr
 : 
public
 
scheduËr_un™
 {

391 
public
:

392 
Ìr_scheduËr
 ( 
shad”_cÜe_¡©s
* 
¡©s
, 
shad”_cÜe_ùx
* 
shad”
,

393 
ScÜebßrd
* 
scÜebßrd
, 
simt_¡ack
** 
simt
,

394 
¡d
::
veùÜ
<
shd_w¬p_t
>* 
w¬p
,

395 
»gi¡”_£t
* 
¥_out
,

396 
»gi¡”_£t
* 
sfu_out
,

397 
»gi¡”_£t
* 
mem_out
,

398 
id
 )

399 : 
	$scheduËr_un™
 ( 
¡©s
, 
shad”
, 
scÜebßrd
, 
simt
, 
w¬p
, 
¥_out
, 
sfu_out
, 
mem_out
, 
id
 ){}

400 
vœtu®
 ~
	$Ìr_scheduËr
 (è{
	}
}

401 
vœtu®
 
Üd”_w¬ps
 ();

402 
vœtu®
 
	$dÚe_addšg_su³rvi£d_w¬ps
() {

403 
m_Ï¡_su³rvi£d_issued
 = 
m_su³rvi£d_w¬ps
.
	`’d
();

404 
	}
}

407 şas 
	cgto_scheduËr
 : 
public
 
scheduËr_un™
 {

408 
public
:

409 
gto_scheduËr
 ( 
shad”_cÜe_¡©s
* 
¡©s
, 
shad”_cÜe_ùx
* 
shad”
,

410 
ScÜebßrd
* 
scÜebßrd
, 
simt_¡ack
** 
simt
,

411 
¡d
::
veùÜ
<
shd_w¬p_t
>* 
w¬p
,

412 
»gi¡”_£t
* 
¥_out
,

413 
»gi¡”_£t
* 
sfu_out
,

414 
»gi¡”_£t
* 
mem_out
,

415 
id
 )

416 : 
	$scheduËr_un™
 ( 
¡©s
, 
shad”
, 
scÜebßrd
, 
simt
, 
w¬p
, 
¥_out
, 
sfu_out
, 
mem_out
, 
id
 ){}

417 
vœtu®
 ~
	$gto_scheduËr
 (è{
	}
}

418 
vœtu®
 
Üd”_w¬ps
 ();

419 
vœtu®
 
	$dÚe_addšg_su³rvi£d_w¬ps
() {

420 
m_Ï¡_su³rvi£d_issued
 = 
m_su³rvi£d_w¬ps
.
	`begš
();

421 
	}
}

426 şas 
	ctwo_Ëv–_aùive_scheduËr
 : 
public
 
scheduËr_un™
 {

427 
public
:

428 
two_Ëv–_aùive_scheduËr
 ( 
shad”_cÜe_¡©s
* 
¡©s
, 
shad”_cÜe_ùx
* 
shad”
,

429 
ScÜebßrd
* 
scÜebßrd
, 
simt_¡ack
** 
simt
,

430 
¡d
::
veùÜ
<
shd_w¬p_t
>* 
w¬p
,

431 
»gi¡”_£t
* 
¥_out
,

432 
»gi¡”_£t
* 
sfu_out
,

433 
»gi¡”_£t
* 
mem_out
,

434 
id
,

435 * 
cÚfig_¡r
 )

436 : 
scheduËr_un™
 ( 
¡©s
, 
shad”
, 
scÜebßrd
, 
simt
, 
w¬p
, 
¥_out
, 
sfu_out
, 
mem_out
, 
id
 ),

437 
	$m_³ndšg_w¬ps
()

439 
šÃr_Ëv–_»adš
;

440 
ou‹r_Ëv–_»adš
;

441 
»t
 = 
	`ssÿnf
Ğ
cÚfig_¡r
,

443 &
m_max_aùive_w¬ps
,

444 &
šÃr_Ëv–_»adš
,

445 &
ou‹r_Ëv–_»adš
);

446 
	`as£¹
Ğ3 =ğ
»t
 );

447 
m_šÃr_Ëv–_´iÜ™iz©iÚ
=(
scheduËr_´iÜ™iz©iÚ_ty³
)
šÃr_Ëv–_»adš
;

448 
m_ou‹r_Ëv–_´iÜ™iz©iÚ
=(
scheduËr_´iÜ™iz©iÚ_ty³
)
ou‹r_Ëv–_»adš
;

450 
vœtu®
 ~
	$two_Ëv–_aùive_scheduËr
 (è{
	}
}

451 
vœtu®
 
Üd”_w¬ps
();

452 
	$add_su³rvi£d_w¬p_id
(
i
) {

453 iàĞ
m_Ãxt_cyşe_´iÜ™ized_w¬ps
.
	`size
(è< 
m_max_aùive_w¬ps
 ) {

454 
m_Ãxt_cyşe_´iÜ™ized_w¬ps
.
	`push_back
Ğ&
	`w¬p
(
i
) );

456 
m_³ndšg_w¬ps
.
	`push_back
(&
	`w¬p
(
i
));

458 
	}
}

459 
vœtu®
 
	$dÚe_addšg_su³rvi£d_w¬ps
() {

460 
m_Ï¡_su³rvi£d_issued
 = 
m_su³rvi£d_w¬ps
.
	`begš
();

461 
	}
}

463 
	g´Ùeùed
:

464 
vœtu®
 
do_Ú_w¬p_issued
Ğ
w¬p_id
,

465 
num_issued
,

466 cÚ¡ 
¡d
::
veùÜ
< 
shd_w¬p_t
* >::
cÚ¡_™”©Ü
& 
´iÜ™ized_™”
 );

468 
	g´iv©e
:

469 
¡d
::
deque
< 
shd_w¬p_t
* > 
m_³ndšg_w¬ps
;

470 
scheduËr_´iÜ™iz©iÚ_ty³
 
	gm_šÃr_Ëv–_´iÜ™iz©iÚ
;

471 
scheduËr_´iÜ™iz©iÚ_ty³
 
	gm_ou‹r_Ëv–_´iÜ™iz©iÚ
;

472 
	gm_max_aùive_w¬ps
;

476 şas 
	cswl_scheduËr
 : 
public
 
scheduËr_un™
 {

477 
public
:

478 
swl_scheduËr
 ( 
shad”_cÜe_¡©s
* 
¡©s
, 
shad”_cÜe_ùx
* 
shad”
,

479 
ScÜebßrd
* 
scÜebßrd
, 
simt_¡ack
** 
simt
,

480 
¡d
::
veùÜ
<
shd_w¬p_t
>* 
w¬p
,

481 
»gi¡”_£t
* 
¥_out
,

482 
»gi¡”_£t
* 
sfu_out
,

483 
»gi¡”_£t
* 
mem_out
,

484 
id
,

485 * 
cÚfig_¡ršg
 );

486 
	mvœtu®
 ~
	$swl_scheduËr
 () {}

487 
vœtu®
 
	`Üd”_w¬ps
 ();

488 
vœtu®
 
	$dÚe_addšg_su³rvi£d_w¬ps
() {

489 
m_Ï¡_su³rvi£d_issued
 = 
m_su³rvi£d_w¬ps
.
	`begš
();

490 
	}
}

492 
	g´Ùeùed
:

493 
scheduËr_´iÜ™iz©iÚ_ty³
 
m_´iÜ™iz©iÚ
;

494 
	gm_num_w¬ps_to_lim™
;

499 şas 
	cİndcŞl_rfu_t
 {

500 
	mpublic
:

502 
	$İndcŞl_rfu_t
()

504 
m_num_bªks
=0;

505 
m_shad”
=
NULL
;

506 
m_š™Ÿlized
=
çl£
;

508 
	`add_cu_£t
(
cu_£t
, 
num_cu
, 
num_di¥©ch
);

509 
¡d
::
	tveùÜ
<
	t»gi¡”_£t
*> 
	tpÜt_veùÜ_t
;

510 
¡d
::
	tveùÜ
<> 
	tušt_veùÜ_t
;

511 
	`add_pÜt
Ğ
pÜt_veùÜ_t
 & 
šput
,…Üt_veùÜ_ˆ& 
ouput
, 
ušt_veùÜ_t
 
cu_£ts
);

512 
	`š™
Ğ
num_bªks
, 
shad”_cÜe_ùx
 *
shad”
 );

515 
boŞ
 
	`wr™eback
ĞcÚ¡ 
w¬p_š¡_t
 &
w¬p
 );

517 
	$¡•
()

519 
	`di¥©ch_»ady_cu
();

520 
	`®loÿ‹_»ads
();

521  
p
 = 0 ;… < 
m_š_pÜts
.
	`size
();…++ )

522 
	`®loÿ‹_cu
Ğ
p
 );

523 
	`´oûss_bªks
();

524 
	}
}

526 
	$dump
Ğ
FILE
 *
å
 ) const

528 
	`årštf
(
å
,"\n");

529 
	`årštf
(
å
,"Operand Collector State:\n");

530  
n
=0;‚ < 
m_cu
.
	`size
();‚++ ) {

531 
	`årštf
(
å
," CU-%2u: ", 
n
);

532 
m_cu
[
n
]->
	`dump
(
å
,
m_shad”
);

534 
m_¬b™”
.
	`dump
(
å
);

535 
	}
}

537 
shad”_cÜe_ùx
 *
	$shad”_cÜe
(è{  
m_shad”
; 
	}
}

539 
	g´iv©e
:

541 
	$´oûss_bªks
()

543 
m_¬b™”
.
	`»£t_®loùiÚ
();

544 
	}
}

546 
di¥©ch_»ady_cu
();

547 
®loÿ‹_cu
Ğ
pÜt
 );

548 
®loÿ‹_»ads
();

552 
şass
 
	gcŞËùÜ_un™_t
;

554 şas 
	cİ_t
 {

555 
	gpublic
:

557 
İ_t
(è{ 
m_v®id
 = 
çl£
; }

558 
İ_t
Ğ
cŞËùÜ_un™_t
 *
cu
, 
İ
, 
»g
, 
num_bªks
, 
bªk_w¬p_shiá
 )

560 
	gm_v®id
 = 
Œue
;

561 
	gm_w¬p
=
NULL
;

562 
	gm_cu
 = 
cu
;

563 
	gm_İ”ªd
 = 
İ
;

564 
	gm_»gi¡”
 = 
»g
;

565 
	gm_bªk
 = 
»gi¡”_bªk
(
»g
,
cu
->
g‘_w¬p_id
(),
num_bªks
,
bªk_w¬p_shiá
);

567 
İ_t
ĞcÚ¡ 
w¬p_š¡_t
 *
w¬p
, 
»g
, 
num_bªks
, 
bªk_w¬p_shiá
 )

569 
	gm_v®id
=
Œue
;

570 
	gm_w¬p
=
w¬p
;

571 
	gm_»gi¡”
=
»g
;

572 
	gm_cu
=
NULL
;

573 
	gm_İ”ªd
 = -1;

574 
	gm_bªk
 = 
»gi¡”_bªk
(
»g
,
w¬p
->
w¬p_id
(),
num_bªks
,
bªk_w¬p_shiá
);

578 
boŞ
 
v®id
(ècÚ¡ {  
	gm_v®id
; }

579 
g‘_»g
() const

581 
as£¹
Ğ
m_v®id
 );

582  
	gm_»gi¡”
;

584 
g‘_wid
() const

586 ifĞ
	gm_w¬p
 )  m_w¬p->
w¬p_id
();

587 ifĞ
	gm_cu
 )  m_cu->
g‘_w¬p_id
();

588 
abÜt
();

590 
g‘_aùive_couÁ
() const

592 ifĞ
	gm_w¬p
 )  m_w¬p->
aùive_couÁ
();

593 ifĞ
	gm_cu
 )  m_cu->
g‘_aùive_couÁ
();

594 
abÜt
();

596 cÚ¡ 
	gaùive_mask_t
 & 
g‘_aùive_mask
()

598 ifĞ
	gm_w¬p
 )  m_w¬p->
g‘_aùive_mask
();

599 ifĞ
	gm_cu
 )  m_cu->
g‘_aùive_mask
();

600 
abÜt
();

602 
g‘_¥_İ
() const

604 ifĞ
	gm_w¬p
 )  m_w¬p->
	g¥_İ
;

605 ifĞ
	gm_cu
 )  m_cu->
g‘_¥_İ
();

606 
abÜt
();

608 
g‘_oc_id
(ècÚ¡ {  
	gm_cu
->
g‘_id
(); }

609 
g‘_bªk
(ècÚ¡ {  
	gm_bªk
; }

610 
g‘_İ”ªd
(ècÚ¡ {  
	gm_İ”ªd
; }

611 
dump
(
FILE
 *
å
) const

613 if(
	gm_cu
)

614 
årštf
(
å
," <R%u, CU:%u, w:%02u> ", 
m_»gi¡”
,
m_cu
->
g‘_id
(),m_cu->
g‘_w¬p_id
());

615 ifĞ!
	gm_w¬p
->
em±y
() )

616 
årštf
(
å
," <R%u, wid:%02u> ", 
m_»gi¡”
,
m_w¬p
->
w¬p_id
() );

618 
	g¡d
::
¡ršg
 
g‘_»g_¡ršg
() const

620 
bufãr
[64];

621 
¢´štf
(
bufãr
,64,"R%u", 
m_»gi¡”
);

622  
	g¡d
::
¡ršg
(
bufãr
);

626 
»£t
(è{ 
	gm_v®id
 = 
çl£
; }

627 
	g´iv©e
:

628 
boŞ
 
m_v®id
;

629 
cŞËùÜ_un™_t
 *
	gm_cu
;

630 cÚ¡ 
w¬p_š¡_t
 *
	gm_w¬p
;

631 
	gm_İ”ªd
;

632 
	gm_»gi¡”
;

633 
	gm_bªk
;

636 
	e®loc_t
 {

637 
	gNO_ALLOC
,

638 
	gREAD_ALLOC
,

639 
	gWRITE_ALLOC
,

642 şas 
	c®loÿtiÚ_t
 {

643 
	gpublic
:

644 
®loÿtiÚ_t
(è{ 
m_®loÿtiÚ
 = 
NO_ALLOC
; }

645 
boŞ
 
is_»ad
(ècÚ¡ {  
	gm_®loÿtiÚ
==
READ_ALLOC
; }

646 
boŞ
 
is_wr™e
(ècÚ¡ { 
	gm_®loÿtiÚ
==
WRITE_ALLOC
; }

647 
boŞ
 
is_ä“
(ècÚ¡ { 
	gm_®loÿtiÚ
==
NO_ALLOC
; }

648 
dump
(
FILE
 *
å
) const {

649 ifĞ
	gm_®loÿtiÚ
 =ğ
NO_ALLOC
 ) { 
årštf
(
å
,"<free>"); }

650 ifĞ
	gm_®loÿtiÚ
 =ğ
READ_ALLOC
 ) { 
årštf
(
å
,"rd: "); 
	gm_İ
.
dump
(fp); }

651 ifĞ
	gm_®loÿtiÚ
 =ğ
WRITE_ALLOC
 ) { 
årštf
(
å
,"wr: "); 
	gm_İ
.
dump
(fp); }

652 
årštf
(
å
,"\n");

654 
®loc_»ad
ĞcÚ¡ 
İ_t
 &
İ
 ) { 
as£¹
(
is_ä“
()); 
	gm_®loÿtiÚ
=
READ_ALLOC
; 
	gm_İ
=op; }

655 
®loc_wr™e
ĞcÚ¡ 
İ_t
 &
İ
 ) { 
as£¹
(
is_ä“
()); 
	gm_®loÿtiÚ
=
WRITE_ALLOC
; 
	gm_İ
=op; }

656 
»£t
(è{ 
	gm_®loÿtiÚ
 = 
NO_ALLOC
; }

657 
	g´iv©e
:

658 
®loc_t
 
m_®loÿtiÚ
;

659 
İ_t
 
	gm_İ
;

662 şas 
	c¬b™”_t
 {

663 
	gpublic
:

665 
¬b™”_t
()

667 
m_queue
=
NULL
;

668 
	gm_®loÿ‹d_bªk
=
NULL
;

669 
	gm_®loÿtÜ_¼_h—d
=
NULL
;

670 
	g_šm©ch
=
NULL
;

671 
	g_outm©ch
=
NULL
;

672 
	g_»que¡
=
NULL
;

673 
	gm_Ï¡_cu
=0;

675 
š™
Ğ
num_cu
, 
num_bªks
 )

677 
as£¹
(
num_cu
 > 0);

678 
as£¹
(
num_bªks
 > 0);

679 
	gm_num_cŞËùÜs
 = 
num_cu
;

680 
	gm_num_bªks
 = 
num_bªks
;

681 
	g_šm©ch
 = 
Ãw
 [ 
m_num_bªks
 ];

682 
	g_outm©ch
 = 
Ãw
 [ 
m_num_cŞËùÜs
 ];

683 
	g_»que¡
 = 
Ãw
 *[ 
m_num_bªks
 ];

684 
	gi
=0; i<
	gm_num_bªks
;i++)

685 
	g_»que¡
[
i
] = 
Ãw
 [
m_num_cŞËùÜs
];

686 
	gm_queue
 = 
Ãw
 
¡d
::
li¡
<
İ_t
>[
num_bªks
];

687 
	gm_®loÿ‹d_bªk
 = 
Ãw
 
®loÿtiÚ_t
[
num_bªks
];

688 
	gm_®loÿtÜ_¼_h—d
 = 
Ãw
 [
num_cu
];

689  
	gn
=0;‚<
	gnum_cu
;n++ )

690 
	gm_®loÿtÜ_¼_h—d
[
n
] =‚%
num_bªks
;

691 
»£t_®loùiÚ
();

695 
dump
(
FILE
 *
å
) const

697 
årštf
(
å
,"\n");

698 
årštf
(
å
," Arbiter State:\n");

699 
årštf
(
å
,"„equests:\n");

700  
	gb
=0; b<
	gm_num_bªks
; b++ ) {

701 
årštf
(
å
," bªk %u : ", 
b
 );

702 
	g¡d
::
li¡
<
İ_t
>::
cÚ¡_™”©Ü
 
o
 = 
m_queue
[
b
].
begš
();

703 ; 
	go
 !ğ
m_queue
[
b
].
’d
(); o++ ) {

704 
	go
->
dump
(
å
);

706 
årštf
(
å
,"\n");

708 
årštf
(
å
," grants:\n");

709 
	gb
=0;b<
	gm_num_bªks
;b++) {

710 
årštf
(
å
," bªk %u : ", 
b
 );

711 
	gm_®loÿ‹d_bªk
[
b
].
dump
(
å
);

713 
årštf
(
å
,"\n");

717 
	g¡d
::
li¡
<
İ_t
> 
®loÿ‹_»ads
();

719 
add_»ad_»que¡s
Ğ
cŞËùÜ_un™_t
 *
cu
 )

721 cÚ¡ 
İ_t
 *
	g¤c
 = 
cu
->
g‘_İ”ªds
();

722  
	gi
=0; i<
	gMAX_REG_OPERANDS
*2; i++) {

723 cÚ¡ 
	gİ_t
 &
	gİ
 = 
¤c
[
i
];

724 ifĞ
	gİ
.
v®id
() ) {

725 
	gbªk
 = 
İ
.
g‘_bªk
();

726 
	gm_queue
[
bªk
].
push_back
(
İ
);

730 
boŞ
 
bªk_idË
Ğ
bªk
 ) const

732  
	gm_®loÿ‹d_bªk
[
bªk
].
is_ä“
();

734 
®loÿ‹_bªk_fÜ_wr™e
Ğ
bªk
, cÚ¡ 
İ_t
 &
İ
 )

736 
as£¹
Ğ
bªk
 < 
m_num_bªks
 );

737 
	gm_®loÿ‹d_bªk
[
bªk
].
®loc_wr™e
(
İ
);

739 
®loÿ‹_fÜ_»ad
Ğ
bªk
, cÚ¡ 
İ_t
 &
İ
 )

741 
as£¹
Ğ
bªk
 < 
m_num_bªks
 );

742 
	gm_®loÿ‹d_bªk
[
bªk
].
®loc_»ad
(
İ
);

744 
»£t_®loùiÚ
()

746  
	gb
=0; b < 
	gm_num_bªks
; b++ )

747 
	gm_®loÿ‹d_bªk
[
b
].
»£t
();

750 
	g´iv©e
:

751 
m_num_bªks
;

752 
	gm_num_cŞËùÜs
;

754 
®loÿtiÚ_t
 *
	gm_®loÿ‹d_bªk
;

755 
	g¡d
::
li¡
<
İ_t
> *
m_queue
;

757 *
	gm_®loÿtÜ_¼_h—d
;

758 
	gm_Ï¡_cu
;

760 *
	g_šm©ch
;

761 *
	g_outm©ch
;

762 **
	g_»que¡
;

765 şas 
	cšput_pÜt_t
 {

766 
	gpublic
:

767 
šput_pÜt_t
(
pÜt_veùÜ_t
 & 
šput
,…Üt_veùÜ_ˆ& 
ouut
, 
ušt_veùÜ_t
 
cu_£ts
)

768 : 
m_š
(
šput
),
m_out
(
ouut
), 
m_cu_£ts
(
cu_£ts
)

770 
as£¹
(
šput
.
size
(è=ğ
ouut
.size());

771 
as£¹
(
nÙ
 
m_cu_£ts
.
em±y
());

774 
pÜt_veùÜ_t
 
	gm_š
,
	gm_out
;

775 
ušt_veùÜ_t
 
	gm_cu_£ts
;

778 şas 
	ccŞËùÜ_un™_t
 {

779 
	gpublic
:

781 
cŞËùÜ_un™_t
()

783 
m_ä“
 = 
Œue
;

784 
	gm_w¬p
 = 
NULL
;

785 
	gm_ouut_»gi¡”
 = 
NULL
;

786 
	gm_¤c_İ
 = 
Ãw
 
İ_t
[
MAX_REG_OPERANDS
*2];

787 
	gm_nÙ_»ady
.
»£t
();

788 
	gm_w¬p_id
 = -1;

789 
	gm_num_bªks
 = 0;

790 
	gm_bªk_w¬p_shiá
 = 0;

793 
boŞ
 
»ady
() const;

794 cÚ¡ 
İ_t
 *
g‘_İ”ªds
(ècÚ¡ {  
	gm_¤c_İ
; }

795 
dump
(
FILE
 *
å
, cÚ¡ 
shad”_cÜe_ùx
 *
shad”
 ) const;

797 
g‘_w¬p_id
(ècÚ¡ {  
	gm_w¬p_id
; }

798 
g‘_aùive_couÁ
(ècÚ¡ {  
	gm_w¬p
->
aùive_couÁ
(); }

799 cÚ¡ 
	gaùive_mask_t
 & 
g‘_aùive_mask
(ècÚ¡ {  
	gm_w¬p
->get_active_mask(); }

800 
g‘_¥_İ
(ècÚ¡ {  
	gm_w¬p
->
	g¥_İ
; }

801 
g‘_id
(ècÚ¡ {  
	gm_cuid
; }

804 
š™
(
n
,

805 
num_bªks
,

806 
log2_w¬p_size
,

807 cÚ¡ 
cÜe_cÚfig
 *
cÚfig
,

808 
İndcŞl_rfu_t
 *
rfu
 );

809 
boŞ
 
®loÿ‹
Ğ
»gi¡”_£t
* 
p–še_»g
,„egi¡”_£t* 
ouut_»g
 );

811 
cŞËù_İ”ªd
Ğ
İ
 )

813 
	gm_nÙ_»ady
.
»£t
(
İ
);

815 
g‘_num_İ”ªds
() const{

816  
	gm_w¬p
->
g‘_num_İ”ªds
();

818 
g‘_num_»gs
() const{

819  
	gm_w¬p
->
g‘_num_»gs
();

821 
di¥©ch
();

822 
boŞ
 
is_ä“
(){ 
	gm_ä“
;}

824 
	g´iv©e
:

825 
boŞ
 
m_ä“
;

826 
	gm_cuid
;

827 
	gm_w¬p_id
;

828 
w¬p_š¡_t
 *
	gm_w¬p
;

829 
»gi¡”_£t
* 
	gm_ouut_»gi¡”
;

830 
İ_t
 *
	gm_¤c_İ
;

831 
	g¡d
::
b™£t
<
MAX_REG_OPERANDS
*2> 
m_nÙ_»ady
;

832 
	gm_num_bªks
;

833 
	gm_bªk_w¬p_shiá
;

834 
İndcŞl_rfu_t
 *
	gm_rfu
;

838 şas 
	cdi¥©ch_un™_t
 {

839 
	gpublic
:

840 
di¥©ch_un™_t
(
¡d
::
veùÜ
<
cŞËùÜ_un™_t
>* 
cus
)

842 
m_Ï¡_cu
=0;

843 
	gm_cŞËùÜ_un™s
=
cus
;

844 
	gm_num_cŞËùÜs
 = (*
cus
).
size
();

845 
	gm_Ãxt_cu
=0;

848 
cŞËùÜ_un™_t
 *
fšd_»ady
()

850  
	gn
=0;‚ < 
	gm_num_cŞËùÜs
;‚++ ) {

851 
	gc
=(
m_Ï¡_cu
+
n
+1)%
m_num_cŞËùÜs
;

852 ifĞ(*
	gm_cŞËùÜ_un™s
)[
c
].
»ady
() ) {

853 
	gm_Ï¡_cu
=
c
;

854  &((*
	gm_cŞËùÜ_un™s
)[
c
]);

857  
	gNULL
;

860 
	g´iv©e
:

861 
m_num_cŞËùÜs
;

862 
	g¡d
::
veùÜ
<
cŞËùÜ_un™_t
>* 
m_cŞËùÜ_un™s
;

863 
	gm_Ï¡_cu
;

864 
	gm_Ãxt_cu
;

868 
boŞ
 
	gm_š™Ÿlized
;

870 
	gm_num_cŞËùÜ_£ts
;

872 
	gm_num_bªks
;

873 
	gm_bªk_w¬p_shiá
;

874 
	gm_w¬p_size
;

875 
	g¡d
::
veùÜ
<
cŞËùÜ_un™_t
 *> 
m_cu
;

876 
¬b™”_t
 
	gm_¬b™”
;

884 
	g¡d
::
veùÜ
<
šput_pÜt_t
> 
m_š_pÜts
;

885 
	g¡d
::
	tm­
<, 
	t¡d
::
	tveùÜ
<
	tcŞËùÜ_un™_t
> > 
	tcu_£ts_t
;

886 
cu_£ts_t
 
	gm_cus
;

887 
	g¡d
::
veùÜ
<
di¥©ch_un™_t
> 
m_di¥©ch_un™s
;

892 
shad”_cÜe_ùx
 *
	gm_shad”
;

895 şas 
	cb¬r›r_£t_t
 {

896 
	mpublic
:

897 
b¬r›r_£t_t
(
shad”_cÜe_ùx
 * 
shad”
, 
max_w¬ps_³r_cÜe
, 
max_ùa_³r_cÜe
, 
max_b¬r›rs_³r_ùa
, 
w¬p_size
);

900 
®loÿ‹_b¬r›r
Ğ
ùa_id
, 
w¬p_£t_t
 
w¬ps
 );

903 
d—Îoÿ‹_b¬r›r
Ğ
ùa_id
 );

905 
	m¡d
::
	tm­
<, 
	tw¬p_£t_t
 > 
	tùa_to_w¬p_t
;

906 
	m¡d
::
	tm­
<, 
	tw¬p_£t_t
 > 
	tb¬_id_to_w¬p_t
;

910 
w¬p_»aches_b¬r›r
Ğ
ùa_id
, 
w¬p_id
, 
w¬p_š¡_t
* 
š¡
);

914 
w¬p_ex™
Ğ
w¬p_id
 );

917 
boŞ
 
	$w¬p_wa™šg_©_b¬r›r
Ğ
w¬p_id
 ) const;

920 
	`dump
();

922 
´iv©e
:

923 
m_max_ùa_³r_cÜe
;

924 
m_max_w¬ps_³r_cÜe
;

925 
m_max_b¬r›rs_³r_ùa
;

926 
m_w¬p_size
;

927 
ùa_to_w¬p_t
 
m_ùa_to_w¬ps
;

928 
b¬_id_to_w¬p_t
 
m_b¬_id_to_w¬ps
;

929 
w¬p_£t_t
 
m_w¬p_aùive
;

930 
w¬p_£t_t
 
m_w¬p_©_b¬r›r
;

931 
shad”_cÜe_ùx
 *
m_shad”
;

935 
	sš¢_Ï‹ncy_šfo
 {

936 
pc
;

937 
Ï‹ncy
;

940 
	siãtch_bufãr_t
 {

941 
	`iãtch_bufãr_t
(è{ 
m_v®id
=
çl£
; }

943 
	`iãtch_bufãr_t
Ğ
add»ss_ty³
 
pc
, 
nby‹s
, 
w¬p_id
 )

945 
m_v®id
=
Œue
;

946 
m_pc
=
pc
;

947 
m_nby‹s
=
nby‹s
;

948 
m_w¬p_id
=
w¬p_id
;

951 
boŞ
 
m_v®id
;

952 
add»ss_ty³
 
m_pc
;

953 
m_nby‹s
;

954 
m_w¬p_id
;

957 
şass
 
shad”_cÜe_cÚfig
;

959 şas 
	csimd_funùiÚ_un™
 {

960 
public
:

961 
	`simd_funùiÚ_un™
ĞcÚ¡ 
shad”_cÜe_cÚfig
 *
cÚfig
 );

962 ~
	$simd_funùiÚ_un™
(è{ 
d–‘e
 
m_di¥©ch_»g
; }

965 
vœtu®
 
	$issue
Ğ
»gi¡”_£t
& 
sourû_»g
 ) { sourû_»g.
	`move_out_to
(
m_di¥©ch_»g
); 
occup›d
.
	`£t
(m_di¥©ch_»g->
Ï‹ncy
);
	}
}

966 
vœtu®
 
cyşe
() = 0;

967 
vœtu®
 
aùive_ÏÃs_š_p–še
() = 0;

970 
vœtu®
 
	$şock_muÉl›r
(ècÚ¡ {  1; 
	}
}

971 
vœtu®
 
boŞ
 
	$ÿn_issue
ĞcÚ¡ 
w¬p_š¡_t
 &
š¡
 ) cÚ¡ {  
m_di¥©ch_»g
->
	`em±y
(è&& !
occup›d
.
	`‹¡
(š¡.
Ï‹ncy
); 
	}
}

972 
vœtu®
 
boŞ
 
	$¡®ÏbË
() const = 0;

973 
vœtu®
 
	$´št
Ğ
FILE
 *
å
 ) const

975 
	`årštf
(
å
,"% di¥©chğ", 
m_Çme
.
	`c_¡r
() );

976 
m_di¥©ch_»g
->
	`´št
(
å
);

977 
	}
}

978 
	g´Ùeùed
:

979 
¡d
::
¡ršg
 
m_Çme
;

980 cÚ¡ 
shad”_cÜe_cÚfig
 *
	gm_cÚfig
;

981 
w¬p_š¡_t
 *
	gm_di¥©ch_»g
;

982 cÚ¡ 
	gMAX_ALU_LATENCY
 = 512;

983 
	g¡d
::
b™£t
<
MAX_ALU_LATENCY
> 
occup›d
;

986 şas 
	cp–šed_simd_un™
 : 
public
 
simd_funùiÚ_un™
 {

987 
public
:

988 
p–šed_simd_un™
Ğ
»gi¡”_£t
* 
»suÉ_pÜt
, cÚ¡ 
shad”_cÜe_cÚfig
 *
cÚfig
, 
max_Ï‹ncy
, 
shad”_cÜe_ùx
 *
cÜe
 );

991 
vœtu®
 
cyşe
();

992 
vœtu®
 
issue
Ğ
»gi¡”_£t
& 
sourû_»g
 );

993 
vœtu®
 
	$g‘_aùive_ÏÃs_š_p–še
()

995 
aùive_mask_t
 
aùive_ÏÃs
;

996 
aùive_ÏÃs
.
	`»£t
();

997  
¡age
=0; (¡age+1)<
m_p–še_d•th
; stage++ ){

998 ifĞ!
m_p–še_»g
[
¡age
]->
	`em±y
() )

999 
aùive_ÏÃs
|=
m_p–še_»g
[
¡age
]->
	`g‘_aùive_mask
();

1001  
aùive_ÏÃs
.
	`couÁ
();

1003 
vœtu®
 
	`aùive_ÏÃs_š_p–še
() = 0;

1013 
vœtu®
 
boŞ
 
	$¡®ÏbË
(ècÚ¡ {  
çl£
; 
	}
}

1014 
vœtu®
 
boŞ
 
	$ÿn_issue
ĞcÚ¡ 
w¬p_š¡_t
 &
š¡
 ) const

1016  
simd_funùiÚ_un™
::
	`ÿn_issue
(
š¡
);

1017 
	}
}

1018 
vœtu®
 
	$´št
(
FILE
 *
å
) const

1020 
simd_funùiÚ_un™
::
	`´št
(
å
);

1021  
s
=
m_p–še_d•th
-1; s>=0; s-- ) {

1022 ifĞ!
m_p–še_»g
[
s
]->
	`em±y
() ) {

1023 
	`årštf
(
å
," %s[%2d] ", 
m_Çme
.
	`c_¡r
(), 
s
 );

1024 
m_p–še_»g
[
s
]->
	`´št
(
å
);

1027 
	}
}

1028 
	g´Ùeùed
:

1029 
m_p–še_d•th
;

1030 
w¬p_š¡_t
 **
	gm_p–še_»g
;

1031 
»gi¡”_£t
 *
	gm_»suÉ_pÜt
;

1032 
şass
 
shad”_cÜe_ùx
 *
	gm_cÜe
;

1035 şas 
	csfu
 : 
public
 
p–šed_simd_un™


1037 
public
:

1038 
sfu
Ğ
»gi¡”_£t
* 
»suÉ_pÜt
, cÚ¡ 
shad”_cÜe_cÚfig
 *
cÚfig
, 
shad”_cÜe_ùx
 *
cÜe
 );

1039 
vœtu®
 
boŞ
 
	$ÿn_issue
ĞcÚ¡ 
w¬p_š¡_t
 &
š¡
 ) const

1041 
š¡
.
İ
) {

1042 
SFU_OP
: ;

1043 
ALU_SFU_OP
: ;

1044 :  
çl£
;

1046  
p–šed_simd_un™
::
	`ÿn_issue
(
š¡
);

1048 
vœtu®
 
	`aùive_ÏÃs_š_p–še
();

1049 
vœtu®
 
	`issue
Ğ
»gi¡”_£t
& 
sourû_»g
 );

1050 
	}
};

1052 şas 
	c¥_un™
 : 
public
 
p–šed_simd_un™


1054 
public
:

1055 
¥_un™
Ğ
»gi¡”_£t
* 
»suÉ_pÜt
, cÚ¡ 
shad”_cÜe_cÚfig
 *
cÚfig
, 
shad”_cÜe_ùx
 *
cÜe
 );

1056 
vœtu®
 
boŞ
 
	$ÿn_issue
ĞcÚ¡ 
w¬p_š¡_t
 &
š¡
 ) const

1058 
š¡
.
İ
) {

1059 
SFU_OP
:  
çl£
;

1060 
LOAD_OP
:  
çl£
;

1061 
STORE_OP
:  
çl£
;

1062 
MEMORY_BARRIER_OP
:  
çl£
;

1065  
p–šed_simd_un™
::
	`ÿn_issue
(
š¡
);

1067 
vœtu®
 
	`aùive_ÏÃs_š_p–še
();

1068 
vœtu®
 
	`issue
Ğ
»gi¡”_£t
& 
sourû_»g
 );

1069 
	}
};

1071 
şass
 
	gsimt_cÜe_şu¡”
;

1072 
şass
 
	gshad”_memÜy_š‹rçû
;

1073 
şass
 
	gshad”_cÜe_mem_ãtch_®loÿtÜ
;

1074 
şass
 
	gÿche_t
;

1076 şas 
	cld¡_un™
: 
public
 
p–šed_simd_un™
 {

1077 
public
:

1078 
ld¡_un™
Ğ
mem_ãtch_š‹rçû
 *
iút
,

1079 
shad”_cÜe_mem_ãtch_®loÿtÜ
 *
mf_®loÿtÜ
,

1080 
shad”_cÜe_ùx
 *
cÜe
,

1081 
İndcŞl_rfu_t
 *
İ”ªd_cŞËùÜ
,

1082 
ScÜebßrd
 *
scÜebßrd
,

1083 cÚ¡ 
shad”_cÜe_cÚfig
 *
cÚfig
,

1084 cÚ¡ 
memÜy_cÚfig
 *
mem_cÚfig
,

1085 
şass
 
shad”_cÜe_¡©s
 *
¡©s
,

1086 
sid
, 
c
 );

1089 
vœtu®
 
issue
Ğ
»gi¡”_£t
 &
š¡
 );

1090 
vœtu®
 
cyşe
();

1092 
fl
Ğ
mem_ãtch
 *
mf
 );

1093 
æush
();

1094 
wr™eback
();

1097 
vœtu®
 
	$şock_muÉl›r
() const;

1099 
vœtu®
 
boŞ
 
	$ÿn_issue
ĞcÚ¡ 
w¬p_š¡_t
 &
š¡
 ) const

1101 
š¡
.
İ
) {

1102 
LOAD_OP
: ;

1103 
STORE_OP
: ;

1104 
MEMORY_BARRIER_OP
: ;

1105 :  
çl£
;

1107  
m_di¥©ch_»g
->
	`em±y
();

1110 
vœtu®
 
	`aùive_ÏÃs_š_p–še
();

1111 
vœtu®
 
boŞ
 
	$¡®ÏbË
(ècÚ¡ {  
Œue
; 
	}
}

1112 
boŞ
 
	$»¥Ú£_bufãr_fuÎ
() const;

1113 
	$´št
(
FILE
 *
fout
) const;

1114 
	`´št_ÿche_¡©s
Ğ
FILE
 *
å
, & 
dl1_acûs£s
, & 
dl1_mis£s
 );

1115 
	`g‘_ÿche_¡©s
(&
»ad_acûs£s
, &
wr™e_acûs£s
, &
»ad_mis£s
, &
wr™e_mis£s
, 
ÿche_ty³
);

1116 
	`g‘_ÿche_¡©s
(
ÿche_¡©s
 &
cs
);

1118 
	$g‘_L1D_sub_¡©s
(
ÿche_sub_¡©s
 &
css
) const;

1119 
	$g‘_L1C_sub_¡©s
(
ÿche_sub_¡©s
 &
css
) const;

1120 
	$g‘_L1T_sub_¡©s
(
ÿche_sub_¡©s
 &
css
) const;

1122 
´Ùeùed
:

1123 
	`ld¡_un™
Ğ
mem_ãtch_š‹rçû
 *
iút
,

1124 
shad”_cÜe_mem_ãtch_®loÿtÜ
 *
mf_®loÿtÜ
,

1125 
shad”_cÜe_ùx
 *
cÜe
,

1126 
İndcŞl_rfu_t
 *
İ”ªd_cŞËùÜ
,

1127 
ScÜebßrd
 *
scÜebßrd
,

1128 cÚ¡ 
shad”_cÜe_cÚfig
 *
cÚfig
,

1129 cÚ¡ 
memÜy_cÚfig
 *
mem_cÚfig
,

1130 
shad”_cÜe_¡©s
 *
¡©s
,

1131 
sid
,

1132 
c
,

1133 
l1_ÿche
* 
Ãw_l1d_ÿche
 );

1134 
	`š™
Ğ
mem_ãtch_š‹rçû
 *
iút
,

1135 
shad”_cÜe_mem_ãtch_®loÿtÜ
 *
mf_®loÿtÜ
,

1136 
shad”_cÜe_ùx
 *
cÜe
,

1137 
İndcŞl_rfu_t
 *
İ”ªd_cŞËùÜ
,

1138 
ScÜebßrd
 *
scÜebßrd
,

1139 cÚ¡ 
shad”_cÜe_cÚfig
 *
cÚfig
,

1140 cÚ¡ 
memÜy_cÚfig
 *
mem_cÚfig
,

1141 
shad”_cÜe_¡©s
 *
¡©s
,

1142 
sid
,

1143 
c
 );

1145 
´Ùeùed
:

1146 
boŞ
 
	`sh¬ed_cyşe
Ğ
w¬p_š¡_t
 &
š¡
, 
mem_¡age_¡®l_ty³
 &
rc_ç
, 
mem_¡age_acûss_ty³
 &
ç_ty³
);

1147 
boŞ
 
	`cÚ¡ªt_cyşe
Ğ
w¬p_š¡_t
 &
š¡
, 
mem_¡age_¡®l_ty³
 &
rc_ç
, 
mem_¡age_acûss_ty³
 &
ç_ty³
);

1148 
boŞ
 
	`‹xtu»_cyşe
Ğ
w¬p_š¡_t
 &
š¡
, 
mem_¡age_¡®l_ty³
 &
rc_ç
, 
mem_¡age_acûss_ty³
 &
ç_ty³
);

1149 
boŞ
 
	`memÜy_cyşe
Ğ
w¬p_š¡_t
 &
š¡
, 
mem_¡age_¡®l_ty³
 &
rc_ç
, 
mem_¡age_acûss_ty³
 &
ç_ty³
);

1151 
vœtu®
 
mem_¡age_¡®l_ty³
 
	`´oûss_ÿche_acûss
Ğ
ÿche_t
* 
ÿche
,

1152 
Ãw_addr_ty³
 
add»ss
,

1153 
w¬p_š¡_t
 &
š¡
,

1154 
¡d
::
li¡
<
ÿche_ev’t
>& 
ev’ts
,

1155 
mem_ãtch
 *
mf
,

1156 
ÿche_»que¡_¡©us
 
¡©us
 );

1157 
mem_¡age_¡®l_ty³
 
	`´oûss_memÜy_acûss_queue
Ğ
ÿche_t
 *
ÿche
, 
w¬p_š¡_t
 &
š¡
 );

1159 cÚ¡ 
memÜy_cÚfig
 *
m_memÜy_cÚfig
;

1160 
şass
 
mem_ãtch_š‹rçû
 *
m_iút
;

1161 
shad”_cÜe_mem_ãtch_®loÿtÜ
 *
m_mf_®loÿtÜ
;

1162 
şass
 
shad”_cÜe_ùx
 *
m_cÜe
;

1163 
m_sid
;

1164 
m_c
;

1166 
‹x_ÿche
 *
m_L1T
;

1167 
»ad_Úly_ÿche
 *
m_L1C
;

1168 
l1_ÿche
 *
m_L1D
;

1169 
¡d
::
m­
<, std::m­<,> > 
m_³ndšg_wr™es
;

1170 
¡d
::
li¡
<
mem_ãtch
*> 
m_»¥Ú£_fifo
;

1171 
İndcŞl_rfu_t
 *
m_İ”ªd_cŞËùÜ
;

1172 
ScÜebßrd
 *
m_scÜebßrd
;

1174 
mem_ãtch
 *
m_Ãxt_glob®
;

1175 
w¬p_š¡_t
 
m_Ãxt_wb
;

1176 
m_wr™eback_¬b
;

1177 
m_num_wr™eback_ş›Ás
;

1179 
mem_¡age_¡®l_ty³
 
m_mem_rc
;

1181 
shad”_cÜe_¡©s
 *
m_¡©s
;

1184 
m_Ï¡_š¡_gpu_sim_cyşe
;

1185 
m_Ï¡_š¡_gpu_tÙ_sim_cyşe
;

1186 
	}
};

1188 
	ep–še_¡age_Çme_t
 {

1189 
	mID_OC_SP
=0,

1190 
	mID_OC_SFU
,

1191 
	mID_OC_MEM
,

1192 
	mOC_EX_SP
,

1193 
	mOC_EX_SFU
,

1194 
	mOC_EX_MEM
,

1195 
	mEX_WB
,

1196 
	mN_PIPELINE_STAGES


1199 cÚ¡ * cÚ¡ 
	gp–še_¡age_Çme_decode
[] = {

1210 
	gshad”_cÜe_cÚfig
 : 
public
 
cÜe_cÚfig


1212 
shad”_cÜe_cÚfig
(){

1213 
p–še_widths_¡ršg
 = 
NULL
;

1216 
š™
()

1218 
	gÁok
 = 
ssÿnf
(
gpgpu_shad”_cÜe_p–še_İt
,"%d:%d",

1219 &
n_th»ad_³r_shad”
,

1220 &
w¬p_size
);

1221 if(
	gÁok
 != 2) {

1222 
´štf
("GPGPU-Sim uArch:ƒrror while…arsing configuration string gpgpu_shader_core_pipeline_opt\n");

1223 
abÜt
();

1226 * 
	gtoks
 = 
Ãw
 [100];

1227 * 
	gtokd
 = 
toks
;

1228 
¡rıy
(
toks
,
p–še_widths_¡ršg
);

1230 
	gtoks
 = 
¡¹ok
(
toks
,",");

1231 
	gi
 = 0; i < 
	gN_PIPELINE_STAGES
; i++) {

1232 
as£¹
(
toks
);

1233 
	gÁok
 = 
ssÿnf
(
toks
,"%d", &
pe_widths
[
i
]);

1234 
as£¹
(
Áok
 == 1);

1235 
	gtoks
 = 
¡¹ok
(
NULL
,",");

1237 
	gd–‘e
[] 
	gtokd
;

1239 ià(
	gn_th»ad_³r_shad”
 > 
	gMAX_THREAD_PER_SM
) {

1240 
´štf
("GPGPU-Sim uArch: Error ** increase MAX_THREAD_PER_SM in‡bstract_hardware_model.h from %uo %u\n",

1241 
MAX_THREAD_PER_SM
, 
n_th»ad_³r_shad”
);

1242 
abÜt
();

1244 
	gmax_w¬ps_³r_shad”
 = 
n_th»ad_³r_shad”
/
w¬p_size
;

1245 
as£¹
Ğ!(
n_th»ad_³r_shad”
 % 
w¬p_size
) );

1246 
	gmax_sfu_Ï‹ncy
 = 512;

1247 
	gmax_¥_Ï‹ncy
 = 32;

1248 
	gm_L1I_cÚfig
.
š™
(
m_L1I_cÚfig
.
m_cÚfig_¡ršg
,
FuncCacheP»ãrNÚe
);

1249 
	gm_L1T_cÚfig
.
š™
(
m_L1T_cÚfig
.
m_cÚfig_¡ršg
,
FuncCacheP»ãrNÚe
);

1250 
	gm_L1C_cÚfig
.
š™
(
m_L1C_cÚfig
.
m_cÚfig_¡ršg
,
FuncCacheP»ãrNÚe
);

1251 
	gm_L1D_cÚfig
.
š™
(
m_L1D_cÚfig
.
m_cÚfig_¡ršg
,
FuncCacheP»ãrNÚe
);

1252 
	ggpgpu_ÿche_‹xl1_lšesize
 = 
m_L1T_cÚfig
.
g‘_lše_sz
();

1253 
	ggpgpu_ÿche_cÚ¡l1_lšesize
 = 
m_L1C_cÚfig
.
g‘_lše_sz
();

1254 
	gm_v®id
 = 
Œue
;

1256 
»g_İtiÚs
(
şass
 
O±iÚP¬£r
 * 
İp
 );

1257 
max_ùa
ĞcÚ¡ 
k”Ãl_šfo_t
 &
k
 ) const;

1258 
num_shad”
(ècÚ¡ {  
n_simt_şu¡”s
*
	gn_simt_cÜes_³r_şu¡”
; }

1259 
sid_to_şu¡”
Ğ
sid
 ) cÚ¡ {  
	gsid
 / 
	gn_simt_cÜes_³r_şu¡”
; }

1260 
sid_to_cid
Ğ
sid
 ) cÚ¡ {  
	gsid
 % 
	gn_simt_cÜes_³r_şu¡”
; }

1261 
cid_to_sid
Ğ
cid
, 
şu¡”_id
 ) cÚ¡ {  clu¡”_id*
	gn_simt_cÜes_³r_şu¡”
 + 
	gcid
; }

1264 *
	ggpgpu_shad”_cÜe_p–še_İt
;

1265 
boŞ
 
	ggpgpu_³rãù_mem
;

1266 
boŞ
 
	ggpgpu_şock_g©ed_»g_fe
;

1267 
boŞ
 
	ggpgpu_şock_g©ed_ÏÃs
;

1268 
div”g’û_suµÜt_t
 
	gmod–
;

1269 
	gn_th»ad_³r_shad”
;

1270 
	gn_»gfe_g©šg_group
;

1271 
	gmax_w¬ps_³r_shad”
;

1272 
	gmax_ùa_³r_cÜe
;

1273 
	gmax_b¬r›rs_³r_ùa
;

1274 * 
	ggpgpu_scheduËr_¡ršg
;

1276 * 
	gp–še_widths_¡ršg
;

1277 
	gpe_widths
[
N_PIPELINE_STAGES
];

1279 
mubË
 
ÿche_cÚfig
 
	gm_L1I_cÚfig
;

1280 
mubË
 
ÿche_cÚfig
 
	gm_L1T_cÚfig
;

1281 
mubË
 
ÿche_cÚfig
 
	gm_L1C_cÚfig
;

1282 
mubË
 
l1d_ÿche_cÚfig
 
	gm_L1D_cÚfig
;

1284 
boŞ
 
	ggmem_sk_L1D
;

1286 
boŞ
 
	ggpgpu_dwf_»g_bªkcÚæiù
;

1288 
	ggpgpu_num_sched_³r_cÜe
;

1289 
	ggpgpu_max_š¢_issue_³r_w¬p
;

1292 
	ggpgpu_İ”ªd_cŞËùÜ_num_un™s_¥
;

1293 
	ggpgpu_İ”ªd_cŞËùÜ_num_un™s_sfu
;

1294 
	ggpgpu_İ”ªd_cŞËùÜ_num_un™s_mem
;

1295 
	ggpgpu_İ”ªd_cŞËùÜ_num_un™s_g’
;

1297 
	ggpgpu_İ”ªd_cŞËùÜ_num_š_pÜts_¥
;

1298 
	ggpgpu_İ”ªd_cŞËùÜ_num_š_pÜts_sfu
;

1299 
	ggpgpu_İ”ªd_cŞËùÜ_num_š_pÜts_mem
;

1300 
	ggpgpu_İ”ªd_cŞËùÜ_num_š_pÜts_g’
;

1302 
	ggpgpu_İ”ªd_cŞËùÜ_num_out_pÜts_¥
;

1303 
	ggpgpu_İ”ªd_cŞËùÜ_num_out_pÜts_sfu
;

1304 
	ggpgpu_İ”ªd_cŞËùÜ_num_out_pÜts_mem
;

1305 
	ggpgpu_İ”ªd_cŞËùÜ_num_out_pÜts_g’
;

1307 
	ggpgpu_num_¥_un™s
;

1308 
	ggpgpu_num_sfu_un™s
;

1309 
	ggpgpu_num_mem_un™s
;

1312 
	ggpgpu_shad”_»gi¡”s
;

1313 
	ggpgpu_w¬pdi¡ro_shad”
;

1314 
	ggpgpu_w¬p_issue_shad”
;

1315 
	ggpgpu_num_»g_bªks
;

1316 
boŞ
 
	ggpgpu_»g_bªk_u£_w¬p_id
;

1317 
boŞ
 
	ggpgpu_loÿl_mem_m­
;

1319 
	gmax_¥_Ï‹ncy
;

1320 
	gmax_sfu_Ï‹ncy
;

1322 
	gn_simt_cÜes_³r_şu¡”
;

1323 
	gn_simt_şu¡”s
;

1324 
	gn_simt_ejeùiÚ_bufãr_size
;

1325 
	gld¡_un™_»¥Ú£_queue_size
;

1327 
	gsimt_cÜe_sim_Üd”
;

1329 
mem2deviû
(
memid
ècÚ¡ {  
	gmemid
 + 
	gn_simt_şu¡”s
; }

1332 
	sshad”_cÜe_¡©s_pod
 {

1334 * 
	mshad”_cÜe_¡©s_pod_¡¬t
[0];

1335 *
	mshad”_cyşes
;

1336 *
	mm_num_sim_š¢
;

1337 *
	mm_num_sim_wš¢
;

1338 *
	mm_Ï¡_num_sim_š¢
;

1339 *
	mm_Ï¡_num_sim_wš¢
;

1340 *
	mm_num_decoded_š¢
;

1341 *
	mm_p–še_duty_cyşe
;

1342 *
	mm_num_FPdecoded_š¢
;

1343 *
	mm_num_INTdecoded_š¢
;

1344 *
	mm_num_¡Üequeued_š¢
;

1345 *
	mm_num_lßdqueued_š¢
;

1346 *
	mm_num_Ÿlu_aûs£s
;

1347 *
	mm_num_å_aûs£s
;

1348 *
	mm_num_imul_aûs£s
;

1349 *
	mm_num_‹x_š¡
;

1350 *
	mm_num_åmul_aûs£s
;

1351 *
	mm_num_idiv_aûs£s
;

1352 *
	mm_num_ådiv_aûs£s
;

1353 *
	mm_num_¥_aûs£s
;

1354 *
	mm_num_sfu_aûs£s
;

1355 *
	mm_num_Œªs_aûs£s
;

1356 *
	mm_num_mem_aûs£s
;

1357 *
	mm_num_¥_comm™‹d
;

1358 *
	mm_num_b_h™s
;

1359 *
	mm_num_b_acûs£s
;

1360 *
	mm_num_sfu_comm™‹d
;

1361 *
	mm_num_mem_comm™‹d
;

1362 *
	mm_»ad_»gfe_aûs£s
;

1363 *
	mm_wr™e_»gfe_aûs£s
;

1364 *
	mm_nÚ_rf_İ”ªds
;

1365 *
	mm_num_imul24_aûs£s
;

1366 *
	mm_num_imul32_aûs£s
;

1367 *
	mm_aùive_¥_ÏÃs
;

1368 *
	mm_aùive_sfu_ÏÃs
;

1369 *
	mm_aùive_fu_ÏÃs
;

1370 *
	mm_aùive_fu_mem_ÏÃs
;

1371 *
	mm_n_div”ge
;

1372 
	mgpgpu_n_lßd_š¢
;

1373 
	mgpgpu_n_¡Üe_š¢
;

1374 
	mgpgpu_n_shmem_š¢
;

1375 
	mgpgpu_n_‹x_š¢
;

1376 
	mgpgpu_n_cÚ¡_š¢
;

1377 
	mgpgpu_n_·¿m_š¢
;

1378 
	mgpgpu_n_shmem_bkcÚæiù
;

1379 
	mgpgpu_n_ÿche_bkcÚæiù
;

1380 
	mgpgpu_n_šŒaw¬p_mshr_m”ge
;

1381 
	mgpgpu_n_cmem_pÜtcÚæiù
;

1382 
	mgpu_¡®l_shd_mem_b»akdown
[
N_MEM_STAGE_ACCESS_TYPE
][
N_MEM_STAGE_STALL_TYPE
];

1383 
	mgpu_»g_bªk_cÚæiù_¡®ls
;

1384 *
	mshad”_cyşe_di¡ro
;

1385 *
	mÏ¡_shad”_cyşe_di¡ro
;

1386 *
	mnum_w¬ps_issuabË
;

1387 
	mgpgpu_n_¡®l_shd_mem
;

1390 
	mgpgpu_n_mem_»ad_loÿl
;

1391 
	mgpgpu_n_mem_wr™e_loÿl
;

1392 
	mgpgpu_n_mem_‹xtu»
;

1393 
	mgpgpu_n_mem_cÚ¡
;

1394 
	mgpgpu_n_mem_»ad_glob®
;

1395 
	mgpgpu_n_mem_wr™e_glob®
;

1396 
	mgpgpu_n_mem_»ad_š¡
;

1398 
	mgpgpu_n_mem_l2_wr™eback
;

1399 
	mgpgpu_n_mem_l1_wr™e_®loÿ‹
;

1400 
	mgpgpu_n_mem_l2_wr™e_®loÿ‹
;

1402 
	mmade_wr™e_mfs
;

1403 
	mmade_»ad_mfs
;

1405 *
	mgpgpu_n_shmem_bªk_acûss
;

1406 *
	mn_simt_to_mem
;

1407 *
	mn_mem_to_simt
;

1410 şas 
	cshad”_cÜe_¡©s
 : 
public
 
shad”_cÜe_¡©s_pod
 {

1411 
public
:

1412 
	$shad”_cÜe_¡©s
ĞcÚ¡ 
shad”_cÜe_cÚfig
 *
cÚfig
 )

1414 
m_cÚfig
 = 
cÚfig
;

1415 
shad”_cÜe_¡©s_pod
 *
pod
 = 
»š‹½»t_ÿ¡
< shad”_cÜe_¡©s_pod * > ( 
this
->
shad”_cÜe_¡©s_pod_¡¬t
 );

1416 
	`mem£t
(
pod
,0,(
shad”_cÜe_¡©s_pod
));

1417 
shad”_cyşes
=(*è
	`ÿÎoc
(
cÚfig
->
	`num_shad”
(),());

1418 
m_num_sim_š¢
 = (*è
	`ÿÎoc
(
cÚfig
->
	`num_shad”
(),());

1419 
m_num_sim_wš¢
 = (*è
	`ÿÎoc
(
cÚfig
->
	`num_shad”
(),());

1420 
m_Ï¡_num_sim_wš¢
 = (*è
	`ÿÎoc
(
cÚfig
->
	`num_shad”
(),());

1421 
m_Ï¡_num_sim_š¢
 = (*è
	`ÿÎoc
(
cÚfig
->
	`num_shad”
(),());

1422 
m_p–še_duty_cyşe
=(*è
	`ÿÎoc
(
cÚfig
->
	`num_shad”
(),());

1423 
m_num_decoded_š¢
 = (*è
	`ÿÎoc
(
cÚfig
->
	`num_shad”
(),());

1424 
m_num_FPdecoded_š¢
 = (*è
	`ÿÎoc
(
cÚfig
->
	`num_shad”
(),());

1425 
m_num_¡Üequeued_š¢
=(*è
	`ÿÎoc
(
cÚfig
->
	`num_shad”
(),());

1426 
m_num_lßdqueued_š¢
=(*è
	`ÿÎoc
(
cÚfig
->
	`num_shad”
(),());

1427 
m_num_INTdecoded_š¢
 = (*è
	`ÿÎoc
(
cÚfig
->
	`num_shad”
(),());

1428 
m_num_Ÿlu_aûs£s
 = (*è
	`ÿÎoc
(
cÚfig
->
	`num_shad”
(),());

1429 
m_num_å_aûs£s
ğ(*è
	`ÿÎoc
(
cÚfig
->
	`num_shad”
(),());

1430 
m_num_‹x_š¡
ğ(*è
	`ÿÎoc
(
cÚfig
->
	`num_shad”
(),());

1431 
m_num_imul_aûs£s
ğ(*è
	`ÿÎoc
(
cÚfig
->
	`num_shad”
(),());

1432 
m_num_imul24_aûs£s
ğ(*è
	`ÿÎoc
(
cÚfig
->
	`num_shad”
(),());

1433 
m_num_imul32_aûs£s
ğ(*è
	`ÿÎoc
(
cÚfig
->
	`num_shad”
(),());

1434 
m_num_åmul_aûs£s
ğ(*è
	`ÿÎoc
(
cÚfig
->
	`num_shad”
(),());

1435 
m_num_idiv_aûs£s
ğ(*è
	`ÿÎoc
(
cÚfig
->
	`num_shad”
(),());

1436 
m_num_ådiv_aûs£s
ğ(*è
	`ÿÎoc
(
cÚfig
->
	`num_shad”
(),());

1437 
m_num_¥_aûs£s
ğ(*è
	`ÿÎoc
(
cÚfig
->
	`num_shad”
(),());

1438 
m_num_sfu_aûs£s
ğ(*è
	`ÿÎoc
(
cÚfig
->
	`num_shad”
(),());

1439 
m_num_Œªs_aûs£s
ğ(*è
	`ÿÎoc
(
cÚfig
->
	`num_shad”
(),());

1440 
m_num_mem_aûs£s
ğ(*è
	`ÿÎoc
(
cÚfig
->
	`num_shad”
(),());

1441 
m_num_¥_comm™‹d
ğ(*è
	`ÿÎoc
(
cÚfig
->
	`num_shad”
(),());

1442 
m_num_b_h™s
=(*è
	`ÿÎoc
(
cÚfig
->
	`num_shad”
(),());

1443 
m_num_b_acûs£s
=(*è
	`ÿÎoc
(
cÚfig
->
	`num_shad”
(),());

1444 
m_aùive_¥_ÏÃs
ğ(*è
	`ÿÎoc
(
cÚfig
->
	`num_shad”
(),());

1445 
m_aùive_sfu_ÏÃs
ğ(*è
	`ÿÎoc
(
cÚfig
->
	`num_shad”
(),());

1446 
m_aùive_fu_ÏÃs
ğ(*è
	`ÿÎoc
(
cÚfig
->
	`num_shad”
(),());

1447 
m_aùive_fu_mem_ÏÃs
ğ(*è
	`ÿÎoc
(
cÚfig
->
	`num_shad”
(),());

1448 
m_num_sfu_comm™‹d
ğ(*è
	`ÿÎoc
(
cÚfig
->
	`num_shad”
(),());

1449 
m_num_mem_comm™‹d
ğ(*è
	`ÿÎoc
(
cÚfig
->
	`num_shad”
(),());

1450 
m_»ad_»gfe_aûs£s
ğ(*è
	`ÿÎoc
(
cÚfig
->
	`num_shad”
(),());

1451 
m_wr™e_»gfe_aûs£s
ğ(*è
	`ÿÎoc
(
cÚfig
->
	`num_shad”
(),());

1452 
m_nÚ_rf_İ”ªds
=(*è
	`ÿÎoc
(
cÚfig
->
	`num_shad”
(),());

1453 
m_n_div”ge
 = (*è
	`ÿÎoc
(
cÚfig
->
	`num_shad”
(),());

1454 
shad”_cyşe_di¡ro
 = (*è
	`ÿÎoc
(
cÚfig
->
w¬p_size
+3, ());

1455 
Ï¡_shad”_cyşe_di¡ro
 = (*è
	`ÿÎoc
(
m_cÚfig
->
w¬p_size
+3, ());

1457 
n_simt_to_mem
 = (*)
	`ÿÎoc
(
cÚfig
->
	`num_shad”
(), ());

1458 
n_mem_to_simt
 = (*)
	`ÿÎoc
(
cÚfig
->
	`num_shad”
(), ());

1460 
m_outgošg_Œaffic_¡©s
 = 
Ãw
 
	`Œaffic_b»akdown
("coretomem");

1461 
m_šcomšg_Œaffic_¡©s
 = 
Ãw
 
	`Œaffic_b»akdown
("memtocore");

1463 
gpgpu_n_shmem_bªk_acûss
 = (*)
	`ÿÎoc
(
cÚfig
->
	`num_shad”
(), ());

1465 
m_shad”_dyÇmic_w¬p_issue_di¡ro
.
	`»size
Ğ
cÚfig
->
	`num_shad”
() );

1466 
m_shad”_w¬p_¦Ù_issue_di¡ro
.
	`»size
Ğ
cÚfig
->
	`num_shad”
() );

1469 ~
	$shad”_cÜe_¡©s
()

1471 
d–‘e
 
m_outgošg_Œaffic_¡©s
;

1472 
d–‘e
 
m_šcomšg_Œaffic_¡©s
;

1473 
	`ä“
(
m_num_sim_š¢
);

1474 
	`ä“
(
m_num_sim_wš¢
);

1475 
	`ä“
(
m_n_div”ge
);

1476 
	`ä“
(
shad”_cyşe_di¡ro
);

1477 
	`ä“
(
Ï¡_shad”_cyşe_di¡ro
);

1478 
	}
}

1480 
	$Ãw_grid
()

1482 
	}
}

1484 
ev’t_w¬p_issued
Ğ
s_id
, 
w¬p_id
, 
num_issued
, 
dyÇmic_w¬p_id
 );

1486 
visu®iz”_´št
Ğ
gzFe
 
visu®iz”_fe
 );

1488 
	$´št
Ğ
FILE
 *
fout
 ) const;

1490 cÚ¡ 
¡d
::
veùÜ
< std::veùÜ<> >& 
	$g‘_dyÇmic_w¬p_issue
() const

1492  
m_shad”_dyÇmic_w¬p_issue_di¡ro
;

1493 
	}
}

1495 cÚ¡ 
	g¡d
::
veùÜ
< 
¡d
::veùÜ<> >& 
	$g‘_w¬p_¦Ù_issue
() const

1497  
m_shad”_w¬p_¦Ù_issue_di¡ro
;

1498 
	}
}

1500 
	g´iv©e
:

1501 cÚ¡ 
shad”_cÜe_cÚfig
 *
m_cÚfig
;

1503 
Œaffic_b»akdown
 *
	gm_outgošg_Œaffic_¡©s
;

1504 
Œaffic_b»akdown
 *
	gm_šcomšg_Œaffic_¡©s
;

1507 
	g¡d
::
veùÜ
< 
¡d
::veùÜ<> > 
m_shad”_dyÇmic_w¬p_issue_di¡ro
;

1508 
	g¡d
::
veùÜ
<> 
m_Ï¡_shad”_dyÇmic_w¬p_issue_di¡ro
;

1509 
	g¡d
::
veùÜ
< 
¡d
::veùÜ<> > 
m_shad”_w¬p_¦Ù_issue_di¡ro
;

1510 
	g¡d
::
veùÜ
<> 
m_Ï¡_shad”_w¬p_¦Ù_issue_di¡ro
;

1512 
ä›nd
 
şass
 
	gpow”_¡©_t
;

1513 
ä›nd
 
şass
 
	gshad”_cÜe_ùx
;

1514 
ä›nd
 
şass
 
	gld¡_un™
;

1515 
ä›nd
 
şass
 
	gsimt_cÜe_şu¡”
;

1516 
ä›nd
 
şass
 
	gscheduËr_un™
;

1517 
ä›nd
 
şass
 
	gTwoLev–ScheduËr
;

1518 
ä›nd
 
şass
 
	gLoo£RoundRobbšScheduËr
;

1521 şas 
	cshad”_cÜe_mem_ãtch_®loÿtÜ
 : 
public
 
mem_ãtch_®loÿtÜ
 {

1522 
public
:

1523 
	$shad”_cÜe_mem_ãtch_®loÿtÜ
Ğ
cÜe_id
, 
şu¡”_id
, cÚ¡ 
memÜy_cÚfig
 *
cÚfig
 )

1525 
m_cÜe_id
 = 
cÜe_id
;

1526 
m_şu¡”_id
 = 
şu¡”_id
;

1527 
m_memÜy_cÚfig
 = 
cÚfig
;

1529 
mem_ãtch
 *
	$®loc
Ğ
Ãw_addr_ty³
 
addr
, 
mem_acûss_ty³
 
ty³
, 
size
, 
boŞ
 
wr
 ) const

1531 
mem_acûss_t
 
	`acûss
Ğ
ty³
, 
addr
, 
size
, 
wr
 );

1532 
mem_ãtch
 *
mf
 = 
Ãw
 
	`mem_ãtch
Ğ
acûss
,

1533 
NULL
,

1534 
wr
?
WRITE_PACKET_SIZE
:
READ_PACKET_SIZE
,

1536 
m_cÜe_id
,

1537 
m_şu¡”_id
,

1538 
m_memÜy_cÚfig
 );

1539  
mf
;

1540 
	}
}

1542 
mem_ãtch
 *
	$®loc
ĞcÚ¡ 
w¬p_š¡_t
 &
š¡
, cÚ¡ 
mem_acûss_t
 &
acûss
 ) const

1544 
w¬p_š¡_t
 
š¡_cİy
 = 
š¡
;

1545 
mem_ãtch
 *
mf
 = 
Ãw
 
	`mem_ãtch
(
acûss
,

1546 &
š¡_cİy
,

1547 
acûss
.
	`is_wr™e
()?
WRITE_PACKET_SIZE
:
READ_PACKET_SIZE
,

1548 
š¡
.
	`w¬p_id
(),

1549 
m_cÜe_id
,

1550 
m_şu¡”_id
,

1551 
m_memÜy_cÚfig
);

1552  
mf
;

1553 
	}
}

1555 
	g´iv©e
:

1556 
m_cÜe_id
;

1557 
	gm_şu¡”_id
;

1558 cÚ¡ 
memÜy_cÚfig
 *
	gm_memÜy_cÚfig
;

1561 şas 
	cshad”_cÜe_ùx
 : 
public
 
cÜe_t
 {

1562 
public
:

1564 
shad”_cÜe_ùx
Ğ
şass
 
gpgpu_sim
 *
gpu
,

1565 
şass
 
simt_cÜe_şu¡”
 *
şu¡”
,

1566 
shad”_id
,

1567 
c_id
,

1568 cÚ¡ 
shad”_cÜe_cÚfig
 *
cÚfig
,

1569 cÚ¡ 
memÜy_cÚfig
 *
mem_cÚfig
,

1570 
shad”_cÜe_¡©s
 *
¡©s
 );

1574 
cyşe
();

1575 
»š™
(
¡¬t_th»ad
, 
’d_th»ad
, 
boŞ
 
»£t_nÙ_com¶‘ed
 );

1576 
issue_block2cÜe
Ğ
şass
 
k”Ãl_šfo_t
 &
k”Ãl
 );

1577 
ÿche_æush
();

1578 
acû±_ãtch_»¥Ú£
Ğ
mem_ãtch
 *
mf
 );

1579 
acû±_ld¡_un™_»¥Ú£
Ğ
şass
 
mem_ãtch
 * 
mf
 );

1580 
brßdÿ¡_b¬r›r_»duùiÚ
(
ùa_id
, 
b¬_id
,
w¬p_£t_t
 
w¬ps
);

1581 
	$£t_k”Ãl
Ğ
k”Ãl_šfo_t
 *
k
 )

1583 
	`as£¹
(
k
);

1584 
m_k”Ãl
=
k
;

1585 
k
->
	`šc_ruÂšg
();

1586 
	`´štf
("GPGPU-Sim uArch: Shad” %d bšdØk”ÃÈ%u \'%s\'\n", 
m_sid
, 
m_k”Ãl
->
	`g‘_uid
(),

1587 
m_k”Ãl
->
	`Çme
().
	`c_¡r
() );

1591 
boŞ
 
	$ãtch_un™_»¥Ú£_bufãr_fuÎ
() const;

1592 
boŞ
 
	$ld¡_un™_»¥Ú£_bufãr_fuÎ
() const;

1593 
	$g‘_nÙ_com¶‘ed
(ècÚ¡ {  
m_nÙ_com¶‘ed
; 
	}
}

1594 
	$g‘_n_aùive_ùa
(ècÚ¡ {  
m_n_aùive_ùa
; 
	}
}

1595 
	$i§ùive
(ècÚ¡ {if(
m_n_aùive_ùa
>0è 1;  0;
	}
}

1596 
k”Ãl_šfo_t
 *
	$g‘_k”Ãl
(è{  
m_k”Ãl
; 
	}
}

1597 
	$g‘_sid
(ècÚ¡ { 
m_sid
;
	}
}

1601 
vœtu®
 
w¬p_ex™
Ğ
w¬p_id
 );

1604 
vœtu®
 
boŞ
 
	$w¬p_wa™šg_©_b¬r›r
Ğ
w¬p_id
 ) const;

1605 
	$g‘_pdom_¡ack_tİ_šfo
Ğ
tid
, *
pc
, *
½c
 ) const;

1609 
	`mem_š¡ruùiÚ_¡©s
(cÚ¡ 
w¬p_š¡_t
 &
š¡
);

1610 
	`deüem’t_©omic_couÁ
Ğ
wid
, 
n
 );

1611 
	$šc_¡Üe_»q
Ğ
w¬p_id
è{ 
m_w¬p
[w¬p_id].
	`šc_¡Üe_»q
(); 
	}
}

1612 
	$dec_š¡_š_p–še
Ğ
w¬p_id
 ) { 
m_w¬p
[w¬p_id].
	`dec_š¡_š_p–še
(); 
	}
}

1613 
¡Üe_ack
Ğ
şass
 
mem_ãtch
 *
mf
 );

1614 
boŞ
 
w¬p_wa™šg_©_mem_b¬r›r
Ğ
w¬p_id
 );

1615 
£t_max_ùa
ĞcÚ¡ 
k”Ãl_šfo_t
 &
k”Ãl
 );

1616 
w¬p_š¡_com¶‘e
(cÚ¡ 
w¬p_š¡_t
 &
š¡
);

1619 
	g¡d
::
li¡
<> 
	$g‘_»gs_wr™‹n
ĞcÚ¡ 
š¡_t
 &
fvt
 ) const;

1620 cÚ¡ 
shad”_cÜe_cÚfig
 *
	$g‘_cÚfig
(ècÚ¡ {  
m_cÚfig
; 
	}
}

1621 
´št_ÿche_¡©s
Ğ
FILE
 *
å
, & 
dl1_acûs£s
, & 
dl1_mis£s
 );

1623 
g‘_ÿche_¡©s
(
ÿche_¡©s
 &
cs
);

1624 
	$g‘_L1I_sub_¡©s
(
ÿche_sub_¡©s
 &
css
) const;

1625 
	$g‘_L1D_sub_¡©s
(
ÿche_sub_¡©s
 &
css
) const;

1626 
	$g‘_L1C_sub_¡©s
(
ÿche_sub_¡©s
 &
css
) const;

1627 
	$g‘_L1T_sub_¡©s
(
ÿche_sub_¡©s
 &
css
) const;

1629 
	$g‘_iút_pow”_¡©s
(&
n_simt_to_mem
, &
n_mem_to_simt
) const;

1632 
	$di¥Ïy_simt_¡©e
(
FILE
 *
fout
, 
mask
 ) const;

1633 
	$di¥Ïy_p–še
Ğ
FILE
 *
fout
, 
´št_mem
, 
mask3b™
 ) const;

1635 
	$šşßd_¡©
(è{
m_¡©s
->
m_num_lßdqueued_š¢
[
m_sid
]++;
	}
}

1636 
	$šc¡Üe_¡©
(è{
m_¡©s
->
m_num_¡Üequeued_š¢
[
m_sid
]++;
	}
}

1637 
	$šcŸlu_¡©
(
aùive_couÁ
,
Ï‹ncy
) {

1638 if(
m_cÚfig
->
gpgpu_şock_g©ed_ÏÃs
==
çl£
){

1639 
m_¡©s
->
m_num_Ÿlu_aûs£s
[
m_sid
]=m_¡©s->m_num_Ÿlu_aûs£s[m_sid]+
aùive_couÁ
*
Ï‹ncy


1640 + 
	`šaùive_ÏÃs_acûs£s_nÚsfu
(
aùive_couÁ
, 
Ï‹ncy
);

1642 
m_¡©s
->
m_num_Ÿlu_aûs£s
[
m_sid
]=m_¡©s->m_num_Ÿlu_aûs£s[m_sid]+
aùive_couÁ
*
Ï‹ncy
;

1644 
	}
}

1645 
	$šùex_¡©
(
aùive_couÁ
,
Ï‹ncy
){

1646 
m_¡©s
->
m_num_‹x_š¡
[
m_sid
]=m_¡©s->m_num_‹x_š¡[m_sid]+
aùive_couÁ
*
Ï‹ncy
;

1647 
	}
}

1648 
	$šcimul_¡©
(
aùive_couÁ
,
Ï‹ncy
) {

1649 if(
m_cÚfig
->
gpgpu_şock_g©ed_ÏÃs
==
çl£
){

1650 
m_¡©s
->
m_num_imul_aûs£s
[
m_sid
]=m_¡©s->m_num_imul_aûs£s[m_sid]+
aùive_couÁ
*
Ï‹ncy


1651 + 
	`šaùive_ÏÃs_acûs£s_nÚsfu
(
aùive_couÁ
, 
Ï‹ncy
);

1653 
m_¡©s
->
m_num_imul_aûs£s
[
m_sid
]=m_¡©s->m_num_imul_aûs£s[m_sid]+
aùive_couÁ
*
Ï‹ncy
;

1655 
	}
}

1656 
	$šcimul24_¡©
(
aùive_couÁ
,
Ï‹ncy
) {

1657 if(
m_cÚfig
->
gpgpu_şock_g©ed_ÏÃs
==
çl£
){

1658 
m_¡©s
->
m_num_imul24_aûs£s
[
m_sid
]=m_¡©s->m_num_imul24_aûs£s[m_sid]+
aùive_couÁ
*
Ï‹ncy


1659 + 
	`šaùive_ÏÃs_acûs£s_nÚsfu
(
aùive_couÁ
, 
Ï‹ncy
);

1661 
m_¡©s
->
m_num_imul24_aûs£s
[
m_sid
]=m_¡©s->m_num_imul24_aûs£s[m_sid]+
aùive_couÁ
*
Ï‹ncy
;

1663 
	}
}

1664 
	$šcimul32_¡©
(
aùive_couÁ
,
Ï‹ncy
) {

1665 if(
m_cÚfig
->
gpgpu_şock_g©ed_ÏÃs
==
çl£
){

1666 
m_¡©s
->
m_num_imul32_aûs£s
[
m_sid
]=m_¡©s->m_num_imul32_aûs£s[m_sid]+
aùive_couÁ
*
Ï‹ncy


1667 + 
	`šaùive_ÏÃs_acûs£s_sfu
(
aùive_couÁ
, 
Ï‹ncy
);

1669 
m_¡©s
->
m_num_imul32_aûs£s
[
m_sid
]=m_¡©s->m_num_imul32_aûs£s[m_sid]+
aùive_couÁ
*
Ï‹ncy
;

1672 
	}
}

1673 
	$šcidiv_¡©
(
aùive_couÁ
,
Ï‹ncy
) {

1674 if(
m_cÚfig
->
gpgpu_şock_g©ed_ÏÃs
==
çl£
){

1675 
m_¡©s
->
m_num_idiv_aûs£s
[
m_sid
]=m_¡©s->m_num_idiv_aûs£s[m_sid]+
aùive_couÁ
*
Ï‹ncy


1676 + 
	`šaùive_ÏÃs_acûs£s_sfu
(
aùive_couÁ
, 
Ï‹ncy
);

1678 
m_¡©s
->
m_num_idiv_aûs£s
[
m_sid
]=m_¡©s->m_num_idiv_aûs£s[m_sid]+
aùive_couÁ
*
Ï‹ncy
;

1680 
	}
}

1681 
	$šcå®u_¡©
(
aùive_couÁ
,
Ï‹ncy
) {

1682 if(
m_cÚfig
->
gpgpu_şock_g©ed_ÏÃs
==
çl£
){

1683 
m_¡©s
->
m_num_å_aûs£s
[
m_sid
]=m_¡©s->m_num_å_aûs£s[m_sid]+
aùive_couÁ
*
Ï‹ncy


1684 + 
	`šaùive_ÏÃs_acûs£s_nÚsfu
(
aùive_couÁ
, 
Ï‹ncy
);

1686 
m_¡©s
->
m_num_å_aûs£s
[
m_sid
]=m_¡©s->m_num_å_aûs£s[m_sid]+
aùive_couÁ
*
Ï‹ncy
;

1688 
	}
}

1689 
	$šcåmul_¡©
(
aùive_couÁ
,
Ï‹ncy
) {

1691 if(
m_cÚfig
->
gpgpu_şock_g©ed_ÏÃs
==
çl£
){

1692 
m_¡©s
->
m_num_åmul_aûs£s
[
m_sid
]=m_¡©s->m_num_åmul_aûs£s[m_sid]+
aùive_couÁ
*
Ï‹ncy


1693 + 
	`šaùive_ÏÃs_acûs£s_nÚsfu
(
aùive_couÁ
, 
Ï‹ncy
);

1695 
m_¡©s
->
m_num_åmul_aûs£s
[
m_sid
]=m_¡©s->m_num_åmul_aûs£s[m_sid]+
aùive_couÁ
*
Ï‹ncy
;

1697 
	}
}

1698 
	$šcådiv_¡©
(
aùive_couÁ
,
Ï‹ncy
) {

1699 if(
m_cÚfig
->
gpgpu_şock_g©ed_ÏÃs
==
çl£
){

1700 
m_¡©s
->
m_num_ådiv_aûs£s
[
m_sid
]=m_¡©s->m_num_ådiv_aûs£s[m_sid]+
aùive_couÁ
*
Ï‹ncy


1701 + 
	`šaùive_ÏÃs_acûs£s_sfu
(
aùive_couÁ
, 
Ï‹ncy
);

1703 
m_¡©s
->
m_num_ådiv_aûs£s
[
m_sid
]=m_¡©s->m_num_ådiv_aûs£s[m_sid]+
aùive_couÁ
*
Ï‹ncy
;

1705 
	}
}

1706 
	$šù¿ns_¡©
(
aùive_couÁ
,
Ï‹ncy
) {

1707 if(
m_cÚfig
->
gpgpu_şock_g©ed_ÏÃs
==
çl£
){

1708 
m_¡©s
->
m_num_Œªs_aûs£s
[
m_sid
]=m_¡©s->m_num_Œªs_aûs£s[m_sid]+
aùive_couÁ
*
Ï‹ncy


1709 + 
	`šaùive_ÏÃs_acûs£s_sfu
(
aùive_couÁ
, 
Ï‹ncy
);

1711 
m_¡©s
->
m_num_Œªs_aûs£s
[
m_sid
]=m_¡©s->m_num_Œªs_aûs£s[m_sid]+
aùive_couÁ
*
Ï‹ncy
;

1713 
	}
}

1715 
	$šcsfu_¡©
(
aùive_couÁ
,
Ï‹ncy
è{
m_¡©s
->
m_num_sfu_aûs£s
[
m_sid
]=m_¡©s->m_num_sfu_aûs£s[m_sid]+aùive_couÁ*Ï‹ncy;
	}
}

1716 
	$šc¥_¡©
(
aùive_couÁ
,
Ï‹ncy
è{
m_¡©s
->
m_num_¥_aûs£s
[
m_sid
]=m_¡©s->m_num_¥_aûs£s[m_sid]+aùive_couÁ*Ï‹ncy;
	}
}

1717 
	$šcmem_¡©
(
aùive_couÁ
,
Ï‹ncy
) {

1718 if(
m_cÚfig
->
gpgpu_şock_g©ed_ÏÃs
==
çl£
){

1719 
m_¡©s
->
m_num_mem_aûs£s
[
m_sid
]=m_¡©s->m_num_mem_aûs£s[m_sid]+
aùive_couÁ
*
Ï‹ncy


1720 + 
	`šaùive_ÏÃs_acûs£s_nÚsfu
(
aùive_couÁ
, 
Ï‹ncy
);

1722 
m_¡©s
->
m_num_mem_aûs£s
[
m_sid
]=m_¡©s->m_num_mem_aûs£s[m_sid]+
aùive_couÁ
*
Ï‹ncy
;

1724 
	}
}

1725 
šûxec¡©
(
w¬p_š¡_t
 *&
š¡
);

1727 
	$šüegfe_»ads
(
aùive_couÁ
è{
m_¡©s
->
m_»ad_»gfe_aûs£s
[
m_sid
]=m_¡©s->m_»ad_»gfe_aûs£s[m_sid]+aùive_couÁ;
	}
}

1728 
	$šüegfe_wr™es
(
aùive_couÁ
){
m_¡©s
->
m_wr™e_»gfe_aûs£s
[
m_sid
]=m_¡©s->m_wr™e_»gfe_aûs£s[m_sid]+aùive_couÁ;
	}
}

1729 
	$šúÚ_rf_İ”ªds
(
aùive_couÁ
){
m_¡©s
->
m_nÚ_rf_İ”ªds
[
m_sid
]=m_¡©s->m_nÚ_rf_İ”ªds[m_sid]+aùive_couÁ;
	}
}

1731 
	$šc¥aùiv–ªes_¡©
(
aùive_couÁ
è{
m_¡©s
->
m_aùive_¥_ÏÃs
[
m_sid
]=m_¡©s->m_aùive_¥_ÏÃs[m_sid]+aùive_couÁ;
	}
}

1732 
	$šcsfuaùiv–ªes_¡©
(
aùive_couÁ
è{
m_¡©s
->
m_aùive_sfu_ÏÃs
[
m_sid
]=m_¡©s->m_aùive_sfu_ÏÃs[m_sid]+aùive_couÁ;
	}
}

1733 
	$šcfuaùiv–ªes_¡©
(
aùive_couÁ
è{
m_¡©s
->
m_aùive_fu_ÏÃs
[
m_sid
]=m_¡©s->m_aùive_fu_ÏÃs[m_sid]+aùive_couÁ;
	}
}

1734 
	$šcfumemaùiv–ªes_¡©
(
aùive_couÁ
è{
m_¡©s
->
m_aùive_fu_mem_ÏÃs
[
m_sid
]=m_¡©s->m_aùive_fu_mem_ÏÃs[m_sid]+aùive_couÁ;
	}
}

1736 
	$šc_simt_to_mem
(
n_æ™s
){ 
m_¡©s
->
n_simt_to_mem
[
m_sid
] +ğn_æ™s; 
	}
}

1737 
boŞ
 
check_if_nÚ_»Ëa£d_»duùiÚ_b¬r›r
(
w¬p_š¡_t
 &
š¡
);

1739 
	g´iv©e
:

1740 
	$šaùive_ÏÃs_acûs£s_sfu
(
aùive_couÁ
,
Ï‹ncy
){

1741  ( ((32-
aùive_couÁ
)>>1)*
Ï‹ncy
) + ( ((32-active_count)>>3)*latency) + ( ((32-active_count)>>3)*latency);

1742 
	}
}

1743 
	$šaùive_ÏÃs_acûs£s_nÚsfu
(
aùive_couÁ
,
Ï‹ncy
){

1744  ( ((32-
aùive_couÁ
)>>1)*
Ï‹ncy
);

1745 
	}
}

1747 
‹¡_»s_bus
(
Ï‹ncy
);

1748 
š™_w¬ps
(
ùa_id
, 
¡¬t_th»ad
, 
’d_th»ad
);

1749 
vœtu®
 
checkExecutiÚStusAndUpd©e
(
w¬p_š¡_t
 &
š¡
, 
t
, 
tid
);

1750 
add»ss_ty³
 
	$Ãxt_pc
Ğ
tid
 ) const;

1751 
	`ãtch
();

1752 
	`»gi¡”_ùa_th»ad_ex™
Ğ
ùa_num
 );

1754 
	`decode
();

1756 
	`issue
();

1757 
ä›nd
 
şass
 
scheduËr_un™
;

1758 
ä›nd
 
şass
 
TwoLev–ScheduËr
;

1759 
ä›nd
 
şass
 
Loo£RoundRobbšScheduËr
;

1760 
	`issue_w¬p
Ğ
»gi¡”_£t
& 
w¬p
, cÚ¡ 
w¬p_š¡_t
 *
pI
, cÚ¡ 
aùive_mask_t
 &
aùive_mask
, 
w¬p_id
 );

1761 
	`func_exec_š¡
Ğ
w¬p_š¡_t
 &
š¡
 );

1764 
	`Œª¦©e_loÿl_memaddr
Ğ
add»ss_ty³
 
loÿÏddr
, 
tid
, 
num_shad”
, 
d©asize
, 
Ãw_addr_ty³
* 
Œª¦©ed_addrs
 );

1766 
	`»ad_İ”ªds
();

1768 
	`execu‹
();

1770 
	`wr™eback
();

1773 
	$dump_w¬p_¡©e
Ğ
FILE
 *
fout
 ) const;

1774 
	$´št_¡age
(
¡age
, 
FILE
 *
fout
) const;

1775 
m_Ï¡_š¡_gpu_sim_cyşe
;

1776 
m_Ï¡_š¡_gpu_tÙ_sim_cyşe
;

1779 
m_sid
;

1780 
m_c
;

1781 cÚ¡ 
shad”_cÜe_cÚfig
 *
m_cÚfig
;

1782 cÚ¡ 
memÜy_cÚfig
 *
m_memÜy_cÚfig
;

1783 
şass
 
simt_cÜe_şu¡”
 *
m_şu¡”
;

1786 
shad”_cÜe_¡©s
 *
m_¡©s
;

1789 
m_n_aùive_ùa
;

1790 
m_ùa_¡©us
[
MAX_CTA_PER_SHADER
];

1791 
m_nÙ_com¶‘ed
;

1792 
¡d
::
b™£t
<
MAX_THREAD_PER_SM
> 
m_aùive_th»ads
;

1795 
th»ad_ùx_t
 *
m_th»adS‹
;

1798 
mem_ãtch_š‹rçû
 *
m_iút
;

1799 
shad”_cÜe_mem_ãtch_®loÿtÜ
 *
m_mem_ãtch_®loÿtÜ
;

1802 
»ad_Úly_ÿche
 *
m_L1I
;

1803 
m_Ï¡_w¬p_ãtched
;

1806 
¡d
::
veùÜ
<
shd_w¬p_t
> 
m_w¬p
;

1807 
b¬r›r_£t_t
 
m_b¬r›rs
;

1808 
iãtch_bufãr_t
 
m_š¡_ãtch_bufãr
;

1809 
¡d
::
veùÜ
<
»gi¡”_£t
> 
m_p–še_»g
;

1810 
ScÜebßrd
 *
m_scÜebßrd
;

1811 
İndcŞl_rfu_t
 
m_İ”ªd_cŞËùÜ
;

1814 
¡d
::
veùÜ
<
scheduËr_un™
*> 
scheduËrs
;

1817 
m_num_funùiÚ_un™s
;

1818 
¡d
::
veùÜ
<
p–še_¡age_Çme_t
> 
m_di¥©ch_pÜt
;

1819 
¡d
::
veùÜ
<
p–še_¡age_Çme_t
> 
m_issue_pÜt
;

1820 
¡d
::
veùÜ
<
simd_funùiÚ_un™
*> 
m_fu
;

1821 
ld¡_un™
 *
m_ld¡_un™
;

1822 cÚ¡ 
MAX_ALU_LATENCY
 = 512;

1823 
num_»suÉ_bus
;

1824 
¡d
::
veùÜ
< std::
b™£t
<
MAX_ALU_LATENCY
>* > 
m_»suÉ_bus
;

1827 
k”Ãl_max_ùa_³r_shad”
;

1828 
k”Ãl_·dded_th»ads_³r_ùa
;

1833 
m_dyÇmic_w¬p_id
;

1834 
	}
};

1836 şas 
	csimt_cÜe_şu¡”
 {

1837 
	mpublic
:

1838 
simt_cÜe_şu¡”
Ğ
şass
 
gpgpu_sim
 *
gpu
,

1839 
şu¡”_id
,

1840 cÚ¡ 
shad”_cÜe_cÚfig
 *
cÚfig
,

1841 cÚ¡ 
memÜy_cÚfig
 *
mem_cÚfig
,

1842 
shad”_cÜe_¡©s
 *
¡©s
,

1843 
memÜy_¡©s_t
 *
m¡©s
 );

1845 
cÜe_cyşe
();

1846 
iút_cyşe
();

1848 
»š™
();

1849 
issue_block2cÜe
();

1850 
ÿche_æush
();

1851 
boŞ
 
iút_šjeùiÚ_bufãr_fuÎ
(
size
, boŞ 
wr™e
);

1852 
iút_šjeù_»que¡_·ck‘
(
şass
 
mem_ãtch
 *
mf
);

1855 
boŞ
 
	$»¥Ú£_queue_fuÎ
() {

1856  ( 
m_»¥Ú£_fifo
.
	`size
(è>ğ
m_cÚfig
->
n_simt_ejeùiÚ_bufãr_size
 );

1858 
	$push_»¥Ú£_fifo
(
şass
 
mem_ãtch
 *
mf
) {

1859 
m_»¥Ú£_fifo
.
	`push_back
(
mf
);

1860 
	}
}

1862 
	$g‘_pdom_¡ack_tİ_šfo
Ğ
sid
, 
tid
, *
pc
, *
½c
 ) const;

1863 
	`max_ùa
ĞcÚ¡ 
k”Ãl_šfo_t
 &
k”Ãl
 );

1864 
	$g‘_nÙ_com¶‘ed
() const;

1865 
	$´št_nÙ_com¶‘ed
Ğ
FILE
 *
å
 ) const;

1866 
	$g‘_n_aùive_ùa
() const;

1867 
	$g‘_n_aùive_sms
() const;

1868 
gpgpu_sim
 *
	$g‘_gpu
(è{  
m_gpu
; 
	}
}

1870 
di¥Ïy_p–še
Ğ
sid
, 
FILE
 *
fout
, 
´št_mem
, 
mask
 );

1871 
	$´št_ÿche_¡©s
Ğ
FILE
 *
å
, & 
dl1_acûs£s
, & 
dl1_mis£s
 ) const;

1873 
	$g‘_ÿche_¡©s
(
ÿche_¡©s
 &
cs
) const;

1874 
	$g‘_L1I_sub_¡©s
(
ÿche_sub_¡©s
 &
css
) const;

1875 
	$g‘_L1D_sub_¡©s
(
ÿche_sub_¡©s
 &
css
) const;

1876 
	$g‘_L1C_sub_¡©s
(
ÿche_sub_¡©s
 &
css
) const;

1877 
	$g‘_L1T_sub_¡©s
(
ÿche_sub_¡©s
 &
css
) const;

1879 
	$g‘_iút_¡©s
(&
n_simt_to_mem
, &
n_mem_to_simt
) const;

1881 
´iv©e
:

1882 
m_şu¡”_id
;

1883 
gpgpu_sim
 *
m_gpu
;

1884 cÚ¡ 
shad”_cÜe_cÚfig
 *
m_cÚfig
;

1885 
shad”_cÜe_¡©s
 *
m_¡©s
;

1886 
memÜy_¡©s_t
 *
m_memÜy_¡©s
;

1887 
shad”_cÜe_ùx
 **
m_cÜe
;

1889 
m_ùa_issue_Ãxt_cÜe
;

1890 
¡d
::
li¡
<> 
m_cÜe_sim_Üd”
;

1891 
¡d
::
li¡
<
mem_ãtch
*> 
m_»¥Ú£_fifo
;

1892 
	}
};

1894 şas 
	cshad”_memÜy_š‹rçû
 : 
public
 
mem_ãtch_š‹rçû
 {

1895 
public
:

1896 
	$shad”_memÜy_š‹rçû
Ğ
shad”_cÜe_ùx
 *
cÜe
, 
simt_cÜe_şu¡”
 *
şu¡”
 ) { 
m_cÜe
=cÜe; 
m_şu¡”
=cluster; }

1897 
vœtu®
 
boŞ
 
	$fuÎ
Ğ
size
, 
boŞ
 
wr™e
 ) const

1899  
m_şu¡”
->
	`iút_šjeùiÚ_bufãr_fuÎ
(
size
,
wr™e
);

1900 
	}
}

1901 
vœtu®
 
	$push
(
mem_ãtch
 *
mf
)

1903 
m_cÜe
->
	`šc_simt_to_mem
(
mf
->
	`g‘_num_æ™s
(
Œue
));

1904 
m_şu¡”
->
	`iút_šjeù_»que¡_·ck‘
(
mf
);

1905 
	}
}

1906 
	g´iv©e
:

1907 
shad”_cÜe_ùx
 *
m_cÜe
;

1908 
simt_cÜe_şu¡”
 *
	gm_şu¡”
;

1911 şas 
	c³rãù_memÜy_š‹rçû
 : 
public
 
mem_ãtch_š‹rçû
 {

1912 
public
:

1913 
	$³rãù_memÜy_š‹rçû
Ğ
shad”_cÜe_ùx
 *
cÜe
, 
simt_cÜe_şu¡”
 *
şu¡”
 ) { 
m_cÜe
=cÜe; 
m_şu¡”
=cluster; }

1914 
vœtu®
 
boŞ
 
	$fuÎ
Ğ
size
, 
boŞ
 
wr™e
) const

1916  
m_şu¡”
->
	`»¥Ú£_queue_fuÎ
();

1917 
	}
}

1918 
vœtu®
 
	$push
(
mem_ãtch
 *
mf
)

1920 iàĞ
mf
 && mf->
	`i§tomic
() )

1921 
mf
->
	`do_©omic
();

1922 
m_cÜe
->
	`šc_simt_to_mem
(
mf
->
	`g‘_num_æ™s
(
Œue
));

1923 
m_şu¡”
->
	`push_»¥Ú£_fifo
(
mf
);

1924 
	}
}

1925 
	g´iv©e
:

1926 
shad”_cÜe_ùx
 *
m_cÜe
;

1927 
simt_cÜe_şu¡”
 *
	gm_şu¡”
;

1931 
šlše
 
	gscheduËr_un™
::
	$g‘_sid
(ècÚ¡ {  
m_shad”
->
	`g‘_sid
(); 
	}
}

	@../gpgpusim_entrypoint.h

28 #iâdeà
GPGPUSIM_ENTRYPOINT_H_INCLUDED


29 
	#GPGPUSIM_ENTRYPOINT_H_INCLUDED


	)

31 
	~"ab¡¿ù_h¬dw¬e_mod–.h
"

33 
	~<time.h
>

34 
time_t
 
g_simuÏtiÚ_¡¬‰ime
;

38 
şass
 
gpgpu_sim
 *
gpgpu_±x_sim_š™_³rf
();

39 
¡¬t_sim_th»ad
(
­i
);

41 
gpgpu_İ’ş_±x_sim_maš_³rf
Ğ
k”Ãl_šfo_t
 *
grid
 );

42 
gpgpu_İ’ş_±x_sim_maš_func
Ğ
k”Ãl_šfo_t
 *
grid
 );

	@../intersim2/globals.hpp

28 #iâdeà
_GLOBALS_HPP_


29 
	#_GLOBALS_HPP_


	)

30 
	~<¡ršg
>

31 
	~<veùÜ
>

32 
	~<io¡»am
>

36 
G‘SimTime
();

38 
şass
 
	gSts
;

39 
Sts
 * 
G‘Sts
(cÚ¡ 
¡d
::
¡ršg
 & 
Çme
);

41 
şass
 
	gIÁ”cÚÃùIÁ”çû
;

42 
IÁ”cÚÃùIÁ”çû
 *
g_iút_š‹rçû
;

44 
boŞ
 
gPrštAùiv™y
;

46 
gK
;

47 
gN
;

48 
gC
;

50 
gNodes
;

52 
boŞ
 
gT¿û
;

54 
¡d
::
o¡»am
 * 
gW©chOut
;

	@../intersim2/interconnect_interface.hpp

28 #iâdeà
_INTERCONNECT_INTERFACE_HPP_


29 
	#_INTERCONNECT_INTERFACE_HPP_


	)

31 
	~<veùÜ
>

32 
	~<queue
>

33 
	~<io¡»am
>

34 
	~<m­
>

35 
usšg
 
Çme¥aû
 
	g¡d
;

39 
şass
 
	gFl™
;

40 
şass
 
	gGPUT¿fficMªag”
;

41 
şass
 
	gIÁ”simCÚfig
;

42 
şass
 
	gN‘wÜk
;

43 
şass
 
	gSts
;

47 şas 
	cIÁ”cÚÃùIÁ”çû
 {

48 
	mpublic
:

49 
IÁ”cÚÃùIÁ”çû
();

50 
	mvœtu®
 ~
IÁ”cÚÃùIÁ”çû
();

51 
IÁ”cÚÃùIÁ”çû
* 
New
(cÚ¡ * cÚ¡ 
cÚfig_fe
);

52 
vœtu®
 
C»©eIÁ”cÚÃù
(
n_shad”
, 
n_mem
);

55 
vœtu®
 
In™
();

56 
vœtu®
 
Push
(
šput_deviûID
, 
ouut_deviûID
, * 
d©a
, 
size
);

57 
vœtu®
 * 
Pİ
(
ouput_deviûID
);

58 
vœtu®
 
Advªû
();

59 
vœtu®
 
boŞ
 
	$Busy
() const;

60 
vœtu®
 
boŞ
 
	$HasBufãr
(
deviûID
, 
size
) const;

61 
vœtu®
 
	$Di¥ÏySts
() const;

62 
vœtu®
 
	$Di¥ÏyOv”®lSts
() const;

63 
	$G‘Fl™Size
() const;

65 
vœtu®
 
	$Di¥ÏyS‹
(
FILE
* 
å
) const;

68 
	`Wr™eOutBufãr
Ğ
subÃt
, 
ouut
, 
Fl™
* 
æ™
 );

69 
	`T¿nsãr2Bound¬yBufãr
(
subÃt
, 
ouut
);

71 
	$G‘IútTime
() const;

73 
Sts
* 
	$G‘IútSts
(cÚ¡ 
¡ršg
 & 
Çme
) const;

75 
Fl™
* 
	`G‘EjeùedFl™
(
subÃt
, 
node
);

77 
´Ùeùed
:

79 şas 
	c_Bound¬yBufãrI‹m
 {

80 
public
:

81 
	`_Bound¬yBufãrI‹m
():
	`_·ck‘_n
(0) {}

82 
šlše
 
	`Size
(ècÚ¡ {  
_bufãr
.
	`size
(); }

83 
šlše
 
boŞ
 
	`HasPack‘
(ècÚ¡ {  
_·ck‘_n
; }

84 * 
	`PİPack‘
();

85 * 
	`TİPack‘
() const;

86 
	`PushFl™D©a
(* 
d©a
,
boŞ
 
is_
);

88 
´iv©e
:

89 
queue
<*> 
_bufãr
;

90 
queue
<
boŞ
> 
__æag
;

91 
_·ck‘_n
;

93 
queue
<
	tFl™
*> 
	t_EjeùiÚBufãrI‹m
;

95 
	`_C»©eBufãr
( );

96 
	`_C»©eNodeM­
(
n_shad”
, 
n_mem
, 
n_node
, 
u£_m­
);

97 
	`_Di¥ÏyM­
(
dim
,
couÁ
);

100 
veùÜ
<veùÜ<veùÜ<
_Bound¬yBufãrI‹m
> > > 
_bound¬y_bufãr
;

101 
_bound¬y_bufãr_ÿ·c™y
;

103 
veùÜ
<veùÜ<veùÜ<
_EjeùiÚBufãrI‹m
> > > 
_ejeùiÚ_bufãr
;

105 
veùÜ
<veùÜ<
queue
<
Fl™
* > > > 
_ejeùed_æ™_queue
;

107 
_ejeùiÚ_bufãr_ÿ·c™y
;

108 
_šput_bufãr_ÿ·c™y
;

110 
veùÜ
<veùÜ<> > 
_round_robš_tuº
;

112 
GPUT¿fficMªag”
* 
_Œaffic_mªag”
;

113 
_æ™_size
;

114 
IÁ”simCÚfig
* 
_iút_cÚfig
;

115 
_n_shad”
, 
_n_mem
;

116 
veùÜ
<
N‘wÜk
 *> 
_Ãt
;

117 
_vcs
;

118 
_subÃts
;

123 
m­
<, > 
_node_m­
;

126 
m­
<, > 
_»v”£_node_m­
;

128 
	}
};

	@../option_parser.h

28 #´agm¨
Úû


30 
	~<¡dio.h
>

31 
	~<¡dlib.h
>

35 
şass
 
	tO±iÚP¬£r
 *
	tİtiÚ_·r£r_t
;

38 
	eİtiÚ_dty³
 {

39 
	mOPT_INT32
,

40 
	mOPT_UINT32
,

41 
	mOPT_INT64
,

42 
	mOPT_UINT64
,

43 
	mOPT_BOOL
,

44 
	mOPT_FLOAT
,

45 
	mOPT_DOUBLE
,

46 
	mOPT_CHAR
,

47 
	mOPT_CSTR


51 
İtiÚ_·r£r_t
 
İtiÚ_·r£r_ü—‹
();

52 
İtiÚ_·r£r_de¡roy
(
İtiÚ_·r£r_t
 
İp
);

55 
İtiÚ_·r£r_»gi¡”
(
İtiÚ_·r£r_t
 
İp
,

56 cÚ¡ *
Çme
,

57 
İtiÚ_dty³
 
ty³
,

58 *
v¬ŸbË
,

59 cÚ¡ *
desc
,

60 cÚ¡ *
deçuÉv®ue
);

63 
İtiÚ_·r£r_cmdlše
(
İtiÚ_·r£r_t
 
İp
,

64 
¬gc
, cÚ¡ *
¬gv
[]);

69 
İtiÚ_·r£r_cfgfe
(
İtiÚ_·r£r_t
 
İp
,

70 cÚ¡ *
f’ame
);

73 
İtiÚ_·r£r_d–im™ed_¡ršg
(
İtiÚ_·r£r_t
 
İp
,

74 cÚ¡ *
šput¡ršg
,

75 cÚ¡ *
d–im™”s
);

77 
İtiÚ_·r£r_´št
(
İtiÚ_·r£r_t
 
İp
,

78 
FILE
 *
fout
);

	@../statwrapper.h

1 #iâdeà
STAT_WRAPER_H


2 
	#STAT_WRAPER_H


	)

4 
şass
 
Sts
* 
StC»©e
 (cÚ¡ * 
Çme
, 
bš_size
, 
num_bšs
) ;

5 
StCË¬
(* 
¡
);

6 
StAddSam¶e
 (* 
¡
, 
v®
);

7 
StAv”age
(* 
¡
) ;

8 
StMax
(* 
¡
) ;

9 
StMš
(* 
¡
) ;

10 
StDi¥
 (* 
¡
);

	@../tr1_hash_map.h

28 #´agm¨
Úû


31 #ifdeà
__ılu¥lus


34 #ià 
defšed
Ğ
__GNUC__
 ) 
ªd
 
nÙ
 defšedĞ
_GLIBCXX_DEBUG
 )

35 #ià
__GNUC__
 >ğ4 && 
__GNUC_MINOR__
 >= 3

36 
	~<unÜd”ed_m­
>

37 
	#Œ1_hash_m­
 
¡d
::
unÜd”ed_m­


	)

38 
	#Œ1_hash_m­_ism­
 0

	)

40 
	~<m­
>

41 
	#Œ1_hash_m­
 
¡d
::
m­


	)

42 
	#Œ1_hash_m­_ism­
 1

	)

45 
	~<m­
>

46 
	#Œ1_hash_m­
 
¡d
::
m­


	)

47 
	#Œ1_hash_m­_ism­
 1

	)

	@../trace.h

31 #iâdeà
__TRACE_H__


32 
	#__TRACE_H__


	)

34 
gpu_sim_cyşe
;

35 
gpu_tÙ_sim_cyşe
;

37 
Çme¥aû
 
	gT¿û
 {

39 
	#TS_TUP_BEGIN
(
X
è
	eX
 {

	)

40 
	#TS_TUP
(
X
è
	)
X

41 
	#TS_TUP_END
(
X
è};

	)

42 
	~"Œaû_¡»ams.tup
"

43 #undeà
TS_TUP_BEGIN


44 #undeà
TS_TUP


45 #undeà
TS_TUP_END


47 
boŞ
 
’abËd
;

48 
§m¶šg_cÜe
;

49 
§m¶šg_memÜy_·¹™iÚ
;

50 cÚ¡ * 
Œaû_¡»ams_¡r
[];

51 
boŞ
 
Œaû_¡»ams_’abËd
[
NUM_TRACE_STREAMS
];

52 cÚ¡ * 
cÚfig_¡r
;

54 
š™
();

59 #ià
TRACING_ON


61 
	#SIM_PRINT_STR
 "GPGPU-Sim Cyş%Îu: % - "

	)

62 
	#DTRACE
(
x
è((
T¿û
::
Œaû_¡»ams_’abËd
[T¿û::x]è&& T¿û::
’abËd
)

	)

63 
	#DPRINTF
(
x
, ...) do {\

64 ià(
	`DTRACE
(
x
)) {\

65 
	`´štf
Ğ
SIM_PRINT_STR
,\

66 
gpu_sim_cyşe
 + 
gpu_tÙ_sim_cyşe
,\

67 
T¿û
::
Œaû_¡»ams_¡r
[T¿û::
x
] );\

68 
	`´štf
(
__VA_ARGS__
);\

70 } 0)

	)

75 
	#DTRACE
(
x
è(
çl£
)

	)

76 
	#DPRINTF
(
x
, ...èdØ{} 0)

	)

	@/usr/include/assert.h

22 #ifdef 
_ASSERT_H


24 #undeà
_ASSERT_H


25 #undeà
as£¹


26 #undeà
__ASSERT_VOID_CAST


28 #ifdef 
__USE_GNU


29 #undeà
as£¹_³¼Ü


34 
	#_ASSERT_H
 1

	)

35 
	~<ã©u»s.h
>

37 #ià
defšed
 
__ılu¥lus
 && 
__GNUC_PREREQ
 (2,95)

38 
	#__ASSERT_VOID_CAST
 
¡©ic_ÿ¡
<>

	)

40 
	#__ASSERT_VOID_CAST
 ()

	)

48 #ifdef 
NDEBUG


50 
	#as£¹
(
ex´
è(
	`__ASSERT_VOID_CAST
 (0))

	)

58 #ifdef 
__USE_GNU


59 
	#as£¹_³¼Ü
(
”ºum
è(
	`__ASSERT_VOID_CAST
 (0))

	)

64 #iâdeà
_ASSERT_H_DECLS


65 
	#_ASSERT_H_DECLS


	)

66 
__BEGIN_DECLS


69 
	$__as£¹_ç
 (cÚ¡ *
__as£¹iÚ
, cÚ¡ *
__fe
,

70 
__lše
, cÚ¡ *
__funùiÚ
)

71 
__THROW
 
	`__©Œibu‹__
 ((
__nÜ‘uº__
));

74 
	$__as£¹_³¼Ü_ç
 (
__”ºum
, cÚ¡ *
__fe
,

75 
__lše
, cÚ¡ *
__funùiÚ
)

76 
__THROW
 
	`__©Œibu‹__
 ((
__nÜ‘uº__
));

81 
	$__as£¹
 (cÚ¡ *
__as£¹iÚ
, cÚ¡ *
__fe
, 
__lše
)

82 
__THROW
 
	`__©Œibu‹__
 ((
__nÜ‘uº__
));

85 
__END_DECLS


88 
	#as£¹
(
ex´
) \

89 ((
ex´
) \

90 ? 
	`__ASSERT_VOID_CAST
 (0) \

91 : 
	`__as£¹_ç
 (
	`__STRING
(
ex´
), 
__FILE__
, 
__LINE__
, 
__ASSERT_FUNCTION
))

	)

93 #ifdef 
__USE_GNU


94 
	#as£¹_³¼Ü
(
”ºum
) \

95 (!(
”ºum
) \

96 ? 
	`__ASSERT_VOID_CAST
 (0) \

97 : 
	`__as£¹_³¼Ü_ç
 ((
”ºum
), 
__FILE__
, 
__LINE__
, 
__ASSERT_FUNCTION
))

	)

105 #ià
defšed
 
__ılu¥lus
 ? 
	`__GNUC_PREREQ
 (2, 6) : __GNUC_PREREQ (2, 4)

106 
	#__ASSERT_FUNCTION
 
__PRETTY_FUNCTION__


	)

108 #ià
defšed
 
__STDC_VERSION__
 && __STDC_VERSION__ >= 199901L

109 
	#__ASSERT_FUNCTION
 
__func__


	)

111 
	#__ASSERT_FUNCTION
 ((cÚ¡ *è0)

	)

118 #ià
defšed
 
__USE_ISOC11
 && !defšed 
__ılu¥lus


120 #undeà
¡©ic_as£¹


121 
	#¡©ic_as£¹
 
_Stic_as£¹


	)

	@/usr/include/limits.h

22 #iâdeà
_LIBC_LIMITS_H_


23 
	#_LIBC_LIMITS_H_
 1

	)

25 
	~<ã©u»s.h
>

31 
	#MB_LEN_MAX
 16

	)

36 #ià!
defšed
 
__GNUC__
 || __GNUC__ < 2

41 #iâdeà
_LIMITS_H


42 
	#_LIMITS_H
 1

	)

44 
	~<b™s/wÜdsize.h
>

53 
	#CHAR_BIT
 8

	)

56 
	#SCHAR_MIN
 (-128)

	)

57 
	#SCHAR_MAX
 127

	)

60 
	#UCHAR_MAX
 255

	)

63 #ifdeà
__CHAR_UNSIGNED__


64 
	#CHAR_MIN
 0

	)

65 
	#CHAR_MAX
 
UCHAR_MAX


	)

67 
	#CHAR_MIN
 
SCHAR_MIN


	)

68 
	#CHAR_MAX
 
SCHAR_MAX


	)

72 
	#SHRT_MIN
 (-32768)

	)

73 
	#SHRT_MAX
 32767

	)

76 
	#USHRT_MAX
 65535

	)

79 
	#INT_MIN
 (-
INT_MAX
 - 1)

	)

80 
	#INT_MAX
 2147483647

	)

83 
	#UINT_MAX
 4294967295U

	)

86 #ià
__WORDSIZE
 == 64

87 
	#LONG_MAX
 9223372036854775807L

	)

89 
	#LONG_MAX
 2147483647L

	)

91 
	#LONG_MIN
 (-
LONG_MAX
 - 1L)

	)

94 #ià
__WORDSIZE
 == 64

95 
	#ULONG_MAX
 18446744073709551615UL

	)

97 
	#ULONG_MAX
 4294967295UL

	)

100 #ifdeà
__USE_ISOC99


103 
	#LLONG_MAX
 9223372036854775807LL

	)

104 
	#LLONG_MIN
 (-
LLONG_MAX
 - 1LL)

	)

107 
	#ULLONG_MAX
 18446744073709551615ULL

	)

121 #ià
defšed
 
__GNUC__
 && !defšed 
_GCC_LIMITS_H_


123 #šşude_Ãxˆ<
lim™s
.
h
>

129 #ià
defšed
 
__USE_ISOC99
 && defšed 
__GNUC__


130 #iâdeà
LLONG_MIN


131 
	#LLONG_MIN
 (-
LLONG_MAX
-1)

	)

133 #iâdeà
LLONG_MAX


134 
	#LLONG_MAX
 
__LONG_LONG_MAX__


	)

136 #iâdeà
ULLONG_MAX


137 
	#ULLONG_MAX
 (
LLONG_MAX
 * 2ULL + 1)

	)

141 #ifdef 
__USE_POSIX


143 
	~<b™s/posix1_lim.h
>

146 #ifdef 
__USE_POSIX2


147 
	~<b™s/posix2_lim.h
>

150 #ifdef 
__USE_XOPEN


151 
	~<b™s/xİ’_lim.h
>

	@/usr/include/math.h

23 #iâdef 
_MATH_H


24 
	#_MATH_H
 1

	)

26 
	~<ã©u»s.h
>

28 
	g__BEGIN_DECLS


32 
	~<b™s/huge_v®.h
>

33 #ifdeà
__USE_ISOC99


34 
	~<b™s/huge_v®f.h
>

35 
	~<b™s/huge_v®l.h
>

38 
	~<b™s/šf.h
>

41 
	~<b™s/Çn.h
>

45 
	~<b™s/m©hdef.h
>

52 
	#__MATHCALL
(
funùiÚ
,
suffix
, 
¬gs
) \

53 
	`__MATHDECL
 (
_MdoubË_
,
funùiÚ
,
suffix
, 
¬gs
)

	)

54 
	#__MATHDECL
(
ty³
, 
funùiÚ
,
suffix
, 
¬gs
) \

55 
	`__MATHDECL_1
(
ty³
, 
funùiÚ
,
suffix
, 
¬gs
); \

56 
	`__MATHDECL_1
(
ty³
, 
	`__CONCAT
(
__
,
funùiÚ
),
suffix
, 
¬gs
)

	)

57 
	#__MATHCALLX
(
funùiÚ
,
suffix
, 
¬gs
, 
©Œib
) \

58 
	`__MATHDECLX
 (
_MdoubË_
,
funùiÚ
,
suffix
, 
¬gs
, 
©Œib
)

	)

59 
	#__MATHDECLX
(
ty³
, 
funùiÚ
,
suffix
, 
¬gs
, 
©Œib
) \

60 
	`__MATHDECL_1
(
ty³
, 
funùiÚ
,
suffix
, 
¬gs
è
	`__©Œibu‹__
 (
©Œib
); \

61 
	`__MATHDECL_1
(
ty³
, 
	`__CONCAT
(
__
,
funùiÚ
),
suffix
, 
¬gs
è
	`__©Œibu‹__
 (
©Œib
)

	)

62 
	#__MATHDECL_1
(
ty³
, 
funùiÚ
,
suffix
, 
¬gs
) \

63 
ty³
 
	`__MATH_PRECNAME
(
funùiÚ
,
suffix
è
¬gs
 
__THROW


	)

65 
	#_MdoubË_
 

	)

66 
	#__MATH_PRECNAME
(
Çme
,
r
è
	`__CONCAT
Òame,r)

	)

67 
	#_MdoubË_BEGIN_NAMESPACE
 
__BEGIN_NAMESPACE_STD


	)

68 
	#_MdoubË_END_NAMESPACE
 
__END_NAMESPACE_STD


	)

69 
	~<b™s/m©hÿÎs.h
>

70 #undeà
_MdoubË_


71 #undeà
_MdoubË_BEGIN_NAMESPACE


72 #undeà
_MdoubË_END_NAMESPACE


73 #undeà
__MATH_PRECNAME


75 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_ISOC99


81 #iâdeà
_Mæßt_


82 
	#_Mæßt_
 

	)

84 
	#_MdoubË_
 
_Mæßt_


	)

85 
	#__MATH_PRECNAME
(
Çme
,
r
èÇme##
f
##
	)
r

86 
	#_MdoubË_BEGIN_NAMESPACE
 
__BEGIN_NAMESPACE_C99


	)

87 
	#_MdoubË_END_NAMESPACE
 
__END_NAMESPACE_C99


	)

88 
	~<b™s/m©hÿÎs.h
>

89 #undeà
_MdoubË_


90 #undeà
_MdoubË_BEGIN_NAMESPACE


91 #undeà
_MdoubË_END_NAMESPACE


92 #undeà
__MATH_PRECNAME


94 #ià!(
defšed
 
__NO_LONG_DOUBLE_MATH
 && defšed 
_LIBC
) \

95 || 
defšed
 
__LDBL_COMPAT


96 #ifdeà
__LDBL_COMPAT


98 #ifdeà
__USE_ISOC99


99 
	$__Ædbl_Ãx‰ow¬df
 (
__x
, 
__y
)

100 
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
));

101 #ifdeà
__REDIRECT_NTH


102 
	`__REDIRECT_NTH
 (
Ãx‰ow¬df
, (
__x
, 
__y
),

103 
__Ædbl_Ãx‰ow¬df
)

104 
	`__©Œibu‹__
 ((
__cÚ¡__
));

105 
	`__REDIRECT_NTH
 (
Ãx‰ow¬d
, (
__x
, 
__y
),

106 
Ãxá”
è
	`__©Œibu‹__
 ((
__cÚ¡__
));

107 
	`__REDIRECT_NTH
 (
Ãx‰ow¬dl
,

108 (
__x
, 
__y
),

109 
Ãxá”
è
	`__©Œibu‹__
 ((
__cÚ¡__
));

113 #undeà
__MATHDECL_1


114 
	#__MATHDECL_2
(
ty³
, 
funùiÚ
,
suffix
, 
¬gs
, 
®Ÿs
) \

115 
ty³
 
	`__REDIRECT_NTH
(
	`__MATH_PRECNAME
(
funùiÚ
,
suffix
), \

116 
¬gs
, 
®Ÿs
)

	)

117 
	#__MATHDECL_1
(
ty³
, 
funùiÚ
,
suffix
, 
¬gs
) \

118 
	`__MATHDECL_2
(
ty³
, 
funùiÚ
,
suffix
, 
¬gs
, 
	`__CONCAT
(funùiÚ,suffix))

	)

124 #iâdeà
_MlÚg_doubË_


125 
	#_MlÚg_doubË_
 

	)

127 
	#_MdoubË_
 
_MlÚg_doubË_


	)

128 
	#__MATH_PRECNAME
(
Çme
,
r
èÇme##
l
##
	)
r

129 
	#_MdoubË_BEGIN_NAMESPACE
 
__BEGIN_NAMESPACE_C99


	)

130 
	#_MdoubË_END_NAMESPACE
 
__END_NAMESPACE_C99


	)

131 
	#__MATH_DECLARE_LDOUBLE
 1

	)

132 
	~<b™s/m©hÿÎs.h
>

133 #undeà
_MdoubË_


134 #undeà
_MdoubË_BEGIN_NAMESPACE


135 #undeà
_MdoubË_END_NAMESPACE


136 #undeà
__MATH_PRECNAME


141 #undeà
__MATHDECL_1


142 #undeà
__MATHDECL


143 #undeà
__MATHCALL


146 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_XOPEN


148 
signgam
;

153 #ifdeà
__USE_ISOC99


191 
FP_NAN
 =

192 
	#FP_NAN
 0

	)

193 
FP_NAN
,

194 
FP_INFINITE
 =

195 
	#FP_INFINITE
 1

	)

196 
FP_INFINITE
,

197 
FP_ZERO
 =

198 
	#FP_ZERO
 2

	)

199 
FP_ZERO
,

200 
FP_SUBNORMAL
 =

201 
	#FP_SUBNORMAL
 3

	)

202 
FP_SUBNORMAL
,

203 
FP_NORMAL
 =

204 
	#FP_NORMAL
 4

	)

205 
FP_NORMAL


209 #ifdeà
__NO_LONG_DOUBLE_MATH


210 
	#åşassify
(
x
) \

211 ( (
x
è=ğ (è? 
	`__åşassifyf
 (xè: 
	`__åşassify
 (x))

	)

213 
	#åşassify
(
x
) \

214 ( (
x
) ==  () \

215 ? 
	`__åşassifyf
 (
x
) \

216 :  (
x
) ==  () \

217 ? 
	`__åşassify
 (
x
è: 
	`__åşassifyl
 (x))

	)

221 #ifdeà
__NO_LONG_DOUBLE_MATH


222 
	#signb™
(
x
) \

223 ( (
x
è=ğ (è? 
	`__signb™f
 (xè: 
	`__signb™
 (x))

	)

225 
	#signb™
(
x
) \

226 ( (
x
) ==  () \

227 ? 
	`__signb™f
 (
x
) \

228 :  (
x
) ==  () \

229 ? 
	`__signb™
 (
x
è: 
	`__signb™l
 (x))

	)

233 #ifdeà
__NO_LONG_DOUBLE_MATH


234 
	#isfš™e
(
x
) \

235 ( (
x
è=ğ (è? 
	`__fš™ef
 (xè: 
	`__fš™e
 (x))

	)

237 
	#isfš™e
(
x
) \

238 ( (
x
) ==  () \

239 ? 
	`__fš™ef
 (
x
) \

240 :  (
x
) ==  () \

241 ? 
	`__fš™e
 (
x
è: 
	`__fš™–
 (x))

	)

245 
	#i¢Üm®
(
x
è(
	`åşassify
 (xè=ğ
FP_NORMAL
)

	)

249 #ifdeà
__NO_LONG_DOUBLE_MATH


250 
	#i¢ª
(
x
) \

251 ( (
x
è=ğ (è? 
	`__i¢ªf
 (xè: 
	`__i¢ª
 (x))

	)

253 
	#i¢ª
(
x
) \

254 ( (
x
) ==  () \

255 ? 
	`__i¢ªf
 (
x
) \

256 :  (
x
) ==  () \

257 ? 
	`__i¢ª
 (
x
è: 
	`__i¢ªl
 (x))

	)

261 #ifdeà
__NO_LONG_DOUBLE_MATH


262 
	#isšf
(
x
) \

263 ( (
x
è=ğ (è? 
	`__isšff
 (xè: 
	`__isšf
 (x))

	)

265 
	#isšf
(
x
) \

266 ( (
x
) ==  () \

267 ? 
	`__isšff
 (
x
) \

268 :  (
x
) ==  () \

269 ? 
	`__isšf
 (
x
è: 
	`__isšæ
 (x))

	)

273 
	#MATH_ERRNO
 1

	)

274 
	#MATH_ERREXCEPT
 2

	)

279 #iâdeà
__FAST_MATH__


280 
	#m©h_”rhªdlšg
 (
MATH_ERRNO
 | 
MATH_ERREXCEPT
)

	)

285 #ifdeà
__USE_GNU


287 #ifdeà
__NO_LONG_DOUBLE_MATH


288 
	#issigÇlšg
(
x
) \

289 ( (
x
è=ğ (è? 
	`__issigÇlšgf
 (xè: 
	`__issigÇlšg
 (x))

	)

291 
	#issigÇlšg
(
x
) \

292 ( (
x
) ==  () \

293 ? 
	`__issigÇlšgf
 (
x
) \

294 :  (
x
) ==  () \

295 ? 
	`__issigÇlšg
 (
x
è: 
	`__issigÇlšgl
 (x))

	)

299 #ifdef 
__USE_MISC


303 
_IEEE_
 = -1,

304 
_SVID_
,

305 
_XOPEN_
,

306 
_POSIX_
,

307 
_ISOC_


308 } 
	t_LIB_VERSION_TYPE
;

313 
_LIB_VERSION_TYPE
 
_LIB_VERSION
;

317 #ifdeà
__USE_SVID


323 #ifdeà
__ılu¥lus


324 
__exû±iÚ


326 
exû±iÚ


329 
ty³
;

330 *
Çme
;

331 
¬g1
;

332 
¬g2
;

333 
»tv®
;

334 
	}
};

336 #ifdeà
__ılu¥lus


337 
	$m©h”r
 (
__exû±iÚ
 *
__exc
è
	`throw
 ();

339 
	`m©h”r
 (
exû±iÚ
 *
__exc
);

342 
	#X_TLOSS
 1.41484755040568800000e+16

	)

345 
	#DOMAIN
 1

	)

346 
	#SING
 2

	)

347 
	#OVERFLOW
 3

	)

348 
	#UNDERFLOW
 4

	)

349 
	#TLOSS
 5

	)

350 
	#PLOSS
 6

	)

353 
	#HUGE
 3.40282347e+38F

	)

357 #ifdeà
__USE_XOPEN


359 
	#MAXFLOAT
 3.40282347e+38F

	)

366 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_XOPEN


367 
	#M_E
 2.7182818284590452354

	)

368 
	#M_LOG2E
 1.4426950408889634074

	)

369 
	#M_LOG10E
 0.43429448190325182765

	)

370 
	#M_LN2
 0.69314718055994530942

	)

371 
	#M_LN10
 2.30258509299404568402

	)

372 
	#M_PI
 3.14159265358979323846

	)

373 
	#M_PI_2
 1.57079632679489661923

	)

374 
	#M_PI_4
 0.78539816339744830962

	)

375 
	#M_1_PI
 0.31830988618379067154

	)

376 
	#M_2_PI
 0.63661977236758134308

	)

377 
	#M_2_SQRTPI
 1.12837916709551257390

	)

378 
	#M_SQRT2
 1.41421356237309504880

	)

379 
	#M_SQRT1_2
 0.70710678118654752440

	)

385 #ifdeà
__USE_GNU


386 
	#M_El
 2.718281828459045235360287471352662498L

	)

387 
	#M_LOG2El
 1.442695040888963407359924681001892137L

	)

388 
	#M_LOG10El
 0.434294481903251827651128918916605082L

	)

389 
	#M_LN2l
 0.693147180559945309417232121458176568L

	)

390 
	#M_LN10l
 2.302585092994045684017991454684364208L

	)

391 
	#M_PIl
 3.141592653589793238462643383279502884L

	)

392 
	#M_PI_2l
 1.570796326794896619231321691639751442L

	)

393 
	#M_PI_4l
 0.785398163397448309615660845819875721L

	)

394 
	#M_1_PIl
 0.318309886183790671537767526745028724L

	)

395 
	#M_2_PIl
 0.636619772367581343075535053490057448L

	)

396 
	#M_2_SQRTPIl
 1.128379167095512573896158903121545172L

	)

397 
	#M_SQRT2l
 1.414213562373095048801688724209698079L

	)

398 
	#M_SQRT1_2l
 0.707106781186547524400844362104849039L

	)

405 #ià
defšed
 
__STRICT_ANSI__
 && !defšed 
__NO_MATH_INLINES


406 
	#__NO_MATH_INLINES
 1

	)

409 #ià
defšed
 
__USE_ISOC99
 && 
	`__GNUC_PREREQ
(2,97)

416 
	#isg»©”
(
x
, 
y
è
	`__butš_isg»©”
(x, y)

	)

417 
	#isg»©”equ®
(
x
, 
y
è
	`__butš_isg»©”equ®
(x, y)

	)

418 
	#i¦ess
(
x
, 
y
è
	`__butš_i¦ess
(x, y)

	)

419 
	#i¦es£qu®
(
x
, 
y
è
	`__butš_i¦es£qu®
(x, y)

	)

420 
	#i¦essg»©”
(
x
, 
y
è
	`__butš_i¦essg»©”
(x, y)

	)

421 
	#isunÜd”ed
(
u
, 
v
è
	`__butš_isunÜd”ed
(u, v)

	)

425 #ifdeà
__USE_EXTERN_INLINES


426 
	~<b™s/m©hšlše.h
>

431 #ià
defšed
 
__FINITE_MATH_ONLY__
 && __FINITE_MATH_ONLY__ > 0

432 
	~<b™s/m©h-fš™e.h
>

435 #ifdeà
__USE_ISOC99


439 #iâdeà
isg»©”


440 
	#isg»©”
(
x
, 
y
) \

441 (
__ex‹nsiÚ__
 \

442 ({ 
	`__ty³of__
(
x
è
__x
 = (x); __ty³of__(
y
è
__y
 = (y); \

443 !
	`isunÜd”ed
 (
__x
, 
__y
è&& __x > __y; 
	}
}))

	)

447 #iâdeà
isg»©”equ®


448 
	#isg»©”equ®
(
x
, 
y
) \

449 (
__ex‹nsiÚ__
 \

450 ({ 
	`__ty³of__
(
x
è
__x
 = (x); __ty³of__(
y
è
__y
 = (y); \

451 !
	`isunÜd”ed
 (
__x
, 
__y
è&& __x >ğ__y; }))

	)

455 #iâdeà
i¦ess


456 
	#i¦ess
(
x
, 
y
) \

457 (
__ex‹nsiÚ__
 \

458 ({ 
	`__ty³of__
(
x
è
__x
 = (x); __ty³of__(
y
è
__y
 = (y); \

459 !
	`isunÜd”ed
 (
__x
, 
__y
è&& __x < __y; }))

	)

463 #iâdeà
i¦es£qu®


464 
	#i¦es£qu®
(
x
, 
y
) \

465 (
__ex‹nsiÚ__
 \

466 ({ 
	`__ty³of__
(
x
è
__x
 = (x); __ty³of__(
y
è
__y
 = (y); \

467 !
	`isunÜd”ed
 (
__x
, 
__y
è&& __x <ğ__y; }))

	)

471 #iâdeà
i¦essg»©”


472 
	#i¦essg»©”
(
x
, 
y
) \

473 (
__ex‹nsiÚ__
 \

474 ({ 
	`__ty³of__
(
x
è
__x
 = (x); __ty³of__(
y
è
__y
 = (y); \

475 !
	`isunÜd”ed
 (
__x
, 
__y
è&& (__x < __y || __y < __x); }))

	)

479 #iâdeà
isunÜd”ed


480 
	#isunÜd”ed
(
u
, 
v
) \

481 (
__ex‹nsiÚ__
 \

482 ({ 
	`__ty³of__
(
u
è
__u
 = (u); __ty³of__(
v
è
__v
 = (v); \

483 
	`åşassify
 (
__u
è=ğ
FP_NAN
 || fpşassify (
__v
è=ğFP_NAN; }))

	)

488 
	g__END_DECLS


	@/usr/include/stdio.h

23 #iâdeà
_STDIO_H


25 #ià!
defšed
 
__Ãed_FILE
 && !defšed 
__Ãed___FILE


26 
	#_STDIO_H
 1

	)

27 
	~<ã©u»s.h
>

29 
	g__BEGIN_DECLS


31 
	#__Ãed_size_t


	)

32 
	#__Ãed_NULL


	)

33 
	~<¡ddef.h
>

35 
	~<b™s/ty³s.h
>

36 
	#__Ãed_FILE


	)

37 
	#__Ãed___FILE


	)

41 #ià!
defšed
 
__FILE_defšed
 && defšed 
__Ãed_FILE


44 
	g_IO_FILE
;

46 
__BEGIN_NAMESPACE_STD


48 
_IO_FILE
 
	tFILE
;

49 
	g__END_NAMESPACE_STD


50 #ià
defšed
 
__USE_LARGEFILE64
 || defšed 
__USE_SVID
 || defšed 
__USE_POSIX
 \

51 || 
defšed
 
	g__USE_BSD
 || defšed 
	g__USE_ISOC99
 || defšed 
	g__USE_XOPEN
 \

52 || 
defšed
 
__USE_POSIX2


53 
	$__USING_NAMESPACE_STD
(
FILE
)

56 
	#__FILE_defšed
 1

	)

58 #undeà
__Ãed_FILE


61 #ià!
defšed
 
____FILE_defšed
 && defšed 
__Ãed___FILE


64 
_IO_FILE
 
	t__FILE
;

66 
	#____FILE_defšed
 1

	)

68 #undeà
__Ãed___FILE


71 #ifdef 
_STDIO_H


72 
	#_STDIO_USES_IOSTREAM


	)

74 
	~<libio.h
>

76 #ià
defšed
 
__USE_XOPEN
 || defšed 
__USE_XOPEN2K8


77 #ifdeà
__GNUC__


78 #iâdeà
_VA_LIST_DEFINED


79 
_G_va_li¡
 
	tva_li¡
;

80 
	#_VA_LIST_DEFINED


	)

83 
	~<¡d¬g.h
>

87 #ifdeà
__USE_XOPEN2K8


88 #iâdeà
__off_t_defšed


89 #iâdeà
__USE_FILE_OFFSET64


90 
__off_t
 
	toff_t
;

92 
__off64_t
 
	toff_t
;

94 
	#__off_t_defšed


	)

96 #ià
defšed
 
__USE_LARGEFILE64
 && !defšed 
__off64_t_defšed


97 
__off64_t
 
	toff64_t
;

98 
	#__off64_t_defšed


	)

101 #iâdeà
__ssize_t_defšed


102 
__ssize_t
 
	tssize_t
;

103 
	#__ssize_t_defšed


	)

108 
__BEGIN_NAMESPACE_STD


109 #iâdeà
__USE_FILE_OFFSET64


110 
_G_åos_t
 
	tåos_t
;

112 
_G_åos64_t
 
	tåos_t
;

114 
__END_NAMESPACE_STD


115 #ifdeà
__USE_LARGEFILE64


116 
_G_åos64_t
 
	tåos64_t
;

120 
	#_IOFBF
 0

	)

121 
	#_IOLBF
 1

	)

122 
	#_IONBF
 2

	)

126 #iâdeà
BUFSIZ


127 
	#BUFSIZ
 
_IO_BUFSIZ


	)

133 #iâdeà
EOF


134 
	#EOF
 (-1)

	)

140 
	#SEEK_SET
 0

	)

141 
	#SEEK_CUR
 1

	)

142 
	#SEEK_END
 2

	)

143 #ifdeà
__USE_GNU


144 
	#SEEK_DATA
 3

	)

145 
	#SEEK_HOLE
 4

	)

149 #ià
defšed
 
__USE_SVID
 || defšed 
__USE_XOPEN


151 
	#P_tmpdœ
 "/tmp"

	)

164 
	~<b™s/¡dio_lim.h
>

168 
_IO_FILE
 *
¡dš
;

169 
_IO_FILE
 *
¡dout
;

170 
_IO_FILE
 *
¡d”r
;

172 
	#¡dš
 
¡dš


	)

173 
	#¡dout
 
¡dout


	)

174 
	#¡d”r
 
¡d”r


	)

176 
__BEGIN_NAMESPACE_STD


178 
	$»move
 (cÚ¡ *
__f’ame
è
__THROW
;

180 
	$»Çme
 (cÚ¡ *
__Şd
, cÚ¡ *
__Ãw
è
__THROW
;

181 
__END_NAMESPACE_STD


183 #ifdeà
__USE_ATFILE


185 
	$»Çm—t
 (
__Şdfd
, cÚ¡ *
__Şd
, 
__Ãwfd
,

186 cÚ¡ *
__Ãw
è
__THROW
;

189 
__BEGIN_NAMESPACE_STD


194 #iâdeà
__USE_FILE_OFFSET64


195 
FILE
 *
	$tmpfe
 (è
__wur
;

197 #ifdeà
__REDIRECT


198 
FILE
 *
	`__REDIRECT
 (
tmpfe
, (), 
tmpfe64
è
__wur
;

200 
	#tmpfe
 
tmpfe64


	)

204 #ifdeà
__USE_LARGEFILE64


205 
FILE
 *
	$tmpfe64
 (è
__wur
;

209 *
	$tm²am
 (*
__s
è
__THROW
 
__wur
;

210 
__END_NAMESPACE_STD


212 #ifdeà
__USE_MISC


215 *
	$tm²am_r
 (*
__s
è
__THROW
 
__wur
;

219 #ià
defšed
 
__USE_SVID
 || defšed 
__USE_XOPEN


227 *
	$‹m²am
 (cÚ¡ *
__dœ
, cÚ¡ *
__pfx
)

228 
__THROW
 
__©Œibu‹_m®loc__
 
__wur
;

232 
__BEGIN_NAMESPACE_STD


237 
	`fşo£
 (
FILE
 *
__¡»am
);

242 
	`fæush
 (
FILE
 *
__¡»am
);

243 
__END_NAMESPACE_STD


245 #ifdeà
__USE_MISC


252 
	`fæush_uÆocked
 (
FILE
 *
__¡»am
);

255 #ifdeà
__USE_GNU


262 
	`fşo£®l
 ();

266 
__BEGIN_NAMESPACE_STD


267 #iâdeà
__USE_FILE_OFFSET64


272 
FILE
 *
	$fİ’
 (cÚ¡ *
__»¡riù
 
__f’ame
,

273 cÚ¡ *
__»¡riù
 
__modes
è
__wur
;

278 
FILE
 *
	$äeİ’
 (cÚ¡ *
__»¡riù
 
__f’ame
,

279 cÚ¡ *
__»¡riù
 
__modes
,

280 
FILE
 *
__»¡riù
 
__¡»am
è
__wur
;

282 #ifdeà
__REDIRECT


283 
FILE
 *
	`__REDIRECT
 (
fİ’
, (cÚ¡ *
__»¡riù
 
__f’ame
,

284 cÚ¡ *
__»¡riù
 
__modes
), 
fİ’64
)

285 
__wur
;

286 
FILE
 *
	`__REDIRECT
 (
äeİ’
, (cÚ¡ *
__»¡riù
 
__f’ame
,

287 cÚ¡ *
__»¡riù
 
__modes
,

288 
FILE
 *
__»¡riù
 
__¡»am
), 
äeİ’64
)

289 
__wur
;

291 
	#fİ’
 
fİ’64


	)

292 
	#äeİ’
 
äeİ’64


	)

295 
__END_NAMESPACE_STD


296 #ifdeà
__USE_LARGEFILE64


297 
FILE
 *
	$fİ’64
 (cÚ¡ *
__»¡riù
 
__f’ame
,

298 cÚ¡ *
__»¡riù
 
__modes
è
__wur
;

299 
FILE
 *
	$äeİ’64
 (cÚ¡ *
__»¡riù
 
__f’ame
,

300 cÚ¡ *
__»¡riù
 
__modes
,

301 
FILE
 *
__»¡riù
 
__¡»am
è
__wur
;

304 #ifdef 
__USE_POSIX


306 
FILE
 *
	$fdİ’
 (
__fd
, cÚ¡ *
__modes
è
__THROW
 
__wur
;

309 #ifdef 
__USE_GNU


312 
FILE
 *
	$fİ’cook›
 (*
__»¡riù
 
__magic_cook›
,

313 cÚ¡ *
__»¡riù
 
__modes
,

314 
_IO_cook›_io_funùiÚs_t
 
__io_funcs
è
__THROW
 
__wur
;

317 #ifdeà
__USE_XOPEN2K8


319 
FILE
 *
	$fmemİ’
 (*
__s
, 
size_t
 
__Ën
, cÚ¡ *
__modes
)

320 
__THROW
 
__wur
;

325 
FILE
 *
	$İ’_mem¡»am
 (**
__buæoc
, 
size_t
 *
__siz–oc
è
__THROW
 
__wur
;

329 
__BEGIN_NAMESPACE_STD


332 
	$£tbuf
 (
FILE
 *
__»¡riù
 
__¡»am
, *__»¡riù 
__buf
è
__THROW
;

336 
	$£tvbuf
 (
FILE
 *
__»¡riù
 
__¡»am
, *__»¡riù 
__buf
,

337 
__modes
, 
size_t
 
__n
è
__THROW
;

338 
__END_NAMESPACE_STD


340 #ifdef 
__USE_BSD


343 
	$£tbufãr
 (
FILE
 *
__»¡riù
 
__¡»am
, *__»¡riù 
__buf
,

344 
size_t
 
__size
è
__THROW
;

347 
	$£šebuf
 (
FILE
 *
__¡»am
è
__THROW
;

351 
__BEGIN_NAMESPACE_STD


356 
	`årštf
 (
FILE
 *
__»¡riù
 
__¡»am
,

357 cÚ¡ *
__»¡riù
 
__fÜm©
, ...);

362 
	`´štf
 (cÚ¡ *
__»¡riù
 
__fÜm©
, ...);

364 
	$¥rštf
 (*
__»¡riù
 
__s
,

365 cÚ¡ *
__»¡riù
 
__fÜm©
, ...è
__THROWNL
;

371 
	`vårštf
 (
FILE
 *
__»¡riù
 
__s
, cÚ¡ *__»¡riù 
__fÜm©
,

372 
_G_va_li¡
 
__¬g
);

377 
	`v´štf
 (cÚ¡ *
__»¡riù
 
__fÜm©
, 
_G_va_li¡
 
__¬g
);

379 
	$v¥rštf
 (*
__»¡riù
 
__s
, cÚ¡ *__»¡riù 
__fÜm©
,

380 
_G_va_li¡
 
__¬g
è
__THROWNL
;

381 
__END_NAMESPACE_STD


383 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_ISOC99
 || defšed 
__USE_UNIX98


384 
__BEGIN_NAMESPACE_C99


386 
	$¢´štf
 (*
__»¡riù
 
__s
, 
size_t
 
__maxËn
,

387 cÚ¡ *
__»¡riù
 
__fÜm©
, ...)

388 
__THROWNL
 
	`__©Œibu‹__
 ((
	`__fÜm©__
 (
__´štf__
, 3, 4)));

390 
	$v¢´štf
 (*
__»¡riù
 
__s
, 
size_t
 
__maxËn
,

391 cÚ¡ *
__»¡riù
 
__fÜm©
, 
_G_va_li¡
 
__¬g
)

392 
__THROWNL
 
	`__©Œibu‹__
 ((
	`__fÜm©__
 (
__´štf__
, 3, 0)));

393 
__END_NAMESPACE_C99


396 #ifdeà
__USE_GNU


399 
	$va¥rštf
 (**
__»¡riù
 
__±r
, cÚ¡ *__»¡riù 
__f
,

400 
_G_va_li¡
 
__¬g
)

401 
__THROWNL
 
	`__©Œibu‹__
 ((
	$__fÜm©__
 (
__´štf__
, 2, 0))è
__wur
;

402 
	$__a¥rštf
 (**
__»¡riù
 
__±r
,

403 cÚ¡ *
__»¡riù
 
__fmt
, ...)

404 
__THROWNL
 
	`__©Œibu‹__
 ((
	$__fÜm©__
 (
__´štf__
, 2, 3))è
__wur
;

405 
	$a¥rštf
 (**
__»¡riù
 
__±r
,

406 cÚ¡ *
__»¡riù
 
__fmt
, ...)

407 
__THROWNL
 
	`__©Œibu‹__
 ((
	$__fÜm©__
 (
__´štf__
, 2, 3))è
__wur
;

410 #ifdeà
__USE_XOPEN2K8


412 
	$vd´štf
 (
__fd
, cÚ¡ *
__»¡riù
 
__fmt
,

413 
_G_va_li¡
 
__¬g
)

414 
	`__©Œibu‹__
 ((
	`__fÜm©__
 (
__´štf__
, 2, 0)));

415 
	$d´štf
 (
__fd
, cÚ¡ *
__»¡riù
 
__fmt
, ...)

416 
	`__©Œibu‹__
 ((
	`__fÜm©__
 (
__´štf__
, 2, 3)));

420 
__BEGIN_NAMESPACE_STD


425 
	$fsÿnf
 (
FILE
 *
__»¡riù
 
__¡»am
,

426 cÚ¡ *
__»¡riù
 
__fÜm©
, ...è
__wur
;

431 
	$sÿnf
 (cÚ¡ *
__»¡riù
 
__fÜm©
, ...è
__wur
;

433 
	$ssÿnf
 (cÚ¡ *
__»¡riù
 
__s
,

434 cÚ¡ *
__»¡riù
 
__fÜm©
, ...è
__THROW
;

436 #ià
defšed
 
__USE_ISOC99
 && !defšed 
__USE_GNU
 \

437 && (!
defšed
 
__LDBL_COMPAT
 || !defšed 
__REDIRECT
) \

438 && (
defšed
 
__STRICT_ANSI__
 || defšed 
__USE_XOPEN2K
)

439 #ifdeà
__REDIRECT


443 
	`__REDIRECT
 (
fsÿnf
, (
FILE
 *
__»¡riù
 
__¡»am
,

444 cÚ¡ *
__»¡riù
 
__fÜm©
, ...),

445 
__isoc99_fsÿnf
è
__wur
;

446 
	`__REDIRECT
 (
sÿnf
, (cÚ¡ *
__»¡riù
 
__fÜm©
, ...),

447 
__isoc99_sÿnf
è
__wur
;

448 
	`__REDIRECT_NTH
 (
ssÿnf
, (cÚ¡ *
__»¡riù
 
__s
,

449 cÚ¡ *
__»¡riù
 
__fÜm©
, ...),

450 
__isoc99_ssÿnf
);

452 
	$__isoc99_fsÿnf
 (
FILE
 *
__»¡riù
 
__¡»am
,

453 cÚ¡ *
__»¡riù
 
__fÜm©
, ...è
__wur
;

454 
	$__isoc99_sÿnf
 (cÚ¡ *
__»¡riù
 
__fÜm©
, ...è
__wur
;

455 
	$__isoc99_ssÿnf
 (cÚ¡ *
__»¡riù
 
__s
,

456 cÚ¡ *
__»¡riù
 
__fÜm©
, ...è
__THROW
;

457 
	#fsÿnf
 
__isoc99_fsÿnf


	)

458 
	#sÿnf
 
__isoc99_sÿnf


	)

459 
	#ssÿnf
 
__isoc99_ssÿnf


	)

463 
__END_NAMESPACE_STD


465 #ifdef 
__USE_ISOC99


466 
__BEGIN_NAMESPACE_C99


471 
	$vfsÿnf
 (
FILE
 *
__»¡riù
 
__s
, cÚ¡ *__»¡riù 
__fÜm©
,

472 
_G_va_li¡
 
__¬g
)

473 
	`__©Œibu‹__
 ((
	$__fÜm©__
 (
__sÿnf__
, 2, 0))è
__wur
;

479 
	$vsÿnf
 (cÚ¡ *
__»¡riù
 
__fÜm©
, 
_G_va_li¡
 
__¬g
)

480 
	`__©Œibu‹__
 ((
	$__fÜm©__
 (
__sÿnf__
, 1, 0))è
__wur
;

483 
	$vssÿnf
 (cÚ¡ *
__»¡riù
 
__s
,

484 cÚ¡ *
__»¡riù
 
__fÜm©
, 
_G_va_li¡
 
__¬g
)

485 
__THROW
 
	`__©Œibu‹__
 ((
	`__fÜm©__
 (
__sÿnf__
, 2, 0)));

487 #ià!
defšed
 
__USE_GNU
 \

488 && (!
defšed
 
__LDBL_COMPAT
 || !defšed 
__REDIRECT
) \

489 && (
defšed
 
__STRICT_ANSI__
 || defšed 
__USE_XOPEN2K
)

490 #ifdeà
__REDIRECT


494 
	`__REDIRECT
 (
vfsÿnf
,

495 (
FILE
 *
__»¡riù
 
__s
,

496 cÚ¡ *
__»¡riù
 
__fÜm©
, 
_G_va_li¡
 
__¬g
),

497 
__isoc99_vfsÿnf
)

498 
	`__©Œibu‹__
 ((
	$__fÜm©__
 (
__sÿnf__
, 2, 0))è
__wur
;

499 
	`__REDIRECT
 (
vsÿnf
, (cÚ¡ *
__»¡riù
 
__fÜm©
,

500 
_G_va_li¡
 
__¬g
), 
__isoc99_vsÿnf
)

501 
	`__©Œibu‹__
 ((
	$__fÜm©__
 (
__sÿnf__
, 1, 0))è
__wur
;

502 
	`__REDIRECT_NTH
 (
vssÿnf
,

503 (cÚ¡ *
__»¡riù
 
__s
,

504 cÚ¡ *
__»¡riù
 
__fÜm©
,

505 
_G_va_li¡
 
__¬g
), 
__isoc99_vssÿnf
)

506 
	`__©Œibu‹__
 ((
	`__fÜm©__
 (
__sÿnf__
, 2, 0)));

508 
	$__isoc99_vfsÿnf
 (
FILE
 *
__»¡riù
 
__s
,

509 cÚ¡ *
__»¡riù
 
__fÜm©
,

510 
_G_va_li¡
 
__¬g
è
__wur
;

511 
	$__isoc99_vsÿnf
 (cÚ¡ *
__»¡riù
 
__fÜm©
,

512 
_G_va_li¡
 
__¬g
è
__wur
;

513 
	$__isoc99_vssÿnf
 (cÚ¡ *
__»¡riù
 
__s
,

514 cÚ¡ *
__»¡riù
 
__fÜm©
,

515 
_G_va_li¡
 
__¬g
è
__THROW
;

516 
	#vfsÿnf
 
__isoc99_vfsÿnf


	)

517 
	#vsÿnf
 
__isoc99_vsÿnf


	)

518 
	#vssÿnf
 
__isoc99_vssÿnf


	)

522 
__END_NAMESPACE_C99


526 
__BEGIN_NAMESPACE_STD


531 
	`fg‘c
 (
FILE
 *
__¡»am
);

532 
	`g‘c
 (
FILE
 *
__¡»am
);

538 
	`g‘ch¬
 ();

539 
__END_NAMESPACE_STD


543 
	#g‘c
(
_å
è
	`_IO_g‘c
 (_å)

	)

545 #ià
defšed
 
__USE_POSIX
 || defšed 
__USE_MISC


550 
	`g‘c_uÆocked
 (
FILE
 *
__¡»am
);

551 
	`g‘ch¬_uÆocked
 ();

554 #ifdeà
__USE_MISC


561 
	`fg‘c_uÆocked
 (
FILE
 *
__¡»am
);

565 
__BEGIN_NAMESPACE_STD


573 
	`åutc
 (
__c
, 
FILE
 *
__¡»am
);

574 
	`putc
 (
__c
, 
FILE
 *
__¡»am
);

580 
	`putch¬
 (
__c
);

581 
__END_NAMESPACE_STD


585 
	#putc
(
_ch
, 
_å
è
	`_IO_putc
 (_ch, _å)

	)

587 #ifdeà
__USE_MISC


594 
	`åutc_uÆocked
 (
__c
, 
FILE
 *
__¡»am
);

597 #ià
defšed
 
__USE_POSIX
 || defšed 
__USE_MISC


602 
	`putc_uÆocked
 (
__c
, 
FILE
 *
__¡»am
);

603 
	`putch¬_uÆocked
 (
__c
);

607 #ià
defšed
 
__USE_SVID
 || defšed 
__USE_MISC
 \

608 || (
defšed
 
__USE_XOPEN
 && !defšed 
__USE_XOPEN2K
)

610 
	`g‘w
 (
FILE
 *
__¡»am
);

613 
	`putw
 (
__w
, 
FILE
 *
__¡»am
);

617 
__BEGIN_NAMESPACE_STD


622 *
	$fg‘s
 (*
__»¡riù
 
__s
, 
__n
, 
FILE
 *__»¡riù 
__¡»am
)

623 
__wur
;

625 #ià!
defšed
 
__USE_ISOC11
 \

626 || (
defšed
 
__ılu¥lus
 && __cplusplus <= 201103L)

638 *
	$g‘s
 (*
__s
è
__wur
 
__©Œibu‹_d•»ÿ‹d__
;

640 
__END_NAMESPACE_STD


642 #ifdeà
__USE_GNU


649 *
	$fg‘s_uÆocked
 (*
__»¡riù
 
__s
, 
__n
,

650 
FILE
 *
__»¡riù
 
__¡»am
è
__wur
;

654 #ifdef 
__USE_XOPEN2K8


665 
_IO_ssize_t
 
	$__g‘d–im
 (**
__»¡riù
 
__lš•Œ
,

666 
size_t
 *
__»¡riù
 
__n
, 
__d–im™”
,

667 
FILE
 *
__»¡riù
 
__¡»am
è
__wur
;

668 
_IO_ssize_t
 
	$g‘d–im
 (**
__»¡riù
 
__lš•Œ
,

669 
size_t
 *
__»¡riù
 
__n
, 
__d–im™”
,

670 
FILE
 *
__»¡riù
 
__¡»am
è
__wur
;

678 
_IO_ssize_t
 
	$g‘lše
 (**
__»¡riù
 
__lš•Œ
,

679 
size_t
 *
__»¡riù
 
__n
,

680 
FILE
 *
__»¡riù
 
__¡»am
è
__wur
;

684 
__BEGIN_NAMESPACE_STD


689 
	`åuts
 (cÚ¡ *
__»¡riù
 
__s
, 
FILE
 *__»¡riù 
__¡»am
);

695 
	`puts
 (cÚ¡ *
__s
);

702 
	`ung‘c
 (
__c
, 
FILE
 *
__¡»am
);

709 
size_t
 
	$ä—d
 (*
__»¡riù
 
__±r
, 
size_t
 
__size
,

710 
size_t
 
__n
, 
FILE
 *
__»¡riù
 
__¡»am
è
__wur
;

715 
size_t
 
	`fwr™e
 (cÚ¡ *
__»¡riù
 
__±r
, size_ˆ
__size
,

716 
size_t
 
__n
, 
FILE
 *
__»¡riù
 
__s
);

717 
__END_NAMESPACE_STD


719 #ifdeà
__USE_GNU


726 
	`åuts_uÆocked
 (cÚ¡ *
__»¡riù
 
__s
,

727 
FILE
 *
__»¡riù
 
__¡»am
);

730 #ifdeà
__USE_MISC


737 
size_t
 
	$ä—d_uÆocked
 (*
__»¡riù
 
__±r
, 
size_t
 
__size
,

738 
size_t
 
__n
, 
FILE
 *
__»¡riù
 
__¡»am
è
__wur
;

739 
size_t
 
	`fwr™e_uÆocked
 (cÚ¡ *
__»¡riù
 
__±r
, size_ˆ
__size
,

740 
size_t
 
__n
, 
FILE
 *
__»¡riù
 
__¡»am
);

744 
__BEGIN_NAMESPACE_STD


749 
	`f£ek
 (
FILE
 *
__¡»am
, 
__off
, 
__wh’û
);

754 
	$á–l
 (
FILE
 *
__¡»am
è
__wur
;

759 
	`»wšd
 (
FILE
 *
__¡»am
);

760 
__END_NAMESPACE_STD


767 #ià
defšed
 
__USE_LARGEFILE
 || defšed 
__USE_XOPEN2K


768 #iâdeà
__USE_FILE_OFFSET64


773 
	`f£eko
 (
FILE
 *
__¡»am
, 
__off_t
 
__off
, 
__wh’û
);

778 
__off_t
 
	$á–lo
 (
FILE
 *
__¡»am
è
__wur
;

780 #ifdeà
__REDIRECT


781 
	`__REDIRECT
 (
f£eko
,

782 (
FILE
 *
__¡»am
, 
__off64_t
 
__off
, 
__wh’û
),

783 
f£eko64
);

784 
__off64_t
 
	`__REDIRECT
 (
á–lo
, (
FILE
 *
__¡»am
), 
á–lo64
);

786 
	#f£eko
 
f£eko64


	)

787 
	#á–lo
 
á–lo64


	)

792 
__BEGIN_NAMESPACE_STD


793 #iâdeà
__USE_FILE_OFFSET64


798 
	`fg‘pos
 (
FILE
 *
__»¡riù
 
__¡»am
, 
åos_t
 *__»¡riù 
__pos
);

803 
	`f£os
 (
FILE
 *
__¡»am
, cÚ¡ 
åos_t
 *
__pos
);

805 #ifdeà
__REDIRECT


806 
	`__REDIRECT
 (
fg‘pos
, (
FILE
 *
__»¡riù
 
__¡»am
,

807 
åos_t
 *
__»¡riù
 
__pos
), 
fg‘pos64
);

808 
	`__REDIRECT
 (
f£os
,

809 (
FILE
 *
__¡»am
, cÚ¡ 
åos_t
 *
__pos
), 
f£os64
);

811 
	#fg‘pos
 
fg‘pos64


	)

812 
	#f£os
 
f£os64


	)

815 
__END_NAMESPACE_STD


817 #ifdeà
__USE_LARGEFILE64


818 
	`f£eko64
 (
FILE
 *
__¡»am
, 
__off64_t
 
__off
, 
__wh’û
);

819 
__off64_t
 
	$á–lo64
 (
FILE
 *
__¡»am
è
__wur
;

820 
	`fg‘pos64
 (
FILE
 *
__»¡riù
 
__¡»am
, 
åos64_t
 *__»¡riù 
__pos
);

821 
	`f£os64
 (
FILE
 *
__¡»am
, cÚ¡ 
åos64_t
 *
__pos
);

824 
__BEGIN_NAMESPACE_STD


826 
	$ş—»¼
 (
FILE
 *
__¡»am
è
__THROW
;

828 
	$ãof
 (
FILE
 *
__¡»am
è
__THROW
 
__wur
;

830 
	$ã¼Ü
 (
FILE
 *
__¡»am
è
__THROW
 
__wur
;

831 
__END_NAMESPACE_STD


833 #ifdeà
__USE_MISC


835 
	$ş—»¼_uÆocked
 (
FILE
 *
__¡»am
è
__THROW
;

836 
	$ãof_uÆocked
 (
FILE
 *
__¡»am
è
__THROW
 
__wur
;

837 
	$ã¼Ü_uÆocked
 (
FILE
 *
__¡»am
è
__THROW
 
__wur
;

841 
__BEGIN_NAMESPACE_STD


846 
	`³¼Ü
 (cÚ¡ *
__s
);

847 
__END_NAMESPACE_STD


853 
	~<b™s/sys_”¾i¡.h
>

856 #ifdef 
__USE_POSIX


858 
	$f’o
 (
FILE
 *
__¡»am
è
__THROW
 
__wur
;

861 #ifdeà
__USE_MISC


863 
	$f’o_uÆocked
 (
FILE
 *
__¡»am
è
__THROW
 
__wur
;

867 #ià(
defšed
 
__USE_POSIX2
 || defšed 
__USE_SVID
 || defšed 
__USE_BSD
 || \

868 
defšed
 
__USE_MISC
)

873 
FILE
 *
	$pİ’
 (cÚ¡ *
__commªd
, cÚ¡ *
__modes
è
__wur
;

879 
	`pşo£
 (
FILE
 *
__¡»am
);

883 #ifdef 
__USE_POSIX


885 *
	$ù”mid
 (*
__s
è
__THROW
;

889 #ifdeà
__USE_XOPEN


891 *
	`cu£rid
 (*
__s
);

895 #ifdef 
__USE_GNU


896 
ob¡ack
;

899 
	$ob¡ack_´štf
 (
ob¡ack
 *
__»¡riù
 
__ob¡ack
,

900 cÚ¡ *
__»¡riù
 
__fÜm©
, ...)

901 
__THROWNL
 
	`__©Œibu‹__
 ((
	`__fÜm©__
 (
__´štf__
, 2, 3)));

902 
	$ob¡ack_v´štf
 (
ob¡ack
 *
__»¡riù
 
__ob¡ack
,

903 cÚ¡ *
__»¡riù
 
__fÜm©
,

904 
_G_va_li¡
 
__¬gs
)

905 
__THROWNL
 
	`__©Œibu‹__
 ((
	`__fÜm©__
 (
__´štf__
, 2, 0)));

909 #ià
defšed
 
__USE_POSIX
 || defšed 
__USE_MISC


913 
	$æockfe
 (
FILE
 *
__¡»am
è
__THROW
;

917 
	$árylockfe
 (
FILE
 *
__¡»am
è
__THROW
 
__wur
;

920 
	$fuÆockfe
 (
FILE
 *
__¡»am
è
__THROW
;

923 #ià
defšed
 
__USE_XOPEN
 && !defšed 
__USE_XOPEN2K
 && !defšed 
__USE_GNU


927 
	#__Ãed_g‘İt


	)

928 
	~<g‘İt.h
>

933 #ifdeà
__USE_EXTERN_INLINES


934 
	~<b™s/¡dio.h
>

936 #ià
__USE_FORTIFY_LEVEL
 > 0 && 
defšed
 
__ex‹º_®ways_šlše


937 
	~<b™s/¡dio2.h
>

939 #ifdeà
__LDBL_COMPAT


940 
	~<b™s/¡dio-ldbl.h
>

943 
__END_DECLS


	@/usr/include/stdlib.h

22 #iâdef 
_STDLIB_H


24 
	~<ã©u»s.h
>

27 
	#__Ãed_size_t


	)

28 #iâdeà
__Ãed_m®loc_ªd_ÿÎoc


29 
	#__Ãed_wch¬_t


	)

30 
	#__Ãed_NULL


	)

32 
	~<¡ddef.h
>

34 
	g__BEGIN_DECLS


36 #iâdeà
__Ãed_m®loc_ªd_ÿÎoc


37 
	#_STDLIB_H
 1

	)

39 #ià(
defšed
 
__USE_XOPEN
 || defšed 
__USE_XOPEN2K8
è&& !defšed 
_SYS_WAIT_H


41 
	~<b™s/wa™æags.h
>

42 
	~<b™s/wa™¡©us.h
>

44 #ifdeà
__USE_BSD


49 #ià
defšed
 
__GNUC__
 && !defšed 
__ılu¥lus


50 
	#__WAIT_INT
(
¡©us
) \

51 (
	`__ex‹nsiÚ__
 (((uniÚ { 
	`__ty³of
(
¡©us
è
__š
; 
__i
; }) \

52 { .
__š
 = (
¡©us
è}).
__i
))

	)

54 
	#__WAIT_INT
(
¡©us
è(*(*è&(¡©us))

	)

62 #ià!
defšed
 
__GNUC__
 || __GNUC__ < 2 || defšed 
__ılu¥lus


63 
	#__WAIT_STATUS
 *

	)

64 
	#__WAIT_STATUS_DEFN
 *

	)

69 
wa™
 *
	m__u±r
;

70 *
	m__Œ
;

71 } 
	t__WAIT_STATUS
 
	t__©Œibu‹__
 ((
	t__Œª¥¬’t_uniÚ__
));

72 
	#__WAIT_STATUS_DEFN
 *

	)

77 
	#__WAIT_INT
(
¡©us
è(¡©us)

	)

78 
	#__WAIT_STATUS
 *

	)

79 
	#__WAIT_STATUS_DEFN
 *

	)

84 
	#WEXITSTATUS
(
¡©us
è
	`__WEXITSTATUS
 (
	`__WAIT_INT
 (¡©us))

	)

85 
	#WTERMSIG
(
¡©us
è
	`__WTERMSIG
 (
	`__WAIT_INT
 (¡©us))

	)

86 
	#WSTOPSIG
(
¡©us
è
	`__WSTOPSIG
 (
	`__WAIT_INT
 (¡©us))

	)

87 
	#WIFEXITED
(
¡©us
è
	`__WIFEXITED
 (
	`__WAIT_INT
 (¡©us))

	)

88 
	#WIFSIGNALED
(
¡©us
è
	`__WIFSIGNALED
 (
	`__WAIT_INT
 (¡©us))

	)

89 
	#WIFSTOPPED
(
¡©us
è
	`__WIFSTOPPED
 (
	`__WAIT_INT
 (¡©us))

	)

90 #ifdeà
__WIFCONTINUED


91 
	#WIFCONTINUED
(
¡©us
è
	`__WIFCONTINUED
 (
	`__WAIT_INT
 (¡©us))

	)

95 
__BEGIN_NAMESPACE_STD


99 
	mquÙ
;

100 
	m»m
;

101 } 
	tdiv_t
;

104 #iâdeà
__ldiv_t_defšed


107 
	mquÙ
;

108 
	m»m
;

109 } 
	tldiv_t
;

110 
	#__ldiv_t_defšed
 1

	)

112 
	g__END_NAMESPACE_STD


114 #ià
defšed
 
__USE_ISOC99
 && !defšed 
__Îdiv_t_defšed


115 
__BEGIN_NAMESPACE_C99


117 
__ex‹nsiÚ__
 struct

119 
	mquÙ
;

120 
	m»m
;

121 } 
	tÎdiv_t
;

122 
	#__Îdiv_t_defšed
 1

	)

123 
	g__END_NAMESPACE_C99


128 
	#RAND_MAX
 2147483647

	)

133 
	#EXIT_FAILURE
 1

	)

134 
	#EXIT_SUCCESS
 0

	)

138 
	#MB_CUR_MAX
 (
	`__ùy³_g‘_mb_cur_max
 ())

	)

139 
size_t
 
	$__ùy³_g‘_mb_cur_max
 (è
__THROW
 
__wur
;

142 
__BEGIN_NAMESPACE_STD


144 
	$©of
 (cÚ¡ *
__ÅŒ
)

145 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1)è
__wur
;

147 
	$©oi
 (cÚ¡ *
__ÅŒ
)

148 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1)è
__wur
;

150 
	$©Ş
 (cÚ¡ *
__ÅŒ
)

151 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1)è
__wur
;

152 
__END_NAMESPACE_STD


154 #ià
defšed
 
__USE_ISOC99
 || defšed 
__USE_MISC


155 
__BEGIN_NAMESPACE_C99


157 
__ex‹nsiÚ__
 
	$©Şl
 (cÚ¡ *
__ÅŒ
)

158 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1)è
__wur
;

159 
__END_NAMESPACE_C99


162 
__BEGIN_NAMESPACE_STD


164 
	$¡¹od
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

165 **
__»¡riù
 
__’d±r
)

166 
__THROW
 
	`__nÚnuÎ
 ((1));

167 
__END_NAMESPACE_STD


169 #ifdef 
__USE_ISOC99


170 
__BEGIN_NAMESPACE_C99


172 
	$¡¹of
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

173 **
__»¡riù
 
__’d±r
è
__THROW
 
	`__nÚnuÎ
 ((1));

175 
	$¡¹Şd
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

176 **
__»¡riù
 
__’d±r
)

177 
__THROW
 
	`__nÚnuÎ
 ((1));

178 
__END_NAMESPACE_C99


181 
__BEGIN_NAMESPACE_STD


183 
	$¡¹Ş
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

184 **
__»¡riù
 
__’d±r
, 
__ba£
)

185 
__THROW
 
	`__nÚnuÎ
 ((1));

187 
	$¡¹oul
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

188 **
__»¡riù
 
__’d±r
, 
__ba£
)

189 
__THROW
 
	`__nÚnuÎ
 ((1));

190 
__END_NAMESPACE_STD


192 #ifdeà
__USE_BSD


194 
__ex‹nsiÚ__


195 
	$¡¹oq
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

196 **
__»¡riù
 
__’d±r
, 
__ba£
)

197 
__THROW
 
	`__nÚnuÎ
 ((1));

199 
__ex‹nsiÚ__


200 
	$¡¹ouq
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

201 **
__»¡riù
 
__’d±r
, 
__ba£
)

202 
__THROW
 
	`__nÚnuÎ
 ((1));

205 #ià
defšed
 
__USE_ISOC99
 || defšed 
__USE_MISC


206 
__BEGIN_NAMESPACE_C99


208 
__ex‹nsiÚ__


209 
	$¡¹Şl
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

210 **
__»¡riù
 
__’d±r
, 
__ba£
)

211 
__THROW
 
	`__nÚnuÎ
 ((1));

213 
__ex‹nsiÚ__


214 
	$¡¹ouÎ
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

215 **
__»¡riù
 
__’d±r
, 
__ba£
)

216 
__THROW
 
	`__nÚnuÎ
 ((1));

217 
__END_NAMESPACE_C99


221 #ifdeà
__USE_GNU


235 
	~<xloÿË.h
>

239 
	$¡¹Ş_l
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

240 **
__»¡riù
 
__’d±r
, 
__ba£
,

241 
__loÿË_t
 
__loc
è
__THROW
 
	`__nÚnuÎ
 ((1, 4));

243 
	$¡¹oul_l
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

244 **
__»¡riù
 
__’d±r
,

245 
__ba£
, 
__loÿË_t
 
__loc
)

246 
__THROW
 
	`__nÚnuÎ
 ((1, 4));

248 
__ex‹nsiÚ__


249 
	$¡¹Şl_l
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

250 **
__»¡riù
 
__’d±r
, 
__ba£
,

251 
__loÿË_t
 
__loc
)

252 
__THROW
 
	`__nÚnuÎ
 ((1, 4));

254 
__ex‹nsiÚ__


255 
	$¡¹ouÎ_l
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

256 **
__»¡riù
 
__’d±r
,

257 
__ba£
, 
__loÿË_t
 
__loc
)

258 
__THROW
 
	`__nÚnuÎ
 ((1, 4));

260 
	$¡¹od_l
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

261 **
__»¡riù
 
__’d±r
, 
__loÿË_t
 
__loc
)

262 
__THROW
 
	`__nÚnuÎ
 ((1, 3));

264 
	$¡¹of_l
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

265 **
__»¡riù
 
__’d±r
, 
__loÿË_t
 
__loc
)

266 
__THROW
 
	`__nÚnuÎ
 ((1, 3));

268 
	$¡¹Şd_l
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

269 **
__»¡riù
 
__’d±r
,

270 
__loÿË_t
 
__loc
)

271 
__THROW
 
	`__nÚnuÎ
 ((1, 3));

275 #ifdeà
__USE_EXTERN_INLINES


276 
__BEGIN_NAMESPACE_STD


277 
__ex‹º_šlše
 

278 
	`__NTH
 (
	$©oi
 (cÚ¡ *
__ÅŒ
))

280  (è
	`¡¹Ş
 (
__ÅŒ
, (**è
NULL
, 10);

281 
	}
}

282 
__ex‹º_šlše
 

283 
__NTH
 (
	$©Ş
 (cÚ¡ *
__ÅŒ
))

285  
	`¡¹Ş
 (
__ÅŒ
, (**è
NULL
, 10);

286 
	}
}

287 
	g__END_NAMESPACE_STD


289 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_ISOC99


290 
__BEGIN_NAMESPACE_C99


291 
__ex‹nsiÚ__
 
__ex‹º_šlše
 

292 
__NTH
 (
	$©Şl
 (cÚ¡ *
__ÅŒ
))

294  
	`¡¹Şl
 (
__ÅŒ
, (**è
NULL
, 10);

295 
	}
}

296 
	g__END_NAMESPACE_C99


301 #ià
defšed
 
__USE_SVID
 || defšed 
__USE_XOPEN_EXTENDED


305 *
	$l64a
 (
__n
è
__THROW
 
__wur
;

308 
	$a64l
 (cÚ¡ *
__s
)

309 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1)è
__wur
;

313 #ià
defšed
 
__USE_SVID
 || defšed 
__USE_XOPEN_EXTENDED
 || defšed 
__USE_BSD


314 
	~<sys/ty³s.h
>

321 
	$¿ndom
 (è
__THROW
;

324 
	$¤ªdom
 (
__£ed
è
__THROW
;

330 *
	$š™¡©e
 (
__£ed
, *
__¡©ebuf
,

331 
size_t
 
__¡©–’
è
__THROW
 
	`__nÚnuÎ
 ((2));

335 *
	$£t¡©e
 (*
__¡©ebuf
è
__THROW
 
	`__nÚnuÎ
 ((1));

338 #ifdeà
__USE_MISC


343 
	s¿ndom_d©a


345 
št32_t
 *
åŒ
;

346 
št32_t
 *
½Œ
;

347 
št32_t
 *
¡©e
;

348 
¿nd_ty³
;

349 
¿nd_deg
;

350 
¿nd_£p
;

351 
št32_t
 *
’d_±r
;

354 
	$¿ndom_r
 (
¿ndom_d©a
 *
__»¡riù
 
__buf
,

355 
št32_t
 *
__»¡riù
 
__»suÉ
è
__THROW
 
	`__nÚnuÎ
 ((1, 2));

357 
	$¤ªdom_r
 (
__£ed
, 
¿ndom_d©a
 *
__buf
)

358 
__THROW
 
	`__nÚnuÎ
 ((2));

360 
	$š™¡©e_r
 (
__£ed
, *
__»¡riù
 
__¡©ebuf
,

361 
size_t
 
__¡©–’
,

362 
¿ndom_d©a
 *
__»¡riù
 
__buf
)

363 
__THROW
 
	`__nÚnuÎ
 ((2, 4));

365 
	$£t¡©e_r
 (*
__»¡riù
 
__¡©ebuf
,

366 
¿ndom_d©a
 *
__»¡riù
 
__buf
)

367 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

372 
__BEGIN_NAMESPACE_STD


374 
	$¿nd
 (è
__THROW
;

376 
	$¤ªd
 (
__£ed
è
__THROW
;

377 
__END_NAMESPACE_STD


379 #ifdeà
__USE_POSIX


381 
	$¿nd_r
 (*
__£ed
è
__THROW
;

385 #ià
defšed
 
__USE_SVID
 || defšed 
__USE_XOPEN


389 
	$d¿nd48
 (è
__THROW
;

390 
	$”ªd48
 (
__xsubi
[3]è
__THROW
 
	`__nÚnuÎ
 ((1));

393 
	$Ìªd48
 (è
__THROW
;

394 
	$Äªd48
 (
__xsubi
[3])

395 
__THROW
 
	`__nÚnuÎ
 ((1));

398 
	$m¿nd48
 (è
__THROW
;

399 
	$j¿nd48
 (
__xsubi
[3])

400 
__THROW
 
	`__nÚnuÎ
 ((1));

403 
	$¤ªd48
 (
__£edv®
è
__THROW
;

404 *
	$£ed48
 (
__£ed16v
[3])

405 
__THROW
 
	`__nÚnuÎ
 ((1));

406 
	$lcÚg48
 (
__·¿m
[7]è
__THROW
 
	`__nÚnuÎ
 ((1));

408 #ifdeà
__USE_MISC


412 
	sd¿nd48_d©a


414 
__x
[3];

415 
__Şd_x
[3];

416 
__c
;

417 
__š™
;

418 
__ex‹nsiÚ__
 
__a
;

423 
	$d¿nd48_r
 (
d¿nd48_d©a
 *
__»¡riù
 
__bufãr
,

424 *
__»¡riù
 
__»suÉ
è
__THROW
 
	`__nÚnuÎ
 ((1, 2));

425 
	$”ªd48_r
 (
__xsubi
[3],

426 
d¿nd48_d©a
 *
__»¡riù
 
__bufãr
,

427 *
__»¡riù
 
__»suÉ
è
__THROW
 
	`__nÚnuÎ
 ((1, 2));

430 
	$Ìªd48_r
 (
d¿nd48_d©a
 *
__»¡riù
 
__bufãr
,

431 *
__»¡riù
 
__»suÉ
)

432 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

433 
	$Äªd48_r
 (
__xsubi
[3],

434 
d¿nd48_d©a
 *
__»¡riù
 
__bufãr
,

435 *
__»¡riù
 
__»suÉ
)

436 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

439 
	$m¿nd48_r
 (
d¿nd48_d©a
 *
__»¡riù
 
__bufãr
,

440 *
__»¡riù
 
__»suÉ
)

441 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

442 
	$j¿nd48_r
 (
__xsubi
[3],

443 
d¿nd48_d©a
 *
__»¡riù
 
__bufãr
,

444 *
__»¡riù
 
__»suÉ
)

445 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

448 
	$¤ªd48_r
 (
__£edv®
, 
d¿nd48_d©a
 *
__bufãr
)

449 
__THROW
 
	`__nÚnuÎ
 ((2));

451 
	$£ed48_r
 (
__£ed16v
[3],

452 
d¿nd48_d©a
 *
__bufãr
è
__THROW
 
	`__nÚnuÎ
 ((1, 2));

454 
	$lcÚg48_r
 (
__·¿m
[7],

455 
d¿nd48_d©a
 *
__bufãr
)

456 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

462 #iâdeà
__m®loc_ªd_ÿÎoc_defšed


463 
	#__m®loc_ªd_ÿÎoc_defšed


	)

464 
__BEGIN_NAMESPACE_STD


466 *
	$m®loc
 (
size_t
 
__size
è
__THROW
 
__©Œibu‹_m®loc__
 
__wur
;

468 *
	$ÿÎoc
 (
size_t
 
__nmemb
, size_ˆ
__size
)

469 
__THROW
 
__©Œibu‹_m®loc__
 
__wur
;

470 
__END_NAMESPACE_STD


473 #iâdeà
__Ãed_m®loc_ªd_ÿÎoc


474 
__BEGIN_NAMESPACE_STD


480 *
	$»®loc
 (*
__±r
, 
size_t
 
__size
)

481 
__THROW
 
__©Œibu‹_w¬n_unu£d_»suÉ__
;

483 
	$ä“
 (*
__±r
è
__THROW
;

484 
__END_NAMESPACE_STD


486 #ifdef 
__USE_MISC


488 
	$cä“
 (*
__±r
è
__THROW
;

491 #ià
defšed
 
__USE_GNU
 || defšed 
__USE_BSD
 || defšed 
__USE_MISC


492 
	~<®loÿ.h
>

495 #ià(
defšed
 
__USE_XOPEN_EXTENDED
 && !defšed 
__USE_XOPEN2K
) \

496 || 
defšed
 
__USE_BSD


498 *
	$v®loc
 (
size_t
 
__size
è
__THROW
 
__©Œibu‹_m®loc__
 
__wur
;

501 #ifdeà
__USE_XOPEN2K


503 
	$posix_mem®ign
 (**
__mem±r
, 
size_t
 
__®ignm’t
, size_ˆ
__size
)

504 
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

507 #ifdeà
__USE_ISOC11


509 *
	$®igÃd_®loc
 (
size_t
 
__®ignm’t
, size_ˆ
__size
)

510 
__THROW
 
__©Œibu‹_m®loc__
 
	`__©Œibu‹_®loc_size__
 ((2)è
__wur
;

513 
__BEGIN_NAMESPACE_STD


515 
	$abÜt
 (è
__THROW
 
	`__©Œibu‹__
 ((
__nÜ‘uº__
));

519 
	`©ex™
 ((*
__func
è()è
__THROW
 
	`__nÚnuÎ
 ((1));

521 #ià
defšed
 
__USE_ISOC11
 || defšed 
__USE_ISOCXX11


523 #ifdeà
__ılu¥lus


524 "C++" 
	`©_quick_ex™
 ((*
__func
) ())

525 
__THROW
 
	`__asm
 ("©_quick_ex™"è
	`__nÚnuÎ
 ((1));

527 
	`©_quick_ex™
 ((*
__func
è()è
__THROW
 
	`__nÚnuÎ
 ((1));

530 
__END_NAMESPACE_STD


532 #ifdef 
__USE_MISC


535 
	`Ú_ex™
 ((*
__func
è(
__¡©us
, *
__¬g
), *__arg)

536 
__THROW
 
	`__nÚnuÎ
 ((1));

539 
__BEGIN_NAMESPACE_STD


543 
	$ex™
 (
__¡©us
è
__THROW
 
	`__©Œibu‹__
 ((
__nÜ‘uº__
));

545 #ià
defšed
 
__USE_ISOC11
 || defšed 
__USE_ISOCXX11


549 
	$quick_ex™
 (
__¡©us
è
__THROW
 
	`__©Œibu‹__
 ((
__nÜ‘uº__
));

551 
__END_NAMESPACE_STD


553 #ifdeà
__USE_ISOC99


554 
__BEGIN_NAMESPACE_C99


557 
	$_Ex™
 (
__¡©us
è
__THROW
 
	`__©Œibu‹__
 ((
__nÜ‘uº__
));

558 
__END_NAMESPACE_C99


562 
__BEGIN_NAMESPACE_STD


564 *
	$g‘’v
 (cÚ¡ *
__Çme
è
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

565 
__END_NAMESPACE_STD


567 #ifdeà
__USE_GNU


570 *
	$£cu»_g‘’v
 (cÚ¡ *
__Çme
)

571 
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

574 #ià
defšed
 
__USE_SVID
 || defšed 
__USE_XOPEN


578 
	$pu‹nv
 (*
__¡ršg
è
__THROW
 
	`__nÚnuÎ
 ((1));

581 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_XOPEN2K


584 
	$£‹nv
 (cÚ¡ *
__Çme
, cÚ¡ *
__v®ue
, 
__»¶aû
)

585 
__THROW
 
	`__nÚnuÎ
 ((2));

588 
	$un£‹nv
 (cÚ¡ *
__Çme
è
__THROW
 
	`__nÚnuÎ
 ((1));

591 #ifdef 
__USE_MISC


595 
	$ş—»nv
 (è
__THROW
;

599 #ià
defšed
 
__USE_MISC
 \

600 || (
defšed
 
__USE_XOPEN_EXTENDED
 && !defšed 
__USE_XOPEN2K8
)

606 *
	$mk‹mp
 (*
__‹m¶©e
è
__THROW
 
	`__nÚnuÎ
 ((1));

609 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_XOPEN_EXTENDED
 \

610 || 
defšed
 
__USE_XOPEN2K8


619 #iâdeà
__USE_FILE_OFFSET64


620 
	$mk¡emp
 (*
__‹m¶©e
è
	`__nÚnuÎ
 ((1)è
__wur
;

622 #ifdeà
__REDIRECT


623 
	`__REDIRECT
 (
mk¡emp
, (*
__‹m¶©e
), 
mk¡emp64
)

624 
	`__nÚnuÎ
 ((1)è
__wur
;

626 
	#mk¡emp
 
mk¡emp64


	)

629 #ifdeà
__USE_LARGEFILE64


630 
	$mk¡emp64
 (*
__‹m¶©e
è
	`__nÚnuÎ
 ((1)è
__wur
;

634 #ifdeà
__USE_MISC


641 #iâdeà
__USE_FILE_OFFSET64


642 
	$mk¡emps
 (*
__‹m¶©e
, 
__suffixËn
è
	`__nÚnuÎ
 ((1)è
__wur
;

644 #ifdeà
__REDIRECT


645 
	`__REDIRECT
 (
mk¡emps
, (*
__‹m¶©e
, 
__suffixËn
),

646 
mk¡emps64
è
	`__nÚnuÎ
 ((1)è
__wur
;

648 
	#mk¡emps
 
mk¡emps64


	)

651 #ifdeà
__USE_LARGEFILE64


652 
	$mk¡emps64
 (*
__‹m¶©e
, 
__suffixËn
)

653 
	`__nÚnuÎ
 ((1)è
__wur
;

657 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_XOPEN2K8


663 *
	$mkd‹mp
 (*
__‹m¶©e
è
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

666 #ifdeà
__USE_GNU


673 #iâdeà
__USE_FILE_OFFSET64


674 
	$mko¡emp
 (*
__‹m¶©e
, 
__æags
è
	`__nÚnuÎ
 ((1)è
__wur
;

676 #ifdeà
__REDIRECT


677 
	`__REDIRECT
 (
mko¡emp
, (*
__‹m¶©e
, 
__æags
), 
mko¡emp64
)

678 
	`__nÚnuÎ
 ((1)è
__wur
;

680 
	#mko¡emp
 
mko¡emp64


	)

683 #ifdeà
__USE_LARGEFILE64


684 
	$mko¡emp64
 (*
__‹m¶©e
, 
__æags
è
	`__nÚnuÎ
 ((1)è
__wur
;

693 #iâdeà
__USE_FILE_OFFSET64


694 
	$mko¡emps
 (*
__‹m¶©e
, 
__suffixËn
, 
__æags
)

695 
	`__nÚnuÎ
 ((1)è
__wur
;

697 #ifdeà
__REDIRECT


698 
	`__REDIRECT
 (
mko¡emps
, (*
__‹m¶©e
, 
__suffixËn
,

699 
__æags
), 
mko¡emps64
)

700 
	`__nÚnuÎ
 ((1)è
__wur
;

702 
	#mko¡emps
 
mko¡emps64


	)

705 #ifdeà
__USE_LARGEFILE64


706 
	$mko¡emps64
 (*
__‹m¶©e
, 
__suffixËn
, 
__æags
)

707 
	`__nÚnuÎ
 ((1)è
__wur
;

712 
__BEGIN_NAMESPACE_STD


717 
	$sy¡em
 (cÚ¡ *
__commªd
è
__wur
;

718 
__END_NAMESPACE_STD


721 #ifdef 
__USE_GNU


724 *
	$ÿnÚiÿlize_fe_Çme
 (cÚ¡ *
__Çme
)

725 
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

728 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_XOPEN_EXTENDED


734 *
	$»®·th
 (cÚ¡ *
__»¡riù
 
__Çme
,

735 *
__»¡riù
 
__»sŞved
è
__THROW
 
__wur
;

740 #iâdeà
__COMPAR_FN_T


741 
	#__COMPAR_FN_T


	)

742 (*
	t__com·r_â_t
) (const *, const *);

744 #ifdef 
__USE_GNU


745 
__com·r_â_t
 
	tcom·risÚ_â_t
;

748 #ifdeà
__USE_GNU


749 (*
	t__com·r_d_â_t
) (const *, const *, *);

752 
__BEGIN_NAMESPACE_STD


755 *
	$b£¬ch
 (cÚ¡ *
__key
, cÚ¡ *
__ba£
,

756 
size_t
 
__nmemb
, size_ˆ
__size
, 
__com·r_â_t
 
__com·r
)

757 
	`__nÚnuÎ
 ((1, 2, 5)è
__wur
;

759 #ifdeà
__USE_EXTERN_INLINES


760 
	~<b™s/¡dlib-b£¬ch.h
>

765 
	$qsÜt
 (*
__ba£
, 
size_t
 
__nmemb
, size_ˆ
__size
,

766 
__com·r_â_t
 
__com·r
è
	`__nÚnuÎ
 ((1, 4));

767 #ifdeà
__USE_GNU


768 
	$qsÜt_r
 (*
__ba£
, 
size_t
 
__nmemb
, size_ˆ
__size
,

769 
__com·r_d_â_t
 
__com·r
, *
__¬g
)

770 
	`__nÚnuÎ
 ((1, 4));

775 
	$abs
 (
__x
è
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
)è
__wur
;

776 
	$Ïbs
 (
__x
è
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
)è
__wur
;

777 
__END_NAMESPACE_STD


779 #ifdeà
__USE_ISOC99


780 
__ex‹nsiÚ__
 
	$Îabs
 (
__x
)

781 
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
)è
__wur
;

785 
__BEGIN_NAMESPACE_STD


789 
div_t
 
	$div
 (
__num”
, 
__d’om
)

790 
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
)è
__wur
;

791 
ldiv_t
 
	$ldiv
 (
__num”
, 
__d’om
)

792 
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
)è
__wur
;

793 
__END_NAMESPACE_STD


795 #ifdeà
__USE_ISOC99


796 
__BEGIN_NAMESPACE_C99


797 
__ex‹nsiÚ__
 
Îdiv_t
 
	$Îdiv
 (
__num”
,

798 
__d’om
)

799 
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
)è
__wur
;

800 
__END_NAMESPACE_C99


804 #ià(
defšed
 
__USE_XOPEN_EXTENDED
 && !defšed 
__USE_XOPEN2K8
) \

805 || 
defšed
 
__USE_SVID


812 *
	$ecvt
 (
__v®ue
, 
__ndig™
, *
__»¡riù
 
__deıt
,

813 *
__»¡riù
 
__sign
è
__THROW
 
	`__nÚnuÎ
 ((3, 4)è
__wur
;

818 *
	$fcvt
 (
__v®ue
, 
__ndig™
, *
__»¡riù
 
__deıt
,

819 *
__»¡riù
 
__sign
è
__THROW
 
	`__nÚnuÎ
 ((3, 4)è
__wur
;

824 *
	$gcvt
 (
__v®ue
, 
__ndig™
, *
__buf
)

825 
__THROW
 
	`__nÚnuÎ
 ((3)è
__wur
;

828 #ifdeà
__USE_MISC


830 *
	$qecvt
 (
__v®ue
, 
__ndig™
,

831 *
__»¡riù
 
__deıt
, *__»¡riù 
__sign
)

832 
__THROW
 
	`__nÚnuÎ
 ((3, 4)è
__wur
;

833 *
	$qfcvt
 (
__v®ue
, 
__ndig™
,

834 *
__»¡riù
 
__deıt
, *__»¡riù 
__sign
)

835 
__THROW
 
	`__nÚnuÎ
 ((3, 4)è
__wur
;

836 *
	$qgcvt
 (
__v®ue
, 
__ndig™
, *
__buf
)

837 
__THROW
 
	`__nÚnuÎ
 ((3)è
__wur
;

842 
	$ecvt_r
 (
__v®ue
, 
__ndig™
, *
__»¡riù
 
__deıt
,

843 *
__»¡riù
 
__sign
, *__»¡riù 
__buf
,

844 
size_t
 
__Ën
è
__THROW
 
	`__nÚnuÎ
 ((3, 4, 5));

845 
	$fcvt_r
 (
__v®ue
, 
__ndig™
, *
__»¡riù
 
__deıt
,

846 *
__»¡riù
 
__sign
, *__»¡riù 
__buf
,

847 
size_t
 
__Ën
è
__THROW
 
	`__nÚnuÎ
 ((3, 4, 5));

849 
	$qecvt_r
 (
__v®ue
, 
__ndig™
,

850 *
__»¡riù
 
__deıt
, *__»¡riù 
__sign
,

851 *
__»¡riù
 
__buf
, 
size_t
 
__Ën
)

852 
__THROW
 
	`__nÚnuÎ
 ((3, 4, 5));

853 
	$qfcvt_r
 (
__v®ue
, 
__ndig™
,

854 *
__»¡riù
 
__deıt
, *__»¡riù 
__sign
,

855 *
__»¡riù
 
__buf
, 
size_t
 
__Ën
)

856 
__THROW
 
	`__nÚnuÎ
 ((3, 4, 5));

860 
__BEGIN_NAMESPACE_STD


863 
	$mbËn
 (cÚ¡ *
__s
, 
size_t
 
__n
è
__THROW
;

866 
	$mbtowc
 (
wch¬_t
 *
__»¡riù
 
__pwc
,

867 cÚ¡ *
__»¡riù
 
__s
, 
size_t
 
__n
è
__THROW
;

870 
	$wùomb
 (*
__s
, 
wch¬_t
 
__wch¬
è
__THROW
;

874 
size_t
 
	$mb¡owcs
 (
wch¬_t
 *
__»¡riù
 
__pwcs
,

875 cÚ¡ *
__»¡riù
 
__s
, 
size_t
 
__n
è
__THROW
;

877 
size_t
 
	$wc¡ombs
 (*
__»¡riù
 
__s
,

878 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__pwcs
, 
size_t
 
__n
)

879 
__THROW
;

880 
__END_NAMESPACE_STD


883 #ifdeà
__USE_SVID


888 
	$½m©ch
 (cÚ¡ *
__»¥Ú£
è
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

892 #ià
defšed
 
__USE_XOPEN_EXTENDED
 || defšed 
__USE_XOPEN2K8


899 
	$g‘subİt
 (**
__»¡riù
 
__İtiÚp
,

900 *cÚ¡ *
__»¡riù
 
__tok’s
,

901 **
__»¡riù
 
__v®u•
)

902 
__THROW
 
	`__nÚnuÎ
 ((1, 2, 3)è
__wur
;

906 #ifdeà
__USE_XOPEN


908 
	$£tkey
 (cÚ¡ *
__key
è
__THROW
 
	`__nÚnuÎ
 ((1));

914 #ifdeà
__USE_XOPEN2KXSI


916 
	$posix_İ’±
 (
__oæag
è
__wur
;

919 #ifdeà
__USE_XOPEN


924 
	$g¿Á±
 (
__fd
è
__THROW
;

928 
	$uÆock±
 (
__fd
è
__THROW
;

933 *
	$±¢ame
 (
__fd
è
__THROW
 
__wur
;

936 #ifdeà
__USE_GNU


940 
	$±¢ame_r
 (
__fd
, *
__buf
, 
size_t
 
__buæ’
)

941 
__THROW
 
	`__nÚnuÎ
 ((2));

944 
	`g‘±
 ();

947 #ifdeà
__USE_BSD


951 
	$g‘lßdavg
 (
__lßdavg
[], 
__ÃËm
)

952 
__THROW
 
	`__nÚnuÎ
 ((1));

955 
	~<b™s/¡dlib-æßt.h
>

958 #ià
__USE_FORTIFY_LEVEL
 > 0 && 
defšed
 
__fÜtify_funùiÚ


959 
	~<b™s/¡dlib.h
>

961 #ifdeà
__LDBL_COMPAT


962 
	~<b™s/¡dlib-ldbl.h
>

966 #undeà
__Ãed_m®loc_ªd_ÿÎoc


968 
__END_DECLS


	@/usr/include/string.h

22 #iâdef 
_STRING_H


23 
	#_STRING_H
 1

	)

25 
	~<ã©u»s.h
>

27 
	g__BEGIN_DECLS


30 
	#__Ãed_size_t


	)

31 
	#__Ãed_NULL


	)

32 
	~<¡ddef.h
>

39 #ià
defšed
 
__ılu¥lus
 && (__ılu¥lu >ğ199711L || 
__GNUC_PREREQ
 (4, 4))

40 
	#__CORRECT_ISO_CPP_STRING_H_PROTO


	)

44 
__BEGIN_NAMESPACE_STD


46 *
	$memıy
 (*
__»¡riù
 
__de¡
, cÚ¡ *__»¡riù 
__¤c
,

47 
size_t
 
__n
è
__THROW
 
	`__nÚnuÎ
 ((1, 2));

50 *
	$memmove
 (*
__de¡
, cÚ¡ *
__¤c
, 
size_t
 
__n
)

51 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

52 
__END_NAMESPACE_STD


57 #ià
defšed
 
__USE_SVID
 || defšed 
__USE_BSD
 || defšed 
__USE_XOPEN


58 *
	$memcıy
 (*
__»¡riù
 
__de¡
, cÚ¡ *__»¡riù 
__¤c
,

59 
__c
, 
size_t
 
__n
)

60 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

64 
__BEGIN_NAMESPACE_STD


66 *
	$mem£t
 (*
__s
, 
__c
, 
size_t
 
__n
è
__THROW
 
	`__nÚnuÎ
 ((1));

69 
	$memcmp
 (cÚ¡ *
__s1
, cÚ¡ *
__s2
, 
size_t
 
__n
)

70 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

73 #ifdeà
__CORRECT_ISO_CPP_STRING_H_PROTO


76 *
	`memchr
 (*
__s
, 
__c
, 
size_t
 
__n
)

77 
__THROW
 
	`__asm
 ("memchr"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

78 cÚ¡ *
	`memchr
 (cÚ¡ *
__s
, 
__c
, 
size_t
 
__n
)

79 
__THROW
 
	`__asm
 ("memchr"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

81 #ifdeà
__OPTIMIZE__


82 
__ex‹º_®ways_šlše
 *

83 
	`memchr
 (*
__s
, 
__c
, 
size_t
 
__n
è
__THROW


85  
	`__butš_memchr
 (
__s
, 
__c
, 
__n
);

88 
__ex‹º_®ways_šlše
 const *

89 
	`memchr
 (cÚ¡ *
__s
, 
__c
, 
size_t
 
__n
è
__THROW


91  
	`__butš_memchr
 (
__s
, 
__c
, 
__n
);

94 
	}
}

96 *
	$memchr
 (cÚ¡ *
__s
, 
__c
, 
size_t
 
__n
)

97 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

99 
__END_NAMESPACE_STD


101 #ifdeà
__USE_GNU


104 #ifdeà
__CORRECT_ISO_CPP_STRING_H_PROTO


105 "C++" *
	$¿wmemchr
 (*
__s
, 
__c
)

106 
__THROW
 
	`__asm
 ("¿wmemchr"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

107 "C++" cÚ¡ *
	$¿wmemchr
 (cÚ¡ *
__s
, 
__c
)

108 
__THROW
 
	`__asm
 ("¿wmemchr"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

110 *
	$¿wmemchr
 (cÚ¡ *
__s
, 
__c
)

111 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

115 #ifdeà
__CORRECT_ISO_CPP_STRING_H_PROTO


116 "C++" *
	$memrchr
 (*
__s
, 
__c
, 
size_t
 
__n
)

117 
__THROW
 
	`__asm
 ("memrchr"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

118 "C++" cÚ¡ *
	$memrchr
 (cÚ¡ *
__s
, 
__c
, 
size_t
 
__n
)

119 
__THROW
 
	`__asm
 ("memrchr"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

121 *
	$memrchr
 (cÚ¡ *
__s
, 
__c
, 
size_t
 
__n
)

122 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

127 
__BEGIN_NAMESPACE_STD


129 *
	$¡rıy
 (*
__»¡riù
 
__de¡
, cÚ¡ *__»¡riù 
__¤c
)

130 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

132 *
	$¡ºıy
 (*
__»¡riù
 
__de¡
,

133 cÚ¡ *
__»¡riù
 
__¤c
, 
size_t
 
__n
)

134 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

137 *
	$¡rÿt
 (*
__»¡riù
 
__de¡
, cÚ¡ *__»¡riù 
__¤c
)

138 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

140 *
	$¡ºÿt
 (*
__»¡riù
 
__de¡
, cÚ¡ *__»¡riù 
__¤c
,

141 
size_t
 
__n
è
__THROW
 
	`__nÚnuÎ
 ((1, 2));

144 
	$¡rcmp
 (cÚ¡ *
__s1
, cÚ¡ *
__s2
)

145 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

147 
	$¡ºcmp
 (cÚ¡ *
__s1
, cÚ¡ *
__s2
, 
size_t
 
__n
)

148 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

151 
	$¡rcŞl
 (cÚ¡ *
__s1
, cÚ¡ *
__s2
)

152 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

154 
size_t
 
	$¡rxäm
 (*
__»¡riù
 
__de¡
,

155 cÚ¡ *
__»¡riù
 
__¤c
, 
size_t
 
__n
)

156 
__THROW
 
	`__nÚnuÎ
 ((2));

157 
__END_NAMESPACE_STD


159 #ifdeà
__USE_XOPEN2K8


163 
	~<xloÿË.h
>

166 
	$¡rcŞl_l
 (cÚ¡ *
__s1
, cÚ¡ *
__s2
, 
__loÿË_t
 
__l
)

167 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2, 3));

169 
size_t
 
	$¡rxäm_l
 (*
__de¡
, cÚ¡ *
__¤c
, 
size_t
 
__n
,

170 
__loÿË_t
 
__l
è
__THROW
 
	`__nÚnuÎ
 ((2, 4));

173 #ià
defšed
 
__USE_SVID
 || defšed 
__USE_BSD
 || defšed 
__USE_XOPEN_EXTENDED
 \

174 || 
defšed
 
__USE_XOPEN2K8


176 *
	$¡rdup
 (cÚ¡ *
__s
)

177 
__THROW
 
__©Œibu‹_m®loc__
 
	`__nÚnuÎ
 ((1));

183 #ià
defšed
 
__USE_XOPEN2K8


184 *
	$¡ºdup
 (cÚ¡ *
__¡ršg
, 
size_t
 
__n
)

185 
__THROW
 
__©Œibu‹_m®loc__
 
	`__nÚnuÎ
 ((1));

188 #ià
defšed
 
__USE_GNU
 && defšed 
__GNUC__


190 
	#¡rdu·
(
s
) \

191 (
__ex‹nsiÚ__
 \

193 cÚ¡ *
__Şd
 = (
s
); \

194 
size_t
 
__Ën
 = 
	`¡¾’
 (
__Şd
) + 1; \

195 *
__Ãw
 = (*è
	`__butš_®loÿ
 (
__Ën
); \

196 (*è
	`memıy
 (
__Ãw
, 
__Şd
, 
__Ën
); \

197 
	}
}))

	)

200 
	#¡ºdu·
(
s
, 
n
) \

201 (
__ex‹nsiÚ__
 \

203 cÚ¡ *
__Şd
 = (
s
); \

204 
size_t
 
__Ën
 = 
	`¡ºËn
 (
__Şd
, (
n
)); \

205 *
__Ãw
 = (*è
	`__butš_®loÿ
 (
__Ën
 + 1); \

206 
__Ãw
[
__Ën
] = '\0'; \

207 (*è
	`memıy
 (
__Ãw
, 
__Şd
, 
__Ën
); \

208 }))

	)

211 
	g__BEGIN_NAMESPACE_STD


213 #ifdeà
__CORRECT_ISO_CPP_STRING_H_PROTO


216 *
¡rchr
 (*
__s
, 
__c
)

217 
__THROW
 
__asm
 ("¡rchr"è
__©Œibu‹_pu»__
 
__nÚnuÎ
 ((1));

218 cÚ¡ *
¡rchr
 (cÚ¡ *
__s
, 
__c
)

219 
__THROW
 
__asm
 ("¡rchr"è
__©Œibu‹_pu»__
 
__nÚnuÎ
 ((1));

221 #ifdeà
__OPTIMIZE__


222 
__ex‹º_®ways_šlše
 *

223 
¡rchr
 (*
__s
, 
__c
è
	g__THROW


225  
__butš_¡rchr
 (
__s
, 
__c
);

228 
__ex‹º_®ways_šlše
 const *

229 
¡rchr
 (cÚ¡ *
__s
, 
__c
è
	g__THROW


231  
__butš_¡rchr
 (
__s
, 
__c
);

236 *
	$¡rchr
 (cÚ¡ *
__s
, 
__c
)

237 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

240 #ifdeà
__CORRECT_ISO_CPP_STRING_H_PROTO


243 *
	`¡¼chr
 (*
__s
, 
__c
)

244 
__THROW
 
	`__asm
 ("¡¼chr"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

245 cÚ¡ *
	`¡¼chr
 (cÚ¡ *
__s
, 
__c
)

246 
__THROW
 
	`__asm
 ("¡¼chr"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

248 #ifdeà
__OPTIMIZE__


249 
__ex‹º_®ways_šlše
 *

250 
	`¡¼chr
 (*
__s
, 
__c
è
__THROW


252  
	`__butš_¡¼chr
 (
__s
, 
__c
);

255 
__ex‹º_®ways_šlše
 const *

256 
	`¡¼chr
 (cÚ¡ *
__s
, 
__c
è
__THROW


258  
	`__butš_¡¼chr
 (
__s
, 
__c
);

261 
	}
}

263 *
	$¡¼chr
 (cÚ¡ *
__s
, 
__c
)

264 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

266 
__END_NAMESPACE_STD


268 #ifdeà
__USE_GNU


271 #ifdeà
__CORRECT_ISO_CPP_STRING_H_PROTO


272 "C++" *
	$¡rchºul
 (*
__s
, 
__c
)

273 
__THROW
 
	`__asm
 ("¡rchºul"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

274 "C++" cÚ¡ *
	$¡rchºul
 (cÚ¡ *
__s
, 
__c
)

275 
__THROW
 
	`__asm
 ("¡rchºul"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

277 *
	$¡rchºul
 (cÚ¡ *
__s
, 
__c
)

278 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

282 
__BEGIN_NAMESPACE_STD


285 
size_t
 
	$¡rc¥n
 (cÚ¡ *
__s
, cÚ¡ *
__»jeù
)

286 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

289 
size_t
 
	$¡r¥n
 (cÚ¡ *
__s
, cÚ¡ *
__acû±
)

290 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

292 #ifdeà
__CORRECT_ISO_CPP_STRING_H_PROTO


295 *
	`¡½brk
 (*
__s
, cÚ¡ *
__acû±
)

296 
__THROW
 
	`__asm
 ("¡½brk"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

297 cÚ¡ *
	`¡½brk
 (cÚ¡ *
__s
, cÚ¡ *
__acû±
)

298 
__THROW
 
	`__asm
 ("¡½brk"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

300 #ifdeà
__OPTIMIZE__


301 
__ex‹º_®ways_šlše
 *

302 
	`¡½brk
 (*
__s
, cÚ¡ *
__acû±
è
__THROW


304  
	`__butš_¡½brk
 (
__s
, 
__acû±
);

307 
__ex‹º_®ways_šlše
 const *

308 
	`¡½brk
 (cÚ¡ *
__s
, cÚ¡ *
__acû±
è
__THROW


310  
	`__butš_¡½brk
 (
__s
, 
__acû±
);

313 
	}
}

315 *
	$¡½brk
 (cÚ¡ *
__s
, cÚ¡ *
__acû±
)

316 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

319 #ifdeà
__CORRECT_ISO_CPP_STRING_H_PROTO


322 *
	`¡r¡r
 (*
__hay¡ack
, cÚ¡ *
__ÃedË
)

323 
__THROW
 
	`__asm
 ("¡r¡r"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

324 cÚ¡ *
	`¡r¡r
 (cÚ¡ *
__hay¡ack
, cÚ¡ *
__ÃedË
)

325 
__THROW
 
	`__asm
 ("¡r¡r"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

327 #ifdeà
__OPTIMIZE__


328 
__ex‹º_®ways_šlše
 *

329 
	`¡r¡r
 (*
__hay¡ack
, cÚ¡ *
__ÃedË
è
__THROW


331  
	`__butš_¡r¡r
 (
__hay¡ack
, 
__ÃedË
);

334 
__ex‹º_®ways_šlše
 const *

335 
	`¡r¡r
 (cÚ¡ *
__hay¡ack
, cÚ¡ *
__ÃedË
è
__THROW


337  
	`__butš_¡r¡r
 (
__hay¡ack
, 
__ÃedË
);

340 
	}
}

342 *
	$¡r¡r
 (cÚ¡ *
__hay¡ack
, cÚ¡ *
__ÃedË
)

343 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

348 *
	$¡¹ok
 (*
__»¡riù
 
__s
, cÚ¡ *__»¡riù 
__d–im
)

349 
__THROW
 
	`__nÚnuÎ
 ((2));

350 
__END_NAMESPACE_STD


354 *
	$__¡¹ok_r
 (*
__»¡riù
 
__s
,

355 cÚ¡ *
__»¡riù
 
__d–im
,

356 **
__»¡riù
 
__§ve_±r
)

357 
__THROW
 
	`__nÚnuÎ
 ((2, 3));

358 #ià
defšed
 
__USE_POSIX
 || defšed 
__USE_MISC


359 *
	$¡¹ok_r
 (*
__»¡riù
 
__s
, cÚ¡ *__»¡riù 
__d–im
,

360 **
__»¡riù
 
__§ve_±r
)

361 
__THROW
 
	`__nÚnuÎ
 ((2, 3));

364 #ifdeà
__USE_GNU


366 #ifdeà
__CORRECT_ISO_CPP_STRING_H_PROTO


367 "C++" *
	$¡rÿ£¡r
 (*
__hay¡ack
, cÚ¡ *
__ÃedË
)

368 
__THROW
 
	`__asm
 ("¡rÿ£¡r"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

369 "C++" cÚ¡ *
	$¡rÿ£¡r
 (cÚ¡ *
__hay¡ack
,

370 cÚ¡ *
__ÃedË
)

371 
__THROW
 
	`__asm
 ("¡rÿ£¡r"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

373 *
	$¡rÿ£¡r
 (cÚ¡ *
__hay¡ack
, cÚ¡ *
__ÃedË
)

374 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

378 #ifdeà
__USE_GNU


382 *
	$memmem
 (cÚ¡ *
__hay¡ack
, 
size_t
 
__hay¡ackËn
,

383 cÚ¡ *
__ÃedË
, 
size_t
 
__ÃedËËn
)

384 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 3));

388 *
	$__mempıy
 (*
__»¡riù
 
__de¡
,

389 cÚ¡ *
__»¡riù
 
__¤c
, 
size_t
 
__n
)

390 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

391 *
	$mempıy
 (*
__»¡riù
 
__de¡
,

392 cÚ¡ *
__»¡riù
 
__¤c
, 
size_t
 
__n
)

393 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

397 
__BEGIN_NAMESPACE_STD


399 
size_t
 
	$¡¾’
 (cÚ¡ *
__s
)

400 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

401 
__END_NAMESPACE_STD


403 #ifdef 
__USE_XOPEN2K8


406 
size_t
 
	$¡ºËn
 (cÚ¡ *
__¡ršg
, 
size_t
 
__maxËn
)

407 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

411 
__BEGIN_NAMESPACE_STD


413 *
	$¡»¼Ü
 (
__”ºum
è
__THROW
;

414 
__END_NAMESPACE_STD


415 #ià
defšed
 
__USE_XOPEN2K
 || defšed 
__USE_MISC


423 #ià
defšed
 
__USE_XOPEN2K
 && !defšed 
__USE_GNU


426 #ifdeà
__REDIRECT_NTH


427 
	`__REDIRECT_NTH
 (
¡»¼Ü_r
,

428 (
__”ºum
, *
__buf
, 
size_t
 
__buæ’
),

429 
__xpg_¡»¼Ü_r
è
	`__nÚnuÎ
 ((2));

431 
	$__xpg_¡»¼Ü_r
 (
__”ºum
, *
__buf
, 
size_t
 
__buæ’
)

432 
__THROW
 
	`__nÚnuÎ
 ((2));

433 
	#¡»¼Ü_r
 
__xpg_¡»¼Ü_r


	)

438 *
	$¡»¼Ü_r
 (
__”ºum
, *
__buf
, 
size_t
 
__buæ’
)

439 
__THROW
 
	`__nÚnuÎ
 ((2)è
__wur
;

443 #ifdeà
__USE_XOPEN2K8


445 *
	$¡»¼Ü_l
 (
__”ºum
, 
__loÿË_t
 
__l
è
__THROW
;

451 
	$__bz”o
 (*
__s
, 
size_t
 
__n
è
__THROW
 
	`__nÚnuÎ
 ((1));

453 #ifdeà
__USE_BSD


455 
	$bcİy
 (cÚ¡ *
__¤c
, *
__de¡
, 
size_t
 
__n
)

456 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

459 
	$bz”o
 (*
__s
, 
size_t
 
__n
è
__THROW
 
	`__nÚnuÎ
 ((1));

462 
	$bcmp
 (cÚ¡ *
__s1
, cÚ¡ *
__s2
, 
size_t
 
__n
)

463 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

466 #ifdeà
__CORRECT_ISO_CPP_STRING_H_PROTO


469 *
	`šdex
 (*
__s
, 
__c
)

470 
__THROW
 
	`__asm
 ("šdex"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

471 cÚ¡ *
	`šdex
 (cÚ¡ *
__s
, 
__c
)

472 
__THROW
 
	`__asm
 ("šdex"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

474 #ià
defšed
 
__OPTIMIZE__
 && !defšed 
__CORRECT_ISO_CPP_STRINGS_H_PROTO


475 
__ex‹º_®ways_šlše
 *

476 
	`šdex
 (*
__s
, 
__c
è
__THROW


478  
	`__butš_šdex
 (
__s
, 
__c
);

481 
__ex‹º_®ways_šlše
 const *

482 
	`šdex
 (cÚ¡ *
__s
, 
__c
è
__THROW


484  
	`__butš_šdex
 (
__s
, 
__c
);

487 
	}
}

489 *
	$šdex
 (cÚ¡ *
__s
, 
__c
)

490 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

494 #ifdeà
__CORRECT_ISO_CPP_STRING_H_PROTO


497 *
	`ršdex
 (*
__s
, 
__c
)

498 
__THROW
 
	`__asm
 ("ršdex"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

499 cÚ¡ *
	`ršdex
 (cÚ¡ *
__s
, 
__c
)

500 
__THROW
 
	`__asm
 ("ršdex"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

502 #ià
defšed
 
__OPTIMIZE__
 && !defšed 
__CORRECT_ISO_CPP_STRINGS_H_PROTO


503 
__ex‹º_®ways_šlše
 *

504 
	`ršdex
 (*
__s
, 
__c
è
__THROW


506  
	`__butš_ršdex
 (
__s
, 
__c
);

509 
__ex‹º_®ways_šlše
 const *

510 
	`ršdex
 (cÚ¡ *
__s
, 
__c
è
__THROW


512  
	`__butš_ršdex
 (
__s
, 
__c
);

515 
	}
}

517 *
	$ršdex
 (cÚ¡ *
__s
, 
__c
)

518 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

523 
	$ffs
 (
__i
è
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
));

527 #ifdef 
__USE_GNU


528 
	$ff¦
 (
__l
è
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
));

529 
__ex‹nsiÚ__
 
	$ff¦l
 (
__Î
)

530 
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
));

534 
	$¡rÿ£cmp
 (cÚ¡ *
__s1
, cÚ¡ *
__s2
)

535 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

538 
	$¡ºÿ£cmp
 (cÚ¡ *
__s1
, cÚ¡ *
__s2
, 
size_t
 
__n
)

539 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

542 #ifdef 
__USE_GNU


545 
	$¡rÿ£cmp_l
 (cÚ¡ *
__s1
, cÚ¡ *
__s2
,

546 
__loÿË_t
 
__loc
)

547 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2, 3));

549 
	$¡ºÿ£cmp_l
 (cÚ¡ *
__s1
, cÚ¡ *
__s2
,

550 
size_t
 
__n
, 
__loÿË_t
 
__loc
)

551 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2, 4));

554 #ifdef 
__USE_BSD


557 *
	$¡r£p
 (**
__»¡riù
 
__¡ršgp
,

558 cÚ¡ *
__»¡riù
 
__d–im
)

559 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

562 #ifdef 
__USE_XOPEN2K8


564 *
	$¡rsigÇl
 (
__sig
è
__THROW
;

567 *
	$__¡pıy
 (*
__»¡riù
 
__de¡
, cÚ¡ *__»¡riù 
__¤c
)

568 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

569 *
	$¡pıy
 (*
__»¡riù
 
__de¡
, cÚ¡ *__»¡riù 
__¤c
)

570 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

574 *
	$__¡²ıy
 (*
__»¡riù
 
__de¡
,

575 cÚ¡ *
__»¡riù
 
__¤c
, 
size_t
 
__n
)

576 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

577 *
	$¡²ıy
 (*
__»¡riù
 
__de¡
,

578 cÚ¡ *
__»¡riù
 
__¤c
, 
size_t
 
__n
)

579 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

582 #ifdef 
__USE_GNU


584 
	$¡rv”scmp
 (cÚ¡ *
__s1
, cÚ¡ *
__s2
)

585 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

588 *
	$¡räy
 (*
__¡ršg
è
__THROW
 
	`__nÚnuÎ
 ((1));

591 *
	$memäob
 (*
__s
, 
size_t
 
__n
è
__THROW
 
	`__nÚnuÎ
 ((1));

593 #iâdeà
ba£Çme


598 #ifdeà
__CORRECT_ISO_CPP_STRING_H_PROTO


599 "C++" *
	$ba£Çme
 (*
__f’ame
)

600 
__THROW
 
	`__asm
 ("ba£Çme"è
	`__nÚnuÎ
 ((1));

601 "C++" cÚ¡ *
	$ba£Çme
 (cÚ¡ *
__f’ame
)

602 
__THROW
 
	`__asm
 ("ba£Çme"è
	`__nÚnuÎ
 ((1));

604 *
	$ba£Çme
 (cÚ¡ *
__f’ame
è
__THROW
 
	`__nÚnuÎ
 ((1));

610 #ià
defšed
 
__GNUC__
 && __GNUC__ >= 2

611 #ià
defšed
 
__OPTIMIZE__
 && !defšed 
__OPTIMIZE_SIZE__
 \

612 && !
defšed
 
__NO_INLINE__
 && !defšed 
__ılu¥lus


632 
	~<b™s/¡ršg.h
>

635 
	~<b™s/¡ršg2.h
>

638 #ià
__USE_FORTIFY_LEVEL
 > 0 && 
defšed
 
__fÜtify_funùiÚ


640 
	~<b™s/¡ršg3.h
>

644 
__END_DECLS


	@/usr/include/time.h

22 #iâdef 
_TIME_H


24 #ià(! 
defšed
 
__Ãed_time_t
 && !defšed 
__Ãed_şock_t
 && \

25 ! 
defšed
 
	g__Ãed_time¥ec
)

26 
	#_TIME_H
 1

	)

27 
	~<ã©u»s.h
>

29 
	g__BEGIN_DECLS


33 #ifdef 
_TIME_H


35 
	#__Ãed_size_t


	)

36 
	#__Ãed_NULL


	)

37 
	~<¡ddef.h
>

41 
	~<b™s/time.h
>

44 #ià!
defšed
 
__STRICT_ANSI__
 && !defšed 
__USE_XOPEN2K


45 #iâdeà
CLK_TCK


46 
	#CLK_TCK
 
CLOCKS_PER_SEC


	)

52 #ià!
defšed
 
__şock_t_defšed
 && (defšed 
_TIME_H
 || defšed 
__Ãed_şock_t
)

53 
	#__şock_t_defšed
 1

	)

55 
	~<b™s/ty³s.h
>

57 
__BEGIN_NAMESPACE_STD


59 
__şock_t
 
	tşock_t
;

60 
	g__END_NAMESPACE_STD


61 #ià
defšed
 
__USE_XOPEN
 || defšed 
__USE_POSIX
 || defšed 
__USE_MISC


62 
	$__USING_NAMESPACE_STD
(
şock_t
)

66 #undeà
__Ãed_şock_t


68 #ià!
defšed
 
__time_t_defšed
 && (defšed 
_TIME_H
 || defšed 
__Ãed_time_t
)

69 
	#__time_t_defšed
 1

	)

71 
	~<b™s/ty³s.h
>

73 
__BEGIN_NAMESPACE_STD


75 
__time_t
 
	ttime_t
;

76 
__END_NAMESPACE_STD


77 #ià
defšed
 
__USE_POSIX
 || defšed 
__USE_MISC
 || defšed 
__USE_SVID


78 
	$__USING_NAMESPACE_STD
(
time_t
)

82 #undeà
__Ãed_time_t


84 #ià!
defšed
 
__şockid_t_defšed
 && \

85 ((
defšed
 
_TIME_H
 && defšed 
__USE_POSIX199309
è|| defšed 
__Ãed_şockid_t
)

86 
	#__şockid_t_defšed
 1

	)

88 
	~<b™s/ty³s.h
>

91 
__şockid_t
 
	tşockid_t
;

94 #undeà
__şockid_time_t


96 #ià!
defšed
 
__tim”_t_defšed
 && \

97 ((
defšed
 
_TIME_H
 && defšed 
__USE_POSIX199309
è|| defšed 
__Ãed_tim”_t
)

98 
	#__tim”_t_defšed
 1

	)

100 
	~<b™s/ty³s.h
>

103 
__tim”_t
 
	ttim”_t
;

106 #undeà
__Ãed_tim”_t


109 #ià(!
defšed
 
__time¥ec_defšed
 \

110 && ((
defšed
 
_TIME_H
 \

111 && (
defšed
 
__USE_POSIX199309
 || defšed 
__USE_MISC
 \

112 || 
defšed
 
__USE_ISOC11
)) \

113 || 
defšed
 
__Ãed_time¥ec
))

114 
	#__time¥ec_defšed
 1

	)

116 
	~<b™s/ty³s.h
>

120 
	stime¥ec


122 
__time_t
 
tv_£c
;

123 
__sysÿÎ_¦Úg_t
 
tv_n£c
;

127 #undeà
__Ãed_time¥ec


130 #ifdef 
_TIME_H


131 
__BEGIN_NAMESPACE_STD


133 
	stm


135 
tm_£c
;

136 
tm_mš
;

137 
tm_hour
;

138 
tm_mday
;

139 
tm_mÚ
;

140 
tm_y—r
;

141 
tm_wday
;

142 
tm_yday
;

143 
tm_isd¡
;

145 #ifdef 
__USE_BSD


146 
tm_gmtoff
;

147 cÚ¡ *
tm_zÚe
;

149 
__tm_gmtoff
;

150 cÚ¡ *
__tm_zÚe
;

153 
__END_NAMESPACE_STD


154 #ià
defšed
 
__USE_XOPEN
 || defšed 
__USE_POSIX
 || defšed 
__USE_MISC


155 
	$__USING_NAMESPACE_STD
(
tm
)

159 #ifdeà
__USE_POSIX199309


161 
	s™im”¥ec


163 
time¥ec
 
™_š‹rv®
;

164 
time¥ec
 
™_v®ue
;

168 
sigev’t
;

172 #ifdeà
__USE_XOPEN2K


173 #iâdeà
__pid_t_defšed


174 
__pid_t
 
	tpid_t
;

175 
	#__pid_t_defšed


	)

180 #ifdeà
__USE_ISOC11


182 
	#TIME_UTC
 1

	)

186 
__BEGIN_NAMESPACE_STD


189 
şock_t
 
	$şock
 (è
__THROW
;

192 
time_t
 
	$time
 (
time_t
 *
__tim”
è
__THROW
;

195 
	$difáime
 (
time_t
 
__time1
,ime_ˆ
__time0
)

196 
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
));

199 
time_t
 
	$mktime
 (
tm
 *
__
è
__THROW
;

205 
size_t
 
	$¡ráime
 (*
__»¡riù
 
__s
, 
size_t
 
__maxsize
,

206 cÚ¡ *
__»¡riù
 
__fÜm©
,

207 cÚ¡ 
tm
 *
__»¡riù
 
__
è
__THROW
;

208 
__END_NAMESPACE_STD


210 #ifdeà
__USE_XOPEN


213 *
	$¡½time
 (cÚ¡ *
__»¡riù
 
__s
,

214 cÚ¡ *
__»¡riù
 
__fmt
, 
tm
 *
__
)

215 
__THROW
;

218 #ifdeà
__USE_XOPEN2K8


221 
	~<xloÿË.h
>

223 
size_t
 
	$¡ráime_l
 (*
__»¡riù
 
__s
, 
size_t
 
__maxsize
,

224 cÚ¡ *
__»¡riù
 
__fÜm©
,

225 cÚ¡ 
tm
 *
__»¡riù
 
__
,

226 
__loÿË_t
 
__loc
è
__THROW
;

229 #ifdeà
__USE_GNU


230 *
	$¡½time_l
 (cÚ¡ *
__»¡riù
 
__s
,

231 cÚ¡ *
__»¡riù
 
__fmt
, 
tm
 *
__
,

232 
__loÿË_t
 
__loc
è
__THROW
;

236 
__BEGIN_NAMESPACE_STD


239 
tm
 *
	$gmtime
 (cÚ¡ 
time_t
 *
__tim”
è
__THROW
;

243 
tm
 *
	$loÿÉime
 (cÚ¡ 
time_t
 *
__tim”
è
__THROW
;

244 
__END_NAMESPACE_STD


246 #ià
defšed
 
__USE_POSIX
 || defšed 
__USE_MISC


249 
tm
 *
	$gmtime_r
 (cÚ¡ 
time_t
 *
__»¡riù
 
__tim”
,

250 
tm
 *
__»¡riù
 
__
è
__THROW
;

254 
tm
 *
	$loÿÉime_r
 (cÚ¡ 
time_t
 *
__»¡riù
 
__tim”
,

255 
tm
 *
__»¡riù
 
__
è
__THROW
;

258 
__BEGIN_NAMESPACE_STD


261 *
	$asùime
 (cÚ¡ 
tm
 *
__
è
__THROW
;

264 *
	$ùime
 (cÚ¡ 
time_t
 *
__tim”
è
__THROW
;

265 
__END_NAMESPACE_STD


267 #ià
defšed
 
__USE_POSIX
 || defšed 
__USE_MISC


272 *
	$asùime_r
 (cÚ¡ 
tm
 *
__»¡riù
 
__
,

273 *
__»¡riù
 
__buf
è
__THROW
;

276 *
	$ùime_r
 (cÚ¡ 
time_t
 *
__»¡riù
 
__tim”
,

277 *
__»¡riù
 
__buf
è
__THROW
;

282 *
__tzÇme
[2];

283 
__daylight
;

284 
__timezÚe
;

287 #ifdef 
__USE_POSIX


289 *
tzÇme
[2];

293 
	$tz£t
 (è
__THROW
;

296 #ià
defšed
 
__USE_SVID
 || defšed 
__USE_XOPEN


297 
daylight
;

298 
timezÚe
;

301 #ifdeà
__USE_SVID


304 
	$¡ime
 (cÚ¡ 
time_t
 *
__wh’
è
__THROW
;

310 
	#__i¦—p
(
y—r
) \

311 ((
y—r
è% 4 =ğ0 && ((y—rè% 100 !ğ0 || (y—rè% 400 =ğ0))

	)

314 #ifdeà
__USE_MISC


319 
time_t
 
	$timegm
 (
tm
 *
__
è
__THROW
;

322 
time_t
 
	$tim–oÿl
 (
tm
 *
__
è
__THROW
;

325 
	$dysize
 (
__y—r
è
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
));

329 #ifdeà
__USE_POSIX199309


334 
	`Çno¦“p
 (cÚ¡ 
time¥ec
 *
__»que¡ed_time
,

335 
time¥ec
 *
__»maššg
);

339 
	$şock_g‘»s
 (
şockid_t
 
__şock_id
, 
time¥ec
 *
__»s
è
__THROW
;

342 
	$şock_g‘time
 (
şockid_t
 
__şock_id
, 
time¥ec
 *
__
è
__THROW
;

345 
	$şock_£‰ime
 (
şockid_t
 
__şock_id
, cÚ¡ 
time¥ec
 *
__
)

346 
__THROW
;

348 #ifdeà
__USE_XOPEN2K


353 
	`şock_Çno¦“p
 (
şockid_t
 
__şock_id
, 
__æags
,

354 cÚ¡ 
time¥ec
 *
__»q
,

355 
time¥ec
 *
__»m
);

358 
	$şock_g‘ıuşockid
 (
pid_t
 
__pid
, 
şockid_t
 *
__şock_id
è
__THROW
;

363 
	$tim”_ü—‹
 (
şockid_t
 
__şock_id
,

364 
sigev’t
 *
__»¡riù
 
__evp
,

365 
tim”_t
 *
__»¡riù
 
__tim”id
è
__THROW
;

368 
	$tim”_d–‘e
 (
tim”_t
 
__tim”id
è
__THROW
;

371 
	$tim”_£‰ime
 (
tim”_t
 
__tim”id
, 
__æags
,

372 cÚ¡ 
™im”¥ec
 *
__»¡riù
 
__v®ue
,

373 
™im”¥ec
 *
__»¡riù
 
__ov®ue
è
__THROW
;

376 
	$tim”_g‘time
 (
tim”_t
 
__tim”id
, 
™im”¥ec
 *
__v®ue
)

377 
__THROW
;

380 
	$tim”_g‘ov”run
 (
tim”_t
 
__tim”id
è
__THROW
;

384 #ifdeà
__USE_ISOC11


386 
	$time¥ec_g‘
 (
time¥ec
 *
__ts
, 
__ba£
)

387 
__THROW
 
	`__nÚnuÎ
 ((1));

391 #ifdeà
__USE_XOPEN_EXTENDED


403 
g‘d©e_”r
;

412 
tm
 *
	`g‘d©e
 (cÚ¡ *
__¡ršg
);

415 #ifdeà
__USE_GNU


426 
	`g‘d©e_r
 (cÚ¡ *
__»¡riù
 
__¡ršg
,

427 
tm
 *
__»¡riù
 
__»sbuå
);

430 
__END_DECLS


	@/usr/include/zlib.h

31 #iâdeà
ZLIB_H


32 
	#ZLIB_H


	)

34 
	~"zcÚf.h
"

36 #ifdeà
__ılu¥lus


40 
	#ZLIB_VERSION
 "1.2.8"

	)

41 
	#ZLIB_VERNUM
 0x1280

	)

42 
	#ZLIB_VER_MAJOR
 1

	)

43 
	#ZLIB_VER_MINOR
 2

	)

44 
	#ZLIB_VER_REVISION
 8

	)

45 
	#ZLIB_VER_SUBREVISION
 0

	)

80 
voidpf
 (*
	t®loc_func
è
	tOF
((
	tvoidpf
 
	tİaque
, 
	tuIÁ
 
	t™ems
, uIÁ 
	tsize
));

81 (*
ä“_func
è
	tOF
((
	tvoidpf
 
	tİaque
, voidpà
	tadd»ss
));

83 
š‹º®_¡©e
;

85 
	sz_¡»am_s
 {

86 
z_cÚ¡
 
By‹f
 *
Ãxt_š
;

87 
uIÁ
 
ava_š
;

88 
uLÚg
 
tÙ®_š
;

90 
By‹f
 *
Ãxt_out
;

91 
uIÁ
 
ava_out
;

92 
uLÚg
 
tÙ®_out
;

94 
z_cÚ¡
 *
msg
;

95 
š‹º®_¡©e
 
FAR
 *
¡©e
;

97 
®loc_func
 
z®loc
;

98 
ä“_func
 
zä“
;

99 
voidpf
 
İaque
;

101 
d©a_ty³
;

102 
uLÚg
 
adËr
;

103 
uLÚg
 
»£rved
;

104 } 
	tz_¡»am
;

106 
z_¡»am
 
	tFAR
 *
	tz_¡»amp
;

112 
	sgz_h—d”_s
 {

113 
‹xt
;

114 
uLÚg
 
time
;

115 
xæags
;

116 
os
;

117 
By‹f
 *
exŒa
;

118 
uIÁ
 
exŒa_Ën
;

119 
uIÁ
 
exŒa_max
;

120 
By‹f
 *
Çme
;

121 
uIÁ
 
Çme_max
;

122 
By‹f
 *
comm’t
;

123 
uIÁ
 
comm_max
;

124 
hüc
;

125 
dÚe
;

127 } 
	tgz_h—d”
;

129 
gz_h—d”
 
	tFAR
 *
	tgz_h—d”p
;

164 
	#Z_NO_FLUSH
 0

	)

165 
	#Z_PARTIAL_FLUSH
 1

	)

166 
	#Z_SYNC_FLUSH
 2

	)

167 
	#Z_FULL_FLUSH
 3

	)

168 
	#Z_FINISH
 4

	)

169 
	#Z_BLOCK
 5

	)

170 
	#Z_TREES
 6

	)

173 
	#Z_OK
 0

	)

174 
	#Z_STREAM_END
 1

	)

175 
	#Z_NEED_DICT
 2

	)

176 
	#Z_ERRNO
 (-1)

	)

177 
	#Z_STREAM_ERROR
 (-2)

	)

178 
	#Z_DATA_ERROR
 (-3)

	)

179 
	#Z_MEM_ERROR
 (-4)

	)

180 
	#Z_BUF_ERROR
 (-5)

	)

181 
	#Z_VERSION_ERROR
 (-6)

	)

186 
	#Z_NO_COMPRESSION
 0

	)

187 
	#Z_BEST_SPEED
 1

	)

188 
	#Z_BEST_COMPRESSION
 9

	)

189 
	#Z_DEFAULT_COMPRESSION
 (-1)

	)

192 
	#Z_FILTERED
 1

	)

193 
	#Z_HUFFMAN_ONLY
 2

	)

194 
	#Z_RLE
 3

	)

195 
	#Z_FIXED
 4

	)

196 
	#Z_DEFAULT_STRATEGY
 0

	)

199 
	#Z_BINARY
 0

	)

200 
	#Z_TEXT
 1

	)

201 
	#Z_ASCII
 
Z_TEXT


	)

202 
	#Z_UNKNOWN
 2

	)

205 
	#Z_DEFLATED
 8

	)

208 
	#Z_NULL
 0

	)

210 
	#zlib_v”siÚ
 
	`zlibV”siÚ
()

	)

216 
ZEXTERN
 cÚ¡ * 
ZEXPORT
 
zlibV”siÚ
 
OF
(());

246 
ZEXTERN
 
ZEXPORT
 
deæ©e
 
OF
((
z_¡»amp
 
¡rm
, 
æush
));

353 
ZEXTERN
 
ZEXPORT
 
deæ©eEnd
 
OF
((
z_¡»amp
 
¡rm
));

392 
ZEXTERN
 
ZEXPORT
 
šæ©e
 
OF
((
z_¡»amp
 
¡rm
, 
æush
));

508 
ZEXTERN
 
ZEXPORT
 
šæ©eEnd
 
OF
((
z_¡»amp
 
¡rm
));

587 
ZEXTERN
 
ZEXPORT
 
deæ©eS‘DiùiÚ¬y
 
OF
((
z_¡»amp
 
¡rm
,

588 cÚ¡ 
By‹f
 *
diùiÚ¬y
,

589 
uIÁ
 
diùL’gth
));

631 
ZEXTERN
 
ZEXPORT
 
deæ©eCİy
 
OF
((
z_¡»amp
 
de¡
,

632 
z_¡»amp
 
sourû
));

649 
ZEXTERN
 
ZEXPORT
 
deæ©eRe£t
 
OF
((
z_¡»amp
 
¡rm
));

660 
ZEXTERN
 
ZEXPORT
 
deæ©eP¬ams
 
OF
((
z_¡»amp
 
¡rm
,

661 
Ëv–
,

662 
¡¿‹gy
));

681 
ZEXTERN
 
ZEXPORT
 
deæ©eTuÃ
 
OF
((
z_¡»amp
 
¡rm
,

682 
good_Ëngth
,

683 
max_Ïzy
,

684 
niû_Ëngth
,

685 
max_chaš
));

698 
ZEXTERN
 
uLÚg
 
ZEXPORT
 
deæ©eBound
 
OF
((
z_¡»amp
 
¡rm
,

699 
uLÚg
 
sourûL’
));

713 
ZEXTERN
 
ZEXPORT
 
deæ©eP’dšg
 
OF
((
z_¡»amp
 
¡rm
,

714 *
³ndšg
,

715 *
b™s
));

728 
ZEXTERN
 
ZEXPORT
 
deæ©ePrime
 
OF
((
z_¡»amp
 
¡rm
,

729 
b™s
,

730 
v®ue
));

745 
ZEXTERN
 
ZEXPORT
 
deæ©eS‘H—d”
 
OF
((
z_¡»amp
 
¡rm
,

746 
gz_h—d”p
 
h—d
));

819 
ZEXTERN
 
ZEXPORT
 
šæ©eS‘DiùiÚ¬y
 
OF
((
z_¡»amp
 
¡rm
,

820 cÚ¡ 
By‹f
 *
diùiÚ¬y
,

821 
uIÁ
 
diùL’gth
));

842 
ZEXTERN
 
ZEXPORT
 
šæ©eG‘DiùiÚ¬y
 
OF
((
z_¡»amp
 
¡rm
,

843 
By‹f
 *
diùiÚ¬y
,

844 
uIÁ
 *
diùL’gth
));

857 
ZEXTERN
 
ZEXPORT
 
šæ©eSync
 
OF
((
z_¡»amp
 
¡rm
));

876 
ZEXTERN
 
ZEXPORT
 
šæ©eCİy
 
OF
((
z_¡»amp
 
de¡
,

877 
z_¡»amp
 
sourû
));

892 
ZEXTERN
 
ZEXPORT
 
šæ©eRe£t
 
OF
((
z_¡»amp
 
¡rm
));

902 
ZEXTERN
 
ZEXPORT
 
šæ©eRe£t2
 
OF
((
z_¡»amp
 
¡rm
,

903 
wšdowB™s
));

914 
ZEXTERN
 
ZEXPORT
 
šæ©ePrime
 
OF
((
z_¡»amp
 
¡rm
,

915 
b™s
,

916 
v®ue
));

935 
ZEXTERN
 
ZEXPORT
 
šæ©eM¬k
 
OF
((
z_¡»amp
 
¡rm
));

963 
ZEXTERN
 
ZEXPORT
 
šæ©eG‘H—d”
 
OF
((
z_¡»amp
 
¡rm
,

964 
gz_h—d”p
 
h—d
));

1025 (*
š_func
è
	tOF
((
	tFAR
 *,

1026 
	tz_cÚ¡
 
	tFAR
 * FAR *));

1027 (*
out_func
è
	tOF
((
	tFAR
 *, FAR *, ));

1029 
ZEXTERN
 
ZEXPORT
 
šæ©eBack
 
OF
((
z_¡»amp
 
¡rm
,

1030 
š_func
 
š
, 
FAR
 *
š_desc
,

1031 
out_func
 
out
, 
FAR
 *
out_desc
));

1099 
ZEXTERN
 
ZEXPORT
 
šæ©eBackEnd
 
OF
((
z_¡»amp
 
¡rm
));

1107 
ZEXTERN
 
uLÚg
 
ZEXPORT
 
zlibCompeFÏgs
 
OF
(());

1148 #iâdeà
Z_SOLO


1160 
ZEXTERN
 
ZEXPORT
 
com´ess
 
OF
((
By‹f
 *
de¡
, 
uLÚgf
 *
de¡L’
,

1161 cÚ¡ 
By‹f
 *
sourû
, 
uLÚg
 
sourûL’
));

1174 
ZEXTERN
 
ZEXPORT
 
com´ess2
 
OF
((
By‹f
 *
de¡
, 
uLÚgf
 *
de¡L’
,

1175 cÚ¡ 
By‹f
 *
sourû
, 
uLÚg
 
sourûL’
,

1176 
Ëv–
));

1190 
ZEXTERN
 
uLÚg
 
ZEXPORT
 
com´essBound
 
OF
((uLÚg 
sourûL’
));

1197 
ZEXTERN
 
ZEXPORT
 
uncom´ess
 
OF
((
By‹f
 *
de¡
, 
uLÚgf
 *
de¡L’
,

1198 cÚ¡ 
By‹f
 *
sourû
, 
uLÚg
 
sourûL’
));

1224 
gzFe_s
 *
	tgzFe
;

1264 
ZEXTERN
 
gzFe
 
ZEXPORT
 
gzdİ’
 
OF
((
fd
, cÚ¡ *
mode
));

1287 
ZEXTERN
 
ZEXPORT
 
gzbufãr
 
OF
((
gzFe
 
fe
, 
size
));

1304 
ZEXTERN
 
ZEXPORT
 
gz£¬ams
 
OF
((
gzFe
 
fe
, 
Ëv–
, 
¡¿‹gy
));

1313 
ZEXTERN
 
ZEXPORT
 
gz»ad
 
OF
((
gzFe
 
fe
, 
voidp
 
buf
, 
Ën
));

1341 
ZEXTERN
 
ZEXPORT
 
gzwr™e
 
OF
((
gzFe
 
fe
,

1342 
voidpc
 
buf
, 
Ën
));

1349 
ZEXTERN
 
ZEXPORTVA
 
gz´štf
 
Z_ARG
((
gzFe
 
fe
, cÚ¡ *
fÜm©
, ...));

1364 
ZEXTERN
 
ZEXPORT
 
gzputs
 
OF
((
gzFe
 
fe
, cÚ¡ *
s
));

1372 
ZEXTERN
 * 
ZEXPORT
 
gzg‘s
 
OF
((
gzFe
 
fe
, *
buf
, 
Ën
));

1385 
ZEXTERN
 
ZEXPORT
 
gzputc
 
OF
((
gzFe
 
fe
, 
c
));

1391 
ZEXTERN
 
ZEXPORT
 
gzg‘c
 
OF
((
gzFe
 
fe
));

1400 
ZEXTERN
 
ZEXPORT
 
gzung‘c
 
OF
((
c
, 
gzFe
 
fe
));

1412 
ZEXTERN
 
ZEXPORT
 
gzæush
 
OF
((
gzFe
 
fe
, 
æush
));

1447 
ZEXTERN
 
ZEXPORT
 
gz»wšd
 
OF
((
gzFe
 
fe
));

1475 
ZEXTERN
 
ZEXPORT
 
gzeof
 
OF
((
gzFe
 
fe
));

1490 
ZEXTERN
 
ZEXPORT
 
gzdœeù
 
OF
((
gzFe
 
fe
));

1511 
ZEXTERN
 
ZEXPORT
 
gzşo£
 
OF
((
gzFe
 
fe
));

1524 
ZEXTERN
 
ZEXPORT
 
gzşo£_r
 
OF
((
gzFe
 
fe
));

1525 
ZEXTERN
 
ZEXPORT
 
gzşo£_w
 
OF
((
gzFe
 
fe
));

1536 
ZEXTERN
 cÚ¡ * 
ZEXPORT
 
gz”rÜ
 
OF
((
gzFe
 
fe
, *
”ºum
));

1552 
ZEXTERN
 
ZEXPORT
 
gzş—»¼
 
OF
((
gzFe
 
fe
));

1569 
ZEXTERN
 
uLÚg
 
ZEXPORT
 
adËr32
 
OF
((uLÚg 
adËr
, cÚ¡ 
By‹f
 *
buf
, 
uIÁ
 
Ën
));

1600 
ZEXTERN
 
uLÚg
 
ZEXPORT
 
üc32
 
OF
((uLÚg 
üc
, cÚ¡ 
By‹f
 *
buf
, 
uIÁ
 
Ën
));

1633 
ZEXTERN
 
ZEXPORT
 
deæ©eIn™_
 
OF
((
z_¡»amp
 
¡rm
, 
Ëv–
,

1634 cÚ¡ *
v”siÚ
, 
¡»am_size
));

1635 
ZEXTERN
 
ZEXPORT
 
šæ©eIn™_
 
OF
((
z_¡»amp
 
¡rm
,

1636 cÚ¡ *
v”siÚ
, 
¡»am_size
));

1637 
ZEXTERN
 
ZEXPORT
 
deæ©eIn™2_
 
OF
((
z_¡»amp
 
¡rm
, 
Ëv–
, 
m‘hod
,

1638 
wšdowB™s
, 
memLev–
,

1639 
¡¿‹gy
, cÚ¡ *
v”siÚ
,

1640 
¡»am_size
));

1641 
ZEXTERN
 
ZEXPORT
 
šæ©eIn™2_
 
OF
((
z_¡»amp
 
¡rm
, 
wšdowB™s
,

1642 cÚ¡ *
v”siÚ
, 
¡»am_size
));

1643 
ZEXTERN
 
ZEXPORT
 
šæ©eBackIn™_
 
OF
((
z_¡»amp
 
¡rm
, 
wšdowB™s
,

1644 
FAR
 *
wšdow
,

1645 cÚ¡ *
v”siÚ
,

1646 
¡»am_size
));

1647 
	#deæ©eIn™
(
¡rm
, 
Ëv–
) \

1648 
	`deæ©eIn™_
((
¡rm
), (
Ëv–
), 
ZLIB_VERSION
, ()(
z_¡»am
))

	)

1649 
	#šæ©eIn™
(
¡rm
) \

1650 
	`šæ©eIn™_
((
¡rm
), 
ZLIB_VERSION
, ()(
z_¡»am
))

	)

1651 
	#deæ©eIn™2
(
¡rm
, 
Ëv–
, 
m‘hod
, 
wšdowB™s
, 
memLev–
, 
¡¿‹gy
) \

1652 
	`deæ©eIn™2_
((
¡rm
),(
Ëv–
),(
m‘hod
),(
wšdowB™s
),(
memLev–
),\

1653 (
¡¿‹gy
), 
ZLIB_VERSION
, ()(
z_¡»am
))

	)

1654 
	#šæ©eIn™2
(
¡rm
, 
wšdowB™s
) \

1655 
	`šæ©eIn™2_
((
¡rm
), (
wšdowB™s
), 
ZLIB_VERSION
, \

1656 ()(
z_¡»am
))

	)

1657 
	#šæ©eBackIn™
(
¡rm
, 
wšdowB™s
, 
wšdow
) \

1658 
	`šæ©eBackIn™_
((
¡rm
), (
wšdowB™s
), (
wšdow
), \

1659 
ZLIB_VERSION
, ()(
z_¡»am
))

	)

1661 #iâdeà
Z_SOLO


1670 
	sgzFe_s
 {

1671 
have
;

1672 *
Ãxt
;

1673 
z_off64_t
 
pos
;

1675 
ZEXTERN
 
ZEXPORT
 
gzg‘c_
 
OF
((
gzFe
 
fe
));

1676 #ifdeà
Z_PREFIX_SET


1677 #undeà
z_gzg‘c


1678 
	#z_gzg‘c
(
g
) \

1679 ((
g
)->
have
 ? ((g)->have--, (g)->
pos
++, *((g)->
Ãxt
)++è: 
	`gzg‘c
(g))

	)

1681 
	#gzg‘c
(
g
) \

1682 ((
g
)->
have
 ? ((g)->have--, (g)->
pos
++, *((g)->
Ãxt
)++è: 
	`gzg‘c
(g))

	)

1691 #ifdeà
Z_LARGE64


1692 
ZEXTERN
 
gzFe
 
ZEXPORT
 
gzİ’64
 
OF
((const *, const *));

1693 
ZEXTERN
 
z_off64_t
 
ZEXPORT
 
gz£ek64
 
OF
((
gzFe
, z_off64_t, ));

1694 
ZEXTERN
 
z_off64_t
 
ZEXPORT
 
gz‹Î64
 
OF
((
gzFe
));

1695 
ZEXTERN
 
z_off64_t
 
ZEXPORT
 
gzoff£t64
 
OF
((
gzFe
));

1696 
ZEXTERN
 
uLÚg
 
ZEXPORT
 
adËr32_combše64
 
OF
((uLÚg, uLÚg, 
z_off64_t
));

1697 
ZEXTERN
 
uLÚg
 
ZEXPORT
 
üc32_combše64
 
OF
((uLÚg, uLÚg, 
z_off64_t
));

1700 #ià!
defšed
(
ZLIB_INTERNAL
è&& defšed(
Z_WANT64
)

1701 #ifdeà
Z_PREFIX_SET


1702 
	#z_gzİ’
 
z_gzİ’64


	)

1703 
	#z_gz£ek
 
z_gz£ek64


	)

1704 
	#z_gz‹Î
 
z_gz‹Î64


	)

1705 
	#z_gzoff£t
 
z_gzoff£t64


	)

1706 
	#z_adËr32_combše
 
z_adËr32_combše64


	)

1707 
	#z_üc32_combše
 
z_üc32_combše64


	)

1709 
	#gzİ’
 
gzİ’64


	)

1710 
	#gz£ek
 
gz£ek64


	)

1711 
	#gz‹Î
 
gz‹Î64


	)

1712 
	#gzoff£t
 
gzoff£t64


	)

1713 
	#adËr32_combše
 
adËr32_combše64


	)

1714 
	#üc32_combše
 
üc32_combše64


	)

1716 #iâdeà
Z_LARGE64


1717 
ZEXTERN
 
gzFe
 
ZEXPORT
 
gzİ’64
 
OF
((const *, const *));

1718 
ZEXTERN
 
z_off_t
 
ZEXPORT
 
gz£ek64
 
OF
((
gzFe
, z_off_t, ));

1719 
ZEXTERN
 
z_off_t
 
ZEXPORT
 
gz‹Î64
 
OF
((
gzFe
));

1720 
ZEXTERN
 
z_off_t
 
ZEXPORT
 
gzoff£t64
 
OF
((
gzFe
));

1721 
ZEXTERN
 
uLÚg
 
ZEXPORT
 
adËr32_combše64
 
OF
((uLÚg, uLÚg, 
z_off_t
));

1722 
ZEXTERN
 
uLÚg
 
ZEXPORT
 
üc32_combše64
 
OF
((uLÚg, uLÚg, 
z_off_t
));

1725 
ZEXTERN
 
gzFe
 
ZEXPORT
 
gzİ’
 
OF
((const *, const *));

1726 
ZEXTERN
 
z_off_t
 
ZEXPORT
 
gz£ek
 
OF
((
gzFe
, z_off_t, ));

1727 
ZEXTERN
 
z_off_t
 
ZEXPORT
 
gz‹Î
 
OF
((
gzFe
));

1728 
ZEXTERN
 
z_off_t
 
ZEXPORT
 
gzoff£t
 
OF
((
gzFe
));

1729 
ZEXTERN
 
uLÚg
 
ZEXPORT
 
adËr32_combše
 
OF
((uLÚg, uLÚg, 
z_off_t
));

1730 
ZEXTERN
 
uLÚg
 
ZEXPORT
 
üc32_combše
 
OF
((uLÚg, uLÚg, 
z_off_t
));

1735 
ZEXTERN
 
uLÚg
 
ZEXPORT
 
adËr32_combše
 
OF
((uLÚg, uLÚg, 
z_off_t
));

1736 
ZEXTERN
 
uLÚg
 
ZEXPORT
 
üc32_combše
 
OF
((uLÚg, uLÚg, 
z_off_t
));

1741 #ià!
defšed
(
ZUTIL_H
è&& !defšed(
NO_DUMMY_DECL
)

1742 
	sš‹º®_¡©e
 {
dummy
;};

1746 
ZEXTERN
 cÚ¡ * 
ZEXPORT
 
zE¼Ü
 
OF
(());

1747 
ZEXTERN
 
ZEXPORT
 
šæ©eSyncPošt
 
OF
((
z_¡»amp
));

1748 
ZEXTERN
 cÚ¡ 
z_üc_t
 
FAR
 * 
ZEXPORT
 
g‘_üc_bË
 
OF
(());

1749 
ZEXTERN
 
ZEXPORT
 
šæ©eUnd”mše
 
OF
((
z_¡»amp
, ));

1750 
ZEXTERN
 
ZEXPORT
 
šæ©eRe£tK“p
 
OF
((
z_¡»amp
));

1751 
ZEXTERN
 
ZEXPORT
 
deæ©eRe£tK“p
 
OF
((
z_¡»amp
));

1752 #ià
defšed
(
_WIN32
è&& !defšed(
Z_SOLO
)

1753 
ZEXTERN
 
gzFe
 
ZEXPORT
 
gzİ’_w
 
OF
((cÚ¡ 
wch¬_t
 *
·th
,

1754 cÚ¡ *
mode
));

1756 #ià
defšed
(
STDC
è|| defšed(
Z_HAVE_STDARG_H
)

1757 #iâdeà
Z_SOLO


1758 
ZEXTERN
 
ZEXPORTVA
 
gzv´štf
 
Z_ARG
((
gzFe
 
fe
,

1759 cÚ¡ *
fÜm©
,

1760 
va_li¡
 
va
));

1764 #ifdeà
__ılu¥lus


	@mem_fetch_status.tup

28 
	$MF_TUP_BEGIN
Ğ
mem_ãtch_¡©us
 )

29 
	`MF_TUP
Ğ
MEM_FETCH_INITIALIZED
 ),

30 
	`MF_TUP
Ğ
IN_L1I_MISS_QUEUE
 ),

31 
	`MF_TUP
Ğ
IN_L1D_MISS_QUEUE
 ),

32 
	`MF_TUP
Ğ
IN_L1T_MISS_QUEUE
 ),

33 
	`MF_TUP
Ğ
IN_L1C_MISS_QUEUE
 ),

34 
	`MF_TUP
Ğ
IN_L1TLB_MISS_QUEUE
 ),

35 
	`MF_TUP
Ğ
IN_VM_MANAGER_QUEUE
 ),

36 
	`MF_TUP
Ğ
IN_ICNT_TO_MEM
 ),

37 
	`MF_TUP
Ğ
IN_PARTITION_ROP_DELAY
 ),

38 
	`MF_TUP
Ğ
IN_PARTITION_ICNT_TO_L2_QUEUE
 ),

39 
	`MF_TUP
Ğ
IN_PARTITION_L2_TO_DRAM_QUEUE
 ),

40 
	`MF_TUP
Ğ
IN_PARTITION_DRAM_LATENCY_QUEUE
 ),

41 
	`MF_TUP
Ğ
IN_PARTITION_L2_MISS_QUEUE
 ),

42 
	`MF_TUP
Ğ
IN_PARTITION_MC_INTERFACE_QUEUE
 ),

43 
	`MF_TUP
Ğ
IN_PARTITION_MC_INPUT_QUEUE
 ),

44 
	`MF_TUP
Ğ
IN_PARTITION_MC_BANK_ARB_QUEUE
 ),

45 
	`MF_TUP
Ğ
IN_PARTITION_DRAM
 ),

46 
	`MF_TUP
Ğ
IN_PARTITION_MC_RETURNQ
 ),

47 
	`MF_TUP
Ğ
IN_PARTITION_DRAM_TO_L2_QUEUE
 ),

48 
	`MF_TUP
Ğ
IN_PARTITION_L2_FILL_QUEUE
 ),

49 
	`MF_TUP
Ğ
IN_PARTITION_L2_TO_ICNT_QUEUE
 ),

50 
	`MF_TUP
Ğ
IN_ICNT_TO_SHADER
 ),

51 
	`MF_TUP
Ğ
IN_CLUSTER_TO_SHADER_QUEUE
 ),

52 
	`MF_TUP
Ğ
IN_SHADER_LDST_RESPONSE_FIFO
 ),

53 
	`MF_TUP
Ğ
IN_SHADER_FETCHED
 ),

54 
	`MF_TUP
Ğ
IN_SHADER_L1T_ROB
 ),

55 
	`MF_TUP
Ğ
MEM_FETCH_DELETED
 ),

56 
	$MF_TUP
Ğ
NUM_MEM_REQ_STAT
 )

57 
	`MF_TUP_END
Ğ
mem_ãtch_¡©us
 )

	@/usr/include/alloca.h

18 #iâdef 
_ALLOCA_H


19 
	#_ALLOCA_H
 1

	)

21 
	~<ã©u»s.h
>

23 
	#__Ãed_size_t


	)

24 
	~<¡ddef.h
>

26 
	g__BEGIN_DECLS


29 #undeà
®loÿ


32 *
	$®loÿ
 (
size_t
 
__size
è
__THROW
;

34 #ifdef 
__GNUC__


35 
	#®loÿ
(
size
è
	`__butš_®loÿ
 (size)

	)

38 
__END_DECLS


	@/usr/include/features.h

18 #iâdef 
_FEATURES_H


19 
	#_FEATURES_H
 1

	)

101 #undeà
__USE_ISOC11


102 #undeà
__USE_ISOC99


103 #undeà
__USE_ISOC95


104 #undeà
__USE_ISOCXX11


105 #undeà
__USE_POSIX


106 #undeà
__USE_POSIX2


107 #undeà
__USE_POSIX199309


108 #undeà
__USE_POSIX199506


109 #undeà
__USE_XOPEN


110 #undeà
__USE_XOPEN_EXTENDED


111 #undeà
__USE_UNIX98


112 #undeà
__USE_XOPEN2K


113 #undeà
__USE_XOPEN2KXSI


114 #undeà
__USE_XOPEN2K8


115 #undeà
__USE_XOPEN2K8XSI


116 #undeà
__USE_LARGEFILE


117 #undeà
__USE_LARGEFILE64


118 #undeà
__USE_FILE_OFFSET64


119 #undeà
__USE_BSD


120 #undeà
__USE_SVID


121 #undeà
__USE_MISC


122 #undeà
__USE_ATFILE


123 #undeà
__USE_GNU


124 #undeà
__USE_REENTRANT


125 #undeà
__USE_FORTIFY_LEVEL


126 #undeà
__KERNEL_STRICT_NAMES


130 #iâdeà
_LOOSE_KERNEL_NAMES


131 
	#__KERNEL_STRICT_NAMES


	)

141 #ià
defšed
 
__GNUC__
 && defšed 
__GNUC_MINOR__


142 
	#__GNUC_PREREQ
(
maj
, 
mš
) \

143 ((
__GNUC__
 << 16è+ 
__GNUC_MINOR__
 >ğ((
maj
è<< 16è+ (
mš
))

	)

145 
	#__GNUC_PREREQ
(
maj
, 
mš
è0

	)

150 #ifdeà
_GNU_SOURCE


151 #undeà
_ISOC95_SOURCE


152 
	#_ISOC95_SOURCE
 1

	)

153 #undeà
_ISOC99_SOURCE


154 
	#_ISOC99_SOURCE
 1

	)

155 #undeà
_ISOC11_SOURCE


156 
	#_ISOC11_SOURCE
 1

	)

157 #undeà
_POSIX_SOURCE


158 
	#_POSIX_SOURCE
 1

	)

159 #undeà
_POSIX_C_SOURCE


160 
	#_POSIX_C_SOURCE
 200809L

	)

161 #undeà
_XOPEN_SOURCE


162 
	#_XOPEN_SOURCE
 700

	)

163 #undeà
_XOPEN_SOURCE_EXTENDED


164 
	#_XOPEN_SOURCE_EXTENDED
 1

	)

165 #undeà
_LARGEFILE64_SOURCE


166 
	#_LARGEFILE64_SOURCE
 1

	)

167 #undeà
_DEFAULT_SOURCE


168 
	#_DEFAULT_SOURCE
 1

	)

169 #undeà
_BSD_SOURCE


170 
	#_BSD_SOURCE
 1

	)

171 #undeà
_SVID_SOURCE


172 
	#_SVID_SOURCE
 1

	)

173 #undeà
_ATFILE_SOURCE


174 
	#_ATFILE_SOURCE
 1

	)

179 #ià(
defšed
 
_DEFAULT_SOURCE
 \

180 || (!
defšed
 
	g__STRICT_ANSI__
 \

181 && !
defšed
 
	g_ISOC99_SOURCE
 \

182 && !
defšed
 
	g_POSIX_SOURCE
 && !defšed 
	g_POSIX_C_SOURCE
 \

183 && !
defšed
 
	g_XOPEN_SOURCE
 \

184 && !
defšed
 
	g_BSD_SOURCE
 && !defšed 
	g_SVID_SOURCE
))

185 #undeà
_DEFAULT_SOURCE


186 
	#_DEFAULT_SOURCE
 1

	)

187 #undeà
_BSD_SOURCE


188 
	#_BSD_SOURCE
 1

	)

189 #undeà
_SVID_SOURCE


190 
	#_SVID_SOURCE
 1

	)

194 #ià(
defšed
 
_ISOC11_SOURCE
 \

195 || (
defšed
 
	g__STDC_VERSION__
 && __STDC_VERSION__ >= 201112L))

196 
	#__USE_ISOC11
 1

	)

200 #ià(
defšed
 
_ISOC99_SOURCE
 || defšed 
_ISOC11_SOURCE
 \

201 || (
defšed
 
__STDC_VERSION__
 && __STDC_VERSION__ >= 199901L))

202 
	#__USE_ISOC99
 1

	)

206 #ià(
defšed
 
_ISOC99_SOURCE
 || defšed 
_ISOC11_SOURCE
 \

207 || (
defšed
 
__STDC_VERSION__
 && __STDC_VERSION__ >= 199409L))

208 
	#__USE_ISOC95
 1

	)

215 #ià((
defšed
 
__ılu¥lus
 && __cplusplus >= 201103L) \

216 || 
defšed
 
__GXX_EXPERIMENTAL_CXX0X__
)

217 
	#__USE_ISOCXX11
 1

	)

223 #ifdeà
_DEFAULT_SOURCE


224 #ià!
defšed
 
_POSIX_SOURCE
 && !defšed 
_POSIX_C_SOURCE


225 
	#__USE_POSIX_IMPLICITLY
 1

	)

227 #undeà
_POSIX_SOURCE


228 
	#_POSIX_SOURCE
 1

	)

229 #undeà
_POSIX_C_SOURCE


230 
	#_POSIX_C_SOURCE
 200809L

	)

232 #ià((!
defšed
 
__STRICT_ANSI__
 || (
_XOPEN_SOURCE
 - 0) >= 500) && \

233 !
defšed
 
_POSIX_SOURCE
 && !defšed 
_POSIX_C_SOURCE
)

234 
	#_POSIX_SOURCE
 1

	)

235 #ià
defšed
 
_XOPEN_SOURCE
 && (_XOPEN_SOURCE - 0) < 500

236 
	#_POSIX_C_SOURCE
 2

	)

237 #–ià
defšed
 
_XOPEN_SOURCE
 && (_XOPEN_SOURCE - 0) < 600

238 
	#_POSIX_C_SOURCE
 199506L

	)

239 #–ià
defšed
 
_XOPEN_SOURCE
 && (_XOPEN_SOURCE - 0) < 700

240 
	#_POSIX_C_SOURCE
 200112L

	)

242 
	#_POSIX_C_SOURCE
 200809L

	)

244 
	#__USE_POSIX_IMPLICITLY
 1

	)

247 #ià
defšed
 
_POSIX_SOURCE
 || 
_POSIX_C_SOURCE
 >ğ1 || defšed 
_XOPEN_SOURCE


248 
	#__USE_POSIX
 1

	)

251 #ià
defšed
 
_POSIX_C_SOURCE
 && _POSIX_C_SOURCE >ğ2 || defšed 
_XOPEN_SOURCE


252 
	#__USE_POSIX2
 1

	)

255 #ià(
_POSIX_C_SOURCE
 - 0) >= 199309L

256 
	#__USE_POSIX199309
 1

	)

259 #ià(
_POSIX_C_SOURCE
 - 0) >= 199506L

260 
	#__USE_POSIX199506
 1

	)

263 #ià(
_POSIX_C_SOURCE
 - 0) >= 200112L

264 
	#__USE_XOPEN2K
 1

	)

265 #undeà
__USE_ISOC95


266 
	#__USE_ISOC95
 1

	)

267 #undeà
__USE_ISOC99


268 
	#__USE_ISOC99
 1

	)

271 #ià(
_POSIX_C_SOURCE
 - 0) >= 200809L

272 
	#__USE_XOPEN2K8
 1

	)

273 #undeà
_ATFILE_SOURCE


274 
	#_ATFILE_SOURCE
 1

	)

277 #ifdef 
_XOPEN_SOURCE


278 
	#__USE_XOPEN
 1

	)

279 #ià(
_XOPEN_SOURCE
 - 0) >= 500

280 
	#__USE_XOPEN_EXTENDED
 1

	)

281 
	#__USE_UNIX98
 1

	)

282 #undeà
_LARGEFILE_SOURCE


283 
	#_LARGEFILE_SOURCE
 1

	)

284 #ià(
_XOPEN_SOURCE
 - 0) >= 600

285 #ià(
_XOPEN_SOURCE
 - 0) >= 700

286 
	#__USE_XOPEN2K8
 1

	)

287 
	#__USE_XOPEN2K8XSI
 1

	)

289 
	#__USE_XOPEN2K
 1

	)

290 
	#__USE_XOPEN2KXSI
 1

	)

291 #undeà
__USE_ISOC95


292 
	#__USE_ISOC95
 1

	)

293 #undeà
__USE_ISOC99


294 
	#__USE_ISOC99
 1

	)

297 #ifdeà
_XOPEN_SOURCE_EXTENDED


298 
	#__USE_XOPEN_EXTENDED
 1

	)

303 #ifdeà
_LARGEFILE_SOURCE


304 
	#__USE_LARGEFILE
 1

	)

307 #ifdeà
_LARGEFILE64_SOURCE


308 
	#__USE_LARGEFILE64
 1

	)

311 #ià
defšed
 
_FILE_OFFSET_BITS
 && _FILE_OFFSET_BITS == 64

312 
	#__USE_FILE_OFFSET64
 1

	)

315 #ià
defšed
 
_BSD_SOURCE
 || defšed 
_SVID_SOURCE


316 
	#__USE_MISC
 1

	)

319 #ifdef 
_BSD_SOURCE


320 
	#__USE_BSD
 1

	)

323 #ifdef 
_SVID_SOURCE


324 
	#__USE_SVID
 1

	)

327 #ifdef 
_ATFILE_SOURCE


328 
	#__USE_ATFILE
 1

	)

331 #ifdef 
_GNU_SOURCE


332 
	#__USE_GNU
 1

	)

335 #ià
defšed
 
_REENTRANT
 || defšed 
_THREAD_SAFE


336 
	#__USE_REENTRANT
 1

	)

339 #ià
defšed
 
_FORTIFY_SOURCE
 && _FORTIFY_SOURCE > 0 \

340 && 
__GNUC_PREREQ
 (4, 1è&& 
defšed
 
	g__OPTIMIZE__
 && __OPTIMIZE__ > 0

341 #ià
_FORTIFY_SOURCE
 > 1

342 
	#__USE_FORTIFY_LEVEL
 2

	)

344 
	#__USE_FORTIFY_LEVEL
 1

	)

347 
	#__USE_FORTIFY_LEVEL
 0

	)

352 
	~<¡dc-´edef.h
>

360 #undeà
__GNU_LIBRARY__


361 
	#__GNU_LIBRARY__
 6

	)

365 
	#__GLIBC__
 2

	)

366 
	#__GLIBC_MINOR__
 19

	)

368 
	#__GLIBC_PREREQ
(
maj
, 
mš
) \

369 ((
__GLIBC__
 << 16è+ 
__GLIBC_MINOR__
 >ğ((
maj
è<< 16è+ (
mš
))

	)

372 #iâdeà
__ASSEMBLER__


373 #iâdeà
_SYS_CDEFS_H


374 
	~<sys/cdefs.h
>

379 #ià
defšed
 
__USE_FILE_OFFSET64
 && !defšed 
__REDIRECT


380 
	#__USE_LARGEFILE
 1

	)

381 
	#__USE_LARGEFILE64
 1

	)

387 #ià
__GNUC_PREREQ
 (2, 7è&& 
defšed
 
__OPTIMIZE__
 \

388 && !
defšed
 
	g__OPTIMIZE_SIZE__
 && !defšed 
	g__NO_INLINE__
 \

389 && 
defšed
 
	g__ex‹º_šlše


390 
	#__USE_EXTERN_INLINES
 1

	)

398 
	~<gnu/¡ubs.h
>

	@/usr/include/getopt.h

19 #iâdeà
_GETOPT_H


21 #iâdeà
__Ãed_g‘İt


22 
	#_GETOPT_H
 1

	)

32 #ià!
defšed
 
__GNU_LIBRARY__


33 
	~<ùy³.h
>

36 #iâdeà
__THROW


37 #iâdeà
__GNUC_PREREQ


38 
	#__GNUC_PREREQ
(
maj
, 
mš
è(0)

	)

40 #ià
defšed
 
__ılu¥lus
 && 
__GNUC_PREREQ
 (2,8)

41 
	#__THROW
 
	`throw
 ()

	)

43 
	#__THROW


	)

47 #ifdef 
__ılu¥lus


57 *
İrg
;

71 
İtšd
;

76 
İ‹¼
;

80 
İtİt
;

82 #iâdeà
__Ãed_g‘İt


104 
	sİtiÚ


106 cÚ¡ *
	gÇme
;

109 
	ghas_¬g
;

110 *
	gæag
;

111 
	gv®
;

116 
	#no_¬gum’t
 0

	)

117 
	#»quœed_¬gum’t
 1

	)

118 
	#İtiÚ®_¬gum’t
 2

	)

146 #ifdeà
__GNU_LIBRARY__


150 
g‘İt
 (
___¬gc
, *cÚ¡ *
___¬gv
, cÚ¡ *
__shÜtİts
)

151 
__THROW
;

153 #ià
defšed
 
__Ãed_g‘İt
 && defšed 
__USE_POSIX2
 \

154 && !
defšed
 
	g__USE_POSIX_IMPLICITLY
 && !defšed 
	g__USE_GNU


158 #ifdeà
__REDIRECT


159 
__REDIRECT_NTH
 (
g‘İt
, (
___¬gc
, *cÚ¡ *
___¬gv
,

160 cÚ¡ *
__shÜtİts
),

161 
__posix_g‘İt
);

163 
__posix_g‘İt
 (
___¬gc
, *cÚ¡ *
___¬gv
,

164 cÚ¡ *
__shÜtİts
è
__THROW
;

165 
	#g‘İt
 
__posix_g‘İt


	)

169 
g‘İt
 ();

172 #iâdeà
__Ãed_g‘İt


173 
g‘İt_lÚg
 (
___¬gc
, *cÚ¡ *
___¬gv
,

174 cÚ¡ *
__shÜtİts
,

175 cÚ¡ 
İtiÚ
 *
__lÚgİts
, *
__lÚgšd
)

176 
__THROW
;

177 
g‘İt_lÚg_Úly
 (
___¬gc
, *cÚ¡ *
___¬gv
,

178 cÚ¡ *
__shÜtİts
,

179 cÚ¡ 
İtiÚ
 *
__lÚgİts
, *
__lÚgšd
)

180 
__THROW
;

184 #ifdef 
__ılu¥lus


189 #undeà
__Ãed_g‘İt


	@/usr/include/libio.h

28 #iâdeà
_IO_STDIO_H


29 
	#_IO_STDIO_H


	)

31 
	~<_G_cÚfig.h
>

33 
	#_IO_åos_t
 
_G_åos_t


	)

34 
	#_IO_åos64_t
 
_G_åos64_t


	)

35 
	#_IO_size_t
 
size_t


	)

36 
	#_IO_ssize_t
 
__ssize_t


	)

37 
	#_IO_off_t
 
__off_t


	)

38 
	#_IO_off64_t
 
__off64_t


	)

39 
	#_IO_pid_t
 
__pid_t


	)

40 
	#_IO_uid_t
 
__uid_t


	)

41 
	#_IO_icÚv_t
 
_G_icÚv_t


	)

42 
	#_IO_HAVE_ST_BLKSIZE
 
_G_HAVE_ST_BLKSIZE


	)

43 
	#_IO_BUFSIZ
 
_G_BUFSIZ


	)

44 
	#_IO_va_li¡
 
_G_va_li¡


	)

45 
	#_IO_wšt_t
 
wšt_t


	)

48 
	#__Ãed___va_li¡


	)

49 
	~<¡d¬g.h
>

50 #ifdeà
__GNUC_VA_LIST


51 #undeà
_IO_va_li¡


52 
	#_IO_va_li¡
 
__gnuc_va_li¡


	)

55 #iâdeà
__P


56 
	~<sys/cdefs.h
>

59 
	#_IO_UNIFIED_JUMPTABLES
 1

	)

61 #iâdeà
EOF


62 
	#EOF
 (-1)

	)

64 #iâdeà
NULL


65 #ià
defšed
 
__GNUG__
 && \

66 (
	g__GNUC__
 > 2 || (__GNUC__ =ğ2 && 
__GNUC_MINOR__
 >= 8))

67 
	#NULL
 (
__nuÎ
)

	)

69 #ià!
defšed
(
__ılu¥lus
)

70 
	#NULL
 ((*)0)

	)

72 
	#NULL
 (0)

	)

77 
	#_IOS_INPUT
 1

	)

78 
	#_IOS_OUTPUT
 2

	)

79 
	#_IOS_ATEND
 4

	)

80 
	#_IOS_APPEND
 8

	)

81 
	#_IOS_TRUNC
 16

	)

82 
	#_IOS_NOCREATE
 32

	)

83 
	#_IOS_NOREPLACE
 64

	)

84 
	#_IOS_BIN
 128

	)

92 
	#_IO_MAGIC
 0xFBAD0000

	)

93 
	#_OLD_STDIO_MAGIC
 0xFABC0000

	)

94 
	#_IO_MAGIC_MASK
 0xFFFF0000

	)

95 
	#_IO_USER_BUF
 1

	)

96 
	#_IO_UNBUFFERED
 2

	)

97 
	#_IO_NO_READS
 4

	)

98 
	#_IO_NO_WRITES
 8

	)

99 
	#_IO_EOF_SEEN
 0x10

	)

100 
	#_IO_ERR_SEEN
 0x20

	)

101 
	#_IO_DELETE_DONT_CLOSE
 0x40

	)

102 
	#_IO_LINKED
 0x80

	)

103 
	#_IO_IN_BACKUP
 0x100

	)

104 
	#_IO_LINE_BUF
 0x200

	)

105 
	#_IO_TIED_PUT_GET
 0x400

	)

106 
	#_IO_CURRENTLY_PUTTING
 0x800

	)

107 
	#_IO_IS_APPENDING
 0x1000

	)

108 
	#_IO_IS_FILEBUF
 0x2000

	)

109 
	#_IO_BAD_SEEN
 0x4000

	)

110 
	#_IO_USER_LOCK
 0x8000

	)

112 
	#_IO_FLAGS2_MMAP
 1

	)

113 
	#_IO_FLAGS2_NOTCANCEL
 2

	)

114 #ifdeà
_LIBC


115 
	#_IO_FLAGS2_FORTIFY
 4

	)

117 
	#_IO_FLAGS2_USER_WBUF
 8

	)

118 #ifdeà
_LIBC


119 
	#_IO_FLAGS2_SCANF_STD
 16

	)

120 
	#_IO_FLAGS2_NOCLOSE
 32

	)

121 
	#_IO_FLAGS2_CLOEXEC
 64

	)

125 
	#_IO_SKIPWS
 01

	)

126 
	#_IO_LEFT
 02

	)

127 
	#_IO_RIGHT
 04

	)

128 
	#_IO_INTERNAL
 010

	)

129 
	#_IO_DEC
 020

	)

130 
	#_IO_OCT
 040

	)

131 
	#_IO_HEX
 0100

	)

132 
	#_IO_SHOWBASE
 0200

	)

133 
	#_IO_SHOWPOINT
 0400

	)

134 
	#_IO_UPPERCASE
 01000

	)

135 
	#_IO_SHOWPOS
 02000

	)

136 
	#_IO_SCIENTIFIC
 04000

	)

137 
	#_IO_FIXED
 010000

	)

138 
	#_IO_UNITBUF
 020000

	)

139 
	#_IO_STDIO
 040000

	)

140 
	#_IO_DONT_CLOSE
 0100000

	)

141 
	#_IO_BOOLALPHA
 0200000

	)

144 
_IO_jump_t
; 
	g_IO_FILE
;

147 #ifdeà
_IO_MTSAFE_IO


148 #ià
defšed
 
__GLIBC__
 && __GLIBC__ >= 2

149 
	~<b™s/¡dio-lock.h
>

154 
	t_IO_lock_t
;

160 
	s_IO_m¬k”
 {

161 
_IO_m¬k”
 *
	m_Ãxt
;

162 
_IO_FILE
 *
	m_sbuf
;

166 
	m_pos
;

168 
£t_¡»ampos
(
¡»ampos
 
¥
è{ 
	m_¥os
 = sp; }

169 
£t_off£t
(
off£t
è{ 
	m_pos
 = off£t; 
	m_¥os
 = (
¡»ampos
)(-2); }

170 
	mpublic
:

171 
¡»amm¬k”
(
¡»ambuf
 *
sb
);

172 ~
¡»amm¬k”
();

173 
§všg
(è{  
	m_¥os
 == -2; }

174 
d–
(
¡»amm¬k”
&);

175 
d–
();

180 
	e__codecvt_»suÉ


182 
	m__codecvt_ok
,

183 
	m__codecvt_·¹Ÿl
,

184 
	m__codecvt_”rÜ
,

185 
	m__codecvt_nocÚv


188 #ià
defšed
 
_LIBC
 || defšed 
_GLIBCPP_USE_WCHAR_T


191 
	s_IO_codecvt


193 (*
	m__codecvt_de¡r
è(
	m_IO_codecvt
 *);

194 
__codecvt_»suÉ
 (*
__codecvt_do_out
è(
	m_IO_codecvt
 *,

195 
	m__mb¡©e_t
 *,

196 cÚ¡ 
	mwch¬_t
 *,

197 cÚ¡ 
	mwch¬_t
 *,

198 cÚ¡ 
	mwch¬_t
 **, *,

200 
__codecvt_»suÉ
 (*
__codecvt_do_unshiá
è(
	m_IO_codecvt
 *,

201 
	m__mb¡©e_t
 *, *,

203 
__codecvt_»suÉ
 (*
__codecvt_do_š
è(
	m_IO_codecvt
 *,

204 
	m__mb¡©e_t
 *,

206 cÚ¡ **, 
	mwch¬_t
 *,

207 
	mwch¬_t
 *, wchar_t **);

208 (*
	m__codecvt_do_’codšg
è(
	m_IO_codecvt
 *);

209 (*
	m__codecvt_do_®ways_nocÚv
è(
	m_IO_codecvt
 *);

210 (*
	m__codecvt_do_Ëngth
è(
	m_IO_codecvt
 *, 
	m__mb¡©e_t
 *,

211 cÚ¡ *, cÚ¡ *, 
	m_IO_size_t
);

212 (*
	m__codecvt_do_max_Ëngth
è(
	m_IO_codecvt
 *);

214 
_IO_icÚv_t
 
	m__cd_š
;

215 
_IO_icÚv_t
 
	m__cd_out
;

219 
	s_IO_wide_d©a


221 
wch¬_t
 *
	m_IO_»ad_±r
;

222 
wch¬_t
 *
	m_IO_»ad_’d
;

223 
wch¬_t
 *
	m_IO_»ad_ba£
;

224 
wch¬_t
 *
	m_IO_wr™e_ba£
;

225 
wch¬_t
 *
	m_IO_wr™e_±r
;

226 
wch¬_t
 *
	m_IO_wr™e_’d
;

227 
wch¬_t
 *
	m_IO_buf_ba£
;

228 
wch¬_t
 *
	m_IO_buf_’d
;

230 
wch¬_t
 *
	m_IO_§ve_ba£
;

231 
wch¬_t
 *
	m_IO_backup_ba£
;

233 
wch¬_t
 *
	m_IO_§ve_’d
;

235 
__mb¡©e_t
 
	m_IO_¡©e
;

236 
__mb¡©e_t
 
	m_IO_Ï¡_¡©e
;

237 
_IO_codecvt
 
	m_codecvt
;

239 
wch¬_t
 
	m_shÜtbuf
[1];

241 cÚ¡ 
_IO_jump_t
 *
	m_wide_vbË
;

245 
	s_IO_FILE
 {

246 
	m_æags
;

247 
	#_IO_fe_æags
 
_æags


	)

251 * 
	m_IO_»ad_±r
;

252 * 
	m_IO_»ad_’d
;

253 * 
	m_IO_»ad_ba£
;

254 * 
	m_IO_wr™e_ba£
;

255 * 
	m_IO_wr™e_±r
;

256 * 
	m_IO_wr™e_’d
;

257 * 
	m_IO_buf_ba£
;

258 * 
	m_IO_buf_’d
;

260 *
	m_IO_§ve_ba£
;

261 *
	m_IO_backup_ba£
;

262 *
	m_IO_§ve_’d
;

264 
_IO_m¬k”
 *
	m_m¬k”s
;

266 
_IO_FILE
 *
	m_chaš
;

268 
	m_f’o
;

270 
	m_blksize
;

272 
	m_æags2
;

274 
_IO_off_t
 
	m_Şd_off£t
;

276 
	#__HAVE_COLUMN


	)

278 
	m_cur_cŞumn
;

279 sigÃd 
	m_vbË_off£t
;

280 
	m_shÜtbuf
[1];

284 
_IO_lock_t
 *
	m_lock
;

285 #ifdeà
_IO_USE_OLD_IO_FILE


288 
	s_IO_FILE_com¶‘e


290 
_IO_FILE
 
	m_fe
;

292 #ià
defšed
 
_G_IO_IO_FILE_VERSION
 && _G_IO_IO_FILE_VERSION == 0x20001

293 
_IO_off64_t
 
	m_off£t
;

294 #ià
defšed
 
_LIBC
 || defšed 
_GLIBCPP_USE_WCHAR_T


296 
_IO_codecvt
 *
	m_codecvt
;

297 
_IO_wide_d©a
 *
	m_wide_d©a
;

298 
_IO_FILE
 *
	m_ä“»s_li¡
;

299 *
	m_ä“»s_buf
;

300 
size_t
 
	m_ä“»s_size
;

302 *
	m__·d1
;

303 *
	m__·d2
;

304 *
	m__·d3
;

305 *
	m__·d4
;

306 
size_t
 
	m__·d5
;

308 
	m_mode
;

310 
	m_unu£d2
[15 *  (è- 4 *  (*è-  (
size_t
)];

314 #iâdeà
__ılu¥lus


315 
_IO_FILE
 
	t_IO_FILE
;

318 
	g_IO_FILE_¶us
;

320 
_IO_FILE_¶us
 
_IO_2_1_¡dš_
;

321 
_IO_FILE_¶us
 
_IO_2_1_¡dout_
;

322 
_IO_FILE_¶us
 
_IO_2_1_¡d”r_
;

323 #iâdeà
_LIBC


324 
	#_IO_¡dš
 ((
_IO_FILE
*)(&
_IO_2_1_¡dš_
))

	)

325 
	#_IO_¡dout
 ((
_IO_FILE
*)(&
_IO_2_1_¡dout_
))

	)

326 
	#_IO_¡d”r
 ((
_IO_FILE
*)(&
_IO_2_1_¡d”r_
))

	)

328 
_IO_FILE
 *
_IO_¡dš
 
©Œibu‹_hidd’
;

329 
_IO_FILE
 *
_IO_¡dout
 
©Œibu‹_hidd’
;

330 
_IO_FILE
 *
_IO_¡d”r
 
©Œibu‹_hidd’
;

338 
__ssize_t
 
	t__io_»ad_â
 (*
	t__cook›
, *
	t__buf
, 
	tsize_t
 
	t__nby‹s
);

346 
__ssize_t
 
	t__io_wr™e_â
 (*
	t__cook›
, cÚ¡ *
	t__buf
,

347 
	tsize_t
 
	t__n
);

355 
	t__io_£ek_â
 (*
	t__cook›
, 
	t_IO_off64_t
 *
	t__pos
, 
	t__w
);

358 
	t__io_şo£_â
 (*
	t__cook›
);

361 #ifdeà
_GNU_SOURCE


363 
__io_»ad_â
 
	tcook›_»ad_funùiÚ_t
;

364 
__io_wr™e_â
 
	tcook›_wr™e_funùiÚ_t
;

365 
__io_£ek_â
 
	tcook›_£ek_funùiÚ_t
;

366 
__io_şo£_â
 
	tcook›_şo£_funùiÚ_t
;

371 
__io_»ad_â
 *
	m»ad
;

372 
__io_wr™e_â
 *
	mwr™e
;

373 
__io_£ek_â
 *
	m£ek
;

374 
__io_şo£_â
 *
	mşo£
;

375 } 
	t_IO_cook›_io_funùiÚs_t
;

376 
_IO_cook›_io_funùiÚs_t
 
	tcook›_io_funùiÚs_t
;

378 
	g_IO_cook›_fe
;

381 
_IO_cook›_š™
 (
_IO_cook›_fe
 *
__cfe
, 
__»ad_wr™e
,

382 *
__cook›
, 
_IO_cook›_io_funùiÚs_t
 
__âs
);

386 #ifdeà
__ılu¥lus


390 
__und”æow
 (
_IO_FILE
 *);

391 
__uæow
 (
_IO_FILE
 *);

392 
__ov”æow
 (
_IO_FILE
 *, );

393 #ià
defšed
 
_LIBC
 || defšed 
_GLIBCPP_USE_WCHAR_T


394 
_IO_wšt_t
 
__wund”æow
 (
_IO_FILE
 *);

395 
_IO_wšt_t
 
__wuæow
 (
_IO_FILE
 *);

396 
_IO_wšt_t
 
__wov”æow
 (
_IO_FILE
 *, _IO_wint_t);

399 #ià 
__GNUC__
 >= 3

400 
	#_IO_BE
(
ex´
, 
»s
è
	`__butš_ex³ù
 (Óx´),„es)

	)

402 
	#_IO_BE
(
ex´
, 
»s
èÓx´)

	)

405 
	#_IO_g‘c_uÆocked
(
_å
) \

406 (
	`_IO_BE
 ((
_å
)->
_IO_»ad_±r
 >ğ(_å)->
_IO_»ad_’d
, 0) \

407 ? 
	`__uæow
 (
_å
è: *(*è(_å)->
_IO_»ad_±r
++)

	)

408 
	#_IO_³ekc_uÆocked
(
_å
) \

409 (
	`_IO_BE
 ((
_å
)->
_IO_»ad_±r
 >ğ(_å)->
_IO_»ad_’d
, 0) \

410 && 
	`__und”æow
 (
_å
è=ğ
EOF
 ? EOF \

411 : *(*è(
_å
)->
_IO_»ad_±r
)

	)

412 
	#_IO_putc_uÆocked
(
_ch
, 
_å
) \

413 (
	`_IO_BE
 ((
_å
)->
_IO_wr™e_±r
 >ğ(_å)->
_IO_wr™e_’d
, 0) \

414 ? 
	`__ov”æow
 (
_å
, (è(
_ch
)) \

415 : (è(*(
_å
)->
_IO_wr™e_±r
++ = (
_ch
)))

	)

417 #ià
defšed
 
_LIBC
 || defšed 
_GLIBCPP_USE_WCHAR_T


418 
	#_IO_g‘wc_uÆocked
(
_å
) \

419 (
	`_IO_BE
 ((
_å
)->
_wide_d©a
 =ğ
NULL
 \

420 || ((
_å
)->
_wide_d©a
->
_IO_»ad_±r
 \

421 >ğ(
_å
)->
_wide_d©a
->
_IO_»ad_’d
), 0) \

422 ? 
	`__wuæow
 (
_å
è: (
_IO_wšt_t
è*(_å)->
_wide_d©a
->
_IO_»ad_±r
++)

	)

423 
	#_IO_putwc_uÆocked
(
_wch
, 
_å
) \

424 (
	`_IO_BE
 ((
_å
)->
_wide_d©a
 =ğ
NULL
 \

425 || ((
_å
)->
_wide_d©a
->
_IO_wr™e_±r
 \

426 >ğ(
_å
)->
_wide_d©a
->
_IO_wr™e_’d
), 0) \

427 ? 
	`__wov”æow
 (
_å
, 
_wch
) \

428 : (
_IO_wšt_t
è(*(
_å
)->
_wide_d©a
->
_IO_wr™e_±r
++ = (
_wch
)))

	)

431 
	#_IO_ãof_uÆocked
(
__å
è(((__å)->
_æags
 & 
_IO_EOF_SEEN
è!ğ0)

	)

432 
	#_IO_ã¼Ü_uÆocked
(
__å
è(((__å)->
_æags
 & 
_IO_ERR_SEEN
è!ğ0)

	)

434 
_IO_g‘c
 (
_IO_FILE
 *
__å
);

435 
_IO_putc
 (
__c
, 
_IO_FILE
 *
__å
);

436 
_IO_ãof
 (
_IO_FILE
 *
__å
è
__THROW
;

437 
_IO_ã¼Ü
 (
_IO_FILE
 *
__å
è
__THROW
;

439 
_IO_³ekc_locked
 (
_IO_FILE
 *
__å
);

442 
	#_IO_PENDING_OUTPUT_COUNT
(
_å
) \

443 ((
_å
)->
_IO_wr™e_±r
 - (_å)->
_IO_wr™e_ba£
)

	)

445 
_IO_æockfe
 (
_IO_FILE
 *è
__THROW
;

446 
_IO_fuÆockfe
 (
_IO_FILE
 *è
__THROW
;

447 
_IO_árylockfe
 (
_IO_FILE
 *è
__THROW
;

449 #ifdeà
_IO_MTSAFE_IO


450 
	#_IO_³ekc
(
_å
è
	`_IO_³ekc_locked
 (_å)

	)

451 
	#_IO_æockfe
(
_å
) \

452 ià(((
_å
)->
_æags
 & 
_IO_USER_LOCK
è=ğ0è
	`_IO_æockfe
 (_å)

	)

453 
	#_IO_fuÆockfe
(
_å
) \

454 ià(((
_å
)->
_æags
 & 
_IO_USER_LOCK
è=ğ0è
	`_IO_fuÆockfe
 (_å)

	)

456 
	#_IO_³ekc
(
_å
è
	`_IO_³ekc_uÆocked
 (_å)

	)

457 
	#_IO_æockfe
(
_å
è

	)

458 
	#_IO_fuÆockfe
(
_å
è

	)

459 
	#_IO_árylockfe
(
_å
è

	)

460 
	#_IO_ş—nup_»giÚ_¡¬t
(
_fù
, 
_å
è

	)

461 
	#_IO_ş—nup_»giÚ_’d
(
_Do™
è

	)

464 
_IO_vfsÿnf
 (
_IO_FILE
 * 
__»¡riù
, const * __restrict,

465 
_IO_va_li¡
, *
__»¡riù
);

466 
_IO_vårštf
 (
_IO_FILE
 *
__»¡riù
, const *__restrict,

467 
_IO_va_li¡
);

468 
_IO_ssize_t
 
_IO_·dn
 (
_IO_FILE
 *, , _IO_ssize_t);

469 
_IO_size_t
 
_IO_sg‘n
 (
_IO_FILE
 *, *, _IO_size_t);

471 
_IO_off64_t
 
_IO_£ekoff
 (
_IO_FILE
 *, _IO_off64_t, , );

472 
_IO_off64_t
 
_IO_£ekpos
 (
_IO_FILE
 *, _IO_off64_t, );

474 
_IO_ä“_backup_¬—
 (
_IO_FILE
 *è
__THROW
;

476 #ià
defšed
 
_LIBC
 || defšed 
_GLIBCPP_USE_WCHAR_T


477 
_IO_wšt_t
 
_IO_g‘wc
 (
_IO_FILE
 *
__å
);

478 
_IO_wšt_t
 
_IO_putwc
 (
wch¬_t
 
__wc
, 
_IO_FILE
 *
__å
);

479 
_IO_fwide
 (
_IO_FILE
 *
__å
, 
__mode
è
__THROW
;

480 #ià
__GNUC__
 >= 2

483 #ià
defšed
 
_LIBC
 && defšed 
SHARED


484 
	~<shlib-com·t.h
>

485 #ià
SHLIB_COMPAT
 (
libc
, 
GLIBC_2_0
, 
GLIBC_2_1
)

486 
	#_IO_fwide_maybe_šcom·tibË
 \

487 (
	`__butš_ex³ù
 (&
_IO_¡dš_u£d
 =ğ
NULL
, 0))

	)

488 cÚ¡ 
_IO_¡dš_u£d
;

489 
w—k_ex‹º
 (
_IO_¡dš_u£d
);

492 #iâdeà
_IO_fwide_maybe_šcom·tibË


493 
	#_IO_fwide_maybe_šcom·tibË
 (0)

	)

497 
	#_IO_fwide
(
__å
, 
__mode
) \

498 ({ 
__»suÉ
 = (
__mode
); \

499 ià(
__»suÉ
 < 0 && ! 
_IO_fwide_maybe_šcom·tibË
) \

501 ià((
__å
)->
_mode
 == 0) \

503 (
__å
)->
_mode
 = -1; \

504 
__»suÉ
 = (
__å
)->
_mode
; \

506 ià(
	`__butš_cÚ¡ªt_p
 (
__mode
) && (__mode) == 0) \

507 
__»suÉ
 = 
_IO_fwide_maybe_šcom·tibË
 ? -1 : (
__å
)->
_mode
; \

509 
__»suÉ
 = 
	`_IO_fwide
 (
__å
, __result); \

510 
__»suÉ
; })

	)

513 
_IO_vfwsÿnf
 (
_IO_FILE
 * 
__»¡riù
, cÚ¡ 
wch¬_t
 * __restrict,

514 
_IO_va_li¡
, *
__»¡riù
);

515 
_IO_vfw´štf
 (
_IO_FILE
 *
__»¡riù
, cÚ¡ 
wch¬_t
 *__restrict,

516 
_IO_va_li¡
);

517 
_IO_ssize_t
 
_IO_w·dn
 (
_IO_FILE
 *, 
wšt_t
, _IO_ssize_t);

518 
_IO_ä“_wbackup_¬—
 (
_IO_FILE
 *è
__THROW
;

521 #ifdeà
__LDBL_COMPAT


522 
	~<b™s/libio-ldbl.h
>

525 #ifdeà
__ılu¥lus


	@/usr/include/memory.h

22 #iâdef 
_MEMORY_H


23 
	#_MEMORY_H
 1

	)

25 
	~<ã©u»s.h
>

28 #iâdef 
_STRING_H


29 
	~<¡ršg.h
>

	@/usr/include/xlocale.h

20 #iâdeà
_XLOCALE_H


21 
	#_XLOCALE_H
 1

	)

27 
	s__loÿË_¡ruù


30 
__loÿË_d©a
 *
	m__loÿËs
[13];

33 cÚ¡ *
	m__ùy³_b
;

34 cÚ¡ *
	m__ùy³_tŞow”
;

35 cÚ¡ *
	m__ùy³_touµ”
;

38 cÚ¡ *
	m__Çmes
[13];

39 } *
	t__loÿË_t
;

42 
__loÿË_t
 
	tloÿË_t
;

	@/usr/include/_G_config.h

4 #iâdeà
_G_cÚfig_h


5 
	#_G_cÚfig_h
 1

	)

9 
	~<b™s/ty³s.h
>

10 
	#__Ãed_size_t


	)

11 #ià
defšed
 
_LIBC
 || defšed 
_GLIBCPP_USE_WCHAR_T


12 
	#__Ãed_wch¬_t


	)

14 
	#__Ãed_NULL


	)

15 
	~<¡ddef.h
>

16 
	#__Ãed_mb¡©e_t


	)

17 #ià
defšed
 
_LIBC
 || defšed 
_GLIBCPP_USE_WCHAR_T


18 
	#__Ãed_wšt_t


	)

20 
	~<wch¬.h
>

23 
__off_t
 
	m__pos
;

24 
__mb¡©e_t
 
	m__¡©e
;

25 } 
	t_G_åos_t
;

28 
__off64_t
 
	m__pos
;

29 
__mb¡©e_t
 
	m__¡©e
;

30 } 
	t_G_åos64_t
;

31 #ià
defšed
 
_LIBC
 || defšed 
_GLIBCPP_USE_WCHAR_T


32 
	~<gcÚv.h
>

35 
__gcÚv_šfo
 
	m__cd
;

38 
__gcÚv_šfo
 
	m__cd
;

39 
__gcÚv_¡•_d©a
 
	m__d©a
;

40 } 
	m__combšed
;

41 } 
	t_G_icÚv_t
;

46 
	#_G_va_li¡
 
__gnuc_va_li¡


	)

48 
	#_G_HAVE_MMAP
 1

	)

49 
	#_G_HAVE_MREMAP
 1

	)

51 
	#_G_IO_IO_FILE_VERSION
 0x20001

	)

54 
	#_G_HAVE_ST_BLKSIZE
 
	`defšed
 (
_STATBUF_ST_BLKSIZE
)

	)

56 
	#_G_BUFSIZ
 8192

	)

	@/usr/include/ctype.h

22 #iâdef 
_CTYPE_H


23 
	#_CTYPE_H
 1

	)

25 
	~<ã©u»s.h
>

26 
	~<b™s/ty³s.h
>

28 
	g__BEGIN_DECLS


30 #iâdeà
_ISb™


39 
	~<’dŸn.h
>

40 #ià
__BYTE_ORDER
 =ğ
__BIG_ENDIAN


41 
	#_ISb™
(
b™
è(1 << (b™))

	)

43 
	#_ISb™
(
b™
è((b™è< 8 ? ((1 << (b™)è<< 8è: ((1 << (b™)è>> 8))

	)

48 
	m_ISuµ”
 = 
_ISb™
 (0),

49 
	m_ISlow”
 = 
_ISb™
 (1),

50 
	m_IS®pha
 = 
_ISb™
 (2),

51 
	m_ISdig™
 = 
_ISb™
 (3),

52 
	m_ISxdig™
 = 
_ISb™
 (4),

53 
	m_IS¥aû
 = 
_ISb™
 (5),

54 
	m_IS´št
 = 
_ISb™
 (6),

55 
	m_ISg¿ph
 = 
_ISb™
 (7),

56 
	m_ISbÏnk
 = 
_ISb™
 (8),

57 
	m_ISúŒl
 = 
_ISb™
 (9),

58 
	m_ISpunù
 = 
_ISb™
 (10),

59 
	m_IS®num
 = 
_ISb™
 (11)

79 cÚ¡ **
	$__ùy³_b_loc
 ()

80 
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
));

81 cÚ¡ 
__št32_t
 **
	$__ùy³_tŞow”_loc
 ()

82 
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
));

83 cÚ¡ 
__št32_t
 **
	$__ùy³_touµ”_loc
 ()

84 
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
));

87 #iâdeà
__ılu¥lus


88 
	#__isùy³
(
c
, 
ty³
) \

89 ((*
	`__ùy³_b_loc
 ())[(è(
c
)] & (è
ty³
)

	)

90 #–ià
defšed
 
__USE_EXTERN_INLINES


91 
	#__isùy³_f
(
ty³
) \

92 
__ex‹º_šlše
 \

93 
is
##
	`ty³
 (
__c
è
__THROW
 \

95  (*
	`__ùy³_b_loc
 ())[(è(
__c
)] & (è
_IS
##
ty³
; \

96 
	}

	)
}

99 
	#__i§scii
(
c
è(((cè& ~0x7fè=ğ0è

	)

100 
	#__tßscii
(
c
è((cè& 0x7fè

	)

102 
	#__exùy³
(
Çme
è
	`Çme
 (è
__THROW


	)

104 
__BEGIN_NAMESPACE_STD


110 
__exùy³
 (
i§Êum
);

111 
__exùy³
 (
i§Íha
);

112 
__exùy³
 (
isúŒl
);

113 
__exùy³
 (
isdig™
);

114 
__exùy³
 (
i¦ow”
);

115 
__exùy³
 (
isg¿ph
);

116 
__exùy³
 (
i¥ršt
);

117 
__exùy³
 (
i¥unù
);

118 
__exùy³
 (
is¥aû
);

119 
__exùy³
 (
isuµ”
);

120 
__exùy³
 (
isxdig™
);

124 
	$tŞow”
 (
__c
è
__THROW
;

127 
	$touµ”
 (
__c
è
__THROW
;

129 
__END_NAMESPACE_STD


133 #ifdef 
__USE_ISOC99


134 
__BEGIN_NAMESPACE_C99


136 
	`__exùy³
 (
isbÏnk
);

138 
__END_NAMESPACE_C99


141 #ifdeà
__USE_GNU


143 
	$isùy³
 (
__c
, 
__mask
è
__THROW
;

146 #ià
defšed
 
__USE_SVID
 || defšed 
__USE_MISC
 || defšed 
__USE_XOPEN


150 
	$i§scii
 (
__c
è
__THROW
;

154 
	$tßscii
 (
__c
è
__THROW
;

158 
	`__exùy³
 (
_touµ”
);

159 
	`__exùy³
 (
_tŞow”
);

163 
	#__tobody
(
c
, 
f
, 
a
, 
¬gs
) \

164 (
__ex‹nsiÚ__
 \

165 ({ 
__»s
; \

166 ià( (
c
) > 1) \

168 ià(
	`__butš_cÚ¡ªt_p
 (
c
)) \

170 
__c
 = (
c
); \

171 
__»s
 = 
__c
 < -128 || __ø> 255 ? __ø: (
a
)[__c]; \

174 
__»s
 = 
f
 
¬gs
; \

177 
__»s
 = (
a
)[(è(
c
)]; \

178 
__»s
; 
	}
}))

	)

180 #ià!
defšed
 
__NO_CTYPE


181 #ifdeà
__isùy³_f


182 
	$__isùy³_f
 (
®num
)

183 
	$__isùy³_f
 (
®pha
)

184 
	$__isùy³_f
 (
úŒl
)

185 
	$__isùy³_f
 (
dig™
)

186 
	$__isùy³_f
 (
low”
)

187 
	$__isùy³_f
 (
g¿ph
)

188 
	$__isùy³_f
 (
´št
)

189 
	$__isùy³_f
 (
punù
)

190 
	$__isùy³_f
 (
¥aû
)

191 
	$__isùy³_f
 (
uµ”
)

192 
	$__isùy³_f
 (
xdig™
)

193 #ifdeà
__USE_ISOC99


194 
	$__isùy³_f
 (
bÏnk
)

196 #–ià
defšed
 
__isùy³


197 
	#i§Êum
(
c
è
	`__isùy³
((c), 
_IS®num
)

	)

198 
	#i§Íha
(
c
è
	`__isùy³
((c), 
_IS®pha
)

	)

199 
	#isúŒl
(
c
è
	`__isùy³
((c), 
_ISúŒl
)

	)

200 
	#isdig™
(
c
è
	`__isùy³
((c), 
_ISdig™
)

	)

201 
	#i¦ow”
(
c
è
	`__isùy³
((c), 
_ISlow”
)

	)

202 
	#isg¿ph
(
c
è
	`__isùy³
((c), 
_ISg¿ph
)

	)

203 
	#i¥ršt
(
c
è
	`__isùy³
((c), 
_IS´št
)

	)

204 
	#i¥unù
(
c
è
	`__isùy³
((c), 
_ISpunù
)

	)

205 
	#is¥aû
(
c
è
	`__isùy³
((c), 
_IS¥aû
)

	)

206 
	#isuµ”
(
c
è
	`__isùy³
((c), 
_ISuµ”
)

	)

207 
	#isxdig™
(
c
è
	`__isùy³
((c), 
_ISxdig™
)

	)

208 #ifdeà
__USE_ISOC99


209 
	#isbÏnk
(
c
è
	`__isùy³
((c), 
_ISbÏnk
)

	)

213 #ifdeà
__USE_EXTERN_INLINES


214 
__ex‹º_šlše
 

215 
	`__NTH
 (
	$tŞow”
 (
__c
))

217  
__c
 >ğ-128 && __ø< 256 ? (*
	`__ùy³_tŞow”_loc
 ())[__c] : __c;

218 
	}
}

220 
__ex‹º_šlše
 

221 
__NTH
 (
	$touµ”
 (
__c
))

223  
__c
 >ğ-128 && __ø< 256 ? (*
	`__ùy³_touµ”_loc
 ())[__c] : __c;

224 
	}
}

227 #ià
__GNUC__
 >ğ2 && 
defšed
 
__OPTIMIZE__
 && !defšed 
__ılu¥lus


228 
	#tŞow”
(
c
è
	`__tobody
 (c, 
tŞow”
, *
	`__ùy³_tŞow”_loc
 (), (c))

	)

229 
	#touµ”
(
c
è
	`__tobody
 (c, 
touµ”
, *
	`__ùy³_touµ”_loc
 (), (c))

	)

232 #ià
defšed
 
__USE_SVID
 || defšed 
__USE_MISC
 || defšed 
__USE_XOPEN


233 
	#i§scii
(
c
è
	`__i§scii
 (c)

	)

234 
	#tßscii
(
c
è
	`__tßscii
 (c)

	)

236 
	#_tŞow”
(
c
è((è(*
	`__ùy³_tŞow”_loc
 ())[(è(c)])

	)

237 
	#_touµ”
(
c
è((è(*
	`__ùy³_touµ”_loc
 ())[(è(c)])

	)

243 #ifdeà
__USE_XOPEN2K8


257 
	~<xloÿË.h
>

261 
	#__isùy³_l
(
c
, 
ty³
, 
loÿË
) \

262 ((
loÿË
)->
__ùy³_b
[(è(
c
)] & (è
ty³
)

	)

264 
	#__exùy³_l
(
Çme
) \

265 
	`Çme
 (, 
__loÿË_t
è
__THROW


	)

271 
__exùy³_l
 (
i§Êum_l
);

272 
__exùy³_l
 (
i§Íha_l
);

273 
__exùy³_l
 (
isúŒl_l
);

274 
__exùy³_l
 (
isdig™_l
);

275 
__exùy³_l
 (
i¦ow”_l
);

276 
__exùy³_l
 (
isg¿ph_l
);

277 
__exùy³_l
 (
i¥ršt_l
);

278 
__exùy³_l
 (
i¥unù_l
);

279 
__exùy³_l
 (
is¥aû_l
);

280 
__exùy³_l
 (
isuµ”_l
);

281 
__exùy³_l
 (
isxdig™_l
);

283 
__exùy³_l
 (
isbÏnk_l
);

287 
	$__tŞow”_l
 (
__c
, 
__loÿË_t
 
__l
è
__THROW
;

288 
	$tŞow”_l
 (
__c
, 
__loÿË_t
 
__l
è
__THROW
;

291 
	$__touµ”_l
 (
__c
, 
__loÿË_t
 
__l
è
__THROW
;

292 
	$touµ”_l
 (
__c
, 
__loÿË_t
 
__l
è
__THROW
;

294 #ià
__GNUC__
 >ğ2 && 
defšed
 
__OPTIMIZE__
 && !defšed 
__ılu¥lus


295 
	#__tŞow”_l
(
c
, 
loÿË
) \

296 
	`__tobody
 (
c
, 
__tŞow”_l
, (
loÿË
)->
__ùy³_tŞow”
, (c,†oÿË))

	)

297 
	#__touµ”_l
(
c
, 
loÿË
) \

298 
	`__tobody
 (
c
, 
__touµ”_l
, (
loÿË
)->
__ùy³_touµ”
, (c,†oÿË))

	)

299 
	#tŞow”_l
(
c
, 
loÿË
è
	`__tŞow”_l
 ((c), (loÿË))

	)

300 
	#touµ”_l
(
c
, 
loÿË
è
	`__touµ”_l
 ((c), (loÿË))

	)

304 #iâdeà
__NO_CTYPE


305 
	#__i§Êum_l
(
c
,
l
è
	`__isùy³_l
((c), 
_IS®num
, (l))

	)

306 
	#__i§Íha_l
(
c
,
l
è
	`__isùy³_l
((c), 
_IS®pha
, (l))

	)

307 
	#__isúŒl_l
(
c
,
l
è
	`__isùy³_l
((c), 
_ISúŒl
, (l))

	)

308 
	#__isdig™_l
(
c
,
l
è
	`__isùy³_l
((c), 
_ISdig™
, (l))

	)

309 
	#__i¦ow”_l
(
c
,
l
è
	`__isùy³_l
((c), 
_ISlow”
, (l))

	)

310 
	#__isg¿ph_l
(
c
,
l
è
	`__isùy³_l
((c), 
_ISg¿ph
, (l))

	)

311 
	#__i¥ršt_l
(
c
,
l
è
	`__isùy³_l
((c), 
_IS´št
, (l))

	)

312 
	#__i¥unù_l
(
c
,
l
è
	`__isùy³_l
((c), 
_ISpunù
, (l))

	)

313 
	#__is¥aû_l
(
c
,
l
è
	`__isùy³_l
((c), 
_IS¥aû
, (l))

	)

314 
	#__isuµ”_l
(
c
,
l
è
	`__isùy³_l
((c), 
_ISuµ”
, (l))

	)

315 
	#__isxdig™_l
(
c
,
l
è
	`__isùy³_l
((c), 
_ISxdig™
, (l))

	)

317 
	#__isbÏnk_l
(
c
,
l
è
	`__isùy³_l
((c), 
_ISbÏnk
, (l))

	)

319 #ià
defšed
 
__USE_SVID
 || defšed 
__USE_MISC


320 
	#__i§scii_l
(
c
,
l
è(Ö), 
	`__i§scii
 (c))

	)

321 
	#__tßscii_l
(
c
,
l
è(Ö), 
	`__tßscii
 (c))

	)

324 
	#i§Êum_l
(
c
,
l
è
	`__i§Êum_l
 ((c), (l))

	)

325 
	#i§Íha_l
(
c
,
l
è
	`__i§Íha_l
 ((c), (l))

	)

326 
	#isúŒl_l
(
c
,
l
è
	`__isúŒl_l
 ((c), (l))

	)

327 
	#isdig™_l
(
c
,
l
è
	`__isdig™_l
 ((c), (l))

	)

328 
	#i¦ow”_l
(
c
,
l
è
	`__i¦ow”_l
 ((c), (l))

	)

329 
	#isg¿ph_l
(
c
,
l
è
	`__isg¿ph_l
 ((c), (l))

	)

330 
	#i¥ršt_l
(
c
,
l
è
	`__i¥ršt_l
 ((c), (l))

	)

331 
	#i¥unù_l
(
c
,
l
è
	`__i¥unù_l
 ((c), (l))

	)

332 
	#is¥aû_l
(
c
,
l
è
	`__is¥aû_l
 ((c), (l))

	)

333 
	#isuµ”_l
(
c
,
l
è
	`__isuµ”_l
 ((c), (l))

	)

334 
	#isxdig™_l
(
c
,
l
è
	`__isxdig™_l
 ((c), (l))

	)

336 
	#isbÏnk_l
(
c
,
l
è
	`__isbÏnk_l
 ((c), (l))

	)

338 #ià
defšed
 
__USE_SVID
 || defšed 
__USE_MISC


339 
	#i§scii_l
(
c
,
l
è
	`__i§scii_l
 ((c), (l))

	)

340 
	#tßscii_l
(
c
,
l
è
	`__tßscii_l
 ((c), (l))

	)

347 
__END_DECLS


	@/usr/include/stdc-predef.h

18 #iâdef 
_STDC_PREDEF_H


19 
	#_STDC_PREDEF_H
 1

	)

36 #ifdeà
__GCC_IEC_559


37 #ià
__GCC_IEC_559
 > 0

38 
	#__STDC_IEC_559__
 1

	)

41 
	#__STDC_IEC_559__
 1

	)

44 #ifdeà
__GCC_IEC_559_COMPLEX


45 #ià
__GCC_IEC_559_COMPLEX
 > 0

46 
	#__STDC_IEC_559_COMPLEX__
 1

	)

49 
	#__STDC_IEC_559_COMPLEX__
 1

	)

54 
	#__STDC_ISO_10646__
 201103L

	)

57 
	#__STDC_NO_THREADS__
 1

	)

	@/usr/include/endian.h

18 #iâdef 
_ENDIAN_H


19 
	#_ENDIAN_H
 1

	)

21 
	~<ã©u»s.h
>

31 
	#__LITTLE_ENDIAN
 1234

	)

32 
	#__BIG_ENDIAN
 4321

	)

33 
	#__PDP_ENDIAN
 3412

	)

36 
	~<b™s/’dŸn.h
>

40 #iâdeà
__FLOAT_WORD_ORDER


41 
	#__FLOAT_WORD_ORDER
 
__BYTE_ORDER


	)

44 #ifdef 
__USE_BSD


45 
	#LITTLE_ENDIAN
 
__LITTLE_ENDIAN


	)

46 
	#BIG_ENDIAN
 
__BIG_ENDIAN


	)

47 
	#PDP_ENDIAN
 
__PDP_ENDIAN


	)

48 
	#BYTE_ORDER
 
__BYTE_ORDER


	)

51 #ià
__BYTE_ORDER
 =ğ
__LITTLE_ENDIAN


52 
	#__LONG_LONG_PAIR
(
HI
, 
LO
èLO, 
	)
HI

53 #–ià
__BYTE_ORDER
 =ğ
__BIG_ENDIAN


54 
	#__LONG_LONG_PAIR
(
HI
, 
LO
èHI, 
	)
LO

58 #ià
defšed
 
__USE_BSD
 && !defšed 
__ASSEMBLER__


60 
	~<b™s/by‹sw­.h
>

62 #ià
__BYTE_ORDER
 =ğ
__LITTLE_ENDIAN


63 
	#htobe16
(
x
è
	`__bsw­_16
 (x)

	)

64 
	#htŞe16
(
x
è(x)

	)

65 
	#be16toh
(
x
è
	`__bsw­_16
 (x)

	)

66 
	#Ë16toh
(
x
è(x)

	)

68 
	#htobe32
(
x
è
	`__bsw­_32
 (x)

	)

69 
	#htŞe32
(
x
è(x)

	)

70 
	#be32toh
(
x
è
	`__bsw­_32
 (x)

	)

71 
	#Ë32toh
(
x
è(x)

	)

73 
	#htobe64
(
x
è
	`__bsw­_64
 (x)

	)

74 
	#htŞe64
(
x
è(x)

	)

75 
	#be64toh
(
x
è
	`__bsw­_64
 (x)

	)

76 
	#Ë64toh
(
x
è(x)

	)

79 
	#htobe16
(
x
è(x)

	)

80 
	#htŞe16
(
x
è
	`__bsw­_16
 (x)

	)

81 
	#be16toh
(
x
è(x)

	)

82 
	#Ë16toh
(
x
è
	`__bsw­_16
 (x)

	)

84 
	#htobe32
(
x
è(x)

	)

85 
	#htŞe32
(
x
è
	`__bsw­_32
 (x)

	)

86 
	#be32toh
(
x
è(x)

	)

87 
	#Ë32toh
(
x
è
	`__bsw­_32
 (x)

	)

89 
	#htobe64
(
x
è(x)

	)

90 
	#htŞe64
(
x
è
	`__bsw­_64
 (x)

	)

91 
	#be64toh
(
x
è(x)

	)

92 
	#Ë64toh
(
x
è
	`__bsw­_64
 (x)

	)

	@/usr/include/gconv.h

22 #iâdeà
_GCONV_H


23 
	#_GCONV_H
 1

	)

25 
	~<ã©u»s.h
>

26 
	#__Ãed_mb¡©e_t


	)

27 
	#__Ãed_wšt_t


	)

28 
	~<wch¬.h
>

29 
	#__Ãed_size_t


	)

30 
	#__Ãed_wch¬_t


	)

31 
	~<¡ddef.h
>

34 
	#__UNKNOWN_10646_CHAR
 ((
wch¬_t
è0xfffd)

	)

39 
	m__GCONV_OK
 = 0,

40 
	m__GCONV_NOCONV
,

41 
	m__GCONV_NODB
,

42 
	m__GCONV_NOMEM
,

44 
	m__GCONV_EMPTY_INPUT
,

45 
	m__GCONV_FULL_OUTPUT
,

46 
	m__GCONV_ILLEGAL_INPUT
,

47 
	m__GCONV_INCOMPLETE_INPUT
,

49 
	m__GCONV_ILLEGAL_DESCRIPTOR
,

50 
	m__GCONV_INTERNAL_ERROR


57 
	m__GCONV_IS_LAST
 = 0x0001,

58 
	m__GCONV_IGNORE_ERRORS
 = 0x0002,

59 
	m__GCONV_SWAP
 = 0x0004

64 
	g__gcÚv_¡•
;

65 
	g__gcÚv_¡•_d©a
;

66 
	g__gcÚv_lßded_objeù
;

67 
	g__gcÚv_Œªs_d©a
;

71 (*
	t__gcÚv_fù
è(
	t__gcÚv_¡•
 *, 
	t__gcÚv_¡•_d©a
 *,

73 **, 
	tsize_t
 *, , );

76 
	$wšt_t
 (*
	t__gcÚv_btowc_fù
è(
	t__gcÚv_¡•
 *, );

79 (*
	t__gcÚv_š™_fù
è(
	t__gcÚv_¡•
 *);

80 (*
	t__gcÚv_’d_fù
è(
	t__gcÚv_¡•
 *);

84 (*
	t__gcÚv_Œªs_fù
è(
	t__gcÚv_¡•
 *,

85 
	t__gcÚv_¡•_d©a
 *, *,

89 
	tsize_t
 *);

92 (*
	t__gcÚv_Œªs_cÚ‹xt_fù
) (*, const *,

97 (*
	t__gcÚv_Œªs_qu”y_fù
) (const *, const ***,

98 
	tsize_t
 *);

101 (*
	t__gcÚv_Œªs_š™_fù
) (**, const *);

102 (*
	t__gcÚv_Œªs_’d_fù
) (*);

104 
	s__gcÚv_Œªs_d©a


107 
__gcÚv_Œªs_fù
 
__Œªs_fù
;

108 
__gcÚv_Œªs_cÚ‹xt_fù
 
__Œªs_cÚ‹xt_fù
;

109 
__gcÚv_Œªs_’d_fù
 
__Œªs_’d_fù
;

110 *
__d©a
;

111 
__gcÚv_Œªs_d©a
 *
__Ãxt
;

116 
	s__gcÚv_¡•


118 
__gcÚv_lßded_objeù
 *
__shlib_hªdË
;

119 cÚ¡ *
__modÇme
;

121 
__couÁ”
;

123 *
__äom_Çme
;

124 *
__to_Çme
;

126 
__gcÚv_fù
 
__fù
;

127 
__gcÚv_btowc_fù
 
__btowc_fù
;

128 
__gcÚv_š™_fù
 
__š™_fù
;

129 
__gcÚv_’d_fù
 
__’d_fù
;

133 
__mš_Ãeded_äom
;

134 
__max_Ãeded_äom
;

135 
__mš_Ãeded_to
;

136 
__max_Ãeded_to
;

139 
__¡©eful
;

141 *
__d©a
;

146 
	s__gcÚv_¡•_d©a


148 *
__outbuf
;

149 *
__outbuãnd
;

153 
__æags
;

157 
__švoÿtiÚ_couÁ”
;

161 
__š‹º®_u£
;

163 
__mb¡©e_t
 *
__¡©•
;

164 
__mb¡©e_t
 
__¡©e
;

168 
__gcÚv_Œªs_d©a
 *
__Œªs
;

173 
	s__gcÚv_šfo


175 
size_t
 
__n¡•s
;

176 
__gcÚv_¡•
 *
__¡•s
;

177 
__ex‹nsiÚ__
 
__gcÚv_¡•_d©a
 
__d©a
 
__æex¬r
;

178 } *
	t__gcÚv_t
;

	@/usr/include/wchar.h

23 #iâdeà
_WCHAR_H


25 #ià!
defšed
 
__Ãed_mb¡©e_t
 && !defšed 
__Ãed_wšt_t


26 
	#_WCHAR_H
 1

	)

27 
	~<ã©u»s.h
>

30 #ifdeà
_WCHAR_H


32 
	#__Ãed___FILE


	)

33 #ià
defšed
 
__USE_UNIX98
 || defšed 
__USE_XOPEN2K


34 
	#__Ãed_FILE


	)

36 
	~<¡dio.h
>

38 
	#__Ãed___va_li¡


	)

39 
	~<¡d¬g.h
>

41 
	~<b™s/wch¬.h
>

44 
	#__Ãed_size_t


	)

45 
	#__Ãed_wch¬_t


	)

46 
	#__Ãed_NULL


	)

48 #ià
defšed
 
_WCHAR_H
 || defšed 
__Ãed_wšt_t
 || !defšed 
__WINT_TYPE__


49 #undeà
__Ãed_wšt_t


50 
	#__Ãed_wšt_t


	)

51 
	~<¡ddef.h
>

55 #iâdeà
_WINT_T


60 
	#_WINT_T


	)

61 
	twšt_t
;

65 #ià
defšed
 
__ılu¥lus
 && defšed 
_GLIBCPP_USE_NAMESPACES
 \

66 && 
defšed
 
__WINT_TYPE__


67 
__BEGIN_NAMESPACE_STD


68 
__WINT_TYPE__
 
	twšt_t
;

69 
	g__END_NAMESPACE_STD


74 #ià
defšed
 
__ılu¥lus
 && 
__GNUC_PREREQ
 (4, 4)

75 
	#__CORRECT_ISO_CPP_WCHAR_H_PROTO


	)

79 #ià(
defšed
 
_WCHAR_H
 || defšed 
__Ãed_mb¡©e_t
è&& !defšed 
____mb¡©e_t_defšed


80 
	#____mb¡©e_t_defšed
 1

	)

84 
	m__couÁ
;

87 #ifdeà
__WINT_TYPE__


88 
__WINT_TYPE__
 
	m__wch
;

90 
wšt_t
 
	m__wch
;

92 
	m__wchb
[4];

93 } 
	m__v®ue
;

94 } 
	t__mb¡©e_t
;

96 #undeà
__Ãed_mb¡©e_t


101 #ifdeà
_WCHAR_H


103 #iâdeà
__mb¡©e_t_defšed


104 
__BEGIN_NAMESPACE_C99


106 
__mb¡©e_t
 
	tmb¡©e_t
;

107 
	g__END_NAMESPACE_C99


108 
	#__mb¡©e_t_defšed
 1

	)

111 #ifdeà
__USE_GNU


112 
	$__USING_NAMESPACE_C99
(
mb¡©e_t
)

115 #iâdeà
WCHAR_MIN


117 
	#WCHAR_MIN
 
__WCHAR_MIN


	)

118 
	#WCHAR_MAX
 
__WCHAR_MAX


	)

121 #iâdeà
WEOF


122 
	#WEOF
 (0xffffffffu)

	)

127 #ià
defšed
 
__USE_XOPEN
 && !defšed 
__USE_UNIX98


128 
	~<wùy³.h
>

132 
__BEGIN_DECLS


134 
__BEGIN_NAMESPACE_STD


137 
tm
;

138 
__END_NAMESPACE_STD


142 
	$__USING_NAMESPACE_STD
(
tm
)

145 
__BEGIN_NAMESPACE_STD


147 
wch¬_t
 *
	$wcsıy
 (
wch¬_t
 *
__»¡riù
 
__de¡
,

148 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__¤c
è
__THROW
;

150 
wch¬_t
 *
	$wc¢ıy
 (
wch¬_t
 *
__»¡riù
 
__de¡
,

151 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__¤c
, 
size_t
 
__n
)

152 
__THROW
;

155 
wch¬_t
 *
	$wcsÿt
 (
wch¬_t
 *
__»¡riù
 
__de¡
,

156 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__¤c
è
__THROW
;

158 
wch¬_t
 *
	$wc¢ÿt
 (
wch¬_t
 *
__»¡riù
 
__de¡
,

159 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__¤c
, 
size_t
 
__n
)

160 
__THROW
;

163 
	$wcscmp
 (cÚ¡ 
wch¬_t
 *
__s1
, cÚ¡ wch¬_ˆ*
__s2
)

164 
__THROW
 
__©Œibu‹_pu»__
;

166 
	$wc¢cmp
 (cÚ¡ 
wch¬_t
 *
__s1
, cÚ¡ wch¬_ˆ*
__s2
, 
size_t
 
__n
)

167 
__THROW
 
__©Œibu‹_pu»__
;

168 
__END_NAMESPACE_STD


170 #ifdeà
__USE_XOPEN2K8


172 
	$wcsÿ£cmp
 (cÚ¡ 
wch¬_t
 *
__s1
, cÚ¡ wch¬_ˆ*
__s2
è
__THROW
;

175 
	$wc¢ÿ£cmp
 (cÚ¡ 
wch¬_t
 *
__s1
, cÚ¡ wch¬_ˆ*
__s2
,

176 
size_t
 
__n
è
__THROW
;

180 
	~<xloÿË.h
>

182 
	$wcsÿ£cmp_l
 (cÚ¡ 
wch¬_t
 *
__s1
, cÚ¡ wch¬_ˆ*
__s2
,

183 
__loÿË_t
 
__loc
è
__THROW
;

185 
	$wc¢ÿ£cmp_l
 (cÚ¡ 
wch¬_t
 *
__s1
, cÚ¡ wch¬_ˆ*
__s2
,

186 
size_t
 
__n
, 
__loÿË_t
 
__loc
è
__THROW
;

189 
__BEGIN_NAMESPACE_STD


192 
	$wcscŞl
 (cÚ¡ 
wch¬_t
 *
__s1
, cÚ¡ wch¬_ˆ*
__s2
è
__THROW
;

196 
size_t
 
	$wcsxäm
 (
wch¬_t
 *
__»¡riù
 
__s1
,

197 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__s2
, 
size_t
 
__n
è
__THROW
;

198 
__END_NAMESPACE_STD


200 #ifdeà
__USE_XOPEN2K8


206 
	$wcscŞl_l
 (cÚ¡ 
wch¬_t
 *
__s1
, cÚ¡ wch¬_ˆ*
__s2
,

207 
__loÿË_t
 
__loc
è
__THROW
;

212 
size_t
 
	$wcsxäm_l
 (
wch¬_t
 *
__s1
, cÚ¡ wch¬_ˆ*
__s2
,

213 
size_t
 
__n
, 
__loÿË_t
 
__loc
è
__THROW
;

216 
wch¬_t
 *
	$wcsdup
 (cÚ¡ 
wch¬_t
 *
__s
è
__THROW
 
__©Œibu‹_m®loc__
;

219 
__BEGIN_NAMESPACE_STD


221 #ifdeà
__CORRECT_ISO_CPP_WCHAR_H_PROTO


222 "C++" 
wch¬_t
 *
	$wcschr
 (
wch¬_t
 *
__wcs
, wch¬_ˆ
__wc
)

223 
__THROW
 
	`__asm
 ("wcschr"è
__©Œibu‹_pu»__
;

224 "C++" cÚ¡ 
wch¬_t
 *
	$wcschr
 (cÚ¡ 
wch¬_t
 *
__wcs
, wch¬_ˆ
__wc
)

225 
__THROW
 
	`__asm
 ("wcschr"è
__©Œibu‹_pu»__
;

227 
wch¬_t
 *
	$wcschr
 (cÚ¡ 
wch¬_t
 *
__wcs
, wch¬_ˆ
__wc
)

228 
__THROW
 
__©Œibu‹_pu»__
;

231 #ifdeà
__CORRECT_ISO_CPP_WCHAR_H_PROTO


232 "C++" 
wch¬_t
 *
	$wc¤chr
 (
wch¬_t
 *
__wcs
, wch¬_ˆ
__wc
)

233 
__THROW
 
	`__asm
 ("wc¤chr"è
__©Œibu‹_pu»__
;

234 "C++" cÚ¡ 
wch¬_t
 *
	$wc¤chr
 (cÚ¡ 
wch¬_t
 *
__wcs
, wch¬_ˆ
__wc
)

235 
__THROW
 
	`__asm
 ("wc¤chr"è
__©Œibu‹_pu»__
;

237 
wch¬_t
 *
	$wc¤chr
 (cÚ¡ 
wch¬_t
 *
__wcs
, wch¬_ˆ
__wc
)

238 
__THROW
 
__©Œibu‹_pu»__
;

240 
__END_NAMESPACE_STD


242 #ifdeà
__USE_GNU


245 
wch¬_t
 *
	$wcschºul
 (cÚ¡ 
wch¬_t
 *
__s
, wch¬_ˆ
__wc
)

246 
__THROW
 
__©Œibu‹_pu»__
;

249 
__BEGIN_NAMESPACE_STD


252 
size_t
 
	$wcsc¥n
 (cÚ¡ 
wch¬_t
 *
__wcs
, cÚ¡ wch¬_ˆ*
__»jeù
)

253 
__THROW
 
__©Œibu‹_pu»__
;

256 
size_t
 
	$wcs¥n
 (cÚ¡ 
wch¬_t
 *
__wcs
, cÚ¡ wch¬_ˆ*
__acû±
)

257 
__THROW
 
__©Œibu‹_pu»__
;

259 #ifdeà
__CORRECT_ISO_CPP_WCHAR_H_PROTO


260 "C++" 
wch¬_t
 *
	$wc¥brk
 (
wch¬_t
 *
__wcs
, cÚ¡ wch¬_ˆ*
__acû±
)

261 
__THROW
 
	`__asm
 ("wc¥brk"è
__©Œibu‹_pu»__
;

262 "C++" cÚ¡ 
wch¬_t
 *
	$wc¥brk
 (cÚ¡ 
wch¬_t
 *
__wcs
,

263 cÚ¡ 
wch¬_t
 *
__acû±
)

264 
__THROW
 
	`__asm
 ("wc¥brk"è
__©Œibu‹_pu»__
;

266 
wch¬_t
 *
	$wc¥brk
 (cÚ¡ 
wch¬_t
 *
__wcs
, cÚ¡ wch¬_ˆ*
__acû±
)

267 
__THROW
 
__©Œibu‹_pu»__
;

270 #ifdeà
__CORRECT_ISO_CPP_WCHAR_H_PROTO


271 "C++" 
wch¬_t
 *
	$wcs¡r
 (
wch¬_t
 *
__hay¡ack
, cÚ¡ wch¬_ˆ*
__ÃedË
)

272 
__THROW
 
	`__asm
 ("wcs¡r"è
__©Œibu‹_pu»__
;

273 "C++" cÚ¡ 
wch¬_t
 *
	$wcs¡r
 (cÚ¡ 
wch¬_t
 *
__hay¡ack
,

274 cÚ¡ 
wch¬_t
 *
__ÃedË
)

275 
__THROW
 
	`__asm
 ("wcs¡r"è
__©Œibu‹_pu»__
;

277 
wch¬_t
 *
	$wcs¡r
 (cÚ¡ 
wch¬_t
 *
__hay¡ack
, cÚ¡ wch¬_ˆ*
__ÃedË
)

278 
__THROW
 
__©Œibu‹_pu»__
;

282 
wch¬_t
 *
	$wc¡ok
 (
wch¬_t
 *
__»¡riù
 
__s
,

283 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__d–im
,

284 
wch¬_t
 **
__»¡riù
 
__±r
è
__THROW
;

287 
size_t
 
	$wc¦’
 (cÚ¡ 
wch¬_t
 *
__s
è
__THROW
 
__©Œibu‹_pu»__
;

288 
__END_NAMESPACE_STD


290 #ifdeà
__USE_XOPEN


292 #ifdeà
__CORRECT_ISO_CPP_WCHAR_H_PROTO


293 "C++" 
wch¬_t
 *
	$wcswcs
 (
wch¬_t
 *
__hay¡ack
, cÚ¡ wch¬_ˆ*
__ÃedË
)

294 
__THROW
 
	`__asm
 ("wcswcs"è
__©Œibu‹_pu»__
;

295 "C++" cÚ¡ 
wch¬_t
 *
	$wcswcs
 (cÚ¡ 
wch¬_t
 *
__hay¡ack
,

296 cÚ¡ 
wch¬_t
 *
__ÃedË
)

297 
__THROW
 
	`__asm
 ("wcswcs"è
__©Œibu‹_pu»__
;

299 
wch¬_t
 *
	$wcswcs
 (cÚ¡ 
wch¬_t
 *
__hay¡ack
, cÚ¡ wch¬_ˆ*
__ÃedË
)

300 
__THROW
 
__©Œibu‹_pu»__
;

304 #ifdeà
__USE_XOPEN2K8


306 
size_t
 
	$wc¢Ën
 (cÚ¡ 
wch¬_t
 *
__s
, 
size_t
 
__maxËn
)

307 
__THROW
 
__©Œibu‹_pu»__
;

311 
__BEGIN_NAMESPACE_STD


313 #ifdeà
__CORRECT_ISO_CPP_WCHAR_H_PROTO


314 "C++" 
wch¬_t
 *
	$wmemchr
 (
wch¬_t
 *
__s
, wch¬_ˆ
__c
, 
size_t
 
__n
)

315 
__THROW
 
	`__asm
 ("wmemchr"è
__©Œibu‹_pu»__
;

316 "C++" cÚ¡ 
wch¬_t
 *
	$wmemchr
 (cÚ¡ 
wch¬_t
 *
__s
, wch¬_ˆ
__c
,

317 
size_t
 
__n
)

318 
__THROW
 
	`__asm
 ("wmemchr"è
__©Œibu‹_pu»__
;

320 
wch¬_t
 *
	$wmemchr
 (cÚ¡ 
wch¬_t
 *
__s
, wch¬_ˆ
__c
, 
size_t
 
__n
)

321 
__THROW
 
__©Œibu‹_pu»__
;

325 
	$wmemcmp
 (cÚ¡ 
wch¬_t
 *
__s1
, cÚ¡ wch¬_ˆ*
__s2
, 
size_t
 
__n
)

326 
__THROW
 
__©Œibu‹_pu»__
;

329 
wch¬_t
 *
	$wmemıy
 (
wch¬_t
 *
__»¡riù
 
__s1
,

330 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__s2
, 
size_t
 
__n
è
__THROW
;

334 
wch¬_t
 *
	$wmemmove
 (
wch¬_t
 *
__s1
, cÚ¡ wch¬_ˆ*
__s2
, 
size_t
 
__n
)

335 
__THROW
;

338 
wch¬_t
 *
	$wmem£t
 (
wch¬_t
 *
__s
, wch¬_ˆ
__c
, 
size_t
 
__n
è
__THROW
;

339 
__END_NAMESPACE_STD


341 #ifdeà
__USE_GNU


344 
wch¬_t
 *
	$wmempıy
 (
wch¬_t
 *
__»¡riù
 
__s1
,

345 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__s2
, 
size_t
 
__n
)

346 
__THROW
;

350 
__BEGIN_NAMESPACE_STD


353 
wšt_t
 
	$btowc
 (
__c
è
__THROW
;

357 
	$wùob
 (
wšt_t
 
__c
è
__THROW
;

361 
	$mbsš™
 (cÚ¡ 
mb¡©e_t
 *
__ps
è
__THROW
 
__©Œibu‹_pu»__
;

365 
size_t
 
	$mb¹owc
 (
wch¬_t
 *
__»¡riù
 
__pwc
,

366 cÚ¡ *
__»¡riù
 
__s
, 
size_t
 
__n
,

367 
mb¡©e_t
 *
__»¡riù
 
__p
è
__THROW
;

370 
size_t
 
	$wütomb
 (*
__»¡riù
 
__s
, 
wch¬_t
 
__wc
,

371 
mb¡©e_t
 *
__»¡riù
 
__ps
è
__THROW
;

374 
size_t
 
	$__mb¾’
 (cÚ¡ *
__»¡riù
 
__s
, 
size_t
 
__n
,

375 
mb¡©e_t
 *
__»¡riù
 
__ps
è
__THROW
;

376 
size_t
 
	$mb¾’
 (cÚ¡ *
__»¡riù
 
__s
, 
size_t
 
__n
,

377 
mb¡©e_t
 *
__»¡riù
 
__ps
è
__THROW
;

378 
__END_NAMESPACE_STD


380 #ifdeà
__USE_EXTERN_INLINES


386 
wšt_t
 
	$__btowc_®Ÿs
 (
__c
è
	`__asm
 ("btowc");

387 
__ex‹º_šlše
 
wšt_t


388 
	`__NTH
 (
	$btowc
 (
__c
))

389 {  (
	`__butš_cÚ¡ªt_p
 (
__c
) && __c >= '\0' && __c <= '\x7f'

390 ? (
wšt_t
è
__c
 : 
	`__btowc_®Ÿs
 (__c)); 
	}
}

392 
	$__wùob_®Ÿs
 (
wšt_t
 
__c
è
	`__asm
 ("wctob");

393 
__ex‹º_šlše
 

394 
	`__NTH
 (
	$wùob
 (
wšt_t
 
__wc
))

395 {  (
	`__butš_cÚ¡ªt_p
 (
__wc
è&& __wø>ğ
L
'\0' && __wc <= L'\x7f'

396 ? (è
__wc
 : 
	`__wùob_®Ÿs
 (__wc)); 
	}
}

398 
__ex‹º_šlše
 
size_t


399 
__NTH
 (
	$mb¾’
 (cÚ¡ *
__»¡riù
 
__s
, 
size_t
 
__n
,

400 
mb¡©e_t
 *
__»¡riù
 
__ps
))

401 {  (
__ps
 !ğ
NULL


402 ? 
	`mb¹owc
 (
NULL
, 
__s
, 
__n
, 
__ps
è: 
	`__mb¾’
 (__s, __n, NULL)); 
	}
}

405 
__BEGIN_NAMESPACE_STD


408 
size_t
 
	$mb¤towcs
 (
wch¬_t
 *
__»¡riù
 
__d¡
,

409 cÚ¡ **
__»¡riù
 
__¤c
, 
size_t
 
__Ën
,

410 
mb¡©e_t
 *
__»¡riù
 
__ps
è
__THROW
;

414 
size_t
 
	$wc¤tombs
 (*
__»¡riù
 
__d¡
,

415 cÚ¡ 
wch¬_t
 **
__»¡riù
 
__¤c
, 
size_t
 
__Ën
,

416 
mb¡©e_t
 *
__»¡riù
 
__ps
è
__THROW
;

417 
__END_NAMESPACE_STD


420 #ifdef 
__USE_XOPEN2K8


423 
size_t
 
	$mb¢¹owcs
 (
wch¬_t
 *
__»¡riù
 
__d¡
,

424 cÚ¡ **
__»¡riù
 
__¤c
, 
size_t
 
__nmc
,

425 
size_t
 
__Ën
, 
mb¡©e_t
 *
__»¡riù
 
__ps
è
__THROW
;

429 
size_t
 
	$wc¢¹ombs
 (*
__»¡riù
 
__d¡
,

430 cÚ¡ 
wch¬_t
 **
__»¡riù
 
__¤c
,

431 
size_t
 
__nwc
, size_ˆ
__Ën
,

432 
mb¡©e_t
 *
__»¡riù
 
__ps
è
__THROW
;

437 #ifdeà
__USE_XOPEN


439 
	$wcwidth
 (
wch¬_t
 
__c
è
__THROW
;

443 
	$wcswidth
 (cÚ¡ 
wch¬_t
 *
__s
, 
size_t
 
__n
è
__THROW
;

447 
__BEGIN_NAMESPACE_STD


450 
	$wc¡od
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__ÅŒ
,

451 
wch¬_t
 **
__»¡riù
 
__’d±r
è
__THROW
;

452 
__END_NAMESPACE_STD


454 #ifdeà
__USE_ISOC99


455 
__BEGIN_NAMESPACE_C99


457 
	$wc¡of
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__ÅŒ
,

458 
wch¬_t
 **
__»¡riù
 
__’d±r
è
__THROW
;

459 
	$wc¡Şd
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__ÅŒ
,

460 
wch¬_t
 **
__»¡riù
 
__’d±r
è
__THROW
;

461 
__END_NAMESPACE_C99


465 
__BEGIN_NAMESPACE_STD


468 
	$wc¡Ş
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__ÅŒ
,

469 
wch¬_t
 **
__»¡riù
 
__’d±r
, 
__ba£
è
__THROW
;

473 
	$wc¡oul
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__ÅŒ
,

474 
wch¬_t
 **
__»¡riù
 
__’d±r
, 
__ba£
)

475 
__THROW
;

476 
__END_NAMESPACE_STD


478 #ifdeà
__USE_ISOC99


479 
__BEGIN_NAMESPACE_C99


482 
__ex‹nsiÚ__


483 
	$wc¡Şl
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__ÅŒ
,

484 
wch¬_t
 **
__»¡riù
 
__’d±r
, 
__ba£
)

485 
__THROW
;

489 
__ex‹nsiÚ__


490 
	$wc¡ouÎ
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__ÅŒ
,

491 
wch¬_t
 **
__»¡riù
 
__’d±r
,

492 
__ba£
è
__THROW
;

493 
__END_NAMESPACE_C99


496 #ifdeà
__USE_GNU


499 
__ex‹nsiÚ__


500 
	$wc¡oq
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__ÅŒ
,

501 
wch¬_t
 **
__»¡riù
 
__’d±r
, 
__ba£
)

502 
__THROW
;

506 
__ex‹nsiÚ__


507 
	$wc¡ouq
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__ÅŒ
,

508 
wch¬_t
 **
__»¡riù
 
__’d±r
,

509 
__ba£
è
__THROW
;

512 #ifdeà
__USE_GNU


526 
	~<xloÿË.h
>

530 
	$wc¡Ş_l
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__ÅŒ
,

531 
wch¬_t
 **
__»¡riù
 
__’d±r
, 
__ba£
,

532 
__loÿË_t
 
__loc
è
__THROW
;

534 
	$wc¡oul_l
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__ÅŒ
,

535 
wch¬_t
 **
__»¡riù
 
__’d±r
,

536 
__ba£
, 
__loÿË_t
 
__loc
è
__THROW
;

538 
__ex‹nsiÚ__


539 
	$wc¡Şl_l
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__ÅŒ
,

540 
wch¬_t
 **
__»¡riù
 
__’d±r
,

541 
__ba£
, 
__loÿË_t
 
__loc
è
__THROW
;

543 
__ex‹nsiÚ__


544 
	$wc¡ouÎ_l
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__ÅŒ
,

545 
wch¬_t
 **
__»¡riù
 
__’d±r
,

546 
__ba£
, 
__loÿË_t
 
__loc
)

547 
__THROW
;

549 
	$wc¡od_l
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__ÅŒ
,

550 
wch¬_t
 **
__»¡riù
 
__’d±r
, 
__loÿË_t
 
__loc
)

551 
__THROW
;

553 
	$wc¡of_l
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__ÅŒ
,

554 
wch¬_t
 **
__»¡riù
 
__’d±r
, 
__loÿË_t
 
__loc
)

555 
__THROW
;

557 
	$wc¡Şd_l
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__ÅŒ
,

558 
wch¬_t
 **
__»¡riù
 
__’d±r
,

559 
__loÿË_t
 
__loc
è
__THROW
;

563 #ifdeà
__USE_XOPEN2K8


566 
wch¬_t
 *
	$wııy
 (
wch¬_t
 *
__»¡riù
 
__de¡
,

567 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__¤c
è
__THROW
;

571 
wch¬_t
 *
	$wınıy
 (
wch¬_t
 *
__»¡riù
 
__de¡
,

572 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__¤c
, 
size_t
 
__n
)

573 
__THROW
;

580 
__FILE
 *
	$İ’_wmem¡»am
 (
wch¬_t
 **
__buæoc
, 
size_t
 *
__siz–oc
è
__THROW
;

583 #ià
defšed
 
__USE_ISOC95
 || defšed 
__USE_UNIX98


584 
__BEGIN_NAMESPACE_STD


587 
	$fwide
 (
__FILE
 *
__å
, 
__mode
è
__THROW
;

594 
	`fw´štf
 (
__FILE
 *
__»¡riù
 
__¡»am
,

595 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
, ...)

601 
	`w´štf
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
, ...)

604 
	$sw´štf
 (
wch¬_t
 *
__»¡riù
 
__s
, 
size_t
 
__n
,

605 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
, ...)

606 
__THROW
 ;

612 
	`vfw´štf
 (
__FILE
 *
__»¡riù
 
__s
,

613 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
,

614 
__gnuc_va_li¡
 
__¬g
)

620 
	`vw´štf
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
,

621 
__gnuc_va_li¡
 
__¬g
)

625 
	$vsw´štf
 (
wch¬_t
 *
__»¡riù
 
__s
, 
size_t
 
__n
,

626 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
,

627 
__gnuc_va_li¡
 
__¬g
)

628 
__THROW
 ;

635 
	`fwsÿnf
 (
__FILE
 *
__»¡riù
 
__¡»am
,

636 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
, ...)

642 
	`wsÿnf
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
, ...)

645 
	$swsÿnf
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__s
,

646 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
, ...)

647 
__THROW
 ;

649 #ià
defšed
 
__USE_ISOC99
 && !defšed 
__USE_GNU
 \

650 && (!
defšed
 
__LDBL_COMPAT
 || !defšed 
__REDIRECT
) \

651 && (
defšed
 
__STRICT_ANSI__
 || defšed 
__USE_XOPEN2K
)

652 #ifdeà
__REDIRECT


656 
	`__REDIRECT
 (
fwsÿnf
, (
__FILE
 *
__»¡riù
 
__¡»am
,

657 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
, ...),

658 
__isoc99_fwsÿnf
)

660 
	`__REDIRECT
 (
wsÿnf
, (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
, ...),

661 
__isoc99_wsÿnf
)

663 
	`__REDIRECT_NTH
 (
swsÿnf
, (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__s
,

664 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
,

665 ...), 
__isoc99_swsÿnf
)

668 
	`__isoc99_fwsÿnf
 (
__FILE
 *
__»¡riù
 
__¡»am
,

669 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
, ...);

670 
	`__isoc99_wsÿnf
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
, ...);

671 
	$__isoc99_swsÿnf
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__s
,

672 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
, ...)

673 
__THROW
;

674 
	#fwsÿnf
 
__isoc99_fwsÿnf


	)

675 
	#wsÿnf
 
__isoc99_wsÿnf


	)

676 
	#swsÿnf
 
__isoc99_swsÿnf


	)

680 
__END_NAMESPACE_STD


683 #ifdeà
__USE_ISOC99


684 
__BEGIN_NAMESPACE_C99


689 
	`vfwsÿnf
 (
__FILE
 *
__»¡riù
 
__s
,

690 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
,

691 
__gnuc_va_li¡
 
__¬g
)

697 
	`vwsÿnf
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
,

698 
__gnuc_va_li¡
 
__¬g
)

701 
	$vswsÿnf
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__s
,

702 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
,

703 
__gnuc_va_li¡
 
__¬g
)

704 
__THROW
 ;

706 #ià!
defšed
 
__USE_GNU
 \

707 && (!
defšed
 
__LDBL_COMPAT
 || !defšed 
__REDIRECT
) \

708 && (
defšed
 
__STRICT_ANSI__
 || defšed 
__USE_XOPEN2K
)

709 #ifdeà
__REDIRECT


710 
	`__REDIRECT
 (
vfwsÿnf
, (
__FILE
 *
__»¡riù
 
__s
,

711 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
,

712 
__gnuc_va_li¡
 
__¬g
), 
__isoc99_vfwsÿnf
)

714 
	`__REDIRECT
 (
vwsÿnf
, (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
,

715 
__gnuc_va_li¡
 
__¬g
), 
__isoc99_vwsÿnf
)

717 
	`__REDIRECT_NTH
 (
vswsÿnf
, (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__s
,

718 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
,

719 
__gnuc_va_li¡
 
__¬g
), 
__isoc99_vswsÿnf
)

722 
	`__isoc99_vfwsÿnf
 (
__FILE
 *
__»¡riù
 
__s
,

723 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
,

724 
__gnuc_va_li¡
 
__¬g
);

725 
	`__isoc99_vwsÿnf
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
,

726 
__gnuc_va_li¡
 
__¬g
);

727 
	$__isoc99_vswsÿnf
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__s
,

728 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
,

729 
__gnuc_va_li¡
 
__¬g
è
__THROW
;

730 
	#vfwsÿnf
 
__isoc99_vfwsÿnf


	)

731 
	#vwsÿnf
 
__isoc99_vwsÿnf


	)

732 
	#vswsÿnf
 
__isoc99_vswsÿnf


	)

736 
__END_NAMESPACE_C99


740 
__BEGIN_NAMESPACE_STD


745 
wšt_t
 
	`fg‘wc
 (
__FILE
 *
__¡»am
);

746 
wšt_t
 
	`g‘wc
 (
__FILE
 *
__¡»am
);

752 
wšt_t
 
	`g‘wch¬
 ();

759 
wšt_t
 
	`åutwc
 (
wch¬_t
 
__wc
, 
__FILE
 *
__¡»am
);

760 
wšt_t
 
	`putwc
 (
wch¬_t
 
__wc
, 
__FILE
 *
__¡»am
);

766 
wšt_t
 
	`putwch¬
 (
wch¬_t
 
__wc
);

774 
wch¬_t
 *
	`fg‘ws
 (wch¬_ˆ*
__»¡riù
 
__ws
, 
__n
,

775 
__FILE
 *
__»¡riù
 
__¡»am
);

781 
	`åutws
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__ws
,

782 
__FILE
 *
__»¡riù
 
__¡»am
);

789 
wšt_t
 
	`ung‘wc
 (wšt_ˆ
__wc
, 
__FILE
 *
__¡»am
);

790 
__END_NAMESPACE_STD


793 #ifdeà
__USE_GNU


801 
wšt_t
 
	`g‘wc_uÆocked
 (
__FILE
 *
__¡»am
);

802 
wšt_t
 
	`g‘wch¬_uÆocked
 ();

810 
wšt_t
 
	`fg‘wc_uÆocked
 (
__FILE
 *
__¡»am
);

818 
wšt_t
 
	`åutwc_uÆocked
 (
wch¬_t
 
__wc
, 
__FILE
 *
__¡»am
);

827 
wšt_t
 
	`putwc_uÆocked
 (
wch¬_t
 
__wc
, 
__FILE
 *
__¡»am
);

828 
wšt_t
 
	`putwch¬_uÆocked
 (
wch¬_t
 
__wc
);

837 
wch¬_t
 *
	`fg‘ws_uÆocked
 (wch¬_ˆ*
__»¡riù
 
__ws
, 
__n
,

838 
__FILE
 *
__»¡riù
 
__¡»am
);

846 
	`åutws_uÆocked
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__ws
,

847 
__FILE
 *
__»¡riù
 
__¡»am
);

851 
__BEGIN_NAMESPACE_C99


855 
size_t
 
	$wcsáime
 (
wch¬_t
 *
__»¡riù
 
__s
, 
size_t
 
__maxsize
,

856 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
,

857 cÚ¡ 
tm
 *
__»¡riù
 
__
è
__THROW
;

858 
__END_NAMESPACE_C99


860 #ifdeà
__USE_GNU


861 
	~<xloÿË.h
>

865 
size_t
 
	$wcsáime_l
 (
wch¬_t
 *
__»¡riù
 
__s
, 
size_t
 
__maxsize
,

866 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
,

867 cÚ¡ 
tm
 *
__»¡riù
 
__
,

868 
__loÿË_t
 
__loc
è
__THROW
;

877 #ià
defšed
 
__USE_UNIX98
 && !defšed 
__USE_GNU


878 
	#__Ãed_iswxxx


	)

879 
	~<wùy³.h
>

883 #ià
__USE_FORTIFY_LEVEL
 > 0 && 
defšed
 
__fÜtify_funùiÚ


884 
	~<b™s/wch¬2.h
>

887 #ifdeà
__LDBL_COMPAT


888 
	~<b™s/wch¬-ldbl.h
>

891 
__END_DECLS


899 #undeà
__Ãed_mb¡©e_t


900 #undeà
__Ãed_wšt_t


	@/usr/include/wctype.h

23 #iâdeà
_WCTYPE_H


25 
	~<ã©u»s.h
>

26 
	~<b™s/ty³s.h
>

28 #iâdeà
__Ãed_iswxxx


29 
	#_WCTYPE_H
 1

	)

32 
	#__Ãed_wšt_t


	)

33 
	~<wch¬.h
>

37 #iâdeà
WEOF


38 
	#WEOF
 (0xffffffffu)

	)

41 #undeà
__Ãed_iswxxx


46 #iâdeà
__iswxxx_defšed


47 
	#__iswxxx_defšed
 1

	)

49 
__BEGIN_NAMESPACE_C99


52 
	twùy³_t
;

53 
	g__END_NAMESPACE_C99


55 #iâdeà
_ISwb™


60 
	~<’dŸn.h
>

61 #ià
__BYTE_ORDER
 =ğ
__BIG_ENDIAN


62 
	#_ISwb™
(
b™
è(1 << (b™))

	)

64 
	#_ISwb™
(
b™
) \

65 ((
b™
) < 8 ? () ((1UL << (bit)) << 24) \

66 : ((
b™
) < 16 ? () ((1UL << (bit)) << 8) \

67 : ((
b™
) < 24 ? () ((1UL << (bit)) >> 8) \

68 : (è((1UL << (
b™
)è>> 24))))

	)

73 
	m__ISwuµ”
 = 0,

74 
	m__ISwlow”
 = 1,

75 
	m__ISw®pha
 = 2,

76 
	m__ISwdig™
 = 3,

77 
	m__ISwxdig™
 = 4,

78 
	m__ISw¥aû
 = 5,

79 
	m__ISw´št
 = 6,

80 
	m__ISwg¿ph
 = 7,

81 
	m__ISwbÏnk
 = 8,

82 
	m__ISwúŒl
 = 9,

83 
	m__ISwpunù
 = 10,

84 
	m__ISw®num
 = 11,

86 
	m_ISwuµ”
 = 
_ISwb™
 (
__ISwuµ”
),

87 
	m_ISwlow”
 = 
_ISwb™
 (
__ISwlow”
),

88 
	m_ISw®pha
 = 
_ISwb™
 (
__ISw®pha
),

89 
	m_ISwdig™
 = 
_ISwb™
 (
__ISwdig™
),

90 
	m_ISwxdig™
 = 
_ISwb™
 (
__ISwxdig™
),

91 
	m_ISw¥aû
 = 
_ISwb™
 (
__ISw¥aû
),

92 
	m_ISw´št
 = 
_ISwb™
 (
__ISw´št
),

93 
	m_ISwg¿ph
 = 
_ISwb™
 (
__ISwg¿ph
),

94 
	m_ISwbÏnk
 = 
_ISwb™
 (
__ISwbÏnk
),

95 
	m_ISwúŒl
 = 
_ISwb™
 (
__ISwúŒl
),

96 
	m_ISwpunù
 = 
_ISwb™
 (
__ISwpunù
),

97 
	m_ISw®num
 = 
_ISwb™
 (
__ISw®num
)

102 
__BEGIN_DECLS


104 
__BEGIN_NAMESPACE_C99


111 
	$isw®num
 (
wšt_t
 
__wc
è
__THROW
;

117 
	$isw®pha
 (
wšt_t
 
__wc
è
__THROW
;

120 
	$iswúŒl
 (
wšt_t
 
__wc
è
__THROW
;

124 
	$iswdig™
 (
wšt_t
 
__wc
è
__THROW
;

128 
	$iswg¿ph
 (
wšt_t
 
__wc
è
__THROW
;

133 
	$iswlow”
 (
wšt_t
 
__wc
è
__THROW
;

136 
	$isw´št
 (
wšt_t
 
__wc
è
__THROW
;

141 
	$iswpunù
 (
wšt_t
 
__wc
è
__THROW
;

146 
	$isw¥aû
 (
wšt_t
 
__wc
è
__THROW
;

151 
	$iswuµ”
 (
wšt_t
 
__wc
è
__THROW
;

156 
	$iswxdig™
 (
wšt_t
 
__wc
è
__THROW
;

161 #ifdeà
__USE_ISOC99


162 
	$iswbÏnk
 (
wšt_t
 
__wc
è
__THROW
;

171 
wùy³_t
 
	$wùy³
 (cÚ¡ *
__´İ”ty
è
__THROW
;

175 
	$iswùy³
 (
wšt_t
 
__wc
, 
wùy³_t
 
__desc
è
__THROW
;

176 
__END_NAMESPACE_C99


183 
__BEGIN_NAMESPACE_C99


186 cÚ¡ 
	t__št32_t
 *
	twù¿ns_t
;

187 
__END_NAMESPACE_C99


188 #ifdeà
__USE_GNU


189 
	$__USING_NAMESPACE_C99
(
wù¿ns_t
)

192 
__BEGIN_NAMESPACE_C99


194 
wšt_t
 
	$towlow”
 (
wšt_t
 
__wc
è
__THROW
;

197 
wšt_t
 
	$towuµ”
 (
wšt_t
 
__wc
è
__THROW
;

198 
__END_NAMESPACE_C99


200 
__END_DECLS


207 #ifdeà
_WCTYPE_H


213 
__BEGIN_DECLS


215 
__BEGIN_NAMESPACE_C99


218 
wù¿ns_t
 
	$wù¿ns
 (cÚ¡ *
__´İ”ty
è
__THROW
;

221 
wšt_t
 
	$towù¿ns
 (
wšt_t
 
__wc
, 
wù¿ns_t
 
__desc
è
__THROW
;

222 
__END_NAMESPACE_C99


224 #ifdeà
__USE_XOPEN2K8


226 
	~<xloÿË.h
>

230 
	$isw®num_l
 (
wšt_t
 
__wc
, 
__loÿË_t
 
__loÿË
è
__THROW
;

236 
	$isw®pha_l
 (
wšt_t
 
__wc
, 
__loÿË_t
 
__loÿË
è
__THROW
;

239 
	$iswúŒl_l
 (
wšt_t
 
__wc
, 
__loÿË_t
 
__loÿË
è
__THROW
;

243 
	$iswdig™_l
 (
wšt_t
 
__wc
, 
__loÿË_t
 
__loÿË
è
__THROW
;

247 
	$iswg¿ph_l
 (
wšt_t
 
__wc
, 
__loÿË_t
 
__loÿË
è
__THROW
;

252 
	$iswlow”_l
 (
wšt_t
 
__wc
, 
__loÿË_t
 
__loÿË
è
__THROW
;

255 
	$isw´št_l
 (
wšt_t
 
__wc
, 
__loÿË_t
 
__loÿË
è
__THROW
;

260 
	$iswpunù_l
 (
wšt_t
 
__wc
, 
__loÿË_t
 
__loÿË
è
__THROW
;

265 
	$isw¥aû_l
 (
wšt_t
 
__wc
, 
__loÿË_t
 
__loÿË
è
__THROW
;

270 
	$iswuµ”_l
 (
wšt_t
 
__wc
, 
__loÿË_t
 
__loÿË
è
__THROW
;

275 
	$iswxdig™_l
 (
wšt_t
 
__wc
, 
__loÿË_t
 
__loÿË
è
__THROW
;

280 
	$iswbÏnk_l
 (
wšt_t
 
__wc
, 
__loÿË_t
 
__loÿË
è
__THROW
;

284 
wùy³_t
 
	$wùy³_l
 (cÚ¡ *
__´İ”ty
, 
__loÿË_t
 
__loÿË
)

285 
__THROW
;

289 
	$iswùy³_l
 (
wšt_t
 
__wc
, 
wùy³_t
 
__desc
, 
__loÿË_t
 
__loÿË
)

290 
__THROW
;

298 
wšt_t
 
	$towlow”_l
 (
wšt_t
 
__wc
, 
__loÿË_t
 
__loÿË
è
__THROW
;

301 
wšt_t
 
	$towuµ”_l
 (
wšt_t
 
__wc
, 
__loÿË_t
 
__loÿË
è
__THROW
;

305 
wù¿ns_t
 
	$wù¿ns_l
 (cÚ¡ *
__´İ”ty
, 
__loÿË_t
 
__loÿË
)

306 
__THROW
;

309 
wšt_t
 
	$towù¿ns_l
 (
wšt_t
 
__wc
, 
wù¿ns_t
 
__desc
,

310 
__loÿË_t
 
__loÿË
è
__THROW
;

314 
__END_DECLS


	@
1
.
1
/usr/include
78
1339
addrdec.cc
addrdec.h
delayqueue.h
dram.cc
dram.h
dram_sched.cc
dram_sched.h
gpu-cache.cc
gpu-cache.h
gpu-misc.cc
gpu-misc.h
gpu-sim.cc
gpu-sim.h
histogram.cc
histogram.h
icnt_wrapper.cc
icnt_wrapper.h
l2cache.cc
l2cache.h
l2cache_trace.h
mem_fetch.cc
mem_fetch.h
mem_latency_stat.cc
mem_latency_stat.h
power_interface.cc
power_interface.h
power_stat.cc
power_stat.h
scoreboard.cc
scoreboard.h
shader.cc
shader.h
shader_trace.h
stack.cc
stack.h
stat-tool.cc
stat-tool.h
stats.h
traffic_breakdown.cc
traffic_breakdown.h
visualizer.cc
visualizer.h
../abstract_hardware_model.h
../cuda-sim/cuda-sim.h
../cuda-sim/ptx-stats.h
../cuda-sim/ptx_sim.h
../debug.h
../gpgpu-sim/mem_fetch.h
../gpgpu-sim/shader.h
../gpgpusim_entrypoint.h
../intersim2/globals.hpp
../intersim2/interconnect_interface.hpp
../option_parser.h
../statwrapper.h
../tr1_hash_map.h
../trace.h
/usr/include/assert.h
/usr/include/limits.h
/usr/include/math.h
/usr/include/stdio.h
/usr/include/stdlib.h
/usr/include/string.h
/usr/include/time.h
/usr/include/zlib.h
mem_fetch_status.tup
/usr/include/alloca.h
/usr/include/features.h
/usr/include/getopt.h
/usr/include/libio.h
/usr/include/memory.h
/usr/include/xlocale.h
/usr/include/_G_config.h
/usr/include/ctype.h
/usr/include/stdc-predef.h
/usr/include/endian.h
/usr/include/gconv.h
/usr/include/wchar.h
/usr/include/wctype.h
